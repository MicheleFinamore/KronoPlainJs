//
//     KeyLines v6.7.0-69974 sdk
//     Licensed to Presidenza Del Consiglio for Knowledgebase 
//
//     Copyright © 2011-2021 Cambridge Intelligence Limited.
//     All rights reserved.
//
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).KeyLines=t()}(this,(function(){"use strict";var e=null;function t(e,t,n){if(e){e.parentNode&&e.parentNode.removeChild(e);t&&t.appendChild(e);n()}}function n(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach(t);else for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i];t(e[o],o)}}function r(e){return"rtl"===window.getComputedStyle(e).direction}function i(e){if(null===e)return null;switch(typeof e){case"object":if(Array.isArray(e))return e.slice();if(c(e))return s(e);if(e instanceof Date)return new Date(e.getTime());var t={};n(e,(function(e,n){t[n]=e}));return t;case"boolean":case"string":case"number":return e;default:return}}function o(e){return e*(Math.PI/180)}function a(e){return e*(180/Math.PI)}function u(e,t,r){var i,o=t,a=r;if(2===arguments.length&&"string"==typeof o){a=o;o=!0}if(null===e)return null;function l(e,t){o&&"_"===t.charAt(0)||(i[t]=u(e,o&&t!==a))}if("object"==typeof e){if(Array.isArray(e)){for(var f=[],d=0;d<e.length;d++)f.push(u(e[d],o,a));return f}if(c(e))return s(e,!0);if(e instanceof Date)return new Date(e.getTime());i={};n(e,l);return i}return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:void 0}function s(e,t){void 0===t&&(t=!1);var n,r=Object.getPrototypeOf(e).constructor;if(t){n=new r;u(Array.from(e)).forEach((function(e){n.add?n.add(e):n.set(e[0],e[1])}))}else n=new r(e);return n}function l(e,t){if(e.size!==t.size)return!1;var n=!1;e.forEach((function(e){n=n||!t.has(e)}));return!n}function f(){return Object.isPrototypeOf&&Array.from&&"undefined"!=typeof Set&&"undefined"!=typeof Map}function c(t){null==e&&f&&(e=f());return!!e&&(Object.prototype.isPrototypeOf.call(Map.prototype,t)||Object.prototype.isPrototypeOf.call(Set.prototype,t))}var d=1e3/60,h="undefined"!=typeof requestAnimationFrame;function v(e){return h?requestAnimationFrame(e):setTimeout(e,d)}function g(e){h?cancelAnimationFrame(e):clearTimeout(e)}function p(e,t){void 0===t&&(t=0);return E(e)?setTimeout(e,t):null}function m(e,t){if(E(e))return setInterval(e,t)}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];KeyLines._loggerDisabled||console.log([].slice.call(e).join(" "))}var b=Number.isNaN||x;function x(e){return e!=e}var A=Number.isFinite||w;function w(e){return"number"==typeof e&&isFinite(e)}function M(e){return e>>>0===parseFloat(e)}function E(e){return"function"==typeof e}function I(e,t){var n=t||"";return n.slice(Math.max(n.length-5,0))==="."+e}function C(e){return Array.isArray(e)}function S(e){return!("object"!=typeof e||X(e)||e instanceof Date||C(e))}function k(e){return"[object Date]"===Object.prototype.toString.call(e)&&!b(e.getTime())}function R(e,t){return void 0===e&&void 0===t||(!(!b(e)||!b(t)||"number"!=typeof e||"number"!=typeof t)||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return T(e,t[n])})):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t))}function T(e,t){return S(e)&&S(t)?Object.keys(t).every((function(n){return T(e[n],t[n])})):R(e,t)}function B(e,t){E(e)&&p((function(){e(t)}))}function O(e,t){E(e)&&e(t)}var G=Number.isInteger||D;function D(e){return w(e)&&Math.floor(e)===e}function F(e,t){try{t(null,e())}catch(e){t(e)}}function Z(e){if("object"==typeof e&&e&&!Array.isArray(e)){var t=e;if(t.items)return t.items}return e}function P(e){return Array.isArray(e)?e:[e]}function Y(e,t){for(var n=[],r=P(e),i=0;i<r.length;i++)t[r[i]]&&n.push(r[i]);return n}function z(e,t){var r=u(e)||{};if("string"==typeof e)return e;n(t,(function(e,t){W(r,t)&&!N(r[t])||(r[t]=e)}));return r}function V(e){return void 0!==e}function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e){return null===e}function U(e){return void 0===e}function N(e){return X(e)||U(e)}function j(e){return!("number"!=typeof e||!b(e))||N(e)}function K(){return"✄"}function H(e){return e.lastIndexOf(K())}function Q(e){if(N(e))return null;var t=""+e,n=H(t);-1!==n&&(t=t.substring(0,n));return t}function J(e){if(N(e))return null;var t=""+e,n=H(t);return-1!==n?t.substring(n+1):null}function _(e,t){return e.indexOf(t)>-1}var q=Object.values||$;function $(e){return Object.keys(e).map((function(t){return e[t]}))}function ee(e){return Object.keys(e)}function te(e){return Object.keys(e).length>0}function ne(e){return P(e).reduce((function(e,t){e[Q(t)]=!0;return e}),{})}function re(e){return P(e).reduce((function(e,t){e.add(Q(t));return e}),new Set)}function ie(e){var t={};e.forEach((function(e){t[e.id]=e}));return t}function oe(e){var t={};e.forEach((function(e){t[e]=e}));return t}function ue(e){return e.map((function(e){return e.id}))}function se(e,t){if(e){n(t,(function(t,n){e[n]=t}));return e}return t}var le=Number.assign||fe;function fe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=function(e){var n=t[e];null!=n&&Object.keys(n).forEach((function(e){r[e]=n[e]}))},o=0;o<t.length;o++)i(o);return r}function ce(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function de(e,t){return Math.max(1e-4,ce(0,0,e,t))}function he(e,t){var n=e,r=t,i=de(n,r);return[n/=i,r/=i]}function ve(e,t,n,r){var i=he(e,t),o=he(n,r);return i[0]*o[0]+i[1]*o[1]}function ge(){}function pe(e,t){var n,r,i;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=Date.now();i=o;function s(){r=Date.now();e.apply(void 0,i)}if(!n)if(!r||u-r>=t)s();else{n=p((function(){n=null;s()}),t-(u-r))}}}function me(e){void 0===e&&(e=null);var t=e,n=48271,r=2147483647,i=r/n,o=r%n,a=1/r;return{setSeed:function(e){t=e},next:function(){if(t){var e=n*(t%i)-o*(t/i);return(t=e>0?e:e+r)*a}return Math.random()}}}var ye,be={};function xe(e){if(!be[e]){var t=e;e.match(/'/)&&(t=e.replace(/'/g,"\\'"));t.match(/\s/)&&(t="'"+t+"'");be[e]=t}return be[e]}function Ae(e,t,n){void 0===n&&(n=function(e){return e});var r=new Map,i=[],o=[];e.forEach((function(e){var t=n(e);t&&r.set(t,{item:e,inDegree:0})}));e.forEach((function(e){var i=t(e),o=n(e);i&&i.forEach((function(e){r.has(e)&&e!==o&&r.get(e).inDegree++}))}));e.forEach((function(e){var t=n(e);t&&0===r.get(t).inDegree&&o.push(e)}));for(;o.length>0;){var a=o.shift();i.push(a);var u=t(a);if(u)for(var s=0;s<u.length;s++){var l=r.get(u[s]);l&&1==l.inDegree--&&o.push(l.item)}}if(i.length<r.size)throw new Error("Cycle detected");return i}function we(e){return S(e.pos)&&!N(e.pos.lat)&&!N(e.pos.lng)}function Me(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<n.length&&i<r.length;i++){var o=parseInt(n[i],10),a=parseInt(r[i],10);if(o!==a)return o-a}return n.length!==r.length?n.length-r.length:0}function Ee(e){return 0===e?0:e<0?-1:1}function Ie(e,t,n){return Math.max(t,Math.min(n,e))}function Ce(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=1536&&(r<=1791||r>=64336&&r<=65023||r>=65136&&r<=65279||r>=1872&&r<=1919||r>=2208&&r<=2303))return!0}return!1}function Se(e){return Math.floor(e*(11/14))}function ke(e){var t=e.charCodeAt(0);return t<=55295||t>=57344?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536}function Le(e){return[[169,169],[174,174],[8252,8252],[8265,8265],[8419,8419],[8482,8482],[8505,8505],[8596,8601],[8617,8618],[8986,8987],[9e3,9e3],[9096,9096],[9167,9167],[9193,9203],[9208,9210],[9410,9410],[9642,9643],[9654,9654],[9664,9664],[9723,9726],[9728,9733],[9735,9746],[9748,9861],[9872,9989],[9992,10002],[10004,10004],[10006,10006],[10013,10013],[10017,10017],[10024,10024],[10035,10036],[10052,10052],[10055,10055],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10083,10087],[10133,10135],[10145,10145],[10160,10160],[10175,10175],[10548,10549],[11013,11015],[11035,11036],[11088,11088],[11093,11093],[12336,12336],[12349,12349],[12951,12951],[12953,12953],[65039,65039],[126976,127231],[127245,127247],[127279,127279],[127340,127345],[127358,127359],[127374,127374],[127377,127386],[127405,127487],[127489,127503],[127514,127514],[127535,127535],[127538,127546],[127548,127551],[127561,128317],[128326,128591],[128640,128767],[128884,128895],[128981,129023],[129036,129039],[129096,129103],[129114,129119],[129160,129167],[129198,129279],[129292,129338],[129340,129349],[129351,131069],[917536,917631]].some((function(t){return e>=t[0]&&e<=t[1]}))}function Re(e){return Te(e).some((function(e){return Le(ke(e))}))}function Te(e){for(var t,n=0,r=e.length,i=[];n<r;++n){t=!1;var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r&&(o=e.charCodeAt(n+1))>=56320&&o<=57343){i.push(e.slice(n,n+2));++n;t=!0}t||i.push(e.charAt(n))}return i}function Be(e){var t,n,r,i=[],o=e.length;for(t=0;t<o;t++){r=ke(n=e[t]);if(0===t)i.push(n);else if(s(r))i[i.length-1]+=n;else if(65038===r||65039===r)i[i.length-1]+=n;else if(a(r))i[i.length-1]+=n;else if(u(r)&&2===i[i.length-1].length&&u(ke(i[i.length-1])))i[i.length-1]+=n;else if(8205===r&&Re(i[i.length-1])&&t<o-1&&Le(ke(e[t+1]))){i[i.length-1]+=n;i[i.length-1]+=e[++t]}else r>=917536&&r<=917631?i[i.length-1]+=n:i.push(n)}function a(e){return e>=127995&&e<=127999}function u(e){return e>=127462&&e<=127487}function s(e){return e>=768&&e<=879||e>=8400&&e<=8447}return i}function Oe(e){return e.replace(/([\u0000-\u001f\u007f-\u009f])/g,"")}!function(e){e[e.Neutral=0]="Neutral";e[e.Ltr=1]="Ltr";e[e.Rtl=2]="Rtl"}(ye||(ye={}));var Ge,De={forced:{},auto:{}};!function(e){e[e.L=0]="L";e[e.R=1]="R";e[e.EN=2]="EN";e[e.AN=3]="AN";e[e.ON=4]="ON";e[e.B=5]="B";e[e.S=6]="S";e[e.AL=7]="AL";e[e.WS=8]="WS";e[e.CS=9]="CS";e[e.ES=10]="ES";e[e.ET=11]="ET";e[e.NSM=12]="NSM";e[e.LRE=13]="LRE";e[e.RLE=14]="RLE";e[e.PDF=15]="PDF";e[e.LRO=16]="LRO";e[e.RLO=17]="RLO";e[e.BN=18]="BN"}(Ge||(Ge={}));var Fe,Ze=Ge.L,Pe=Ge.R,Ye=Ge.EN,ze=Ge.AN,Ve=Ge.ON,We=Ge.B,Xe=Ge.S,Ue=Ge.AL,Ne=Ge.WS,je=Ge.CS,Ke=Ge.ES,He=Ge.ET,Qe=Ge.NSM,Je=Ge.LRE,_e=Ge.RLE,qe=Ge.PDF,$e=Ge.LRO,et=Ge.RLO,tt=Ge.BN;!function(e){e[e.D=2]="D";e[e.C=3]="C";e[e.U=4]="U";e[e.T=5]="T"}(Fe||(Fe={}));var nt=Fe.D,rt=Fe.T,it=[9,tt,10,Xe,11,We,12,Xe,13,Ne,14,We,28,tt,31,We,32,Xe,33,Ne,35,Ve,38,He,43,Ve,44,Ke,45,je,46,Ke,48,je,58,Ye,59,je,65,Ve,91,Ze,97,Ve,123,Ze,127,Ve,133,tt,134,We,160,tt,161,je,162,Ve,166,He,170,Ve,171,Ze,173,Ve,174,tt,176,Ve,178,He,180,Ye,181,Ve,182,Ze,185,Ve,186,Ye,187,Ze,192,Ve,215,Ze,216,Ve,247,Ze,248,Ve,697,Ze,699,Ve,706,Ze,720,Ve,722,Ze,736,Ve,741,Ze,750,Ve,751,Ze,768,Ve,880,Qe,884,Ze,886,Ve,894,Ze,895,Ve,900,Ze,902,Ve,903,Ze,904,Ve,1014,Ze,1015,Ve,1155,Ze,1162,Qe,1418,Ze,1423,Ve,1425,He,1470,Qe,1471,Pe,1472,Qe,1473,Pe,1475,Qe,1476,Pe,1478,Qe,1479,Pe,1488,Qe,1536,Pe,1542,ze,1544,Ve,1545,Ue,1547,He,1548,Ue,1549,je,1550,Ue,1552,Ve,1563,Qe,1611,Ue,1632,Qe,1642,ze,1643,He,1645,ze,1648,Ue,1649,Qe,1750,Ue,1757,Qe,1758,ze,1759,Ve,1765,Qe,1767,Ue,1769,Qe,1770,Ve,1774,Qe,1776,Ue,1786,Ye,1809,Ue,1810,Qe,1840,Ue,1869,Qe,1958,Ue,1969,Qe,1984,Ue,2027,Pe,2036,Qe,2038,Pe,2042,Ve,2070,Pe,2074,Qe,2075,Pe,2084,Qe,2085,Pe,2088,Qe,2089,Pe,2096,Qe,2137,Pe,2142,Qe,2208,Pe,2260,Ue,2274,Qe,2275,ze,2307,Qe,2362,Ze,2363,Qe,2364,Ze,2365,Qe,2369,Ze,2377,Qe,2381,Ze,2382,Qe,2385,Ze,2392,Qe,2402,Ze,2404,Qe,2433,Ze,2434,Qe,2492,Ze,2493,Qe,2497,Ze,2503,Qe,2509,Ze,2510,Qe,2530,Ze,2534,Qe,2546,Ze,2548,He,2555,Ze,2561,He,2563,Qe,2620,Ze,2622,Qe,2625,Ze,2649,Qe,2672,Ze,2674,Qe,2677,Ze,2691,Qe,2748,Ze,2749,Qe,2753,Ze,2761,Qe,2765,Ze,2768,Qe,2786,Ze,2790,Qe,2801,Ze,2809,He,2817,Ze,2818,Qe,2876,Ze,2877,Qe,2879,Ze,2880,Qe,2881,Ze,2887,Qe,2893,Ze,2903,Qe,2914,Ze,2918,Qe,2946,Ze,2947,Qe,3008,Ze,3009,Qe,3021,Ze,3024,Qe,3059,Ze,3065,Ve,3066,He,3072,Ve,3073,Qe,3134,Ze,3137,Qe,3142,Ze,3160,Qe,3170,Ze,3174,Qe,3192,Ze,3199,Ve,3201,Ze,3202,Qe,3260,Ze,3261,Qe,3276,Ze,3285,Qe,3298,Ze,3302,Qe,3329,Ze,3330,Qe,3393,Ze,3398,Qe,3405,Ze,3406,Qe,3426,Ze,3430,Qe,3530,Ze,3535,Qe,3538,Ze,3544,Qe,3633,Ze,3634,Qe,3636,Ze,3647,Qe,3648,He,3655,Ze,3663,Qe,3761,Ze,3762,Qe,3764,Ze,3773,Qe,3784,Ze,3792,Qe,3864,Ze,3866,Qe,3893,Ze,3894,Qe,3895,Ze,3896,Qe,3897,Ze,3898,Qe,3902,Ve,3953,Ze,3967,Qe,3968,Ze,3973,Qe,3974,Ze,3976,Qe,3981,Ze,4030,Qe,4038,Ze,4039,Qe,4141,Ze,4145,Qe,4146,Ze,4152,Qe,4153,Ze,4155,Qe,4157,Ze,4159,Qe,4184,Ze,4186,Qe,4190,Ze,4193,Qe,4209,Ze,4213,Qe,4226,Ze,4227,Qe,4229,Ze,4231,Qe,4237,Ze,4238,Qe,4253,Ze,4254,Qe,4957,Ze,4960,Qe,5008,Ze,5024,Ve,5120,Ze,5121,Ve,5760,Ze,5761,Ne,5787,Ze,5792,Ve,5906,Ze,5920,Qe,5938,Ze,5941,Qe,5970,Ze,5984,Qe,6002,Ze,6016,Qe,6068,Ze,6070,Qe,6071,Ze,6078,Qe,6086,Ze,6087,Qe,6089,Ze,6100,Qe,6107,Ze,6108,He,6109,Ze,6112,Qe,6128,Ze,6155,Ve,6158,Qe,6160,tt,6277,Ze,6279,Qe,6313,Ze,6314,Qe,6432,Ze,6435,Qe,6439,Ze,6441,Qe,6450,Ze,6451,Qe,6457,Ze,6464,Qe,6470,Ve,6622,Ze,6656,Ve,6679,Ze,6681,Qe,6683,Ze,6686,Qe,6742,Ze,6743,Qe,6744,Ze,6753,Qe,6754,Ze,6755,Qe,6757,Ze,6765,Qe,6771,Ze,6784,Qe,6832,Ze,6916,Qe,6964,Ze,6965,Qe,6966,Ze,6971,Qe,6972,Ze,6973,Qe,6978,Ze,6979,Qe,7019,Ze,7028,Qe,7040,Ze,7042,Qe,7074,Ze,7078,Qe,7080,Ze,7082,Qe,7083,Ze,7086,Qe,7142,Ze,7143,Qe,7144,Ze,7146,Qe,7149,Ze,7150,Qe,7151,Ze,7154,Qe,7212,Ze,7220,Qe,7222,Ze,7227,Qe,7376,Ze,7379,Qe,7380,Ze,7393,Qe,7394,Ze,7401,Qe,7405,Ze,7406,Qe,7412,Ze,7413,Qe,7416,Ze,7424,Qe,7616,Ze,7680,Qe,8125,Ze,8126,Ve,8127,Ze,8130,Ve,8141,Ze,8144,Ve,8157,Ze,8160,Ve,8173,Ze,8178,Ve,8189,Ze,8192,Ve,8203,Ne,8206,tt,8207,Ze,8208,Pe,8232,Ve,8233,Ne,8234,We,8235,Je,8236,_e,8237,qe,8238,$e,8239,et,8240,je,8245,He,8260,Ve,8261,je,8287,Ve,8288,Ne,8294,tt,8298,Ve,8304,tt,8305,Ye,8308,Ze,8314,Ye,8316,Ke,8319,Ve,8320,Ze,8330,Ye,8332,Ke,8336,Ve,8352,Ze,8400,He,8448,Qe,8450,Ve,8451,Ze,8455,Ve,8456,Ze,8458,Ve,8468,Ze,8469,Ve,8470,Ze,8473,Ve,8478,Ze,8484,Ve,8485,Ze,8486,Ve,8487,Ze,8488,Ve,8489,Ze,8490,Ve,8494,Ze,8495,He,8506,Ze,8508,Ve,8512,Ze,8517,Ve,8522,Ze,8526,Ve,8528,Ze,8544,Ve,8585,Ze,8722,Ve,8723,Ke,8724,He,9014,Ve,9083,Ze,9109,Ve,9110,Ze,9352,Ve,9372,Ye,9450,Ze,9900,Ve,9901,Ze,10240,Ve,10496,Ze,11264,Ve,11493,Ze,11499,Ve,11503,Ze,11506,Qe,11513,Ze,11520,Ve,11647,Ze,11648,Qe,11744,Ze,11776,Qe,12288,Ve,12289,Ne,12293,Ve,12296,Ze,12321,Ve,12330,Ze,12334,Qe,12336,Ze,12337,Ve,12342,Ze,12344,Ve,12349,Ze,12353,Ve,12441,Ze,12443,Qe,12445,Ve,12448,Ze,12449,Ve,12539,Ze,12540,Ve,12736,Ze,12784,Ve,12829,Ze,12832,Ve,12880,Ze,12896,Ve,12924,Ze,12927,Ve,12977,Ze,12992,Ve,13004,Ze,13008,Ve,13175,Ze,13179,Ve,13278,Ze,13280,Ve,13311,Ze,13312,Ve,19904,Ze,19968,Ve,42128,Ze,42192,Ve,42509,Ze,42512,Ve,42607,Ze,42611,Qe,42612,Ve,42622,Qe,42624,Ve,42654,Ze,42656,Qe,42736,Ze,42738,Qe,42752,Ze,42786,Ve,42888,Ze,42889,Ve,43010,Ze,43011,Qe,43014,Ze,43015,Qe,43019,Ze,43020,Qe,43045,Ze,43047,Qe,43048,Ze,43056,Ve,43064,Ze,43072,He,43124,Ze,43136,Ve,43204,Ze,43214,Qe,43232,Ze,43250,Qe,43302,Ze,43310,Qe,43335,Ze,43346,Qe,43392,Ze,43395,Qe,43443,Ze,43444,Qe,43446,Ze,43450,Qe,43452,Ze,43453,Qe,43493,Ze,43494,Qe,43561,Ze,43567,Qe,43569,Ze,43571,Qe,43573,Ze,43584,Qe,43587,Ze,43588,Qe,43596,Ze,43597,Qe,43644,Ze,43645,Qe,43696,Ze,43697,Qe,43698,Ze,43701,Qe,43703,Ze,43705,Qe,43710,Ze,43712,Qe,43713,Ze,43714,Qe,43756,Ze,43758,Qe,43766,Ze,43777,Qe,44005,Ze,44006,Qe,44008,Ze,44009,Qe,44013,Ze,44016,Qe,64285,Ze,64286,Pe,64287,Qe,64297,Pe,64298,Ke,64336,Pe,64830,Ue,64848,Ve,65021,Ue,65024,Ve,65040,Qe,65056,Ve,65072,Qe,65104,Ve,65105,je,65106,Ve,65108,je,65109,Ve,65110,je,65119,Ve,65120,He,65122,Ve,65124,Ke,65129,Ve,65131,He,65136,Ve,65279,Ue,65281,tt,65283,Ve,65286,He,65291,Ve,65292,Ke,65293,je,65294,Ke,65296,je,65306,Ye,65307,je,65313,Ve,65339,Ze,65345,Ve,65371,Ze,65382,Ve,65504,Ze,65506,He,65509,Ve,65512,He,1114109,Ve],ot={1536:{t:4},1537:{t:4},1538:{t:4},1539:{t:4},1540:{t:4},1541:{t:4},1544:{t:4},1547:{t:4},1568:{t:2},1569:{t:4,isolated:65152},1570:{t:1,isolated:65153,initial:65154},1571:{t:1,isolated:65155,initial:65156},1572:{t:1,isolated:65157,initial:65158},1573:{t:1,isolated:65159,initial:65160},1574:{t:2,isolated:65161,final:65163,median:65164,initial:65162},1575:{t:1,isolated:65165,initial:65166},1576:{t:2,isolated:65167,final:65169,median:65170,initial:65168},1577:{t:1,isolated:65171,initial:65172},1578:{t:2,isolated:65173,final:65175,median:65176,initial:65174},1579:{t:2,isolated:65177,final:65179,median:65180,initial:65178},1580:{t:2,isolated:65181,final:65183,median:65184,initial:65182},1581:{t:2,isolated:65185,final:65187,median:65188,initial:65186},1582:{t:2,isolated:65189,final:65191,median:65192,initial:65190},1583:{t:1,isolated:65193,initial:65194},1584:{t:1,isolated:65195,initial:65196},1585:{t:1,isolated:65197,initial:65198},1586:{t:1,isolated:65199,initial:65200},1587:{t:2,isolated:65201,final:65203,median:65204,initial:65202},1588:{t:2,isolated:65205,final:65207,median:65208,initial:65206},1589:{t:2,isolated:65209,final:65211,median:65212,initial:65210},1590:{t:2,isolated:65213,final:65215,median:65216,initial:65214},1591:{t:2,isolated:65217,final:65219,median:65220,initial:65218},1592:{t:2,isolated:65221,final:65223,median:65224,initial:65222},1593:{t:2,isolated:65225,final:65227,median:65228,initial:65226},1594:{t:2,isolated:65229,final:65231,median:65232,initial:65230},1595:{t:2},1596:{t:2},1597:{t:2},1598:{t:2},1599:{t:2},1600:{t:3,isolated:1600,final:1600,median:1600,initial:1600},1601:{t:2,isolated:65233,final:65235,median:65236,initial:65234},1602:{t:2,isolated:65237,final:65239,median:65240,initial:65238},1603:{t:2,isolated:65241,final:65243,median:65244,initial:65242},1604:{t:2,isolated:65245,final:65247,median:65248,initial:65246},1605:{t:2,isolated:65249,final:65251,median:65252,initial:65250},1606:{t:2,isolated:65253,final:65255,median:65256,initial:65254},1607:{t:2,isolated:65257,final:65259,median:65260,initial:65258},1608:{t:1,isolated:65261,initial:65262},1609:{t:2,isolated:65263,initial:65264},1610:{t:2,isolated:65265,final:65267,median:65268,initial:65266},1646:{t:2},1647:{t:2},1649:{t:1},1650:{t:1},1651:{t:1},1652:{t:4},1653:{t:1},1654:{t:1},1655:{t:1},1656:{t:2},1657:{t:2},1658:{t:2},1659:{t:2},1660:{t:2},1661:{t:2},1662:{t:2,isolated:64342,final:64344,median:64345,initial:64343},1663:{t:2},1664:{t:2},1665:{t:2},1666:{t:2},1667:{t:2},1668:{t:2},1669:{t:2},1670:{t:2,isolated:64378,final:64380,median:64381,initial:64379},1671:{t:2},1672:{t:1},1673:{t:1},1674:{t:1},1675:{t:1},1676:{t:1},1677:{t:1},1678:{t:1},1679:{t:1},1680:{t:1},1681:{t:1},1682:{t:1},1683:{t:1},1684:{t:1},1685:{t:1},1686:{t:1},1687:{t:1},1688:{t:1,isolated:64394,initial:64395},1689:{t:1},1690:{t:2},1691:{t:2},1692:{t:2},1693:{t:2},1694:{t:2},1695:{t:2},1696:{t:2},1697:{t:2},1698:{t:2},1699:{t:2},1700:{t:2},1701:{t:2},1702:{t:2},1703:{t:2},1704:{t:2},1705:{t:2,isolated:64398,final:64400,median:64401,initial:64399},1706:{t:2},1707:{t:2},1708:{t:2},1709:{t:2},1710:{t:2},1711:{t:2,isolated:64402,final:64404,median:64405,initial:64403},1712:{t:2},1713:{t:2},1714:{t:2},1715:{t:2},1716:{t:2},1717:{t:2},1718:{t:2},1719:{t:2},1720:{t:2},1721:{t:2},1722:{t:2},1723:{t:2},1724:{t:2},1725:{t:2},1726:{t:2},1727:{t:2},1728:{t:1},1729:{t:2},1730:{t:2},1731:{t:1},1732:{t:1},1733:{t:1},1734:{t:1},1735:{t:1},1736:{t:1},1737:{t:1},1738:{t:1},1739:{t:1},1740:{t:2,isolated:64508,final:64510,median:64511,initial:64509},1741:{t:1},1742:{t:2},1743:{t:1},1744:{t:2},1745:{t:2},1746:{t:1},1747:{t:1},1749:{t:1},1757:{t:4},1774:{t:1},1775:{t:1},1786:{t:2},1787:{t:2},1788:{t:2},1791:{t:2},1808:{t:1},1810:{t:2},1811:{t:2},1812:{t:2},1813:{t:1},1814:{t:1},1815:{t:1},1816:{t:1},1817:{t:1},1818:{t:2},1819:{t:2},1820:{t:2},1821:{t:2},1822:{t:1},1823:{t:2},1824:{t:2},1825:{t:2},1826:{t:2},1827:{t:2},1828:{t:2},1829:{t:2},1830:{t:2},1831:{t:2},1832:{t:1},1833:{t:2},1834:{t:1},1835:{t:2},1836:{t:1},1837:{t:2},1838:{t:2},1839:{t:1},1869:{t:1},1870:{t:2},1871:{t:2},1872:{t:2},1873:{t:2},1874:{t:2},1875:{t:2},1876:{t:2},1877:{t:2},1878:{t:2},1879:{t:2},1880:{t:2},1881:{t:1},1882:{t:1},1883:{t:1},1884:{t:2},1885:{t:2},1886:{t:2},1887:{t:2},1888:{t:2},1889:{t:2},1890:{t:2},1891:{t:2},1892:{t:2},1893:{t:2},1894:{t:2},1895:{t:2},1896:{t:2},1897:{t:2},1898:{t:2},1899:{t:1},1900:{t:1},1901:{t:2},1902:{t:2},1903:{t:2},1904:{t:2},1905:{t:1},1906:{t:2},1907:{t:1},1908:{t:1},1909:{t:2},1910:{t:2},1911:{t:2},1912:{t:1},1913:{t:1},1914:{t:2},1915:{t:2},1916:{t:2},1917:{t:2},1918:{t:2},1919:{t:2},2208:{t:2},2209:{t:2},2210:{t:2},2211:{t:2},2212:{t:2},2213:{t:2},2214:{t:2},2215:{t:2},2216:{t:2},2217:{t:2},2218:{t:1},2219:{t:1},2220:{t:1},2221:{t:4},2222:{t:1},2223:{t:2},2224:{t:2},2225:{t:1},2226:{t:1},2227:{t:2},2228:{t:2},2230:{t:2},2231:{t:2},2232:{t:2},2233:{t:1},2234:{t:2},2235:{t:2},2236:{t:2},2237:{t:2},2274:{t:4},8204:{t:4},8205:{t:3},8239:{t:4},8294:{t:4},8295:{t:4},8296:{t:4},8297:{t:4},65269:{t:1,isolated:65269,initial:65270},65271:{t:1,isolated:65271,initial:65272},65273:{t:1,isolated:65273,initial:65274},65275:{t:1,isolated:65275,initial:65276}},at={1611:!0,1612:!0,1613:!0,1614:!0,1615:!0,1616:!0,1617:!0,1618:!0,1619:!0,1620:!0,1621:!0,1648:!0},ut={1456:!0,1457:!0,1458:!0,1459:!0,1460:!0,1461:!0,1462:!0,1463:!0,1464:!0,1465:!0,1466:!0,1467:!0,1473:!0,1474:!0},st={"ل":{"ا":"ﻻ","آ":"ﻵ","أ":"ﻷ","إ":"ﻹ"},"ا":{"ل":{"ل":{"ه":"ﷲ"}}}},lt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{",">":"<","<":">"},ft=63;function ct(e,t,n){var r=n?De.forced:De.auto;if(r[t])return r[t];var i={characters:[],logicalOrder:e,result:[]},o=ht(e),a=mt(e,o),u=a.length;a.forEach((function(e,t){e.level=n?1:0;pt(e);if(0!==e.characters.length){vt(e,n);gt(e);St(e);kt(e);Bt(e);Ot(e);Lt(e);Dt(e,ut,!1);Gt(e);i.result=i.result.concat(e.reorderedCharacters);t<u-1&&i.result.push({text:"\n",level:0,type:We,index:0});i.characters=i.characters.concat(e.characters)}}));i.types=o;r[t]=i;return i}function dt(){De={forced:{},auto:{}}}function ht(e){return e.map((function(e){return Vt(e)||0}))}function vt(e,t){yt(e);bt(e);xt(e);At(e);wt(e);Mt(e);Et(e,t)}function gt(e){It(e);Ct(e)}function pt(e){var t=e.level,n=[];n.push({level:e.level,override:ye.Neutral});var r=0,i=n[0],o=i.level,a=[];function u(e,t){if(e<ft){n.push({level:e,override:t});return e}}e.characters.forEach((function(e){var s=e.type;if(s===_e){o+=Xt(o)?2:1;t=u(o,ye.Neutral)}else if(s===Je){o+=Wt(o)?2:1;t=u(o,ye.Neutral)}else if(s===et){o+=Xt(o)?2:1;t=u(o,ye.Rtl)}else if(s===$e){o+=Wt(o)?2:1;t=u(o,ye.Ltr)}s===qe?n.length>1&&(i=n.pop()):i=n[n.length-1];t=i.level;o=t;if(-1===[tt,_e,Je,et,$e,qe].indexOf(s)){i.override>ye.Neutral&&(e.type=i.override===ye.Rtl?Pe:Ze);e.embeddingLevel=t;e.index=r++;a.push(e)}}));e.characters=a}function mt(e,t){var n=0,r=[],i=[];t.forEach((function(e){if(e!==We)i.push(e);else if(i.length>0){o(i);n++;i.length=0}}));i.length>0&&o(i);function o(t){var i=n,o=t.map((function(t){return{text:e[n++],level:0,embeddingLevel:void 0,type:t,index:0}})),a=e.slice(i,i+t.length);r.push({symbols:a,level:0,characters:o})}return r}function yt(e){e.characters.filter(Ut(Qe)).forEach((function(t){t.isNSM=!0;if(t.index>0){var n=e.characters[t.index-1].type;n===Ue&&(t.type=Ue);Pe===n&&(t.type=Pe)}}))}function bt(e){e.characters.filter(Ut(Ye)).forEach((function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===Ue){t.type=ze;break}if([Pe,Ze].indexOf(r)>-1)break}}))}function xt(e){e.characters.filter(Ut(Ue)).forEach((function(e){e.type=Pe;e.isAL=!0}))}function At(e){e.characters.filter(Ut([Ke,je])).forEach((function(t){var n=t.index;if(n>0&&n<e.characters.length-1){var r=e.characters[n-1].type;r!==e.characters[n+1].type||r!==Ye&&r!==ze||(t.type=r)}}))}function wt(e){e.characters.filter(Ut(He)).forEach((function(t){var n=t.index,r=n;if(n>0){for(var i=e.characters[n-1].type;r-- >0&&i===He;)i=e.characters[r].type;if(i===Ye){t.type=Ye;return}}if(n<e.characters.length-1){var o=e.characters[n+1].type;r=n;for(;r++<e.characters.length-1&&o===He;)o=e.characters[r].type;o===Ye&&(t.type=Ye)}}))}function Mt(e){e.characters.filter(Ut([He,je,Ke])).forEach((function(e){e.type=Ve}))}function Et(e,t){e.characters.filter(Ut(Ye)).forEach((function(n){for(var r=n.index-1;r>=0;r--){var i=e.characters[r].type;if(i===Pe)return;if(i===Ze){n.type=Ze;return}}t||(n.type=Ze)}))}function It(e){e.characters.filter(Ut([We,Xe,Ne,Ve])).forEach((function(t){var n=t.index;if(e.level<t.embeddingLevel)t.type=Wt(t.embeddingLevel)?Ze:Pe;else if(0!==n&&n!==e.characters.length-1&&n>0&&n<e.characters.length-1){for(var r=e.characters[n-1].type,i=e.characters[n+1].type,o=n;o-- >0&&-1===[Pe,Ue,Ye,ze,Ze].indexOf(r);)r=e.characters[o].type;o=n;for(;o++<e.characters.length-1&&-1===[Pe,Ue,Ye,ze,Ze].indexOf(i);)i=e.characters[o].type;[Pe,Ue,Ye,ze].indexOf(r)>-1&&[Pe,Ue,Ye,ze].indexOf(i)>-1?t.type=Pe:t.type=r===Ze&&i===Ze||Wt(t.embeddingLevel)?Ze:Pe}}))}function Ct(e){e.characters.filter(Ut([We,Xe,Ne,Ve])).forEach((function(e){e.type=Wt(e.embeddingLevel)?Ze:Pe}))}function St(e){var t;e.characters.forEach((function(e){var n=e.type;t=e.embeddingLevel;n===Ze?Xt(t)&&t++:n===Pe||n===Ue?Wt(t)&&t++:n!==Ye&&n!==ze||(Wt(t)?t+=2:t++);e.level=t}))}function kt(e){e.characters.filter((function(e){return lt[e.text]&&Xt(e.level)})).forEach((function(e){e.text=lt[e.text]}))}function Lt(e){var t=e.highestLevel;e.reorderedCharacters=u(e.characters);for(;t>0;){Rt(e,t);t--}}function Rt(e,t){var n,r=[];e.levelRuns.forEach((function(e){if(e.level>=t)if(n)n.endIndex+=e.length;else{n={startIndex:e.idx,endIndex:e.idx+e.length};r.push(n)}else n=null}));r.forEach((function(t){Tt(e,t)}))}function Tt(e,t){var n=t.startIndex,r=t.endIndex,i=e.reorderedCharacters.slice(n,r).reverse();e.reorderedCharacters=e.reorderedCharacters.slice(0,n).concat(i).concat(e.reorderedCharacters.slice(r))}function Bt(e){var t=0;e.characters.forEach((function(e){e.level>t&&(t=e.level)}));e.highestLevel=t}function Ot(e){var t=[],n=0,r=0,i={idx:0,length:0,level:e.characters[0].level};e.characters.forEach((function(e){if(e.level!==n&&0!==r){t.push(i);i={idx:r,length:0,level:e.level}}i.length++;r++;n=e.level}));t.push(i);e.levelRuns=t}function Gt(e){Dt(e,at,!0);Zt(e);Yt(e);zt(e)}function Dt(e,t,n){for(var r=e.reorderedCharacters.reverse(),i=[],o=0,a=r.length;o<a;o++){var u=r[o],s=Ft(o,r,t);o+=s.length;n||(u.text+=s.join(""));i.push(u)}var l=0;e.reorderedCharacters=i.reverse();e.reorderedCharacters.forEach((function(e){e.index=l++}))}function Ft(e,t,n){for(var r=[],i=e+1;i<t.length;i++){if(!n[t[i].text.charCodeAt(0)])return r;r.push(t[i].text)}return r}function Zt(e){for(var t=e.reorderedCharacters.reverse(),n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=st[o.text[0]];if(a){var u=Pt(r,a,t);if(u){r+=u.length;o.text=u.text}}n.push(o)}var s=0;e.reorderedCharacters=n.reverse();e.reorderedCharacters.forEach((function(e){e.index=s++}))}function Pt(e,t,n){for(var r=0,i=t,o=e+1;o<n.length;o++){var a=i[n[o].text[0]];if(!a)return!1;r++;if("string"==typeof a)return{text:a,length:r};i=a}return!1}function Yt(e){var t,n=function(){e.arabicTextRuns.push(t);t=void 0},r=e.reorderedCharacters;e.arabicTextRuns=[];for(var i=0,o=r.length;i<o;i++){var a=r[i].text.charCodeAt(0),u=ot[a];if(u&&[Pe,nt,Ze].indexOf(u.t)>-1){t?t.endIndex=i+1:t={startIndex:i,endIndex:i+1};if(i+1<o){var s=r[i+1].text.charCodeAt(0),l=ot[s];l&&l.t===Pe&&n()}else n();u.t===Ze&&n()}else u&&u.t===rt||t&&n()}t&&n()}function zt(e){e.arabicTextRuns.forEach((function(t){for(var n,r=t.startIndex,i=t.endIndex,o=r;o<i;o++){var a=e.reorderedCharacters[o],u=ot[a.text.charCodeAt(0)];n=null;i-r>1?o===r?n=u.initial:o===i-1?n=u.final:o>r&&o<i-1&&(n=u.median):n=u.isolated;n&&(a.text=String.fromCharCode(n)+a.text.substring(1))}}))}function Vt(e){for(var t=e.charCodeAt(0),n=0;n<it.length;n+=2)if(t<it[n])return it[n+1];return Ve}function Wt(e){return e%2==0}function Xt(e){return e%2!=0}function Ut(e){var t=P(e);return function(e){return t.indexOf(e.type)>-1}}var Nt={},jt={},Kt="rgb(128, 128, 128)",Ht={aqua:"rgb(0, 255, 255)",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",green:"rgb(0, 128, 0)",grey:Kt,gray:Kt,lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",orange:"rgb(255,165,0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",yellow:"rgb(255, 255, 0)",white:"rgb(255, 255, 255)",ci:"rgb(0, 174, 239)",cia:"rgba(0, 174, 239, 0.5)",keyline:"rgb(88, 89, 91)",midgrey:"rgb(145, 146, 149)",darkmodegrey:"rgba(221, 221, 221, 0.5)",darkmodeblue:"rgb(45, 56, 63)",lightgrey:"rgb(208, 209, 211)",darkmodedefault:"rgb(255, 222, 189)",edit:"rgb(114, 179, 0)",attention:"rgb(220, 0, 0)",information:"rgb(0, 150, 255)",description:"rgb(255, 175, 0)",textback:"rgba(255,255,255,0.6)",transparent:"rgba(255,255,255,0.0)",touch:"rgba(255,0,0,0.6)"};function Qt(e,t,n){return"rgb("+e+","+t+","+n+")"}function Jt(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"}var _t,qt,$t,en,tn=/^(?:rgb)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?\)$/i,nn=/^(?:rgba)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),\s?(0|1|0\.\d{0,20}|1\.0)\)$/i,rn=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,on=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i;function an(e){return!!un(e).length}function un(e){var t=[];if("string"!=typeof e)return t;var n=Ht[e.toLowerCase()]||e,r=n.match(tn);r||(r=n.match(nn));if(r){for(var i=1;i<4;i++)t.push(parseInt(r[i],10));void 0!==r[4]&&t.push(+r[4])}else{if(!(r=n.match(on))&&(r=n.match(rn)))for(i=1;i<4;i++)r[i]+=r[i];if(r)for(i=1;i<4;i++)t.push(parseInt(r[i],16))}return t}function sn(e){if("transparent"===e)return 0;var t=e.match(nn);return t?parseFloat(t[4]):1}function ln(e){var t=un(e),n=gn(t[0],t[1],t[2]);n.push(sn(e));return n}function fn(e){var t=mn(e[0],e[1],e[2]);return Jt(t[0],t[1],t[2],e[3])}function cn(e,t){return 1===t?e:yn(e,t)}function dn(e){for(var t=un(e),n="",r=0,i=Math.min(3,t.length);r<i;r++){var o=t[r];n+=(o<16?"0":"")+o.toString(16)}return n}function hn(e){function t(){return Math.floor(239*Math.random())+1}var n=Qt(t(),t(),t());return e&&n in e?hn(e):n}function vn(e,t,n){var r=null;e&&(e.bg&&e.gh?r=t*n:e.bg?r=t:e.gh&&(r=n));return 0===r?1e-6:r}function gn(e,t,n){
var r,i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),s=Math.min(i,o,a),l=0,f=(u+s)/2;if(u===s){l=0;r=0}else{var c=u-s;r=f>.5?c/(2-u-s):c/(u+s);switch(u){case i:l=(o-a)/c+(o<a?6:0);break;case o:l=(a-i)/c+2;break;case a:l=(i-o)/c+4}l/=6}return[l,r,f]}function pn(e,t,n){var r=n;r<0&&(r+=1);r>1&&(r-=1);return r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function mn(e,t,n){var r,i,o;if(0===t){r=n;i=n;o=n}else{var a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=pn(u,a,e+1/3);i=pn(u,a,e);o=pn(u,a,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}function yn(e,t){if(e){if(null===t||1===t)return e;var n=e+t;if(!Nt[n]){var r=un(e),i=sn(e);Nt[n]=Jt(r[0],r[1],r[2],i*t)}return Nt[n]}}function bn(e){var t=un(e),n=sn(e);return[t[0],t[1],t[2],Math.floor(255*n)]}function xn(e,t){void 0===t&&(t=!1);if(e){if(t)return bn(e);var n=jt[e];if(!n){n=bn(e);jt[e]=n}return n}}function An(){Nt={};jt={}}function wn(e,t){var n=un(e),r=n[0],i=n[1],o=n[2],a=n[3],u=gn(r,i,o),s=u[0],l=u[1],f=u[2],c=mn(s,l,Math.min(f*t,1)),d=c[0],h=c[1],v=c[2];return void 0===a?Qt(d,h,v):Jt(d,h,v,a)}function Mn(e,t){var n=un(e),r=n[0],i=n[1],o=n[2],a=n[3];return Jt(r,i,o,Math.min((void 0!==a?a:1)*t,1))}function En(e,t){void 0===t&&(t=1);var n=un(e);return{colour:"rgb("+n[0]+","+n[1]+","+n[2]+")",opacity:4===n.length?n[3]*t:t}}!function(e){e[e.None=0]="None";e[e.Line=1]="Line";e[e.Arc=2]="Arc";e[e.Bezier=3]="Bezier"}(_t||(_t={}));!function(e){e.arc="arc";e.bezier="bezier";e.circle="circle";e.image="image";e.line="line";e.rect="rectangle";e.text="text";e.triangle="triangle"}(qt||(qt={}));!function(e){e.smootharea="smootharea"}($t||($t={}));!function(e){e[e.MoveTo=0]="MoveTo";e[e.LineTo=1]="LineTo"}(en||(en={}));var In=14,Cn=26,Sn=Math.PI/2,kn=new Map;var lr={a:"LTMxLC02NCwtNTgsLTYwLDgsLTY4LC02OSwtNjIsLTU3LC02NywtNjgsMjQsNDMsLTExLDQ4LC0zNywtNDYsLTMz",b:"LTIyLC01NiwtNTgsLTUsLTEyLC02MywtNjUsLTExLDEsLTY0LC03Myw1MiwyNSw0LDczLC0yLC0xNCw2LDE2LC0yMiwtNDYsLTcxLDM0LDEwLC01NA=="};var Ln={};function Rn(){Ln={}}var Tn="sans-serif",Bn={browserMinimumFontSize:1,minimumFontChecked:!1};function On(e){Bn.browserMinimumFontSize=e}function Gn(e){Bn.minimumFontChecked=e}function Dn(e,t,n,r){var i=!!n,o=xe(r||Tn);if(e!==Ln.context||t!==Ln.fontSize||i!==Ln.bold||o!==Ln.family){Ln.context=e;Ln.fontSize=t;Ln.bold=i;Ln.family=o;var a="normal"+" "+(i?"bold":"normal")+" "+t+"px"+" "+o;e.font=a;e.textBaseline="bottom"}}function Fn(e){var t={x:0,y:0},n=e.itemPrimitives;if(n.hiddenByGenerator)return t;if(e.anchorIndex>-1){var r=n.positionIndex[e.anchorIndex];if(r>-1){t.x=n.anchorBuffer.getData()[r];t.y=n.anchorBuffer.getData()[r+1]}}return t}function Zn(e,t){var n=0,r=0,i=0,o=0,a=Fn(t);switch(t.type){case qt.circle:n=t.x-t.r;r=t.x+t.r;i=t.y-t.r;o=t.y+t.r;break;case qt.line:case qt.rect:case qt.image:case qt.text:n=Math.min(t.x1,t.x2);r=Math.max(t.x1,t.x2);i=Math.min(t.y1,t.y2);o=Math.max(t.y1,t.y2);break;case qt.triangle:n=Math.min(t.x1,t.x2,t.x3);r=Math.max(t.x1,t.x2,t.x3);i=Math.min(t.y1,t.y2,t.y3);o=Math.max(t.y1,t.y2,t.y3);break;case qt.arc:var u=t.x+t.r*Math.cos(t.startAngle),s=t.y+t.r*Math.sin(t.startAngle),l=t.x+t.r*Math.cos(t.endAngle),f=t.y+t.r*Math.sin(t.endAngle);n=Math.min(u,l);r=Math.max(u,l);i=Math.min(s,f);o=Math.max(s,f);for(var c=(Math.floor(t.startAngle/Sn)+1)*Sn;c<t.endAngle;){var d=t.x+t.r*Math.cos(c),h=t.y+t.r*Math.sin(c);n=Math.min(n,d);r=Math.max(r,d);i=Math.min(i,h);o=Math.max(o,h);c+=Sn}break;case qt.bezier:var v=t.bezier.xs,g=t.bezier.ys;n=v[0];r=v[0];i=g[0];o=g[0];for(var p=1;p<v.length;p++){n=Math.min(n,v[p]);r=Math.max(r,v[p]);i=Math.min(i,g[p]);o=Math.max(o,g[p])}}return{x1:n+=a.x,y1:i+=a.y,x2:r+=a.x,y2:o+=a.y}}function Pn(e,t){return{x1:Math.min(e.x1,t.x1),y1:Math.min(e.y1,t.y1),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Yn(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2}function zn(e,t,n,r,i,o){var a=o||0;return Math.sqrt((e-r)*(e-r)+(t-i)*(t-i))+a<n}function Vn(e,t,n,r,i){return e.x1<t&&r<e.x2&&e.y1<n&&i<e.y2}function Wn(e,t,n,r,i,o,a){var u=n*n;return(e-r)*(e-r)+(t-i)*(t-i)<u&&(e-r)*(e-r)+(t-a)*(t-a)<u&&(e-o)*(e-o)+(t-i)*(t-i)<u&&(e-o)*(e-o)+(t-a)*(t-a)<u}function Xn(e,t,n,r,i,o,a){var u=Math.floor((n.x2-n.x1)/2),s=Math.floor((n.y2-n.y1)/2),l=1,f="-resize",c=Math.floor(4*r);jn(e,t,{x:n.x1,y:n.y1},c,l,i+a+"nw"+f,o);Nn(e,t,{x:n.x1+u,y:n.y1},c,l,i+a+"n"+f,o);jn(e,t,{x:n.x2,y:n.y1},c,l,i+a+"ne"+f,o);Nn(e,t,{x:n.x2,y:n.y1+s},c,l,i+a+"e"+f,o);jn(e,t,{x:n.x2,y:n.y2},c,l,i+a+"se"+f,o);Nn(e,t,{x:n.x2-u,y:n.y2},c,l,i+a+"s"+f,o);jn(e,t,{x:n.x1,y:n.y2},c,l,i+a+"sw"+f,o);Nn(e,t,{x:n.x1,y:n.y2-s},c,l,i+a+"w"+f,o)}function Un(e){return"transparent"===e||e===Ht.transparent}function Nn(e,t,n,r,i,o,a){var u=t.x(n.x),s=t.y(n.y),l=Un(a)?Ht.transparent:Ht.white;e.rect(u-r,s-r,u+r,s+r,a,i,l,!0,o,-1)}function jn(e,t,n,r,i,o,a){var u=Un(a)?Ht.transparent:Ht.white;e.circle(t.x(n.x),t.y(n.y),r+1,a,i,u,!0,o,-1,void 0,!1)}function Kn(e,t,n,r,i,o,a,u){Xn(e,n,Zn(t,r),i,o,a,u)}function Hn(e,t,n,r,i,o){var a=cn(t,n);if(o){e.fillStyle=a;e.fillRect(0,0,r,i)}else{var u=e;Jn(u.webgl?u.webglCanvas:e.canvas,[{r:0,c:a},{r:1,c:a}],n)}}function Qn(e,t,n,r,i,o){if(t)if(o){for(var a=e.createLinearGradient(0,0,0,i),u=0;u<t.length;u++)a.addColorStop(t[u].r,cn(t[u].c,n));e.fillStyle=a;e.fillRect(0,0,r,i)}else{var s=e;Jn(s.webgl?s.webglCanvas:e.canvas,t,n)}}function Jn(e,t,n){for(var r="linear-gradient(",i=0,o=t.length;i<o;i++){var a=t[i];r+=cn(a.c,n);r+=" "+100*a.r+"%";i+1<o&&(r+=",")}r+=")";e.style.background=r}function _n(e){var t;"string"==typeof e&&(t=e.split(",")[0]);return t}function qn(e,t){if("number"==typeof e&&G(e))return e;var n=er();t?document.getElementById(t).appendChild(n):document.body.appendChild(n);var r=e.replace(/\./g,"");n.className!==r&&(n.className=r);var i=window.getComputedStyle(n,":before").getPropertyValue("content");n.parentNode&&n.parentNode.removeChild(n);n.className="";return i.charCodeAt(1)||i.charCodeAt(0)}var $n=null;function er(){if($n)return $n;var e=document.createElement("span");e.style.position="absolute";e.style.left="-10000px";e.style.top="-10000px";e.style.visibility="hidden";e.style.lineHeight="normal";e.style.fontSize="200px";e.style.fontVariant="normal";e.style.fontStyle="normal";e.style.letterSpacing="0";e.style.width="auto";e.style.height="auto";e.style.display="block";e.style.margin="0";e.style.padding="0";e.style.whiteSpace="nowrap";$n=e;return e}function tr(e,t,n){e.style.fontFamily=n;e.innerText=t}function nr(e,t,n){var r=er();document.body.appendChild(r);tr(r,e,n);var i=r.offsetHeight;tr(r,"","");return i/200*t||t}var rr={},ir={};function or(e,t,n,r,i,o){var a=i||Tn,u=t+!!r+a,s=0,l=0,f=rr[u],c=(A(n)?n:In)/Cn;ir[a]||(ir[a]=nr("|M",Cn,a));l=ir[a];if(void 0===f){Dn(e,Cn,r,i);o&&(l=nr(t,Cn,a));if(e.webgl){Ce(t)&&(l=Se(Cn));s=ur(e,t,l,Cn,r,a)}else s=e.measureText(t).width;f={width:s,height:l};rr[u]=f}return{width:Math.round(f.width*c),height:Math.round(f.height*c)}}function ar(){rr={};ir={}}function ur(e,t,n,r,i,o){var a,u,s=0,l=Be(Te(t));if(Ce(t)){var f=ct(l,t,!1).result;for(a=0,u=f.length;a<u;a++){var c=f[a];Ce(c.text)?Dn(e,n,i,o):Dn(e,r,i,o);s+=e.measureText(c.text).width}}else for(a=0,u=l.length;a<u;a++)s+=e.measureText(l[a]).width;return s}function sr(e,t,n,r,i,o,a){for(var u=Math.ceil(e.length*n/r);r>n;){for(var s=e.lastIndexOf(" ",u),l=e.indexOf(" ",s+1),f=e.substring(0,s),c=e.substring(0,l),d=or(i,f,o,!1,a).width,h=or(i,c,o,!1,a).width;d>n||h<n&&h>0;){if(d>n){l=s;s=e.lastIndexOf(" ",l-1)}else{s=l;l=e.indexOf(" ",s+1)}f=e.substring(0,s);c=e.substring(0,l);d=or(i,f,o,!1,a).width;h=or(i,c,o,!1,a).width}t.push(f);r=or(i,e=e.substring(s+1),o,!1,a).width}t.push(e)}function fr(e){var t=e.id||"canvas",n=kn.get(t);if(!n){n=r(e);kn.set(t,n)}return n}function cr(e){kn.delete(e)}function dr(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function hr(){for(var e=arguments.length,t=[],n=0;n<e;n++)for(var r=arguments[n],i=r.length,o=0;o<i;o++)t.push(r[o]);return t}function vr(e){var t=/[\d.]+/g;if(e){var n=e.match(t);if(null==n?void 0:n.length)return Math.round(n.map(Number)[0])}return null}function gr(e,t,n,r){var i=window.devicePixelRatio,o=e.width,a=e.height;if(r){e.style.width="100%";e.style.height="100%";e.style.display="block";var u=window.getComputedStyle(e),s=Math.round(e.clientWidth-o),l=Math.round(e.clientHeight-a),f=vr(u.width),c=vr(u.height);f&&(o=f-s);c&&(a=c-l)}e.style.width=o+"px";e.style.height=a+"px";e.width=Math.round(o*i);e.height=Math.round(a*i);n||t.scale(i,i);Rn()}function pr(e,t,n){var r=Math.max(n-e,0),i=Math.max(1e-4,t-e);return Math.min(1,r/i)}function mr(e,t,n){return e*(1-n)+t*n}function yr(e){return e>.15?mr(.75,1,pr(.15,.2,e)):e>.08?mr(.4,.75,pr(.08,.15,e)):mr(.2,.4,pr(.01,.08,e))}function br(e){var t=null;if(e)if("string"==typeof e){if(!(t=document.getElementById(e)))throw new Error("container element not found with id: "+e)}else{if("object"!=typeof e||!e||void 0===e.parentNode)throw new Error("container must be valid DOM element or element id");t=e}return t}function xr(e,t,n){var r=u(),i=Date.now(),o=!1,a=!0;return{update:function(){var u=Date.now(),s=t(u-i);i=u;if(o=o||s){var l=n();if(l){var f=l.canvas;l.webgl&&(f=l.webglCanvas);if(f&&f.clientWidth>0&&f.clientHeight>0){o=!1;a&&e(!0,!1,r)}}}else e(!1,!1,r)},redraw:function(e){o=!0;var t=e||u();r.all||(r.all=t.all);r.positions||(r.positions=t.positions)},allowDraw:function(e){e&&!a&&(o=!0);a=e}};function u(){return{all:!0,positions:!0}}}function Ar(e,t){var n=!0;return{rebuild:t,animate:function(t){var r=e(t,n);n=!1;return r}}}function wr(e){var t=[],n=[];return{push:function(e,r){if(e){e.queue=r;r?n.push(e):t.push(e)}},cancel:function(){t=[];n=[];e()},animate:function(r,i){var o=!1,a=!1;if(t.length>0){var u=t;t=[];for(var s=0;s<u.length;s++){var l=u[s].rebuild;if(u[s].animate(r)){a=a||u[s].queue;t.push(u[s])}e(l)}o=!0}if(!a&&n.length>0){t.push(n.shift());o=!0}i&&(o=o||i.animated());return o}}}function Mr(e,t){var n,r,i,o=null;return function(a,u,s){var l=t();if(l===a||o&&r===a);else{n=l;r=a;i=0;if(!o){o=Ar((function(e){i=Math.min(u,i+e);t(u<=0?r:n+(r-n)*i/u);var a=i<u;if(!a){o=null;O(s)}return a}));e.push(o,!1)}}}}var Er=!1;function Ir(e,t){for(var n=e.replace(/^\s*|\s*$/g,"").split(/[(\s*,\s*)|(\s+)]/),r=0;r<n.length;r++)t(n[r])}function Cr(){var e={};function t(t,n,r){Ir(t,(function(t){e[t]||(e[t]=[]);e[t].push({handler:n,context:r})}))}function n(e,n,r){t(e,n,r)}function r(t,n){t?Ir(t,(function(t){if(n){if(e[t]){for(var r=[],i=0;i<e[t].length;i++)n!==e[t][i].handler&&r.push(e[t][i]);e[t]=r}}else e[t]=[]})):e={}}function i(e,t){r(e,t)}function o(t){if(Er)return!1;var n=t[0],r=!1;if(e)for(var i=2,o=void 0;i--;){var a=i?n:"all",u=i?t.slice(1):t;if(e[a]){var s=e[a].slice(0);for(o=0;o<s.length;o++){var l=s[o];try{r=l.handler.apply(l.context||this,u)||r}catch(e){c(n,e)}}}}return r}function a(t){var n=!1,r=Array.prototype.slice.call(t);e&&(n=o(r));return n}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}function s(){return f}var l=10,f=[];function c(e,t){var n=(new Date).toString()+" Function bound to '"+e+"' threw error: "+t.toString();u("error",n,t);y(n);f.push(n);f.length>l&&f.shift()}function d(e){Er=e}return{bind:n,getErrors:s,suppress:d,trigger:u,unbind:i}}var Sr={bind:function(){},trigger:function(){return!1},getErrors:function(){return[]},unbind:function(){},suppress:function(){}},kr=[0,0],Lr=[];function Rr(e,t){e.lineCap=t.dash>1?"butt":"round";kr[0]=t.dash;kr[1]=t.gap;e.setLineDash(kr)}function Tr(e){if(kr[0]){kr[0]=0;e.setLineDash(Lr);e.lineCap="butt";e.lineDashOffset=0}}function Br(e,t){return"gradient"===t.type?Or(e,t):yn(t.colour,t.opacity)}function Or(e,t){for(var n=e.createLinearGradient(t.direction.start.x,t.direction.start.y,t.direction.end.x,t.direction.end.y),r=0;r<t.stops.length;r++)Gr(n,t.stops[r]);return n}function Gr(e,t){var n=yn(t.colour,t.opacity);e.addColorStop(t.offset,n)}function Dr(e,t){var n=t.dashing,r=t.strokeWidth,i=t.x,o=t.y,a=t.r,u=t.segments,s=0;if(n){Rr(e,n);s=n.dashOffset||0}e.lineWidth=r;u.forEach((function(t){var r=t.strokeStyle,u=t.startAngle,l=t.endAngle;n&&(e.lineDashOffset=t.offset+s);e.beginPath();e.strokeStyle=Br(e,r);e.arc(i,o,a,u,l,!1);e.stroke();e.closePath()}));t.dashing&&Tr(e)}var Fr=2*Math.PI;function Zr(e,t){var n=t.fill,r=t.stroke,i=t.dashing,o=t.x,a=t.y,u=t.r;e.fillStyle=n?yn(n.colour,n.opacity):Ht.transparent;var s=r&&r.width>0;if(s){var l=r,f=l.width,c=l.colour,d=l.opacity;i&&Rr(e,i);e.lineWidth=f;e.strokeStyle=yn(c,d)}e.beginPath();e.arc(o,a,u,0,Fr,!1);e.closePath();n&&e.fill();if(s){e.stroke();i&&Tr(e)}}function Pr(e,t,n){var r=t.src,i=t.specifier,o=t.rotation,a=t.x1,u=t.y1,s=t.x2,l=t.y2,f=t.alpha,c="url"===r.type?n.getHTMLElement(r.url,i):r.el;if(c){var d=e.globalAlpha;e.globalAlpha=f;if(o){e.save();e.translate(o.origin.x,o.origin.y);e.rotate(o.angle)}e.imageSmoothingQuality="high";e.drawImage(c,a,u,s-a,l-u);t.rotation&&e.restore();e.globalAlpha=d}}function Yr(e,t){var n=t.dashing,r=t.strokeWidth,i=t.strokeStyle,o=t.start,a=t.end;if(n){Rr(e,n);e.lineDashOffset=n.dashOffset||0}e.lineWidth=r;e.beginPath();e.strokeStyle=Br(e,i);e.moveTo(o.x,o.y);e.lineTo(a.x,a.y);e.stroke();e.closePath();n&&Tr(e)}function zr(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.rotation;if(a){e.save();e.translate(a.origin.x,a.origin.y);e.rotate(a.angle)}return{x1:n,y1:r,x2:i,y2:o}}function Vr(e,t){var n,r=zr(e,t),i=r.x1,o=r.y1,a=r.x2,u=r.y2,s=t.stroke,l=t.rotation,f=t.fill;f&&(n=Br(e,f));if(t.cornerRadius&&t.cornerRadius>0)Wr(e,t,n,{x1:i,y1:o,x2:a,y2:u});else{if(n){e.fillStyle=n;e.fillRect(i,o,a-i,u-o)}if(s&&s.width>=0){var c=s.width,d=s.colour,h=s.opacity;e.lineWidth=c;e.strokeStyle=yn(d,h);e.strokeRect(i,o,a-i,u-o)}l&&e.restore()}}function Wr(e,t,n,r){var i=r.x1,o=r.y1,a=r.x2,u=r.y2,s=t.cornerRadius,l=t.stroke,f=t.rotation,c=s;e.beginPath();e.moveTo(i+c,o);e.lineTo(a-c,o);e.arcTo(a,o,a,o+c,c);e.lineTo(a,u-c);e.arcTo(a,u,a-c,u,c);e.lineTo(i+c,u);e.arcTo(i,u,i,u-c,c);e.lineTo(i,o+c);e.arcTo(i,o,i+c,o,c);e.closePath();if(n){e.fillStyle=n;e.fill()}if(l&&l.width>=0){var d=l.width,h=l.colour,v=l.opacity;e.lineWidth=Math.max(1,d);e.strokeStyle=yn(h,v);e.stroke()}f&&e.restore()}function Xr(e,t){var n=t.x,r=t.y,i=t.size,o=t.isBold,a=t.fontFamily,u=t.colour,s=t.textAlign,l=t.rotation;Dn(e,i,o,a);e.fillStyle=yn(u.colour,u.opacity);e.textAlign=s;if(l){e.save();e.translate(l.origin.x,l.origin.y);e.rotate(l.angle)}e.textBaseline="middle";e.fillText(t.text,n,r);l&&e.restore()}var Ur=1;function Nr(e,t){var n=t.x1,r=t.x2,i=t.x3,o=t.y1,a=t.y2,u=t.y3,s=t.rotation,l=t.fill,f=t.stroke;if(s){e.save();e.translate(s.origin.x,s.origin.y);e.rotate(s.angle)}if(Math.abs(r-n)>Ur||Math.abs(a-o)>Ur){e.beginPath();e.moveTo(n,o);e.lineTo(r,a);e.lineTo(i,u);e.lineTo(n,o);e.closePath();if(l){e.fillStyle=yn(l.colour,l.opacity);e.fill()}if(f&&f.colour&&f.width>=0){var c=f.width,d=f.colour,h=f.opacity;e.lineWidth=Math.max(1,c);e.strokeStyle=yn(d,h);e.stroke()}}s&&e.restore()}function jr(e,t){var n,r=t.dashing,i=t.strokeWidth,o=t.segments,a=0;if(r){Rr(e,r);a=r.dashOffset||0;e.lineDashOffset=(null===(n=t.dashing)||void 0===n?void 0:n.dashOffset)||0}e.lineWidth=i;e.beginPath();o.forEach((function(t,n){var i=t.strokeStyle,o=t.offset,u=t.xs,s=t.ys;if(i){if(n>0){e.stroke();e.closePath();r&&(e.lineDashOffset=o+a);e.beginPath()}e.strokeStyle=Br(e,i);e.moveTo(u[0],s[0])}e.bezierCurveTo(u[1],s[1],u[2],s[2],u[3],s[3])}));e.stroke();e.closePath();t.dashing&&Tr(e)}function Kr(e){var t=0,n=0,r=[],i={bg:!1,gh:!1,anchorBuffer:e,dirty:0,positionIndex:[-1,-1,-1],hiddenByGenerator:!1,isHitTested:!0,goToBeginning:function(){n=0},reset:function(){t=0;n=0;i.hiddenByGenerator=!1},getNext:function(){return r[n++]},getPrevious:function(){return n>0?r[n-1]:null},add:function(e){r[t++]=e;i.dirty=t;n++},forEach:function(e){for(var n=0;n<t;n++)e(r[n])},setAnchorPosition:function(n,r,o,a){var u=i.positionIndex[a];if(-1===u){u=e.getUsedSize();i.positionIndex[a]=u;e.add()}var s=e.getData();s[u]=n;s[u+1]=r;s[u+2]=o;i.dirty=t},getAnchorPosition:function(e){var t=i.positionIndex[e],n=i.anchorBuffer.getData();return{x:n[t],y:n[t+1]}},getAnchorAngle:function(e){var t=i.positionIndex[e];return i.anchorBuffer.getData()[t+2]}};return i}function Hr(e,t,n,r,i){e[0]=t;e[1]=n;e[2]=0;var o=r.anchorBuffer.getData();if(i>-1){var a=r.positionIndex[i];if(a>-1){var u=o[a+2];if(u){var s=Math.sin(-u),l=Math.cos(-u);e[0]=t*l+n*s;e[1]=n*l-t*s}e[0]+=o[a];e[1]+=o[a+1];e[2]=u}}}function Qr(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=n;e[4]=t;e[5]=i;e[6]=r;e[7]=i;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var l=u[s],f=u[s+1],c=u[s+2];if(c){var d=Math.sin(-c),h=Math.cos(-c),v=t*h+n*d,g=n*h-t*d;e[0]=v;e[1]=g;v=r*h+n*d;g=n*h-r*d;e[2]=v;e[3]=g;v=t*h+i*d;g=i*h-t*d;e[4]=v;e[5]=g;v=r*h+i*d;g=i*h-r*d;e[6]=v;e[7]=g}e[0]+=l;e[1]+=f;e[2]+=l;e[3]+=f;e[4]+=l;e[5]+=f;e[6]+=l;e[7]+=f}}}function Jr(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=i;e[4]=0;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var l=u[s],f=u[s+1],c=u[s+2];e[0]+=l;e[1]+=f;e[2]+=l;e[3]+=f;e[4]=c}}}var _r=15,qr=30;function $r(e){return"solid"!==e&&"flow"!==e}function ei(e,t,n,r){void 0===r&&(r=!1);var i,o;if("dotted"===n){i=.5;o=2*t}else o=(i=Math.max(2,2*t))/2;var a=Math.round(r?e/(i+o):(e+o)/(i+o));a>1&&(o=r?(e-a*i)/a:(e-a*i)/(a-1));return{dash:i,gap:o}}function ti(e,t,n,r){var i=e*_r*t;return(i=Ee(e)*Math.min(16*n,Math.abs(i)))*(r/1e3)%n}function ni(e,t,n,r,i){var o=Math.max(qr*r,3*t)/3,a=2*o;return{dash:a,gap:o,dashOffset:-(e/2-o+ti(n,r,a+o,i))}}function ri(e,t,n,r,i,o,a){if("flow"===e||$r(e)){if("flow"===e){return ni(o,a,t*n,r,i)}return ei(o,a,e)}}function ii(e,t,n){return e>=0&&void 0!==n&&$r(t)}function oi(e,t,n,r){return e+n<0||e-n>r.scale(r.width())||(t+n<0||t-n>r.scale(r.height()))}function ai(e,t,n,r,i){return e>i.scale(i.width())||n<0||(t>i.scale(i.height())||r<0)}function ui(e,t,n,r,i,o){var a=i/2;return e+a<0&&n+a<0||(t+a<0&&r+a<0||(e-a>o.scale(o.width())&&n-a>o.scale(o.width())||t-a>o.scale(o.height())&&r-a>o.scale(o.height())))}var si=new Float32Array(3);function li(e,t,n,r,i,o,a,u,s){Hr(si,e.x,e.y,e.itemPrimitives,e.anchorIndex);var l=t.x(si[0]),f=t.y(si[1]),c=t.worldToViewDistance(e.r),d=a.zoom&&a.zoom.adaptiveStyling,h=n?t.sw(e.width):t.w(e.width);h=Math.max(d?yr(t.getZoomScale()):1,h);if(!(a._rendering&&a._rendering.canvasSkipItemsOutOfView)||!oi(l,f,c+h,t)){var v,g,p=1;if(n){var m=e.colour&&e.shadowColour;if(!m)return;v=dr({type:"solid"},En(m))}else{var y=vn(e.itemPrimitives,r,i);p=null===y?1:y;v=dr({type:"solid"},En(e.colour,p));g=ri(e.lineStyle,e.flowVelocity,Ee(e.offset),u,s,c*(e.endAngle-e.startAngle),h)}var b=!n&&e.colour2?fi(l,f,c,e.startAngle,e.endAngle,e.colour,e.colour2,p,e.offset<0,a.linkStyle.transition):[{strokeStyle:v,startAngle:e.startAngle,endAngle:e.endAngle,offset:0}];o({type:e.type,x:l,y:f,r:c,strokeWidth:h,dashing:g,segments:b})}}function fi(e,t,n,r,i,o,a,u,s,l){var f=s?[a,o]:[o,a];if(0===l){return[{startAngle:r,endAngle:i,strokeStyle:g=ci(e,t,n,r,i,f,u,[.5,.5]),offset:0}]}var c=[],d=i-r,h=0,v=0;if(l<1){h=d*(1-l)/2;var g=dr({type:"solid"},En(f[0],u));c.push({startAngle:r,endAngle:r+h,strokeStyle:g,offset:v});v+=n*h}for(var p=d-2*h,m=Math.ceil(p/(Math.PI/2)),y=p/m,b=n*y,x=hi(f,m),A=1/n,w=0;w<m;w++){var M=r+h+w*y-.25*A,E=r+h+(w+1)*y;w===m-1&&(E+=.25*A);g=ci(e,t,n,M,E,[x[w],x[w+1]],u,[0,1]);c.push({startAngle:M,endAngle:E,strokeStyle:g,offset:v});v+=b}if(h>0){g=dr({type:"solid"},En(f[1],u));c.push({startAngle:i-h,endAngle:i,strokeStyle:g,offset:v})}return c}function ci(e,t,n,r,i,o,a,u){return{type:"gradient",direction:{start:di(e,t,n,r),end:di(e,t,n,i)},stops:o.map((function(e,t){return dr(dr({},En(e,a)),{offset:u[t]})}))}}function di(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function hi(e,t){var n=[e[0]],r=un(e[0]);3===r.length&&r.push(1);var i=un(e[1]);3===i.length&&i.push(1);for(var o=(i[0]-r[0])/t,a=(i[1]-r[1])/t,u=(i[2]-r[2])/t,s=(i[3]-r[3])/t,l=1;l<=t;l++)n.push(Jt(Math.floor(r[0]+l*o),Math.floor(r[1]+l*a),Math.floor(r[2]+l*u),r[3]+l*s));return n}function vi(e,t,n){if(n)return t>=0?Math.max(1,t):-1;var r=4;return t>0?e-t<r?Math.max(.2,t*((e-t)/r)):Math.max(1,t):-1}function gi(e,t,n,r,i){var o,a,u=!(!e.isFilled||!e.fillColour),s=!!(t>0&&e.borderColour);if(!u&&!s)return null;if(n){if(!e.shadowColour)return null;u&&(o=En(e.shadowColour));s&&(a=dr(dr({},En(e.shadowColour)),{width:t}))}else{var l=vn(e.itemPrimitives,r,i),f=null===l?1:l;u&&(o=En(e.fillColour,f));s&&(a=dr(dr({},En(e.borderColour,f)),{width:t}))}return{fill:o,stroke:a}}var pi=2*Math.PI,mi=new Float32Array(3);function yi(e,t,n,r,i,o,a){Hr(mi,e.x,e.y,e.itemPrimitives,e.anchorIndex);var u=a._rendering&&a._rendering.canvasSkipItemsOutOfView,s=t.x(mi[0]),l=t.y(mi[1]),f=t.worldToViewDistance(e.r);if(!u||!oi(s,l,f,t)){var c=n?t.sw(e.borderWidth):t.w(e.borderWidth);c=e.noMinBorderWidth?Math.max(1,c):vi(f,c,n);var d=!n&&ii(c,e.borderStyle,e.borderColour)?ei(pi*f,c,e.borderStyle,!0):void 0,h=gi(e,c,n,r,i);h&&o(dr(dr({type:e.type,x:s,y:l,r:f},h),{dashing:d}))}}var bi=new Float32Array(5);function xi(e,t,n,r){Hr(bi,0,0,e.itemPrimitives,e.anchorIndex);var i,o,a,u,s,l=e.anchorIndex>-1&&bi[2]||void 0,f=r._rendering&&r._rendering.canvasSkipItemsOutOfView;if(l){i=t.worldToViewDistance(e.x1+n);o=t.worldToViewDistance(e.y1+n);a=t.worldToViewDistance(e.x2-n);u=t.worldToViewDistance(e.y2-n);var c=t.x(bi[0]),d=t.y(bi[1]);if(f&&ai(i+c,o+d,a+c,u+d,t))return;s={origin:{x:c,y:d},angle:l}}else{Jr(bi,e.x1,e.y1,e.x2,e.y2,e.itemPrimitives,e.anchorIndex);i=t.x(bi[0]+n);o=t.y(bi[1]+n);a=t.x(bi[2]-n);u=t.y(bi[3]-n);if(f&&ai(i,o,a,u,t))return}return{x1:i,y1:o,x2:a,y2:u,rotation:s}}function Ai(e,t,n,r,i,o,a){var u=0;e.rectMargins&&(u=Math.max(0,e.borderWidth/2)+e.rectMargins.reduce((function(e,t){return e+t}),0));var s=xi(e,t,u,a);if(s){var l=s.x1,f=s.y1,c=s.x2,d=s.y2,h=s.x2-s.x1,v=s.y2-s.y1,g=n?t.sw(e.borderWidth):t.w(e.borderWidth);if(g>=0){var p=Math.min(h,v)/2;g=vi(p,g,n)}var m=gi(e,g,n,r,i);if(m||e.gradientStops&&0!==e.gradientStops.length){var y;e.gradientStops?y={type:"gradient",direction:{start:{x:l,y:f},end:{x:l,y:d}},stops:e.gradientStops}:(null==m?void 0:m.fill)&&(y=dr({type:"solid"},m.fill));var b=!n&&ii(g,e.borderStyle,e.borderColour);!y&&b||o(dr(dr({type:e.type},s),{stroke:b||null==m?void 0:m.stroke,fill:y,cornerRadius:e.cornerRadius?t.worldToViewDistance(e.cornerRadius):void 0}));if(b&&(null==m?void 0:m.stroke)){var x=ei(h+g,g,e.borderStyle,!1),A=ei(v+g,g,e.borderStyle,!1),w={type:"solid",colour:m.stroke.colour,opacity:m.stroke.opacity},M=function(e,t,n){o({type:qt.line,start:e,end:t,strokeWidth:g,strokeStyle:w,offset:0,dashing:{dash:x.dash,gap:n}})},E=g/2;M({x:l-E,y:f},{x:c+E,y:f},x.gap);M({x:c,y:f-E},{x:c,y:d+E},A.gap);M({x:c+E,y:d},{x:l-E,y:d},x.gap);M({x:l,y:d+E},{x:l,y:f-E},A.gap)}}}}function wi(e,t,n,r,i,o,a){var u=xi(e,t,0,a);if(u){if(e.imageInflate){u.x1-=e.imageInflate;u.y1-=e.imageInflate;u.x2+=e.imageInflate;u.y2+=e.imageInflate}if(n){if(!e.shadowColour)return;var s=En(e.shadowColour);o(dr(dr({type:qt.rect},u),{stroke:void 0,fill:dr({type:"solid"},s)}))}else{var l=vn(e.itemPrimitives,r,i);o(dr(dr({type:e.type},u),{src:{type:"url",url:e.url},specifier:e.specifier,alpha:null===l?1:l}))}}}var Mi=new Float32Array(5);function Ei(e,t,n,r,i,o,a,u,s,l){Jr(Mi,e.x1,e.y1,e.x2,e.y2,e.itemPrimitives,e.anchorIndex);var f=t.x(Mi[0]),c=t.y(Mi[1]),d=t.x(Mi[2]),h=t.y(Mi[3]),v=n?t.sw(e.width):t.w(e.width);if(!l){var g=a.zoom&&a.zoom.adaptiveStyling?yr(t.getZoomScale()):1;v=Math.max(g,v)}if(!(a._rendering&&a._rendering.canvasSkipItemsOutOfView)||!ui(f,c,d,h,v,t)){var p,m,y={x:f,y:c},b={x:d,y:h};if(n){if(!e.shadowColour)return;p=dr({type:"solid"},En(e.colour&&e.shadowColour))}else{var x=vn(e.itemPrimitives,r,i),A=null===x?1:x;if(e.colour2){var w=a.linkStyle.transition;p={type:"gradient",direction:{start:y,end:b},stops:[dr(dr({},En(e.colour,A)),{offset:(1-w)/2}),dr(dr({},En(e.colour2,A)),{offset:(1+w)/2})]}}else p=dr({type:"solid"},En(e.colour,A));var M=ce(f,c,d,h);m=ri(e.lineStyle,e.flowVelocity,1,u,s,M,v)}o({type:e.type,start:y,end:b,strokeWidth:v,strokeStyle:p,offset:0,dashing:m})}}var Ii=new Float32Array(3);function Ci(e,t,n,r,i,o,a,u,s,l){Hr(Ii,0,0,e.itemPrimitives,e.anchorIndex);var f=t.x(Ii[0]),c=t.y(Ii[1]),d=t.worldToViewDistance(e.x1),h=t.worldToViewDistance(e.y1),v=t.worldToViewDistance(e.x2),g=t.worldToViewDistance(e.y2),p=a.linkStyle&&a.linkStyle.inline,m=p&&Ii[2]||void 0,y=Math.max(Math.abs(d),Math.abs(h),Math.abs(v),Math.abs(g));if(!(a._rendering&&a._rendering.canvasSkipItemsOutOfView)||!ai(f-y,c-y,f+y,c+y,t)){var b=m?{origin:{x:f,y:c},angle:m}:void 0,x=m?{x:0,y:0}:{x:f,y:c},A=function(e,t,n,r,i){return{type:qt.rect,x1:e+x.x,y1:t+x.y,x2:n+x.x,y2:r+x.y,rotation:b,stroke:void 0,fill:dr({type:"solid"},i)}};if(n){if(!e.shadowColour)return;if(e.back){o(A(d,h,v,g+t.worldToViewDistance(e.fontSize)*e.paddingFactor,En(e.shadowColour)))}}else{var w=t.worldToViewDistance(e.x),M=t.worldToViewDistance(e.y);p||(M+=t.worldToViewDistance(e.yOffset));var E=t.worldToViewDistance(e.fontSize),I=e.isFontIcon?0:E*e.paddingFactor,C=vn(e.itemPrimitives,r,i),S=null===C?1:C,k=En(e.fontColour,S),L=1;if(!l){if(a.zoom&&a.zoom.adaptiveStyling){if(!e.isFontIcon&&E<=5){if(0===(L=Math.max(0,E-3)/2))return;k.opacity*=L}}else if(e.textWidth&&(E<=3||E<Bn.browserMinimumFontSize)){var R=t.worldToViewDistance(e.textWidth);e.isCentred&&(w-=Math.floor(R/2));if(e.back&&e.backColour!==Ht.textback){o(A(w,M-E,w+R,M+I,En(e.backColour,S)))}o(A(w,M-E,w+R,M+I,e.isSel?En(e.backColour,S):En(e.fontColour,.4*S)));return}}if(e.back){o(A(d,h,v,g+I,En(e.backColour,S*L)))}o({type:e.type,rotation:b,x:w+x.x,y:M+x.y,text:e.text,colour:k,size:E,isBold:e.isBold,isFontIcon:e.isFontIcon,fontFamily:e.fontFamily,textAlign:e.isCentred?"center":"left"})}}}var Si=new Float32Array(3);function ki(e,t,n,r,i,o,a){Hr(Si,0,0,e.itemPrimitives,e.anchorIndex);var u=t.worldToViewDistance(e.x1),s=t.worldToViewDistance(e.y1),l=t.worldToViewDistance(e.x2),f=t.worldToViewDistance(e.y2),c=t.worldToViewDistance(e.x3),d=t.worldToViewDistance(e.y3),h=t.x(Si[0])||0,v=t.y(Si[1])||0,g=e.anchorIndex>-1&&Si[2]||void 0,p=g?{origin:{x:h,y:v},angle:g}:void 0,m=g?{x:0,y:0}:{x:h,y:v},y=Math.min(u,Math.min(l,c)),b=Math.min(s,Math.min(f,d)),x=Math.max(u,Math.max(l,c)),A=Math.max(s,Math.max(f,d));if(!(a._rendering&&a._rendering.canvasSkipItemsOutOfView)||!ai(y+h,b+v,x+h,A+v,t)){var w=gi(e,n?t.sw(e.borderWidth):t.w(e.borderWidth),n,r,i);w&&o(dr(dr({type:e.type,x1:u+m.x,y1:s+m.y,x2:l+m.x,y2:f+m.y,x3:c+m.x,y3:d+m.y},w),{rotation:p}))}}var Li=50,Ri=[[-.058808,.057624,.001176,8e-6],[-.056456,.052968,.003432,56e-6],[-.054152,.048456,.005544,152e-6],[-.051896,.044088,.007512,296e-6],[-.049688,.039864,.009336,488e-6],[-.047528,.035784,.011016,728e-6],[-.045416,.031848,.012552,.001016],[-.043352,.028056,.013944,.001352],[-.041336,.024408,.015192,.001736],[-.039368,.020904,.016296,.002168],[-.037448,.017544,.017256,.002648],[-.035576,.014328,.018072,.003176],[-.033752,.011256,.018744,.003752],[-.031976,.008328,.019272,.004376],[-.030248,.005544,.019656,.005048],[-.028568,.002904,.019896,.005768],[-.026936,408e-6,.019992,.006536],[-.025352,-.001944,.019944,.007352],[-.023816,-.004152,.019752,.008216],[-.022328,-.006216,.019416,.009128],[-.020888,-.008136,.018936,.010088],[-.019496,-.009912,.018312,.011096],[-.018152,-.011544,.017544,.012152],[-.016856,-.013032,.016632,.013256],[-.015608,-.014376,.015576,.014408],[-.014408,-.015576,.014376,.015608],[-.013256,-.016632,.013032,.016856],[-.012152,-.017544,.011544,.018152],[-.011096,-.018312,.009912,.019496],[-.010088,-.018936,.008136,.020888],[-.009128,-.019416,.006216,.022328],[-.008216,-.019752,.004152,.023816],[-.007352,-.019944,.001944,.025352],[-.006536,-.019992,-408e-6,.026936],[-.005768,-.019896,-.002904,.028568],[-.005048,-.019656,-.005544,.030248],[-.004376,-.019272,-.008328,.031976],[-.003752,-.018744,-.011256,.033752],[-.003176,-.018072,-.014328,.035576],[-.002648,-.017256,-.017544,.037448],[-.002168,-.016296,-.020904,.039368],[-.001736,-.015192,-.024408,.041336],[-.001352,-.013944,-.028056,.043352],[-.001016,-.012552,-.031848,.045416],[-728e-6,-.011016,-.035784,.047528],[-488e-6,-.009336,-.039864,.049688],[-296e-6,-.007512,-.044088,.051896],[-152e-6,-.005544,-.048456,.054152],[-56e-6,-.003432,-.052968,.056456],[-8e-6,-.001176,-.057624,.058808]],Ti=[[-.115264,.110592,.004608,64e-6],[-.106048,.092544,.013056,448e-6],[-.097216,.075648,.020352,.001216],[-.088768,.059904,.026496,.002368],[-.080704,.045312,.031488,.003904],[-.073024,.031872,.035328,.005824],[-.065728,.019584,.038016,.008128],[-.058816,.008448,.039552,.010816],[-.052288,-.001536,.039936,.013888],[-.046144,-.010368,.039168,.017344],[-.040384,-.018048,.037248,.021184],[-.035008,-.024576,.034176,.025408],[-.030016,-.029952,.029952,.030016],[-.025408,-.034176,.024576,.035008],[-.021184,-.037248,.018048,.040384],[-.017344,-.039168,.010368,.046144],[-.013888,-.039936,.001536,.052288],[-.010816,-.039552,-.008448,.058816],[-.008128,-.038016,-.019584,.065728],[-.005824,-.035328,-.031872,.073024],[-.003904,-.031488,-.045312,.080704],[-.002368,-.026496,-.059904,.088768],[-.001216,-.020352,-.075648,.097216],[-448e-6,-.013056,-.092544,.106048],[-64e-6,-.004608,-.110592,.115264]];function Bi(e,t){var n=Ri[e];return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Oi(e,t){if(e>=25&&7===t.length){var n=Ti[e-25];return n[0]*t[3]+n[1]*t[4]+n[2]*t[5]+n[3]*t[6]}var r=Ti[e];return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]}var Gi,Di={num:Li,segmentDelta:Bi},Fi={num:Li/2,segmentDelta:Oi};function Zi(e,t,n){for(var r=0,i=0;i<n.num;i++){var o=n.segmentDelta(i,e),a=n.segmentDelta(i,t);r+=Math.sqrt(o*o+a*a)}return r}function Pi(e,t,n){return n>1?e(t,3,n-1):e(t,0,n)}function Yi(e,t,n){return.5===n?t:n<.5?2*t*n:t+2*(e-t)*(n-.5)}function zi(e,t){var n=Vi(e[0],e[1],t),r=Vi(e[1],e[2],t),i=Vi(e[2],e[3],t),o=Vi(n,r,t),a=Vi(r,i,t),u=Wi(e,0,t);return[e[0],n,o,u,a,i,e[3]]}function Vi(e,t,n){return e+n*(t-e)}function Wi(e,t,n){var r=1-n,i=r*r,o=n*n,a=3*i*n,u=3*r*o,s=o*n;return i*r*e[t]+a*e[t+1]+u*e[t+2]+s*e[t+3]}function Xi(e,t,n){var r=1-n,i=n*n,o=3*r*(1-3*n),a=3*(2*n-3*i),u=3*i;return-3*r*r*e[t]+o*e[t+1]+a*e[t+2]+u*e[t+3]}function Ui(e,t){return ce(e.x,e.y,t.x,t.y)}function Ni(e,t,n,r){
return(n-e)*(n-e)+(r-t)*(r-t)}function ji(e,t,n,r,i,o,a,u,s){var l,f,c=e.bezier.xs.map(t.x),d=e.bezier.ys.map(t.y),h=a.zoom&&a.zoom.adaptiveStyling,v=n?t.sw(e.width):t.w(e.width);v=Math.max(h?yr(t.getZoomScale()):1,v);if(a._rendering&&a._rendering.canvasSkipItemsOutOfView){for(var g=1/0,p=-1/0,m=1/0,y=-1/0,b=0;b<c.length;b++){g=Math.min(g,c[b]);p=Math.max(p,c[b]);m=Math.min(m,d[b]);y=Math.max(y,d[b])}if(ai(g,m,p,y,t))return}if(n){var x=e.colour&&e.shadowColour;if(!x)return;l=[dr({type:"solid"},En(x))]}else{var A=vn(e.itemPrimitives,r,i),w=null===A?1:A;l=e.colour2&&e.colour2!==e.colour?Qi(c,d,e.bezier.midpoint,e.colour,e.colour2,w,a.linkStyle.transition):[dr({type:"solid"},En(e.colour,w))];f=ri(e.lineStyle,e.flowVelocity,1,u,s,100,v)}var M,E={strokeStyle:l[0],offset:0,xs:c.slice(0,4),ys:d.slice(0,4)};if(c.length<7&&d.length<7)M=[E];else{var I=he(c[4]-c[3],d[4]-d[3]),C=c.slice(3,7),S=d.slice(3,7);C[0]=c[3]-I[0]/2;S[0]=d[3]-I[1]/2;var k=f?Zi(c,d,Di):-1;M=1===l.length?[E,{xs:C,ys:S,offset:k,strokeStyle:void 0}]:[E,{xs:C,ys:S,offset:k,strokeStyle:l[1]}]}o({type:e.type,strokeWidth:v,dashing:f,segments:M})}function Ki(e,t,n,r,i){var o=Math.atan2(t-i,e-r),a=ce(r,i,e,t)*Math.cos(o-n);return{x:r+a*Math.cos(n),y:i+a*Math.sin(n)}}function Hi(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v,g={x:e,y:t},p=Ki(n,r,i,e,t),m=Ki(o,a,i,e,t),y=0;if(s===o&&l===a)v=m;else{var b=Ki(s,l,i,e,t),x=Ui(m,v={x:m.x+(b.x-m.x)/f,y:m.y+(b.y-m.y)/f}),A=u?p:g,w=Ui(m,A);if(w<x){A.x=v.x;A.y=v.y;y=(x-w)/x}}var M=Ui(g,p),E=Ui(g,m)/M,I=Ui(g,v)/M;return{gradient:{type:"gradient",direction:{start:g,end:p},stops:[dr(dr({},En(u?c:d,h)),{offset:Math.min(1,E)}),dr(dr({},En(u?d:c,h)),{offset:Math.min(1,I)})]},undrawnFrac:y}}function Qi(e,t,n,r,i,o,a){var u=(1-a)/2,s=(1+a)/2,l=[],f=4===e.length?1:2,c=n<1?0:3,d=Pi(Xi,e,n),h=Pi(Xi,t,n),v=Math.atan2(h,d),g=Yi(f,n,u),p=Pi(Wi,e,g),m=Pi(Wi,t,g),y=Yi(f,n,s),b=Pi(Wi,e,y),x=Pi(Wi,t,y),A=Pi(Wi,e,n),w=Pi(Wi,t,n);if(4===e.length||y<=1||g>=1){g>=1&&l.push(dr({type:"solid"},En(r,o)));l.push(Hi(e[c],t[c],e[c+3],t[c+3],v,p,m,!0,b,x,1,r,i,o).gradient);y<=1&&7===e.length&&l.push(dr({type:"solid"},En(i,o)))}else if(n<1){var M=Hi(e[c],t[c],e[c+3],t[c+3],v,p,m,!0,A,w,.5,r,i,o);l.push(M.gradient);if(M.undrawnFrac){var E=Math.atan2(t[6]-t[3],e[6]-e[3]);l.push(Hi(e[3],t[3],e[6],t[6],E,b,x,!1,e[3],t[3],M.undrawnFrac,r,i,o).gradient)}else l.push(dr({type:"solid"},En(i,o)))}else{if((M=Hi(e[c],t[c],e[c+3],t[c+3],v,b,x,!1,A,w,.5,r,i,o)).undrawnFrac){E=Math.atan2(t[3]-t[0],e[3]-e[0]);l.push(Hi(e[0],t[0],e[3],t[3],E,p,m,!0,e[3],t[3],M.undrawnFrac,r,i,o).gradient)}else l.push(dr({type:"solid"},En(r,o)));l.push(M.gradient)}return l}function Ji(e,t,n,r,i,o){var a,u;if(n){if(!e.shadowColour)return;a=dr(dr({},En(e.lineColour&&e.shadowColour)),{width:Math.max(1,t.sw(e.lineWidth))});u=e.fillColour?En(e.fillColour&&e.shadowColour):void 0}else{var s=vn(e.itemPrimitives,r,i),l=null===s?1:s;a=dr(dr({},En(e.lineColour,l)),{width:Math.max(1,t.w(e.lineWidth))});u=e.fillColour?En(e.fillColour):void 0}o(dr(dr({type:e.type},e.custom),{stroke:a,fill:u}))}function _i(e){var t=function(t){return t*e};return{getZoomScale:function(){return e},height:function(){return 1/0},scale:t,sw:t,viewToWorldDistance:function(t){return t/e},w:t,width:function(){return 1/0},worldToViewDistance:function(t){return t*e},x:t,y:t}}var qi,$i=((Gi={})[qt.arc]=li,Gi[qt.circle]=yi,Gi[qt.image]=wi,Gi[qt.line]=Ei,Gi[qt.rect]=Ai,Gi[qt.text]=Ci,Gi[qt.triangle]=ki,Gi[qt.bezier]=ji,Gi[$t.smootharea]=Ji,Gi);function eo(e,t,n,r,i,o,a,u,s,l,f){var c,d;if(!e.itemPrimitives.hiddenByGenerator){var h=void 0;if(r){var v=r.shadowType;h=n?e.shadowColour&&(!v||v>-1)&&(null===(c=e.itemPrimitives)||void 0===c?void 0:c.isHitTested):!v||v<1}else h=!n||e.shadowColour&&(null===(d=e.itemPrimitives)||void 0===d?void 0:d.isHitTested);if(h){var g=$i[e.type];if(g){var p=e.itemPrimitives;g(e,t,n,p.bg?i:1,p.gh?o:1,a,u,s,l,f)}}}}function to(e,t,n,r,i,o,a,u,s,l,f,c){void 0===f&&(f=1);var d,h=t,v=!1,g="boolean"==typeof s,p=t?t.settings().zoom:1,m=performance.now(),y=!1,b=_i(f),x=l.drawPrimitive;function A(){if(y){y=!1;l.commitBackground()}}function w(e,n){(d=e).layerHasContent=!1;l.overview&&e.blatOverview&&!u&&l.overview();var r=i&&!e.overview;v=e.hideFromExport&&u||r;if(n&&n.bg){if(!e.bg){A();l.drawToForeground()}else l.drawToBackground()}h=e.useView&&t?t:b}function M(e){if(!v){d.bg&&(y=!0);var t=!0;g&&!r&&(t=s?h!==b:h===b);t&&eo(e,h,r,d,o,a,x,n,p,m,c)}}e.forEach(M,w,!1,!1);A()}var no=((qi={})[qt.arc]=Dr,qi[qt.circle]=Zr,qi[qt.image]=Pr,qi[qt.line]=Yr,qi[qt.rect]=Vr,qi[qt.text]=Xr,qi[qt.triangle]=Nr,qi[qt.bezier]=jr,qi);function ro(e){e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,e.canvas.width,e.canvas.height);e.restore()}function io(e,t,n){e.globalAlpha=n;e.drawImage(t,0,0,t.width,t.height);e.globalAlpha=1}function oo(e,t){var n=document.createElement("canvas");n.width=e;n.height=t;return n.getContext("2d")}function ao(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=d?d.createImageLookup():void 0,g=t;function p(e){var t=e.type;if(h&&h[e.type])h[t](g,e);else if(no[t]){(0,no[t])(g,e,v)}}function m(){if(t!==n&&(null==n?void 0:n.canvas)){io(t,n.canvas,l);ro(n)}}function y(){g=t}function b(){n&&(g=n)}var x={overview:u?function(){u(t,r)}:void 0,commitBackground:m,drawToForeground:y,drawToBackground:b,drawPrimitive:p};n&&ro(n);to(e,r,i,o,a,l,f,s,c,x)}function uo(e,t,n,r){var i,o,a=hn(),u=!0,s=5,l=null,f={webgl:[0,0,0,0],rgb:void 0},c=(i={},o={},{getColour:function(e){if(!e)return f;var t=i[e];if(!t){var n=hn(o);t={rgb:n,webgl:xn(n,!0)};i[e]=t;o[n]=e}return t},getId:function(e){return o[e]||null}});function d(i,o,f,h){var v;if(t.webgl)v=r.drawShadowCanvas(Math.floor(i),Math.floor(o));else{if(u){l&&f.drawShadowCanvas(t,n);f.drawShadowCanvas(e,n);u=!1}v=e.getImageData(Math.floor(i),Math.floor(o),1,1).data}var g=Qt(v[0],v[1],v[2]);if(g===a)return null;var p=c.getId(g);if(p)return p;if(r)return null;var m=h||1;return m>s?null:i+m>s&&o+m>s?d(i-1,o-1,f,++m):d(i+1,o+1,f,++m)}function h(){u=!0}function v(e){l=e}function g(){return c}return{dirty:h,debugCanvas:v,getShadowColourMap:g,test:d}}function so(e,t,n){var r=new Map,i=le({},e,{isStart:!0,isGroup:!0}),o=le({},e,{isStart:!1,isGroup:!0});i.endMarker=o;o.startMarker=i;return{insert:function(e){n.insertBefore(o,e)},getStartMarker:function(){return i},getEndMarker:function(){return o},getValue:function(){return e},getParent:function(){return t},getChildren:function(){return r}}}function lo(e){var t=new Map;function n(n,r){var i=so(n,r,e);if(r){r.getChildren().set(n.id,i);e.insertBefore(r.getEndMarker(),i.getStartMarker());e.insertAfter(i.getStartMarker(),i.getEndMarker())}else{t.set(n.id,i);e.append(i.getStartMarker());e.append(i.getEndMarker())}return i}function r(e){var n;return e.every((function(e){return!!(n=n?n.getChildren().get(e):t.get(e))}))}function i(e){var n,r;if(!e.every((function(e){(n=n?n.getChildren().get(e):t.get(e))&&(r=e);return!!n})))throw new Error("Path not found: "+e+". Last entry: "+r);return n}return{append:n,hasPath:r,get:i}}function fo(){var e=null,t=null;function n(e){l(t,e)}function r(){e=null;t=null}function i(n){var r=n;r._prev?r._prev._next=r._next:e=r._next;r._next?r._next._prev=r._prev:t=r._prev}function o(){return e}function a(){return t}function u(e){return e._next}function s(e){return e._prev}function l(n,r){if(!r||"object"!=typeof r)throw new Error("Object Required");var i=r;i._prev=n||null;if(n){i._next=n._next;n._next=i}else{i._next=e;e=i}i._next?i._next._prev=i:t=i}function f(e,t){e?l(e._prev||null,t):n(t)}function c(t){for(var n=e;n;n=n._next){var r=t(n);r&&(n=r)}}function d(){for(var t=[],n=e;n;n=n._next)t.push(n);return t}return{append:n,clear:r,forEach:c,getFirst:o,getLast:a,getNext:u,getPrevious:s,insertAfter:l,insertBefore:f,remove:i,toArray:d}}function co(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v){var g=t(f,qt.arc);g.x=n;g.y=r;g.r=i;g.startAngle=o;g.endAngle=a;g.width=l;g.lineStyle=v?"flow":c||"solid";g.colour=u;g.webglColour=xn(u);g.colour2=s;g.webglColour2=xn(s);g.isDonut=d;g.anchorIndex=d?0:-1;g.offset=h;g.flowVelocity=v&&v.velocity||0;e(g)}return n}function ho(e,t){function n(n,r,i,o,a,u,s){var l=t(a,qt.bezier);l.bezier=n;l.width=o;l.anchorIndex=-1;l.colour=r;l.webglColour=xn(r);l.colour2=i;l.webglColour2=xn(i);l.lineStyle=s?"flow":u||"solid";l.flowVelocity=(null==s?void 0:s.velocity)||0;e(l)}return n}function vo(e,t){function n(n,r,i,o,a,u,s,l,f,c,d){void 0===c&&(c="solid");var h=t(l,qt.circle);h.x=n;h.y=r;h.anchorIndex=f;h.r=i;h.borderWidth=a;h.isFilled=s;h.borderStyle=c;h.noMinBorderWidth=d;h.borderColour=o;h.webglBorderColour=xn(o);h.fillColour=u;h.webglFillColour=xn(u);e(h)}return n}function go(e,t){function n(n,r,i,o,a,u,s,l,f,c){var d=t(u,qt.image);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=s;d.url=a;d.specifier=l;d.imageInflate=f;d.useHighRes=c;e(d)}return n}function po(e,t){function n(n,r,i,o,a,u,s,l,f,c){var d=t(l,qt.line);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=-1;d.colour=a;d.webglColour=xn(a);d.colour2=u;d.webglColour2=xn(u);d.width=s;d.lineStyle=c?"flow":f||"solid";d.flowVelocity=(null==c?void 0:c.velocity)||0;e(d)}return n}function mo(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v,g){void 0===h&&(h="solid");void 0===g&&(g=!1);var p=t(f,qt.rect);p.x1=n;p.y1=r;p.x2=i;p.y2=o;p.cornerRadius=d;p.borderWidth=u;p.isFilled=l;p.borderStyle=h;p.rectMargins=v;p.anchorIndex=c;p.isSelectionBorder=g;p.borderColour=a;p.webglBorderColour=xn(a);p.fillColour=s;p.webglFillColour=xn(s);e(p)}return n}function yo(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y,b,x,A,w){void 0===x&&(x=!1);var M=t(s,qt.text);M.x=n;M.y=r;M.yOffset=0|(w||0);M.text=i;M.anchorIndex=l;M.fontSize=a;M.isBold=u;M.fontFamily=f||Tn;M.wmargin=A||0;M.isCentred=c;M.textWidth=d;M.isFontIcon=h;M.isSel=x;M.fontColour=o;M.webglFontColour=xn(o);M.x1=g;M.y1=p;M.x2=m;M.y2=y;M.back=v;M.backColour=v?b:void 0;M.webglBackColour=v?xn(b):void 0;M.paddingFactor=.08;e(M)}return n}function bo(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v,g){void 0===g&&(g=!1);var p=t(d,qt.triangle);p.x1=n;p.y1=r;p.x2=i;p.y2=o;p.x3=a;p.y3=u;p.anchorIndex=h;p.borderWidth=l;p.isFilled=c;p.arrowhead=v;p.borderColour=s;p.webglBorderColour=xn(s);p.fillColour=f;p.webglFillColour=xn(f);p.borderStyle="solid";p.hiddenByGenerator=g;e(p)}return n}var xo=[8,16,32,64,128,256,512,1024,2048,4096],Ao=3;function wo(){var e=8,t=new Float32Array(e*e),n=0;return{getData:function(){return t},add:function(){if(n+Ao>t.length){var r=t;e=Mo(n+Ao);(t=new Float32Array(e*e)).set(r)}n+=Ao},getUsedSize:function(){return n},getTextureSize:function(){return e}}}function Mo(e){for(var t=Math.ceil(Math.sqrt(e)),n=8,r=1,i=xo.length;r<i&&!(t<=n);r++)n=xo[r];return n}function Eo(e,t,r){var i,o,a,u,s,l,f,c,d,h,v=e||{},g={isContentLayer:!1,alwaysUpdate:!1},p=z(t,g),m=Object.keys(p),y=!1;try{}catch(e){}function b(e,t){var n;if(y)(n=c.getNext()).type=t;else{var r=x(e);n={id:e,type:t,itemPrimitives:c,shadowColour:r.rgb,webglShadowColour:r.webgl}}return n}function x(e){return a?a.getColour(e):{rgb:"rgb(0,0,0)",webgl:[0,0,0,0]}}function A(e,t,n,r){var i,o,a,u;if("circle"===r){var s=Math.min(t,n);i=-s;o=-s;a=s;u=s}else{i=-t;o=-n;a=t;u=n}var l=x(e);return{id:e,type:qt.rect,itemPrimitives:c,shadowColour:l.rgb,webglShadowColour:l.webgl,x1:i,y1:o,x2:a,y2:u,fillColour:void 0,webglFillColour:void 0,isFilled:!1,anchorIndex:0,borderColour:void 0,webglBorderColour:void 0,borderStyle:"solid",borderWidth:0}}function w(e){return o.hasPath(e)}function M(e){return o.get(e)}function E(e,t){var n="";t&&(n=t.getValue().data.path+".");var r={id:e,data:le({path:n+=e},v[e])};t&&(r.data=z(r.data,t.getValue().data));r.data=z(r.data,p);r.data.bg=r.data.bg&&!r.data.perItemAlpha;return o.append(r,t)}function I(){f=new Map;h=wo();f.set("_extras",Kr(h));i=fo();o=lo(i)}function C(e){if(!y){c.add(e);s.insert(e)}}function S(e){var t=f.get(e);if(t){t.forEach(i.remove);t.reset()}}function k(e,t,n){var r=t[n];if(e[n]!==r){e[n]=r;return!0}return!1}function L(e,t,n,r){var o,a,u,s,l=le({},p),f={};function c(i){if(i.isGroup){if(i.isStart){var c=i;if(r)return t(c.data);if(n&&!c.data.alwaysUpdate)return i.endMarker._prev;for(a=0,u=m.length;a<u;a++){s=m[a];var d=k(l,c.data,s);d&&(f[s]=!0);o=o||d}if(o&&c.data.isContentLayer){t(c.data,f);o=!1;for(a=0,u=m.length;a<u;a++){s=m[a];f[s]=!1}}}}else e(i);return!1}i.forEach(c)}function R(){c=f.get("_extras");y=!1}function T(e,t){return F(e).getAnchorPosition(t)}function B(e,t,n,r,i){F(e).setAnchorPosition(t,n,r,i)}function O(){c.hiddenByGenerator=!0}function G(){R();S("_extras")}function D(e){S(e);f.delete(e)}function F(e){return f.get(e)}function Z(){return h}function P(e,t){c=F(e);y=t;if(c)t?c.goToBeginning():S(e);else{c=Kr(h);f.set(e,c)}return c}function Y(e){u=e}function V(e){a=e}function W(){return d}function X(e){d=e;l=e?o.get(e):null}function U(e){if(e){if(!(s=l?l.getChildren().get(e)||null:o.get([e])))throw new Error("Layer: "+e+" at "+d+" not found")}else s=null}function N(){return s?s.getValue().id:null}function j(e){var t=b(e.id,e.type);n(e,(function(e,n){t[n]=e}));C(t)}function K(e,t,n){t.forEach((function(t){var r=t;if(!r.itemPrimitives.hiddenByGenerator&&!r.hiddenByGenerator){var i=Zn(e,r);i&&(n=n?Pn(n,i):i)}}));return n}function H(e,t){var n=null,r=[];e&&e.size?e.forEach((function(e){var t=f.get(e);t&&r.push(t)})):f.forEach((function(e,t){"_extras"!==t&&r.push(e)}));r.forEach((function(e){n=K(t,e,n)}));return n}function Q(){f&&f.clear();v={};g={};p={};m=[];i.clear();o=lo(i);a=null;s=null;l=null;f=new Map;c=null;d=null;var e=_;Object.keys(e).forEach((function(t){e[t]=void 0;delete e[t]}));_=void 0}function J(e,t){ro(e);ao(_,e,e,t,{},!0,!1,null,!1,1,1,!1,void 0,u||void 0)}I();var _={arc:co(C,b),circle:vo(C,b),image:go(C,b),line:po(C,b),rect:mo(C,b),bezier:ho(C,b),text:yo(C,b),triangle:bo(C,b),copyPrimitive:j,createDummyShapePrimitive:A,createLayer:E,destroy:Q,drawShadowCanvas:J,forEach:L,getAnchorBuffer:Z,getAnchorPosition:T,getItem:F,getLayer:N,getLayerAt:M,getLayerPath:W,hasLayerPathAt:w,itemExtents:H,removeItem:D,resetExtras:G,setAnchorPosition:B,setHiddenByGenerator:O,setLayer:U,setLayerPath:X,setShadowColourMap:V,setShadowCustomCanvasPrimitives:Y,setup:I,startGeneratingForExtras:R,useItem:P};r&&r(C,b);return _}var Io=-1,Co=1,So={MAIN:"MAIN",BG:"BG",FG:"FG",COMBOS:"COMBOS",REVEALED:"REVEALED",TRANSIENT:"TRANSIENT",OVERVIEW_IMAGE:"OVERVIEW_IMAGE",COMBO_CONTAINER:"COMBO_CONTAINER",TIMEBAR:"TIMEBAR",BANDS:"BANDS",UNDERLAYS:"UNDERLAYS",SHAPES_SEL_BORDER:"SHAPES_SEL_BORDER",SHAPES:"SHAPES",HALOS:"HALOS",HANDLES:"HANDLES",NODES_SEL_BORDER:"NODES_SEL_BORDER",LINKS:"LINKS",NODES:"NODES",DRAGGERS:"DRAGGERS",BUBBLES:"BUBBLES",NODESSEL:"NODESSEL",BUBBLESSEL:"BUBBLESSEL",BANDLABELS:"BANDLABELS",OVERLAYS:"OVERLAYS",OVERLAYS_REQUIRED:"OVERLAYS_REQUIRED",OVERLAYSSHADOW:"OVERLAYSSHADOW",OVERVIEW:"OVERVIEW",OVERVIEWSHADOW:"OVERVIEWSHADOW",WAIT:"WAIT"},ko={};ko[So.COMBO_CONTAINER]=So.NODES_SEL_BORDER;ko[So.NODES]=So.NODES_SEL_BORDER;ko[So.SHAPES]=So.SHAPES_SEL_BORDER;var Lo={UNDERLAYS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1,hideFromExport:!0},BANDLABELS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1,hideFromExport:!0},BANDS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1,hideFromExport:!0},MAIN:{overview:!0},COMBOS:{perItemAlpha:!0,overview:!0},COMBO_CONTAINER:{isContentLayer:!0,overview:!0},REVEALED:{},OVERLAYS:{shadowType:Io,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},OVERLAYS_REQUIRED:{shadowType:Io,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},HANDLES:{useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},OVERLAYSSHADOW:{shadowType:Co,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},OVERVIEWSHADOW:{shadowType:Co,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},WAIT:{useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},OVERVIEW:{shadowType:Io,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},OVERVIEW_IMAGE:{shadowType:Io,blatOverview:!0,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!0},DRAGGERS:{alwaysUpdate:!0,isContentLayer:!0},BG:{bg:!0,overview:!1},FG:{bg:!1,overview:!0},SHAPES_SEL_BORDER:{isContentLayer:!0},NODES_SEL_BORDER:{isContentLayer:!0},LINKS:{isContentLayer:!0,newDrawCall:!0},SHAPES:{isContentLayer:!0},NODES:{isContentLayer:!0},HALOS:{isContentLayer:!0},BUBBLES:{isContentLayer:!0}},Ro=[So.SHAPES_SEL_BORDER,So.SHAPES,So.HALOS,So.NODES_SEL_BORDER,So.LINKS,So.NODES,So.BUBBLES],To={shadowType:0,bg:!1,blatOverview:!1,useView:!0,alwaysUpdate:!1,isContentLayer:!1,overview:!1,newDrawCall:!1,perItemAlpha:!1,hideFromExport:!1};function Bo(e){var t=Lo;e&&(t=le({},t,e));var n=Eo(t,To),r="COMBO_";function i(e){return r+e}function o(e){return 0===e.indexOf(r)}function a(e){var t,r=[],i=null;e.forEach((function(e){r.push(e);var a=r;o(e)&&(a=a.concat([So.FG]));if(n.hasLayerPathAt(a))t=n.getLayerAt(r);else{t=n.createLayer(e,i);n.createLayer(So.COMBO_CONTAINER,t);u(t)}i=t}))}function u(e){var t=n.createLayer(So.BG,e);Ro.forEach((function(e){return n.createLayer(e,t)}));var r=n.createLayer(So.FG,e);Ro.forEach((function(e){return n.createLayer(e,r)}))}function s(){n.setup();n.createLayer(So.BANDS,null);n.createLayer(So.UNDERLAYS,null);u(n.createLayer(So.MAIN,null));n.createLayer(So.COMBOS,null);var e=n.createLayer(So.TRANSIENT,null);u(n.createLayer(So.MAIN,e));n.createLayer(So.COMBOS,e);var t=n.createLayer(So.REVEALED,null);u(n.createLayer(So.MAIN,t));n.createLayer(So.COMBOS,t);[So.DRAGGERS,So.HANDLES,So.BANDLABELS,So.OVERLAYS,So.OVERLAYS_REQUIRED,So.OVERVIEW_IMAGE,So.OVERVIEW,So.OVERLAYSSHADOW,So.OVERVIEWSHADOW,So.WAIT].forEach((function(e){n.createLayer(e,null)}))}function l(e,t,r){var i=n.useItem(e.id,t);i.hiddenByGenerator=!1;i.gh=!!e.gh;i.bg=r&&!!e.bg;i.isHitTested=!e._disableHitTesting}function f(e){n.setShadowColourMap(e);s()}function c(){n.destroy();n=null}function d(e,t,r){n.setAnchorPosition(e.id,t,r,0,0);e._sx=t;e._sy=r}s();return dr(dr({},n),{createComboSegment:i,createItemLayersAt:a,destroy:c,hasPath:n.hasLayerPathAt,removeAllItems:s,setNodeAnchorPosition:d,setShadowColourMap:f,startGeneratingFor:l})}var Oo="_combo_",Go="_combolink_",Do={small:6,normal:10,large:20,xlarge:30};function Fo(e,t,n,r){return t*(1.7*e+n*(A(Do[r])?Do[r]:Do.normal))}var Zo=Math.PI/7,Po=Math.cos(Zo);function Yo(e,t,n,r){return Po*Fo(e,t,n,r)}function zo(e,t,n,r,i,o,a,u,s,l,f){var c=Fo(r,i,l,f.arrows),d=o+Math.PI;e.triangle(t+c*Math.cos(d+Zo),n+c*Math.sin(d+Zo),t+c*Math.cos(d-Zo),n+c*Math.sin(d-Zo),t,n,a,-1,a,!0,u,-1,s)}function Vo(e){return Math.abs(e)<1e-5}function Wo(e){return e&&e.length>0&&Array.isArray(e)}function Xo(e){return Wo(e.g)}function Uo(e){return dh(e)||e._combo&&e._combo.open}function No(e){return e._combo&&e._combo.open}function jo(){return new Float32Array(6)}var Ko=function(e,t,n,r){if(!t){e[0]=-n;e[1]=-r;e[2]=n;e[3]=r;e[4]=0;e[5]=0;return e}e[4]=t.dx/100*n;e[5]=t.dy/100*r;var i=t.e*n,o=t.e*r;e[0]=e[4]-i;e[1]=e[5]-o;e[2]=e[4]+i;e[3]=e[5]+o;return e};function Ho(e,t){return e.oc&&(void 0===e.oc.bw?t.defaultOpenComboStyle.bw:e.oc.bw)||0}function Qo(e){return!!Wo(e.g)||(!(!e.t1||!Wo(e.t1.g))||!(!e.t2||!Wo(e.t2.g)))}var Jo=34;function _o(e,t,n,r){var i,o=e.getLayerPath(),a=e.getLayer();if(t){if(n.isRevealed){n.isParentRevealed||(i=o.slice(1));if(n.isParentTransient){i||(i=o.slice(0));i.unshift(So.TRANSIENT)}}!n.isTransient||n.isInCombo&&n.isParentTransient||(i=o.slice(1));if(n.isOpenCombo){(i=(i=i||o).slice(0,i.length-1))[i.length-1]===So.COMBOS&&(i[i.length-1]=So.MAIN);i.push(n.isInBackground?So.BG:So.FG)}if(i){e.hasPath(i)||e.createItemLayersAt(i);e.setLayerPath(i)}e.setLayer(t)}r();if(t){e.setLayerPath(o);e.setLayer(a)}}function qo(e){return!!e.r}function $o(e,t,n,r,i,o,a){var u=o-r,s=a-i;return{x:(u*n-s*t)/e,y:(u*t+s*n)/e}}function ea(e,t,n,r,i,o,a,u,s,l){var f=$o(t,n,r,i,o,a,u),c=$o(t,n,r,i,o,s,l);if(f.y>e&&c.y>e||f.y<-e&&c.y<-e)return-1/0;if(Vo(c.y-f.y))return Math.max(f.x,c.x);var d,h,v=f.y>c.y?f:c,g=f.y>c.y?c:f;return(d=e<v.y?v.x-(v.y-e)*(v.x-g.x)/(v.y-g.y):v.x)>(h=g.y<-e?g.x-(g.y- -e)*(g.x-v.x)/(g.y-v.y):g.x)?d:h}function ta(e,t,n,r,i,o,a,u){void 0===a&&(a=0);void 0===u&&(u=0);var s=r.x1+i-a,l=r.y1+o-u,f=r.x2+i-a,c=r.y2+o-u,d=[ea(0,e,t,n,i,o,s,l,f,l),ea(0,e,t,n,i,o,f,l,f,c),ea(0,e,t,n,i,o,f,c,s,c),ea(0,e,t,n,i,o,s,c,s,l)].filter((function(e){return e>=0}));if(1===d.length)return d[0];if(2===d.length){var h=Math.max(d[0],d[1]);if(h<=1)return h}return-1/0}function na(e,t,n,r,i,o,a){var u=i.x1+o,s=i.y1+a,l=i.x2+o,f=i.y2+a,c=e/t/2;return Math.max(ea(c,t,n,r,o,a,u,s,l,s),ea(c,t,n,r,o,a,l,s,l,f),ea(c,t,n,r,o,a,l,f,u,f),ea(c,t,n,r,o,a,u,f,u,s))}function ra(e,t,n,r,i,o){var a=-1/0,u=e*e,s=-2*e*(i*n-o*t),l=s*s-4*u*(i*i+o*o-r*r);l>=0&&(a=(-s+Math.sqrt(l))/(2*u));return a}function ia(e,t,n,r,i,o){for(var a,u=-1/0,s=Math.sin(-n),l=Math.cos(-n),f=0;f<r.length;f++){var c=r[f];if((a=qo(c)?ra(t,s,l,c.r,c.cx,c.cy):na(e,t,s,l,c,i,o))>1)return a;u=Math.max(u,a)}return u}function oa(e,t,n,r,i,o,a,u,s){for(var l,f=-1/0,c=0;c<r.length;c++){var d=r[c];if(qo(d))d.r>s&&(l=ra(e,t,n,d.r-s,d.cx-a,d.cy-u));else{var h=ta(e,t,n,d,i,o,a,u);h>0&&(l=h)}if(l){if(l>1)return l;f=Math.max(f,l)}}return f}function aa(e,t,n,r,i,o,a){var u=0;r&&(u=r/t);if(u>1)return u;i&&(u=Math.max(u,ia(e,t,n,i,o,a)));return u}function ua(e,t,n,r,i,o,a,u,s,l){var f=-1/0;r&&r>l&&(f=ra(e,t,n,r-l,-u,-s));if(f>1)return f;i&&(f=Math.max(f,oa(e,t,n,i,o,a,u,s,l)));return f}var sa=K(),la=9007199254740,fa={xs:[0,0,0,0],ys:[0,0,0,0],midpoint:.5,joinFraction:1};function ca(e,t,n,r,i,o,a,u,s,l,f,c,d,h){e.setHiddenByGenerator();var v=_t.Line;if("arc"===l){e.arc(0,0,0,0,0,a,u,s,t,f,!1,c,d);v=_t.Arc}else if("bezier"===l){e.bezier(fa,a,u,s,t,f,d);v=_t.Bezier}else e.line(0,0,0,0,a,u,s,t,f,d);n&&e.triangle(0,0,0,0,0,0,a,-1,a,!0,t+sa+"a1",-1,v);r&&e.triangle(0,0,0,0,0,0,u||a,-1,u||a,!0,t+sa+"a2",-1,v);if(h){h.pos.t.lx=(i._sx+o._sx)/2;h.pos.t.ly=(i._sy+o._sy)/2}e.setAnchorPosition(t,la,la,0,0);e.setAnchorPosition(t,la,la,0,1);e.setAnchorPosition(t,la,la,0,2)}function da(e,t,n){var r,i,o=Uo(e);if(t&&n.selectedNode){r=n.selectedNode.b||e.b;i=n.selectedNode.c||e.c}else{r=e.b;i=e.c}return!(!r&&!i||o)}var ha={t:.5,t1:.15,t2:.85},va=K(),ga=.01,pa=Math.PI/2;function ma(e){var t=e;(t>pa+ga||t<-pa+ga)&&(t+=Math.PI);return t}function ya(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y,b,x,A,w){var M=!0,E=v,I=p;0===n.length&&(M=!1);for(var C=o+va+(y||"t");c&&E>h;)E=or(e,n,I*=.85,l,m).width;var S,k=4*x*b,L=r-E/2,R={x1:L-k,y1:(S=d?i+(b||1)+I/2:i+(1+I)/2)-I,x2:L+E+k,y2:S};if(M){var T=d?A.labelOffset:0;t.text(r,(R.y1+R.y2)/2,n,u,I,l,C,w,m,!0,E,!1,a,R.x1,R.y1,R.x2,R.y2,s,g,k,T)}f&&ba(f,R,I,M,A);return M}function ba(e,t,n,r,i){if(e._edit){e._edit.hib=!1;var o=e._edit;o.x1=Math.min(o.x1,t.x1);o.x2=Math.max(o.x2,t.x2);o.y1=Math.min(o.y1,t.y1);o.y2=Math.max(o.y2,t.y2)}else e._edit={fs:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,hib:!1};var a=e;i.avoidLabels&&r&&a._cl&&a._cl.push(t)}var xa=K();function Aa(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){void 0===v&&(v=i);var g={},p=n-e,m=r-t,y=Math.sqrt(p*p+m*m);if(Vo(y))g.skip=!0;else{var b=Math.atan2(m,p),x=aa(h.tight&&s&&v!==i?0:i,y,b,a._c,a._cl,e,t),A=aa(h.tight&&l&&v!==i?0:i,y,b+Math.PI,u._c,u._cl,n,r),w=f||0,M=c||0,E=1-((x=Math.max(w,x))+(A=Math.max(M,A))),I=0;if(s||l){I=Yo(i,o,d.unzoom,h.arrows)/y;s&&l&&(I*=1.5)}g.skip=E<Math.max(Math.min(6/y,.1),I);if(!g.skip){g.cx1=e+x*p;g.cy1=t+x*m;g.cx2=n+A*-p;g.cy2=r+A*-m}}return g}function wa(e,t,n,r,i,o){var a=e,u=t,s=Math.ceil(o/8),l=ce(a,u,n,r);return{x:a+=(a-n)/l*(s-i),y:u+=(u-r)/l*(s-i)}}function Ma(e,t,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y,b,x){void 0===b&&(b=!0);void 0===x&&(x=c);var A=Aa(u._sx,u._sy,s._sx,s._sy,x,d,u,s,t,r,i,o,m,y);if(A.skip){ca(e,a,t,r,u,s,l,f,c,"straight",h,0,g,p);return!1}var w,M=A.cx1,E=A.cy1,I=A.cx2,C=A.cy2,S=I-M,k=C-E,L=0,R=0,T=0,B=0,O=0,G=0,D=.25,F=0;(t||r)&&(F=Yo(c,d,m.unzoom,y.arrows));var Z,P=0,Y=0,z=0,V=!1,W=!1,X=!1,U=!1,N=!1,j=b&&t,K=b&&r;if(y.tight){if(!t){W=da(u,v,y);U=No(u);V=W||U}if(!r){X=da(s,v,y);N=No(s);V=V||X||N}if(V){var H=Math.max(.001,k*k+S*S),Q=Math.sqrt(H);P=S/Q;Y=k/Q;z=D*x}}if(t){L=Math.atan2(k,S);T=M;B=E;w=wa(M,E,I,C,F,c);M=w.x;E=w.y}else if(y.tight&&W){M-=z*P;E-=z*Y}else if(y.tight&&U){Z=Ho(u,y);M-=P*Z;E-=Y*Z}if(r){R=Math.atan2(k,S);O=I;G=C;w=wa(I,C,M,E,F,c);I=w.x;C=w.y}else if(y.tight&&X){I+=z*P;C+=z*Y}else if(y.tight&&N){Z=Ho(s,y);I+=P*Z;C+=Y*Z}e.line(M,E,I,C,l,f,c,a,h,g);j&&zo(e,T,B,c,d,L+Math.PI,l,a+xa+"a1",_t.Line,m.unzoom,y);K&&zo(e,O,G,c,d,R,f||l,a+xa+"a2",_t.Line,m.unzoom,y);if(p){var J=0,_=0;y.labelAlongLink&&(_=ma(_=+Math.atan2(s.y-u.y,s.x-u.x).toFixed(14)));n(p.pos,(function(t,n){if("t"===n||p.present[n]){var r=ha[n];t.lx=M+r*(I-M);t.ly=E+r*(C-E);if(y.glyphsAlongLink){var i=s._sx-u._sx,o=s._sy-u._sy;if(0===i&&0===o){i=1;o=-1}var l=de(i,o);t.tdx=i/l;t.tdy=o/l;t.tangent=Math.atan2(o,i);t.R=0}e.setAnchorPosition(a,t.lx,t.ly,_,J)}J++}))}return!0}var Ea=K();function Ia(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y,b,x){void 0===b&&(b=!0);void 0===x&&(x=f);var A=a._sx,w=a._sy,M=u._sx,E=u._sy,I=Ui(a,u),C=x+1;if(Aa(A,w,M,E,x,c,a,u,!1,!1,0,0,p,m).skip||r+i>1){ca(e,o,t,n,a,u,s,l,f,"bezier",d,y,v,g);return!1}var S=Ca(A,w,M,E,m.linkStylePath,y),k=S.xs,L=S.ys,R=r||i?(u.x-a.x)/I:0,T=r||i?(u.y-a.y)/I:0,B=Math.max(r*I-.5*C,0),O=Math.max(i*I-.5*C,0);if(7===k.length)if(ka(k[3],L[3],a,C,B,R,T)){k.splice(0,3);L.splice(0,3)}else if(ka(k[3],L[3],u,C,O,-R,-T)){k.splice(4,3);L.splice(4,3)}var G=[],D=Pa(k,L,a,u,t,n,b?Yo(f,c,p.unzoom,m.arrows):0,B,O,R,T,I,C,Sa(m,a,t,h,C),Sa(m,u,n,h,C),G);if(!D){ca(e,o,t,n,a,u,s,l,f,"bezier",d,y,v,g);return!1}var F=D.midpoint,Z={xs:k,ys:L,midpoint:F,joinFraction:D.joinFraction};e.bezier(Z,s,l,f,o,d,v);G[0]&&zo(e,G[0].x,G[0].y,f,c,G[0].angle,s,o+Ea+"a1",_t.Bezier,p.unzoom,m);G[1]&&zo(e,G[1].x,G[1].y,f,c,G[1].angle,l||s,o+Ea+"a2",_t.Bezier,p.unzoom,m);if(g){Ba(e,o,k,L,4===k.length?1:2,F,g,m)}return!0}function Ca(e,t,n,r,i,o){var a=n-e,u=r-t,s="horizontal"===i?Math.min(.5+45/Math.abs(a)*Math.min(Math.abs(u)/80,1),1)*a:0,l="vertical"===i?Math.min(.5+45/Math.abs(u)*Math.min(Math.abs(a)/80,1),1)*u:0,f=[e,e+s,n-s,n],c=[t,t+l,r-l,r];if(0!==o){f=zi(f,.5);for(var d=(c=zi(c,.5))[4]-c[2],h=f[2]-f[4],v=ce(d,h,0,0),g=d/v,p=h/v,m=.45*o,y=2;y<=4;y++){f[y]+=g*m;c[y]+=p*m}}return{xs:f,ys:c}}function Sa(e,t,n,r,i){if(e.tight&&!n){if(da(t,r,e))return i;if(No(t))return Ho(t,e)}return 0}function ka(e,t,n,r,i,o,a){var u=ce(n.x,n.y,e,t),s=Math.atan2(t-n.y,e-n.x),l=(e-n.x)*o+(t-n.y)*a;return aa(0,u+r,s,n._c,[],n.x,n.y)>1||i>0&&l<i}function La(e,t){var n=Ni(e[0],t[0],e[3],t[3]),r=Ni(e[3],t[3],e[6],t[6]);if(n<r/(Li*Li)){e.splice(1,3);t.splice(1,3);return 1}if(r<n/(Li*Li)){e.splice(3,3);t.splice(3,3);return 2}return 0}function Ra(e,t,n,r,i,o){var a=ce(e,t,n,r)-2*o;return Math.min(6,.1*i)>a}function Ta(e,t,n,r,i,o){return(i?1.5*o:o)>ce(e,t,n,r)}function Ba(e,t,r,i,o,a,u,s){var l=0,f=s.labelAlongLink?function(n,s){if("t"===s||u.present[s]){var f=ha[s],c=Yi(o,a,f),d=0;n.lx=Pi(Wi,r,c);n.ly=Pi(Wi,i,c);var h=Pi(Xi,r,c),v=Pi(Xi,i,c);0!==(d=Math.atan2(v,h))&&(d=ma(d=+d.toFixed(14)));e.setAnchorPosition(t,n.lx,n.ly,d,l)}l++}:s.glyphsAlongLink?function(n,s){if("t"===s||u.present[s]){var f=ha[s],c=Yi(o,a,f);n.lx=Pi(Wi,r,c);n.ly=Pi(Wi,i,c);var d=Pi(Xi,r,c),h=Pi(Xi,i,c),v=ce(d,h,0,0);n.tdx=d/v;n.tdy=h/v;n.tangent=Math.atan2(h,d);n.R=0;e.setAnchorPosition(t,n.lx,n.ly,0,l)}l++}:function(n,s){if("t"===s||u.present[s]){var f=ha[s],c=Yi(o,a,f);n.lx=Pi(Wi,r,c);n.ly=Pi(Wi,i,c);e.setAnchorPosition(t,n.lx,n.ly,0,l)}l++};n(u.pos,f)}function Oa(e){var t=e._c||0;return(e._cl||[]).reduce((function(e,t){if(qo(t)){e.x1=Math.min(e.x1,t.cx-t.r);e.y1=Math.min(e.y1,t.cy-t.r);e.x2=Math.max(e.x2,t.cx+t.r);e.y2=Math.max(e.y2,t.cy+t.r);return e}e.x1=Math.min(e.x1,t.x1);e.y1=Math.min(e.y1,t.y1);e.x2=Math.max(e.x2,t.x2);e.y2=Math.max(e.y2,t.y2);return e}),{x1:-t,y1:-t,x2:t,y2:t})}function Ga(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=ua(l,-f,c,e,t,d.x+o,d.y+a,o,a,h);if(v>1||0===n)return v;var g=o*r+a*i,p=u*r+s*i;return Math.max(v,(n-g)/p)}function Da(e,t,n,r,i,o,a,u,s,l,f,c){for(var d,h,v,g,p,m,y,b,x,A=Oa(n),w=!0,M=e[0]-n.x,E=t[0]-n.y,I=function(){return m>1||Ga(0,[A],a,u,s,M,E,d,h,v,g,p,n,0)>1},C=function(){return m>1},S=n._cl&&n._cl.length>0?I:C,k=0;k<Li&&(w||y);k++){d=i.segmentDelta(k,e);h=i.segmentDelta(k,t);v=Math.sqrt(d*d+h*h);g=h/v;p=d/v;if(w){(m=Ga(n._c,n._cl,a,u,s,M,E,d,h,v,g,p,n,l))<0&&!b&&!y&&(m=0);if(m>=0&&m<=1)if(o>0){b=void 0;x=void 0;y={cx:M+m*d,cy:E+m*h,r:Math.max(o-r,2*o/3)}}else b={x:n.x+M+m*d,y:n.y+E+m*h,t:(k+m)/i.num};S()||(w=!1)}if(y&&(m=Ga(0,[y],a,u,s,M,E,d,h,v,g,p,n,0))>=0&&m<=1){var L=n.x+y.cx,R=n.y+y.cy;b={x:n.x+M+m*d,y:n.y+E+m*h,t:(k+m)/i.num};x={x:L,y:R,angle:Math.atan2(R-b.y,L-b.x)};y=void 0}c[k+1]=c[k]+v;M+=d;E+=h}f.push(x);return b}function Fa(e,t,n,r,i,o,a){for(var u=Li+1-i.length,s=r.length-1;s<u;s++){var l=n.segmentDelta(s,e),f=n.segmentDelta(s,t);r.push(r[s]+Math.sqrt(l*l+f*f))}for(var c=i.length-1,d=r[s]+i[c--];c>=0;c--)r.push(d-i[c]);var h=o*n.num|0,v=o*n.num-h,g=Vi(r[h],r[h+1],v),p=Li-a*n.num|0,m=Li-a*n.num-p,y=p<Li?Vi(r[p],r[p+1],m):r[Li],b=.5*(y-g)+g;s=.5*Li;for(;r[s]>b;)s--;for(;r[s]<b;)s++;var x=(r[s]-b)/(r[s]-r[s-1]),A=h<=n.num&&p>n.num?(r[n.num]-g)/(y-g):0;return{midpoint:(s-x)/n.num,joinFraction:A}}function Za(e,t,n,r,i){var o=4===e.length?1:2,a=i,u=n,s=r;if(u>1){e.splice(0,3);t.splice(0,3);o=1;u-=1;a-=1}for(var l=zi(e,u),f=zi(t,u),c=0;c<4;c++){e[c]=l[c+3];t[c]=f[c+3]}e.reverse();t.reverse();a=o-a;if(1===o){s/=1-u;a/=1-u}else a>1&&(a=1+(a-1)/(1-u));if(s>1){e.splice(0,3);t.splice(0,3);o=1;s=(s-1)/(1-u)}l=zi(e,s);f=zi(t,s);for(c=0;c<4;c++){e[c]=l[c+3];t[c]=f[c+3]}a<1&&(a=(a-s)/(1-s));if(2===o){var d=La(e,t);d&&(a=1===d?Math.max(0,a-1):Math.min(1,a))}return a}function Pa(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g){var p=4===e.length?Di:Fi,m=o?a:0,y=[0],b=[0],x=Da(e,t,n,d,p,i?a:0,u,l,f,h,g,y),A=x?Da(e.reverse(),t.reverse(),r,d,p,m,s,-l,-f,v,g,b):void 0;if(A&&x&&!(A.t+x.t>=50/p.num)){var w=Fa(e,t,p,b,y,A.t,x.t),M=w.midpoint,E=w.joinFraction,I=Za(e,t,A.t,x.t,M),C=i&&o;if(C||!Ra(x.x,x.y,A.x,A.y,c,d)){if(i||o){var S=g[0]||x,k=g[1]||A;if(Ta(S.x,S.y,k.x,k.y,C,a))return}e[0]=x.x;t[0]=x.y;e.splice(-1,1,A.x);t.splice(-1,1,A.y)
;return{joinFraction:1-E,midpoint:I}}}}var Ya=9,za=2;function Va(e){return"b"in e?e.b:Ht.keyline}function Wa(e){var t=Ya;Va(e)&&(t+=za/2);e.e&&(t*=e.e);return t}var Xa=3,Ua=1;function Na(e){return Wa(e)+Xa}function ja(e,t){return Wa(e)+Ua+Wa(t)}var Ka=jo(),Ha=5/6;function Qa(e,t){return ce(e,t,0,0)}function Ja(e,t,n,r,i,o,a,u,s,l,f,c){e.rect(o-u,a-u,o+u,a+u,Ht.transparent,-1,Ht.transparent,!0,r,i,0);var d=2*u,h=or(n,s,d,!1,f||t.fontFamily,!0),v=Qa(h.width,h.height),g=d-(v-d)/2;v=Qa((h=or(n,s,g,!1,f||t.fontFamily,!0)).width,h.height);var p=c.getImage(s);Ko(Ka,p,u,u);var m=p?p.e:1,y=g*m,b=Ha*u*m,x=o-b+Ka[4],A=a-b+Ka[5],w=o+b+Ka[4],M=a+b+Ka[5],E=o+Ka[4],I=a+Ka[5];e.text(E,I,s,l,y,!1,r,i,f,!0,v,!0,!1,x,A,w,M)}var _a=jo(),qa=[12,9,7,7];function $a(e,t,n,r){e._cl.push({cx:t,cy:n,r:r})}function eu(e,t,n,r,i){e._cl.push({x1:t,x2:r,y1:n,y2:i})}function tu(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=r,g=i,p=o,m=0;if(a&&!(u&&u._combo&&u._combo.open)){a.e&&(p*=a.e);var y=a.a?f.easingValue:1,b=Ya*p*y,x=Va(a),w=x?za*p:-1,M=!!(a.u||a.fi&&a.fi.t);m=b+(x?w/2:0);var E=u&&!A(a.r);if(a.c)if(a.t){var I=!W(a,"fb")||a.fb,C=a.fc||Ht.white,S=a.ff||c.fontFamily,k=void 0,L=void 0,R=void 0,T=void 0;if(a.w&&l){k=p*qa[1]*y;L=or(t,R=(""+a.t).substring(0,25),k,I,S).width;var B=(T=Math.max(L,b))+b,O=void 0,G=void 0;switch(s){case"left":O=(G=v+b)-B;v=G-B/2;break;case"centre":O=v-B/2;G=v+B/2;break;default:G=(O=v-b)+B;v=O+B/2}var D=g-b,F=g+b;e.rect(O,D,G,F,x,w,a.c,!0,n,d,b);if(E){$a(u,O+b,g,m);$a(u,G-b,g,m);eu(u,O+b,D-w/2,G-b,F+w/2)}}else{e.circle(v,g,b,x,w,a.c,!0,n,d,void 0,!1);L=or(t,R=(""+a.t).substring(0,4),k=p*qa[R.length-1]*y,I,S).width;T=1.7*b;E&&$a(u,v,g,m)}ya(t,e,R,v,g,n,!1,C,Ht.white,I||!1,null,!0,!1,T,L,!1,k,S,null,1,f.unzoom,c,d)}else{e.circle(v,g,b,x,w,a.c,!0,n,d,void 0,!1);E&&$a(u,v,g,m);if(M){var Z=b/1.41421;if(a.u){var P=h.getImage(a.u);Ko(_a,P,Z,Z);e.image(v+_a[0],g+_a[1],v+_a[2],g+_a[3],a.u,n,d,null,0,!1)}else Ja(e,c,t,n,d,v,g,Z,a.fi.t,a.fi.c||Ht.black,a.fi.ff||c.iconFontFamily,h)}}else if(M){E&&$a(u,v,g,b);if(a.u){var Y=1,z=0,V=0;if(P=h.getImage(a.u)){Y=P.e;z=P.dx/100*b;V=P.dy/100*b}e.image(v-b*Y+z,g-b*Y+V,v+b*Y+z,g+b*Y+V,a.u,n,d,null,0,!1)}else Ja(e,c,t,n,d,v,g,b,a.fi.t,a.fi.c||Ht.black,a.fi.ff||c.iconFontFamily,h)}a.a&&f.stillDirty.set(Q(n),2)}return m}function nu(e,t){return!(!t||t!==e)}function ru(e){return"node"!==e.type&&"link"!==e.type}function iu(e,t,n,r,i){return!!n&&!ru(e)&&i.unicodeAwareLength(t)>n&&!nu(e.id,r)}function ou(e,t,n,r,i){var o=t;""===o||o||(o=e.t||"");if(o){iu(e,o,n,r,i)&&(o=i.unicodeAwareTruncate(o,n-3)+"...");return o.split(/\r\n|\r|\n/)}return[""]}function au(e,t,n,r,i,o){for(var a=[],u=0;u<e.length;u++)a[u]=or(t,e[u],n,r,i||o).width;return a}var uu=K();function su(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function lu(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=i*u.unzoom;if(o.t){var g=0,p=0,m=e.getLayer();a||e.setLayer(So.BUBBLES);var y=o.p?""+o.p:"ne",b="w"===y.substring(1,2),x="s"===y.substring(0,1),A=n+uu+"bu",w=+(o.fs?o.fs:c)*v,M=o.b?o.b:Ht.keyline,E=o.c?o.c:Ht.white,I=o.fc?o.fc:Ht.black,C=ou(o,null,s.truncateLabel,l.showFullLabel||null,f),S=w+3*v,k=S*C.length,L=au(C,t,w,!!o.fb,o.ff,s.fontFamily),R=su(L),T=13*v,B=6*v,O=2*i,G=9*v,D=13*v,F=10*v,Z=r+D,P=k+2*B,Y=2*v,z=Math.max(Y/2,1),V=3*v;o.g&&delete o.g.e;var W=o.g?17*v:0;b&&(g-=R+2*O+2*T+W);x&&(p+=(w+3)*C.length+2*Z+2*B);var X=g+O+.5,U=g+O+2*T+R+W+.5,N=p-Z-P+.5,j=p-Z+.5;e.rect(X,N,U,j,M,Y,E,!0,A,d,8*v);tu(e,t,A,g+W,(N+j)/2,v,o.g,null,null,!1,u,s,d,h);var K=N-.5+B+S/2,H=X+T+W-.5,Q=void 0;for(Q=0;Q<C.length;Q++){var J=L[Q];e.text(H,K,C[Q],I,w,!!o.fb,A,d,o.ff||s.fontFamily,!1,J,!1,!1,H-1.5,K-w/2,U,j);K+=S}if(b){X=U;G=-G;F=-F;z=-z}if(x){j=N;D=-D;V=-V}e.triangle(X+G,j,X+G+F,j,X+G,j+D,M,Y,E,!0,A,d,_t.None);e.triangle(X+G+z,j-V,X+G+F+z,j-V,X+G+z,j+D-V,M,-1,E,!0,A,d,_t.None);e.setLayer(m)}}function fu(e,t,n,r,i,o){var a=r-t;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<e-n||e+n<s)return[];var l=Math.asin(a/n),f=n*Math.cos(l),c=[];s<=e-f&&e-f<=u&&c.push(a>0?Math.PI-l:-Math.PI-l);s<=e+f&&e+f<=u&&c.push(l);return c}function cu(e,t,n,r,i,o){var a=r-e;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<t-n||t+n<s)return[];var l=Math.acos(a/n),f=n*Math.sin(l),c=[];s<=t-f&&t-f<=u&&c.push(-l);s<=t+f&&t+f<=u&&c.push(l);return c}function du(e,t,n,r,i,o){var a=fu(e,t,n,r.y2+o,r.x1+i,r.x2+i),u=fu(e,t,n,r.y1+o,r.x1+i,r.x2+i),s=cu(e,t,n,r.x1+i,r.y1+o,r.y2+o),l=cu(e,t,n,r.x2+i,r.y1+o,r.y2+o);return a.concat(u,l,s)}function hu(e,t,n,r,i,o){var a=r-e,u=i-t,s=Math.sqrt(a*a+u*u);if(s>n+o||s<Math.abs(n-o)||0===s)return[];var l=n*n,f=(l-o*o+s*s)/(2*s),c=Math.sqrt(l-f*f),d=e+f*a/s,h=t+f*u/s,v=c*(a/s),g=c*(u/s),p=d+g,m=d-g,y=h-v,b=h+v;return[Math.atan2(y-t,p-e),Math.atan2(b-t,m-e)]}function vu(e,t,n,r,i){for(var o=Math.PI,a=e,u=0;u<t.length;u++){t[u]+2*Math.PI<r&&(t[u]+=2*Math.PI);n<t[u]&&t[u]<r&&(i?t[u]-a<o&&(a=Math.max(a,t[u])):a-t[u]<o&&(a=Math.min(a,t[u])))}return a}function gu(e,t,n,r,i,o,a){var u=a?r:i,s=o._sx,l=o._sy;o._c&&(u=vu(u,hu(e,t,n,s,l,o._c),r,i,a));if(o._cl)for(var f=0;f<o._cl.length;f++){var c=o._cl[f];u=vu(u,qo(c)?hu(e,t,n,s+c.cx,l+c.cy,c.r):du(e,t,n,c,s,l),r,i,a)}return u}function pu(e,t,n,r,i,o,a,u){var s=4,l=e+n*Math.cos(r),f=t+n*Math.sin(r),c=e+n*Math.cos(i),d=t+n*Math.sin(i);if(qo(u)){var h=o+u.cx,v=a+u.cy,g=ce(l,f,h,v),p=ce(c,d,h,v);if(g<=u.r+s&&p<=u.r+s)return!0}else{var m=o+u.x1-s,y=o+u.x2+s,b=a+u.y1-s,x=a+u.y2+s;if(m<=l&&l<=y&&b<=f&&f<=x&&(m<=c&&c<=y&&b<=d&&d<=x))return!0}return!1}function mu(e,t,n,r,i,o){var a=o.x,u=o.y;if(o._c){if(pu(e,t,n,r,i,a,u,{cx:0,cy:0,r:o._c}))return!1}if(o._cl)for(var s=0;s<o._cl.length;s++){if(pu(e,t,n,r,i,a,u,o._cl[s]))return!1}return!0}var yu=K(),bu=2*Math.PI;function xu(e,t,n,r,i,o,a,u,s,l,f,c,d){var h=hu(i,o,Yo(u,s,c,d.arrows),t,n,r);if(2===h.length){zo(e,i,o,u,s,(a?h[0]:h[1])-Math.PI,l,f,_t.Arc,c,d)}else e.triangle(0,0,0,0,0,0,l,-1,l,!0,f,-1,_t.Arc,!0)}function Au(e,t,n,r,i){return.9*Yo(e,t,r,i)/n}function wu(e,t,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y,b,x,A){void 0===x&&(x=!0);void 0===A&&(A=d);var w=s===l,M=s._sx,E=s._sy,I=l._sx,C=l._sy,S=i||0,k=o||0,L=+(a||0)*h;w&&(L+=Jo*s._sl.e);var R=L>0;if(w){var T=(s._sl.w?180:225)*(Math.PI/180),B=Math.cos(T),O=Math.sin(T),G=.5;I=M+=s._sl.x;C=E+=s._sl.y;var D=-s._sl.e*Jo/2;M+=B*D+O*G;E+=O*D-B*G;I+=B*D-O*G;C+=O*D+B*G}var F=(M+I)/2,Z=(E+C)/2,P=I-M,Y=C-E,z=Math.max(.001,Y*Y+P*P),V=Math.sqrt(z),W=+(z/4+L*L)/(2*Math.abs(L)),X=W-Math.abs(L);if(W>1e5){y.useSlowPathRendering=!0;y.useSlowPathRenderingLastTime=!0;return Ma(e,t,r,S,k,u,s,l,f,c,d,h,v,g,p,m,y,b)}var U=R?1:-1,N=F-Y*U*X/V,j=Z+P*U*X/V,K=Math.atan2(E-j,M-N),H=Math.atan2(C-j,I-N),Q=R?K:H,J=R?H:K;Q>J&&(J+=2*Math.PI);var _,q,$,ee,te,ne,re=Q+(R?S:k)*(J-Q),ie=Q+(R?1-k:1-S)*(J-Q),oe=gu(N,j,W,Q,J,L>0?s:l,!0),ue=gu(N,j,W,oe,J,L>0?l:s,!1),se={startangle:0,endangle:0};if(s===l||mu(N,j,W,oe,ue,s)&&mu(N,j,W,oe,ue,l)){se.startangle=oe;se.endangle=ue}else{se.startangle=bu;se.endangle=bu}se.startangle=Math.max(re,se.startangle);se.endangle=Math.min(ie,se.endangle);if(se.startangle>=se.endangle){ca(e,u,t,r,s,l,f,c,d,"arc",v,L,p,m);return!1}var le=0;(t||r)&&(le=Au(d,h,W,y.unzoom,b.arrows));var fe,ce,de,he=-.25;if(b.tight&&(!t||!r)){if(No(s)||No(l)){var ve=se.endangle-se.startangle;fe=ve/(ve*W)}(da(s,g,b)||da(l,g,b))&&(le=Au(A,h,W,y.unzoom,b.arrows))}var ge=x&&t,pe=x&&r;if(t){_=R?se.startangle:se.endangle;q=N+W*Math.cos(_);$=j+W*Math.sin(_);R?se.startangle+=le:se.endangle-=le}else if(b.tight)if(da(s,g,b))R?se.startangle+=he*le:se.endangle-=he*le;else if(No(s)&&(ce=Ho(s,b))){de=ce*fe;R?se.startangle-=de:se.endangle+=de}if(r){ee=R?se.endangle:se.startangle;te=N+W*Math.cos(ee);ne=j+W*Math.sin(ee);R?se.endangle-=le:se.startangle+=le}else if(b.tight)if(da(l,g,b))R?se.endangle-=he*le:se.startangle+=he*le;else if(No(l)&&(ce=Ho(l,b))){de=ce*fe;R?se.endangle+=de:se.startangle-=de}if(se.startangle>=se.endangle){ca(e,u,t,r,s,l,f,c,d,"arc",v,L,p,m);return!1}e.arc(N,j,W,se.startangle,se.endangle,f,c,d,u,v,!1,L,p);ge&&xu(e,N,j,W,q,$,R,d,h,f,u+yu+"a1",y.unzoom,b);pe&&xu(e,N,j,W,te,ne,!R,d,h,c||f,u+yu+"a2",y.unzoom,b);if(m){var me=0,ye=0;n(m.pos,(function(t,n){if("t"===n||m.present[n]){var r=U>0?se.startangle:se.endangle,i=r+((U>0?se.endangle:se.startangle)-r)*ha[n];t.lx=N+W*Math.cos(i);t.ly=j+W*Math.sin(i);if(b.glyphsAlongLink){t.tdx=-U*Math.sin(i);t.tdy=U*Math.cos(i);t.tangent=i;t.R=W;t.signf=U}if(b.labelAlongLink){i>bu&&(i%=bu);ye=ma(ye=+((i-Math.PI/2)*U).toFixed(14))}e.setAnchorPosition(u,t.lx,t.ly,ye*U,me)}me++}))}return!0}var Mu=Math.PI/256;function Eu(e,t,n,r,i){var o=n.bw*r,a=n.w*r;if(a>0){var u=n.v.filter((function(e){return e>0})).length;if(1===u){var s=0;n.v.forEach((function(e,t){e>0&&(s=t)}));e.circle(0,0,t,n.c[s],a,Ht.white,!1,i+"do"+s,0,void 0,!1)}else{var l=n.v.reduce((function(e,t){return e+t}),0),f=o/t,c=f*u,d=2*Math.PI-c,h=-Math.PI/2+f/2;d>0&&n.v.reduce((function(r,s,c){var h=r;if(0===s)return h;var v=h+d*s/l,g=v+f,p=n.c[c%n.c.length];0===o&&(0===c?h-=Mu:c!==u-1&&(v+=Mu));e.arc(0,0,t,h,v,p,void 0,a,i+"do"+c,void 0,!0,0,void 0);return g}),h)}}}var Iu=K();function Cu(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g){var p,m,y,b=n||[],x=r,A=i,w=0,M=function(e,t){return ja(e,t)*o},E=function(e,t){return 0};if(a)if(f.R&&h.glyphsAlongLink){var I=0,C=f.signf,S=f.R;w=f.tangent;for(y=0;y<b.length-1;y++){m=ja(b[y],b[y+1]);I+=C*Math.asin(m/(2*S))}var k=w+I/2,L=2*C*S*Math.sin(I/2);x+=C*L*-Math.sin(k);A+=C*L*Math.cos(k);w+=I;M=function(e,t){p-=C*Math.asin(ja(e,t)/(2*S));var n=-C*Math.sin(p);return ja(e,t)*o*n};E=function(e,t){var n=C*Math.cos(p);p-=C*Math.asin(ja(e,t)/(2*S));return ja(e,t)*o*n}}else{var R=0;for(y=0;y<b.length-1;y++)R+=ja(b[y],b[y+1])*o;if(h.glyphsAlongLink){M=function(e,t){return ja(e,t)*o*f.tdx};E=function(e,t){return ja(e,t)*o*f.tdy};x+=R*f.tdx/2;A+=R*f.tdy/2}else x+=R/2}else b.length>0?x-=Na(b[b.length-1])*o:x-=Na({});function T(e){p=w;for(var t=b.length-1,n=x,r=A;t>=0;t--){e(b[t],n,r);if(t>0){n-=M(b[t-1],b[t]);r-=E(b[t-1],b[t])}}}a&&u&&T((function(t,n,r){e.circle(n,r,Wa(t)*o*1.25,Ht.white,-1,c(),!0,s,v,void 0,!1)}));var B=0;T((function(n,r,i){var a=s+Iu+B;l&&(a+="-"+l);tu(e,t,a,r,i,o,n,null,null,!1,d,h,v,g);B++}))}function Su(){var e=new Map;function t(){e=null}function n(t){var n=e.get(t);if(!n){n=Be(Te(t));e.set(t,n)}return n}function r(e){return n(e).length}function i(e,t){return n(e).slice(0,Math.max(t,0)).join("")}return{destroy:t,unicodeAwareCharacters:n,unicodeAwareLength:r,unicodeAwareTruncate:i}}var ku={b:"grey",bw:1,c:"rgba(240,240,240,0.8)",bs:"solid",re:!1,w:0,h:0},Lu=["_ha0","_ha1","_ha2","_ha3","_ha4"],Ru=Lu.concat(["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]),Tu=Ru.reduce((function(e,t){e[t]=!0;return e}),{});function Bu(e,t){return e+(A(t)?"-"+t:"")}function Ou(e){if(e&&e.maxLength&&A(e.maxLength)&&e.maxLength>0)return e.maxLength}function Gu(e,t,r,i){var o=t||ge,a=r||ge,s=i||ge,l=Su(),f={b:"rgb(255, 255, 255)",bw:2,c:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],w:10},c=z(e,{numbers:{},numOrString:{},negatives:{},strings:{},stringValues:{},colours:{},booleans:{},reserved:{},mapPos:{},halos:[]});function d(e,t){y(e.items,!1,t)}function h(e,t,n,r){var i=r||{},o=W(e,t,n,!!i.carefulWithXandY);r.filterComboNodes&&(o.nodes=U(o.nodes));o.links=j(o.links,o.nodes,t,i.selfLinks);return o}function v(e){if(S(e)){var t=e;n(t,(function(e,n){k(t,n);t.g&&(t.g=D(t.g,!0));V(t,n,c.reserved)}))}}function g(e){var t=e.flow;if(!0===t)e.flow={velocity:2};else if(S(t)){var n=t;A(n.velocity)?n.velocity=Math.max(-10,Math.min(10,+n.velocity)):delete e.flow}else delete e.flow}function p(e){"w"in e&&(e.w=!!e.w)}function m(e,t,n){var r=e,i=n||{};x(r,t);L(r);if(r.g)if(Array.isArray(r.g)){y(r.g);r.g.forEach(p);r.g=D(r.g,"link"===r.type||!!i[r.id])}else delete r.g;F(r,t);r.donut&&Z(r,t);r.oc&&P(r);r.bu&&Y(r);r.t1&&v(r.t1);r.t2&&v(r.t2);r.flow&&g(r)}function y(e,t,n){if(e)for(var r=0;r<e.length;r++)m(e[r],t,n)}function x(e,t){n(e,(function(n,r){k(e,r);V(e,r,c.reserved);t&&V(e,r,c.booleans)}))}function w(e,t){var r=e[t],i=!0;S(r)&&n(r,(function(e,t){M(r,t);i=i&&A(+e)}));i||delete e[t]}function M(e,t){var n=+e[t];(n<0&&!c.negatives[t]||b(n))&&(n=null);e[t]=n}function E(e,t){if(!N(e[t])){var n=""+e[t];b(+n)||""===n?I(e,t):M(e,t)}}function I(e,t){if(!N(e[t])){e[t]+="";c.stringValues[t]&&!c.stringValues[t][e[t]]&&delete e[t]}}function C(e,t){e[t]&&(e[t]=an(e[t])?e[t]:void 0)}function k(e,t){c.strings[t]?I(e,t):c.numbers[t]?M(e,t):c.numOrString[t]?E(e,t):c.colours[t]?C(e,t):c.mapPos[t]&&w(e,t)}function L(e){if(S(e.fi)){var t=e.fi;if(!N(t.t))if("string"==typeof t.t){var n=l.unicodeAwareCharacters(t.t);t.t=n[0]}else t.t=String.fromCharCode(t.t);t.c&&(t.c=an(t.c)?t.c:void 0);"ff"in t&&"string"!=typeof t.ff&&(t.ff=void 0)}else null!==e.fi&&delete e.fi}function R(e){return/^(ne|nw|se|sw|n|s|e|w)$/.test(e)}function T(e){return G(e)&&e>=0&&e<360}function B(e){for(var t=0;t<e.length;t++){var n=e[t].p;if(T(n))return!0;if(R(n))return!1}return!1}function O(e){var t=B(e),n=t?T:R,r={};return function(e){var i=e,o=i.p;if(!n(o))return!1;(!t||i.r<0)&&delete i.r;var a=t?Bu(o,i.r):o;if(r[a])return!1;r[a]=!0;return!0}}function D(e,t){var n=e;if(!Array.isArray(n))return!1;if(!t){var r=O(n);n=n.filter(r)}n.forEach(L);return n}function F(e,t){c.halos.forEach((function(n){var r=e[n];if(r)if(t)"c"in r||"r"in r||"w"in r||delete e[n];else if("c"in r&&"r"in r&&"w"in r){C(r,"c");if(N(r.c)||N(r.r)||N(r.w)||!A(+r.r)||!A(+r.w))delete e[n];else{r.r=+r.r;r.w=+r.w}}else delete e[n]}))}function Z(e,t){if(e.donut)if(t||Array.isArray(e.donut.v)){if(e.donut.v){var n=e.donut.v;n.forEach((function(e,t){(!A(e)||e<0)&&(n[t]=0)}))}e.donut.c&&(Array.isArray(e.donut.c)&&0!==e.donut.c.length&&!e.donut.c.some((function(e){return!an(e)}))||delete e.donut.c);e.donut.bw&&M(e.donut,"bw");e.donut.w&&M(e.donut,"w");"b"in e.donut&&C(e.donut,"b");t||(e.donut=z(e.donut,f))}else delete e.donut}function P(e){S(e.oc)?m(e.oc):delete e.oc}function Y(e){if(Array.isArray(e.bu))delete e.bu;else{var t=e.bu;t.p||(t.p="ne");var n=t.p;/^(ne|nw|se|sw)$/.test(n)?t.g&&L(t.g):delete e.bu}}function V(e,t,n){n[t]&&delete e[t]}function W(e,t,n,r){var i=t||{},o=n||{},a={nodes:{},links:{}};function u(e,t){return e.id in t.nodes||e.id in t.links}function s(e){return!!("node"===e.type&&e.id in o||"link"===e.type&&e.id in i)}e&&(a=e.reduce((function(e,t){if(t.id&&!u(t,e)&&!s(t)){if("node"===t.type){var n=!0;r&&i[t.id]&&(n=!1);n&&X(t)}var o="node"===t.type?"nodes":"links";o in e&&(e[o][t.id]=t)}return e}),a));return a}function X(e){if("node"===e.type){e.x=e.x||0;e.y=e.y||0}}function U(e){var t=u(e);n(e,(function(e){e.parentId&&delete t[e.parentId]}));return t}function j(e,t,r,i){var o={};n(e,(function(e,n){if(K(e,t,r,i))o[n]=e;else{var a=e.parentId;if(a){var u=t[a]||r[a];u&&u._combo&&(u._combo.linkIds=u._combo.linkIds.filter((function(t){return t!==e.id})))}}}));return o}function K(e,t,n,r){if(!r&&e.id1===e.id2)return!1;var i=t||{},o=n||{};return!(!o[e.id1]&&!i[e.id1]||!o[e.id2]&&!i[e.id2])}function H(e,t){Q("hi",e,t)}function Q(e,t,n){var r={};_(e,t,n,r);J(r,e,n);s(e);"hi"===e&&a()}function J(e,t,n){Object.keys(e).forEach((function(e){var r=n[e];if(r._combo.linkIds.every((function(e){return n[e][t]}))){r[t]=!0;o(e)}else if(void 0!==r[t]){delete r[t];o(e)}}))}function _(e,t,r,i){n(r,(function(n,a){var u=n.parentId;if((!0===t[n.id1][e]||!0===t[n.id2][e])&&!0!==n[e]){n[e]=!0;u&&r[u]&&(i[u]=!0);o(a)}}))}return{donutDefaults:f,typeCheck:d,filterNodesAndLinks:h,ensureObject:m,ensureTypesInArray:y,setZeroXY:X,hasValidEnds:K,ensureHiddenItemConsistency:H,ensureConsistency:Q,applyPropertyRuleToComboLinks:J}}function Du(e,t,n,r,i,o,a,u,s,l,f){var c,d=e.getLayer(),h="solid",v=Lu;e.setLayer(So.HALOS);for(var g=!0,p=0;p<v.length;p++)if(c=i[v[p]]){g=!1;f?Ia(e,i.a1||!1,i.a2||!1,i.b1||0,i.b2||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,i.off||0,!1,l):i.off||n===r?wu(e,!1,!1,i.b1||0,i.b2||0,i.off||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,!1,l):Ma(e,!1,!1,i.b1||0,i.b2||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,!1,l)}i._noHalos=g;e.setLayer(d)}var Fu=K();function Zu(e,t,n,r,i,o){var a=0,u=0,s="centre";if(-1!==e.indexOf("n")||-1!==e.indexOf("s")){u=-n;2===e.length&&(u-=r.dy);-1!==e.indexOf("s")&&(u*=-1)}if(-1!==e.indexOf("e")||-1!==e.indexOf("w")){a=t;s="right";2===e.length&&(a+=r.dx);if(-1!==e.indexOf("w")){a*=-1;s="left"}}!i&&o&&(-1!==["n","s"].indexOf(e)?u*=Math.sqrt(2):-1!==["e","w"].indexOf(e)&&(a*=Math.sqrt(2)));return{gdx:a,gdy:u,growDirection:s}}function Pu(e){var t="centre";e>0&&e<180?t="right":e>180&&(t="left");return t}function Yu(e,t,n,r,i){var a,u,s=o(e);if("circle"===i){a=Math.sin(s)*r;u=-Math.cos(s)*r}else{var l=[Math.atan2(t,n),Math.atan2(t,-n),Math.atan2(-t,-n),Math.atan2(-t,n)],f=void 0;for(f=0;f<l.length;f++)l[f]<0&&(l[f]+=2*Math.PI);if(s<l[0]||s>l[3])a=-(u=-n)*Math.tan(s);else if(s<l[1]){a=t;u=s===Math.PI/2?0:-a/Math.tan(s)}else if(s<l[2])a=-(u=n)*Math.tan(s);else{a=-t;u=s===Math.PI/2*3?0:-a/Math.tan(s)}}return{gdx:a,gdy:u}}function zu(e,t){return{gdx:Math.sin(o(e))*t,gdy:-Math.cos(o(e))*t}}function Vu(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){var g,p=0,m=A(l.r);if(-1!==["n","ne","e","se","s","sw","w","nw"].indexOf(l.p))g=Zu(l.p,n,r,f,s,u);else{var y="box",b=0;if(u){y="circle";b=s?Math.min(n,r):Math.sqrt(2)*n}var x=l.p;(g=m?zu(x,l.r*o):Yu(x,n,r,b,y)).growDirection=Pu(x)}if(null!==g.gdx){g.gdx<0&&g.gdy<0&&l.e&&(i._sl.e=Math.max(i._sl.e,l.e));p=tu(e,t,a+Fu+Bu(l.p,l.r),g.gdx,g.gdy,o,l,i,g.growDirection,!0,c,d,h,v)}return g.gdy+p}var Wu=K();function Xu(e,t,n,r,i,o){for(var a,u=!0,s=0;s<Ru.length;s++){var l=Ru[s];if(a=i&&o.selectedNode[l]||r[l]){u=!1;var f=t+Wu+l,c=a.r*n,d=a.w*n;d/2>=c?e.circle(0,0,c+d/2,Ht.white,-1,a.c,!0,f,0,void 0,!1):e.circle(0,0,c,a.c,d,Ht.white,!1,f,0,void 0,!1)}}r._noHalos=u&&!i}var Uu=K();function Nu(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g){var p=n||[],m=r;if(a){for(var y=0,b=0;b<p.length-1;b++)y+=ja(p[b],p[b+1])*o;m+=y/2}else p.length>0?m-=Na(p[p.length-1])*o:m-=Na({});if(l){var x=m;if(p.length>0){w((function(e,t){x=t}));var A=p[0].e||1;x-=A*o*Jo/2;l._sl.e*=A}l._sl.x=x;l._sl.y=i;l._sl.w=!0}function w(e){for(var t=p.length-1,n=m;t>=0;t--){e(p[t],n);t>0&&(n-=ja(p[t-1],p[t])*o)}}if(a&&u){var M=ko[e.getLayer()];_o(e,M,v,(function(){w((function(t,n){e.circle(n,i,Wa(t)*o*1.25,Ht.white,-1,f(),!0,s,h,void 0,!1)}))}))}var E=0;w((function(n,r){tu(e,t,s+Uu+E,r,i,o,n,l,null,!1,c,d,h,g);E++}))}function ju(e,t,n){return e._combo&&e._combo.open?"rectangle"===n?"box":"circle":t?"circle"===e.sh?e.sh:"box":"box"===e.sh||"circle"===e.sh?e.sh:e.sq?"box":"circle"}function Ku(e,t,n,r,i,o){var a=t+r,u=n+r;if("circle"===e){i(Math.min(a,u))}else o(-a,-u,a,u)}function Hu(e,t,n,r,i,o,a,u,s,l,f,c,d,h){Ku(c,t,n,r,(function(t){e.circle(0,0,t,i,o,u,s,l,f,a,!1)}),(function(t,n,r,c){e.rect(t,n,r,c,i,o,u,s,l,f,0,a,d,h)}))}function Qu(e,t,n,r,i){Ku(i,t,n,r,(function(t){e._c=t}),(function(t,n,r,i){e._cl.push({x1:t,y1:n,x2:r,y2:i})}))}function Ju(e,t,n,r,i,o){var a=3*t,u=3*(r-t)-a,s=1-a-u,l=3*n,f=3*(i-n)-l,c=1-l-f;function d(e){return((s*e+u)*e+a)*e}function h(e,t){var n=v(e,t);return((c*n+f)*n+l)*n}function v(e,t){var n,r,i,o,l,f;for(i=e,f=0;f<8;f++){o=d(i)-e;if(Math.abs(o)<t)return i;l=(3*s*i+2*u)*i+a;if(Math.abs(l)<1e-6)break;i-=o/l}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){o=d(i);if(Math.abs(o-e)<t)return i;e>o?n=i:r=i;i=(r-n)/2+n}return i}return h(e,1/(200*o))}function _u(e){return e<0?0:e>1?1:e}function qu(e){return e<0?0:e>1?1:Ju(e,.25,.01,.25,1,1)}function $u(e){return Math.atan(e-.5)/(2*Math.atan(.5))+.5}var es=4,ts=27,ns=jo();function rs(e,t,r){var i=In,o=K(),a={b1:0,b2:0,c:"",c2:void 0,fb:!1,fbc:"",fc:"",ff:"",flow:void 0,fs:0,t1:void 0,t2:void 0,w:0},u={arrows:"normal",combos:{shape:"circle"},fontFamily:void 0,glyphsAlongLink:!1,iconFontFamily:void 0,editcolour:void 0,tight:!1,avoidLabels:!1,selectionFontColour:void 0,selectedNode:null,isNodeSelStyle:!1,selectedLink:null,isLinkSelStyle:!1,labelOffset:0,truncateLabel:!1,defaultOpenComboStyle:ku,labelAlongLink:!1,linkStylePath:"direct"},s={dx:0,dy:0},l={},f={present:{t:!0,t1:!1,t2:!1},pos:{t:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t1:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t2:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1}}},c={},d={unzoom:1,easingValue:0,resizeRect:null,stillDirty:new Map,useSlowPathRendering:!1,useSlowPathRenderingLastTime:!1,alwaysRedraw:!1};function h(e,t){l[e]=t}function v(){var e;return null!==(e=u.editcolour)&&void 0!==e?e:Ht.edit}function g(){return u.selectionFontColour||Ht.white}function p(e,t){u.arrows=e.arrows;u.combos=e.combos;A(e.labelOffset)&&(u.labelOffset=e.labelOffset);var n=Ou(e.truncateLabels);u.truncateLabel=void 0!==n&&n;u.editcolour=e.selectionColour;u.fontFamily=e.fontFamily;u.glyphsAlongLink=!e.linkStyle.inline&&"along"===e.linkStyle.glyphs;u.iconFontFamily=e.iconFontFamily;u.avoidLabels=!!e.linkEnds.avoidLabels;u.tight="loose"!==e.linkEnds.spacing;u.selectionFontColour=e.selectionFontColour;u.selectedNode=e.selectedNode||null;u.isNodeSelStyle=S(e.selectedNode);u.selectedLink=e.selectedLink||null;u.isLinkSelStyle=S(e.selectedLink);u.labelAlongLink=!!e.linkStyle.inline;u.linkStylePath=t?e.linkStyle.path:"direct"}function m(e,t){return Yo(e,t,d.unzoom,u.arrows)}function y(t,n,r){return("horizontal"===t||"vertical"===t)&&n!==r&&e.privateTopParentId(n)!==e.privateTopParentId(r)}function b(t,n,r,i,o,s,l){var h,v=l.isSelected,g=l.isRevealed,p=1;n._edit=null;var m=n.id;v&&u.isLinkSelStyle?x(h=a,u.selectedLink,n):h=n;var y=!1;g&&(y=e.privateTopParentId(n.id1)!==e.privateTopParentId(n.id2));i.parentId&&(p=E(1,i.parentId,r));o.parentId&&(p=Math.min(p,E(1,o.parentId,r)));var b=(h.w||1)*p*d.unzoom,A=h.c||Ht.midgrey;f.present.t=!!(n.t||n.g&&n.g.length||s);f.present.t1=!!n.t1;f.present.t2=!!n.t2;if(c[n.id])Ia(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,m,i,o,A,h.c2,b,p,h.ls,v,h.flow,f,d,u,n.off||0);else if(n.off||i===o){var w=n.off||0;y&&(w/=p);wu(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,w,m,i,o,A,h.c2,b,p,h.ls,v,h.flow,f,d,u)}else Ma(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,m,i,o,A,h.c2,b,p,h.ls,v,h.flow,f,d,u);n._x=f.pos.t.lx;n._y=f.pos.t.ly}function x(e,t,n){e.b1=(t.b1||0)>=0?t.b1:n.b1;e.b2=(t.b2||0)>=0?t.b2:n.b2;e.c=t.c||n.c;e.c2=t.c2||n.c2;e.fb=t.fb||n.fb;e.fbc=t.fbc||n.fbc;e.fc=t.fc||n.fc;e.flow=t.flow||n.flow;e.ff=t.ff||n.ff;e.fs=t.fs||n.fs;e.t1=t.t1||n.t1;e.t2=t.t2||n.t2;e.ls=t.ls||n.ls;e.w=t.w||n.w}function w(o,s,h,p,m,b,A,w){var I,C=w.isSelected,k=w.isRevealed,L=1;h._edit=null;var R=h.id,T=C&&!u.isLinkSelStyle,B=T;C&&u.isLinkSelStyle?x(I=a,u.selectedLink,h):I=h;S(I.flow)&&(d.alwaysRedraw=!0);var O=!1;k&&(O=e.privateTopParentId(h.id1)!==e.privateTopParentId(h.id2));m.parentId&&(L=E(1,m.parentId,p));b.parentId&&(L=Math.min(L,E(1,b.parentId,p)));var G=(I.w||1)*L*d.unzoom,D=I.c||Ht.midgrey,F=0;f.present.t=!!(h.t||h.g&&h.g.length||A);f.present.t1=!!h.t1;f.present.t2=!!h.t2;var Z,P=f.present.t||f.present.t1||f.present.t2;c[h.id]=y(u.linkStylePath,m.id,b.id);if(c[h.id])Z=Ia(s,!!h.a1,!!h.a2,I.b1||0,I.b2||0,R,m,b,D,I.c2,G,L,I.ls,C,I.flow,f,d,u,h.off||0);else if(h.off||m===b){var Y=h.off||0;O&&(Y/=L);Z=wu(s,!!h.a1,!!h.a2,I.b1||0,I.b2||0,Y,R,m,b,D,I.c2,G,L,I.ls,C,I.flow,f,d,u)}else Z=Ma(s,!!h.a1,!!h.a2,I.b1||0,I.b2||0,R,m,b,D,I.c2,G,L,I.ls,C,I.flow,f,d,u);h._x=f.pos.t.lx;h._y=f.pos.t.ly;if(P){var z=0;n(f.pos,(function(e,n){if(f.present[n]){var a=void 0,c=void 0,p=void 0,m=void 0,y=void 0,b=void 0,x=null;if("t"===n||"string"==typeof h[n])b=h[n];else{x="t1"===n?I.t1:"t2"===n?I.t2:h[n];var A=h[n];b=x.t?x.t:A.t;a=x.fb?x.fb:A.fb;c=x.fbc?x.fbc:A.fbc;p=x.fc?x.fc:A.fc;m=x.ff?x.ff:A.ff;y=x.fs?x.fs:A.fs}var w=!1;y=+(y||I.fs||i)*L*d.unzoom;b=b||"";m=m||I.ff||u.fontFamily;var M=p||I.fc||Ht.black,E=c||I.fbc||Ht.textback,C=!!(void 0!==a?a:I.fb);if(T){M=g();E=v()}var S=ou(h,b,u.truncateLabel,l.showFullLabel||null,t),k=au(S,o,y,C,m,u.fontFamily),O=y+3*d.unzoom;F=O*S.length;var G=0,D=0;S.length>0&&(G-=k[0]/2);for(var P=-((S.length-1)*O)/2,Y=0;Y<S.length;Y++){0===Y&&(D=P);var V=S[Y],W=ya(o,s,V,0,P,R,!0,M,E,C,h,!1,!0,99,k[Y],T,y,m,n,1,d.unzoom,u,z);V.length>0&&!Z&&(h._edit={hib:!0});w=w||W;P+=O}w&&(B=!1);var X="t"===n?h.g:x&&x.g;if(Wo(X)){Cu(s,o,X,G,D,L,!w,T,R,"t"===n?null:n,e,v,d,u,z,r);B=!1}}z++}))}if(B){var V=Math.max(.66*(I.w||0),+(I.fs||i)*d.unzoom/2);s.circle(0,0,V,Ht.white,-1,v(),!0,R,0,void 0,!1)}h.bu&&lu(s,o,R,F/2+4,L,h.bu,!1,d,u,l,t,i,0,r);if(m.du){h._du=!0;M(m,"id1",R,s,G,D,Z)}if(b.du){h._du=!0;M(b,"id2",R,s,G,D,Z)}h._noHalos||Du(s,R,m,b,h,L,C,d,u,G,c[h.id]);Z||(h._edit={hib:!0})}function M(e,t,n,r,i,a,u){var s=u?i:0,l=r.getAnchorPosition(e.id,0);r.circle(l.x,l.y,1.5*s,a,s,Ht.white,!0,n+o+t,-1,void 0,!1)}function E(e,t,n){var r=e,i=n[t];if(i){r*=i._combo.comboScale;i.parentId&&(r=E(r,i.parentId,n))}return r}function I(e,t){for(var n=e,r=n.x,i=n.y;n.parentId;){var o=(n=t[n.parentId])._combo.comboScale;r=n.x+(r-n.x)*o;i=n.y+(i-n.y)*o}return{x:r,y:i}}function C(e,t,n,i,a){var s;if(!n.hi){var l,f,c,h,g,p,m,y,b,x=a.isOpenCombo,w=1,M=n.id,C=Uo(n),S=ju(n,C,u.combos.shape),L="box"===S,R=a.isSelected,T=R&&u.isNodeSelStyle,B=R&&!u.isNodeSelStyle,O=u.selectedNode,G=T&&O.b||n.b,D=T&&O.bs||n.bs,F=T&&O.c||n.c,Z=(C?1:T&&O.e||n.e||1)*d.unzoom;f=C&&(T&&O.re||n.re)||!1;c=T&&O.u||n.u;h=T&&O.fi||n.fi;g=T&&A(O.bw)?O.bw:n.bw;p=n.w;m=n.h;y=n.x;b=n.y;var P,Y=1,z=!n.donut||L||x?void 0:n.donut;if(x){var V=n.oc;if(V){g=0;if(null===V.b)G=void 0;else{void 0===V.bw?g=u.defaultOpenComboStyle.bw:V.bw>0&&(g=V.bw);G=V.b||u.defaultOpenComboStyle.b}D=V.bs||u.defaultOpenComboStyle.bs;F=V.c||u.defaultOpenComboStyle.c;f=V.re||u.defaultOpenComboStyle.re;p=V.w||u.defaultOpenComboStyle.w;m=null!==(s=V.h)&&void 0!==s?s:p}else{G=u.defaultOpenComboStyle.b;g=u.defaultOpenComboStyle.bw;D=u.defaultOpenComboStyle.bs;F=u.defaultOpenComboStyle.c;f=u.defaultOpenComboStyle.re;m=p=u.defaultOpenComboStyle.w}if(T){var W=u.selectedNode.oc;if(W){G=W.b||G;g=W.bw||g;D=W.bs||D;F=W.c||F}}h=void 0;c=void 0;w=T&&u.selectedNode.e||n.e||1;Z=Y=n._combo.comboScale;if(dh(n)){if(!L){var X=Math.max(p,m);p=X;m=X}p=n.w+Z*(p-n.w);m=n.h+Z*(m-n.h)}else{var U=ts*w*2;p=U+Z*(p-U);m=U+Z*(m-U);L||(m=p)}}if(n.parentId){Y=E(1,n.parentId,i);var N=I(n,i);p*=Y;m*=Y;Z*=Y;y=N.x;b=N.y}t.setNodeAnchorPosition(n,y,b);if(!n.du){if(z){P=!0;l=z.b;g=Z*(z.w+2*z.bw);D=void 0}else if(G&&(void 0===g||g>0)){P=!0;l=G;g=Z*(g||es)}else{P=!1;l=Ht.white;g=0;D=void 0}var j,K,H=!!F,Q=!!c||!(!h||!h.t),J=H?F:Ht.white;n._c=0;n._cl=[];n._edit=null;n._sl?n._sl.e=Z:n._sl={x:0,y:0,e:Z,w:!1};if(C){j=p/2;K=m/2}else K=j=Z*ts;var _,q,$,ee=j+(L?g:g/2),te=K+(L?g:g/2);if(z){_=Z*z.w;q=g/2}else{q=(_=P?g:Z*es)*(3/4);!P&&L&&(q+=_/2)}$=u.tight?P||H?L?0:g/2:L?q-_:q-_/2:L?q:q+_/2;if(Q||P||H){Qu(n,ee,te,$,S);if(R&&(!B&&f||B)){var ne=ko[t.getLayer()];_o(t,ne,a,(function(){if(B){var e=v();Hu(t,ee,te,q,e,_,void 0,e,!1,M,0,S,[],!0)}f&&(!x||x&&1===Y)&&(d.resizeRect=t.createDummyShapePrimitive(M,ee+q,te+q,S))}))}}var re=L&&B?q:0;H&&Hu(t,ee,te,re,l,-1,D,J,H,M,0,S,[re,L?g/2:0]);if(Q)if(c){var ie=r.getImage(c);Ko(ns,ie,j,K);var oe=n.ci?"ci":null,ue=P?1:0,se=!1,le=0;t.image(ns[0],ns[1],ns[2],ns[3],c,M,le,oe,ue,se)}else{var fe=C?Math.min(j,K):j;Ja(t,u,e,M,0,0,0,fe,h.t,h.c||Ht.black,h.ff||u.iconFontFamily,r)}if(P){var ce=z&&0===z.bw?-1:g||-1;ce>=0&&Hu(t,ee,te,re,l,ce,D,J,!1,M,0,S,[re])}z&&Eu(t,Math.min(ee,te),z,Z,M+o);k(t,e,g,j,K,n,C,S,P,H,Q,B,Z,w,M,T,a)}}}function k(e,n,o,a,f,c,h,p,m,y,b,x,w,M,E,I,C){var S,k,L,R,T,B,O,G="circle"===u.combos.shape,D=0,F=0,Z=0,P=Xo(c),Y=!1,z=C.isOpenCombo,W=c._combo&&c._combo.open?M:w;if(I){var X=u.selectedNode;k=X.fb||c.fb;L=X.fbc||c.fbc;R=X.fc||c.fc;T=X.ff||c.ff;B=(X.fs||c.fs||i)*W;O=X.tc||c.tc}else{k=c.fb;L=c.fbc;R=c.fc;T=c.ff;B=(c.fs||i)*W;O=c.tc}z&&(O=!1);var U=3*W+B/2,N=R||Ht.black,j=L||Ht.textback;if(x){N=g();j=v()}var K=f+U,H=ou(c,null,u.truncateLabel,l.showFullLabel||null,t),Q=au(H,n,B,!!k,T,u.fontFamily),J=B+3,_=J,q=J*H.length;H.length>0&&(D-=Q[0]/2);var $=b||m||y,ee=V(O)?!!O:!b&&!h,te=(H.length-1)*(_/2);if($)ee&&(K=-te);else{if(P){var ne=Na((de=c.g)[de.length-1])*W;D=ne;Z+=Q[0]/2+ne}K=0}H.length>0&&(F=K);m&&!ee&&(K+=o-3*W);if($){var re=3,ie=3;s.dx=0;s.dy=b?-8:0;var oe=2;if(!h&&"circle"===p){re+=oe;ie+=oe;if(b){s.dx+=oe;s.dy+=oe}}if(h&&!z){re++;ie++}var ue=re*W,se=ie*W;s.dx*=W;s.dy*=W;if(z&&G){var le=((c.oc.w||u.defaultOpenComboStyle.w||0)+(c.oc.bw||u.defaultOpenComboStyle.bw||0))/2/Math.sqrt(2),fe=c.oc.w/2/ts;c._sl.e=a/ts;c._sl.x=-le*c._sl.e/fe-ue/M;c._sl.y=-le*c._sl.e/fe-se/M}else{z&&"rectangle"===u.combos.shape&&(c._sl.e=1);c._sl.x=-a+(ue-s.dx);c._sl.y=-f+(se-s.dy)}if(P){var ce="circle"===p,de=c.g;for(S=0;S<de.length;S++){var he=Vu(e,n,a-ue,f-se,c,w,E,ce,h,de[S],s,d,u,0,r),ve=A(de[S].r);ee||ve||(K=Math.max(K,he+U))}}}for(var ge=0;ge<H.length;ge++){var pe=ya(n,e,H[ge],Z,K,E,!0,N,j,!!k,c,!1,!0,99,Q[ge],x,B,T||u.fontFamily,null,W,d.unzoom,u,0);Y=Y||pe;K+=_}if(!$){var me=!c.t||!Y;Nu(e,n,c.g||null,me?0:D,F,W,me,x,E,c,v,d,u,0,C,r)}var ye=!c._noHalos||I;!h&&ye&&_o(e,So.HALOS,C,(function(){Xu(e,E,W,c,I,u)}));if(c.bu){var be=0;$?be=f:q>0?be=q/2+4:Xo(c)&&(be=13*W);lu(e,n,E,be,W,c.bu,z,d,u,l,t,i,0,r)}}function L(e,t){var r=[],i=z(e,{sh:"box",x:0,y:0});function o(e,t){e&&r.push(t)}if(Uo(i))if("circle"===i.sh){var a=Math.min(i.w,i.h)/2;n(t,(function(e){if(Uo(e)){var t=e.w,n=e.h;"circle"===e.sh?o(zn(i.x,i.y,a,e.x,e.y,Math.min(t,n)/2),e.id):o(Wn(i.x,i.y,a,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(zn(i.x,i.y,a,e.x,e.y),e.id)}))}else{var u={x1:i.x-i.w/2,y1:i.y-i.h/2,x2:i.x+i.w/2,y2:i.y+i.h/2};n(t,(function(e){if(Uo(e)){var t=e.w,n=e.h;if("circle"===e.sh){var r=Math.min(t,n)/2;o(Vn(u,e.x-r,e.y-r,e.x+r,e.y+r),e.id)}else o(Vn(u,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Yn(u,e.x,e.y),e.id)}))}return r}function R(){return d.stillDirty.size>0}function T(){return d.alwaysRedraw}function B(t,n,r,i,o,a,s,l,f,c,h,v){var g,p,m,y,x={isSelected:!1,isOpenCombo:!1,isInCombo:!1,isInBackground:!1,isTransient:!1,isParentTransient:!1,isRevealed:!1,isParentRevealed:!1};d.useSlowPathRendering=d.useSlowPathRenderingLastTime;d.useSlowPathRenderingLastTime=!1;var A=v&&!d.useSlowPathRendering&&!r.allDirty,M=new Set;function E(t){var r=n[t];if(r){
var i=e.privateFirstVisibleItemInAncestry(r.id1),o=e.privateFirstVisibleItemInAncestry(r.id2);!i||i._combo&&i._combo.open||M.add(i.id);!o||o._combo&&o._combo.open||M.add(o.id)}}l.forEach(E);if(d.resizeRect){var S=r.dirty.get(d.resizeRect.id);(r.allDirty||2===S)&&(d.resizeRect=null)}function k(e,r){var i=e.parentId,o=!1;if(i){if(!r&&s(i)||f(i))return!0;var a=t[i]||n[i];a&&a.parentId&&(o=k(a,!1))}i=e.id;var u=r&&l.has(i)||M.has(i)||c(i),d=!r&&s(i),h=!r&&f(i);return o||!u&&(d||h)}function L(n){A=!1;var r,a,u,l=[],f=!1,d=!!n._combo&&n._combo.open,h=!(!n.parentId&&!d);x.isOpenCombo=d;x.isInBackground=!!n.bg;x.isSelected=s(n.id);x.isInCombo=!!n.parentId;if(M.has(n.id)||c(n.id)||n.du){x.isRevealed=!0;M.add(n.id);l.push(So.REVEALED)}else x.isRevealed=!1;if(h){var v=e.privateGetAncestryIds(n.id);l.push(So.COMBOS);r=!1;for(var g=0;g<v.length-1;g++){var p=v[g];l.push(i.createComboSegment(p));var m=t[p];r||(r=m&&m._combo&&k(m,!1));if(!x.isRevealed&&!a&&(a=M.has(p)||c(p))){x.isRevealed=!0;M.add(n.id);l.unshift(So.REVEALED)}}x.isParentTransient=!!r;x.isParentRevealed=!!a;d&&l.push(i.createComboSegment(n.id))}else{l.push(So.MAIN);x.isParentTransient=!1;x.isParentRevealed=!1}x.isRevealed||(f=k(n,!1)&&(!Uo(n)||h))&&l.unshift(So.TRANSIENT);x.isTransient=f;i.startGeneratingFor(n,A,x.isInCombo||x.isOpenCombo);if(d)u=So.COMBO_CONTAINER;else{u=Uo(n)?So.SHAPES:So.NODES;l.push(n.bg?So.BG:So.FG)}h&&!i.hasPath(l)&&i.createItemLayersAt(l);i.setLayerPath(l);i.setLayer(u);C(o,i,n,t,x)}function R(r){A=!1;var a,u,f,d=[],v=!1,g=r.parentId&&(r._combo||t[r.parentId]),p=r.parentId&&n[r.parentId];x.isInBackground=!!r.bg;x.isSelected=s(r.id);x.isInCombo=!!r.parentId;x.isRevealed=l.has(r.id)||c(r.id)||M.has(r.parentId)||!!r._du;if(!x.isRevealed)if(f=k(r,!0)){d.push(So.TRANSIENT);x.isTransient=!0}else x.isTransient=!1;i.startGeneratingFor(r,A,x.isInCombo);a=t[r.id1];u=t[r.id2];if(x.isRevealed){a=e.privateFirstVisibleItemInAncestry(r.id1);u=e.privateFirstVisibleItemInAncestry(r.id2);if(!a||!u||a===u&&a!==t[r.id1])return;d.push(So.REVEALED)}if(a&&u){if(g){for(var m=e.privateGetAncestryIds(r.id),y=[],b=p?2:1,E=0;E<m.length-b;E++){var I=m[E];y.push(i.createComboSegment(I));if(!f){var C=t[I];v||x.isRevealed||(v=C&&C._combo&&k(C,!1));v&&d.unshift(So.TRANSIENT)}}x.isParentTransient=v;if(y.length>0){d.push(So.COMBOS);d=d.concat(y);i.hasPath(d)||i.createItemLayersAt(d)}else d.push(So.MAIN)}else d.push(So.MAIN);d.push(r.bg?So.BG:So.FG);i.setLayerPath(d);i.setLayer(So.LINKS);w(o,i,r,t,a,u,h,x)}}function T(e){return e.parentId||u.glyphsAlongLink&&Qo(e)||!!e._du}function B(n){var r;x.isInBackground=!!n.bg;x.isSelected=s(n.id);x.isInCombo=!!n.parentId;x.isRevealed=l.has(n.id)||c(n.id)||M.has(n.parentId);if(!x.isRevealed){r=k(n,!0);x.isTransient=r}i.startGeneratingFor(n,!0,x.isInCombo);var o=t[n.id1],a=t[n.id2];if(x.isRevealed){o=e.privateFirstVisibleItemInAncestry(n.id1);a=e.privateFirstVisibleItemInAncestry(n.id2);if(!o||!a||o===a&&o!==t[n.id1])return}b(i,n,t,o,a,h,x)}d.stillDirty.clear();d.easingValue=$u(Date.now()%1e3/1e3);d.unzoom=a.getUnzoom();function O(e){var t=n[e];T(t)?R(t):B(t)}if(r.allDirty){i.removeAllItems();d.alwaysRedraw=!1;y=Object.keys(t);m=Object.keys(n);for(g=0,p=y.length;g<p;g++)L(t[y[g]]);for(g=0,p=m.length;g<p;g++)R(n[m[g]])}else{var G=[],D=[],F=function(e,r){var o=t[r];if(o)if(o.parentId||o._combo)L(o);else if(1===e)if(o.parentId){var a=I(o,t);i.setNodeAnchorPosition(o,a.x,a.y)}else i.setNodeAnchorPosition(o,o.x,o.y);else L(o);else if(n[r])2===e?G.push(r):D.push(r);else{A=!1;i.removeItem(r)}};r.dirty.forEach(F);if(r.allLinksMoved)for(g=0,p=(m=Object.keys(n)).length;g<p;g++)O(m[g]);else if(r.allLinksDirty){d.alwaysRedraw=!1;for(g=0,p=(m=Object.keys(n)).length;g<p;g++)R(n[m[g]])}else{G.forEach((function(e){R(n[e])}));D.forEach(O)}}return{stillDirty:d.stillDirty,rebuildAll:d.useSlowPathRendering||!A}}function O(e,t,n,r){var i=e.getLayerPath();e.setLayerPath(null);e.startGeneratingForExtras();e.setLayer(So.HANDLES);if(d.resizeRect&&1===r.size){Kn(e,t,n,d.resizeRect,1,d.resizeRect.id,v(),o);Kn(e,t,n,d.resizeRect,4,d.resizeRect.id,Ht.transparent,o)}e.setLayerPath(i)}return{animated:R,contains:L,currentArrowLength:m,editColour:v,fontSize:i,generate:B,generateHandles:O,getAlwaysRedraw:T,setOptions:p,setSpecialOptions:h}}function is(e,t,n){}var os=1e-6,as=22e-17;function us(e){return"number"==typeof e&&isFinite(e)}function ss(e){return us(e)&&(0|e)===e}function ls(e,t){return Math.sqrt(e*e+t*t)}function fs(e,t,n,r){return ls(e-n,t-r)}function cs(e,t){return Math.round(e/t)*t}function ds(e,t){return Math.ceil(e/t)*t}function hs(e,t,n){return e<t?t:e>n?n:e}function vs(e,t,n){return n*e+(1-n)*t}function gs(e,t,n,r,i){var o=t-e;return o>as?n+(i-e)*(r-n)/o:0}function ps(e,t,n,r,i,o){return e+(t-e)/(1+Math.pow(i*Math.E,-r*(o-n)))}var ms=2147483647;function ys(){return ms*Math.random()|0}function bs(e){var t=48271,n=44488,r=3399,i=Math.round(e)%ms;function o(){var e=t*(i%n|0)-r*(i/n|0);return(i=e>0?e:e+ms)-1}o.reset=function(e){return i=e};o.state=function(){return i};return o}var xs,As=function(){var e=function(){throw"Invalid operation"},t=function(){return Math.random()*ms|0};t.reset=e;t.state=e;return t}();function ws(){return As}!function(e){function t(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=ws());var r=t-e,i=function(){return e+r*(n()/ms)};i.rng=n;return i}e.uniform=t;function n(e,t,n){void 0===n&&(n=ws());var r=t-e+1,i=function(){return Math.floor(e+r*(n()/ms))};i.rng=n;return i}e.uniformi32=n;function r(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=ws());var r=2/ms,i=-1,o=!1,a=function(){if(o){o=!1;return e+t*i}var a,u,s;do{s=(a=n()*r-1)*a+(u=n()*r-1)*u}while(s>=1||0===s);var l=Math.sqrt(-2*Math.log(s)/s);i=u*l;o=!0;return e+t*a*l};a.rng=n;return a}e.gaussian=r}(xs||(xs={}));function Ms(e,t){Object.setPrototypeOf(e,t);function n(){this.constructor=e}if(null!==t){n.prototype=t.prototype;e.prototype=new n}else e.prototype=Object.create(e)}function Es(){return{next:function(){return Ns},size:0}}function Is(e){var t={value:e,done:!1};return{next:function(){var e=t;t=Ns;return e},size:1}}function Cs(e,t){var n=0,r={value:null,done:!1},i={next:function(){var i=e.next();i.done?r.done=!0:r.value=t(i.value,n++);return r},size:0};"size"in e&&(i.size=e.size);return i}function Ss(e,t){for(var n=0,r=e.next();!r.done;n++,r=e.next())t(r.value,n)}function ks(e,t){if(0===t)return Es();var n={value:null,done:!0};return{next:function(){return t-- >0?e.next():n}}}function Ls(e,t){var n=Es(),r=0;return{next:function(){for(var i=n.next();i.done;){var o=e.next();if(o.done)break;i=(n=t(o.value,r++)).next()}return i}}}function Rs(e,t,n){for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n=t(n,r.value,i);return n}function Ts(e,t){return{next:function(){for(;;){var n=e.next();if(n.done)return n;if(t(n.value))return n}}}}function Bs(e,t,n){void 0===n&&(n=1);var r=Math.round((t-e)/n),i={value:e,done:!1};return{next:function(){(n>0&&e>=t||n<0&&e<=t)&&(i.done=!0);i.value=e;e+=n;return i},size:r}}function Os(e,t,n){return Bs(e,t,Math.abs(t-e)/n)}function Gs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ds(e)}function Ds(e,t){return void 0!==t?Fs(e,t):Zs(e)}function Fs(e,t){var n={value:null,done:!1,i:-1};return{next:function(){n.i++;n.i<e.length?n.value=t(e[n.i],n.i):n.done=!0;return n},size:e.length}}function Zs(e){var t={value:null,done:!1,i:-1};return{next:function(){t.i++;t.i<e.length?t.value=e[t.i]:t.done=!0;return t},size:e.length}}function Ps(e,t,n){return"function"==typeof t?Ys(e,t,n):zs(e,t)}function Ys(e,t,n){void 0===n&&(n=[]);for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n.push(t(r.value,i));return n}function zs(e,t){void 0===t&&(t=[]);for(var n=e.next();!n.done;n=e.next())t.push(n.value);return t}function Vs(e,t){void 0===t&&(t=[null,null]);var n={value:t,done:!1},r={next:function(){var r=e.next();if(r.done){n.done=!0;return n}t[0]=r.value;if((r=e.next()).done){n.done=!0;return n}t[1]=r.value;return n},size:0};"size"in e&&(r.size=Math.floor(e.size/2));return r}function Ws(e,t){for(var n=e.next();!n.done;n=e.next())t=n.value;return t}function Xs(e,t){var n=e.next();return n.done?t:n.value}function Us(e,t){return{next:function(){return e.next()},size:t}}var Ns={value:null,done:!0},js={__proto__:null,empty:Es,single:Is,map:Cs,forEach:Ss,take:ks,flatMap:Ls,reduce:Rs,filter:Ts,fromRange:Bs,linspace:Os,from:Gs,fromArray:Ds,toArray:Ps,pairs:Vs,last:Ws,first:Xs,withSize:Us};function Ks(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function Hs(e,t){for(var n=0;n<e.length;n++)e[n]=t}function Qs(e,t){return e<t}function Js(e,t,n){var r=e[t];e[t]=e[n];e[n]=r}function _s(e,t,n,r,i){void 0===n&&(n=Qs);void 0===r&&(r=0);void 0===i&&(i=e.length-r);for(var o,a=0;i>0;){o=0|r;if(n(e[o+=a=i>>1],t)){r=++o;i-=a+1}else i=a}return r}function qs(e,t){void 0===t&&(t=0);for(var n=t,r=0,i=e.length;r<i;r++)e[r]=n++}function $s(e,t){for(var n=0;n<t.length;n++)if(t[n]<0)t[n]=~t[n];else for(var r=n,i=t[n];i!==n;){Js(e,r,i);i=t[r=i];t[r]=~i}}function el(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var o=e[i];e[i-n]=o;t(o,i)||n++}return n}var tl,nl=function(){function e(e,t,n,r,i,o){void 0===r&&(r=tl.sizeFromShape(e));void 0===i&&(i=0);void 0===o&&(o=tl.computeStrides(e));this.shape=e;this.dtype=t;this.values=n;this.size=r;this.offset=i;this.strides=o;this.rank=this.shape.length;this.lastIndex=tl.lastIndex(this);this.lastStride=this.strides[this.rank-1];this.contiguous=this.lastIndex-i==r-1}e.prototype.getNextIndex=function(e){return e<0?this.offset:(e+=this.lastStride)>this.lastIndex?-1:e};return e}(),rl=function(e){Ms(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.rankType=0;return t}t.prototype.get=function(){return this.values[this.index()]};t.prototype.set=function(e){this.values[this.index()]=e};t.prototype.index=function(){return 0|this.offset};return t}(nl),il=function(e){Ms(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=1;u.stride0=u.strides[0];return u}t.prototype.get=function(e){return this.values[this.index(e)]};t.prototype.set=function(e,t){this.values[this.index(e)]=t};t.prototype.index=function(e){return this.offset+e*this.stride0|0};return t}(nl),ol=function(e){Ms(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=2;u.stride0=u.strides[0];u.stride1=u.strides[1];return u}t.prototype.get=function(e,t){return this.values[this.index(e,t)]};t.prototype.set=function(e,t,n){this.values[this.index(e,t)]=n};t.prototype.index=function(e,t){return this.offset+e*this.stride0+t*this.stride1|0};return t}(nl),al=function(e){Ms(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=3;u.stride0=u.strides[0];u.stride1=u.strides[1];u.stride2=u.strides[2];return u}t.prototype.get=function(e,t,n){return this.values[this.index(e,t,n)]};t.prototype.set=function(e,t,n,r){this.values[this.index(e,t,n)]=r};t.prototype.index=function(e,t,n){return this.offset+e*this.stride0+t*this.stride1+n*this.stride2|0};return t}(nl);function ul(e,t,n){null==t&&(t=tl.inferShape(e));null==n&&(n=tl.inferDType(e,"f32"));var r=Ks(e)||Array.isArray(e)?e:[e],i=tl.asTypedArray(r,n);return new(tl.getViewCtor(t.length))(t,n,i)}function sl(e,t,n){void 0===t&&(t="f32");var r=tl.sizeFromShape(e),i=ll(t,r,n);return new(tl.getViewCtor(e.length))(e,t,i,r)}function ll(e,t,n){var r;switch(e){case"f64":r=new Float64Array(t);break;case"f32":r=new Float32Array(t);break;case"i32":r=new Int32Array(t);break;default:tl.throwUnknownDType(e)}void 0!==n&&Hs(r,n);return r}function fl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=[],i=[],o=e.offset,a=0,u=t.length;a<u;a++){var s=e.strides[a];if(ss(t[a]))o+=s*t[a];else{i.push(e.shape[a]);r.push(s)}}return new(tl.getViewCtor(i.length))(i,e.dtype,e.values,tl.sizeFromShape(i),o,r)}function cl(e,t){void 0===t&&(t=0);for(var n=e.rank,r=e.shape,i=[],o=0;o<n;o++)i.push("all");var a=[];for(o=0;o<r[t];o++){i[t]=o;var u=[e].concat(i);a.push(fl.apply(null,u))}return a}function dl(e,t,n,r){var i=tl.getViewCtor(e.rank),o=t.length;void 0!==r?o=Math.min(r.length,o):r=ll(e.dtype,o);switch(e.rank){case 0:r[0]=e.get();return new i([1],e.dtype,r);case 1:for(var a=0;a<o;a++){var u=e.get(t[a]);r[a]=u}return new i([o],e.dtype,r)}throw new Error("Rank not impl")}function hl(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]=t}function vl(e,t){for(var n=-1,r=0,i=e.values;(n=e.getNextIndex(n))>=0;)i[n]=t(i[n],r++)}function gl(e,t){void 0===t&&(t=[0,0]);for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=-1,o=e.values;(i=e.getNextIndex(i))>=0;){o[i]>r&&(r=o[i]);o[i]<n&&(n=o[i])}t[0]=n;t[1]=r;return t}function pl(e){return ml(e)[1]}function ml(e,t){void 0===t&&(t=0);var n=e.size;if(0===n)return[NaN,NaN];for(var r=0,i=0,o=1,a=e.values,u=-1;(u=e.getNextIndex(u))>=0;){var s=a[u],l=r;i+=(s-(r+=(s-r)/o))*(s-l);o++}return n>1?[Math.sqrt(i/(e.size-t)),r]:[0,r]}!function(e){function t(e){switch(e){case 0:return rl;case 1:return il;case 2:return ol;case 3:return al}throw new Error(e+" views not implemented")}e.getViewCtor=t;function n(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}e.sizeFromShape=n;function r(e){for(var t=e.rank,n=e.offset,r=0;r<t;r++)n+=e.strides[r]*(e.shape[r]-1);return n}e.lastIndex=r;function i(e){throw new Error("Unknown data type "+e)}e.throwUnknownDType=i;function o(e,t){void 0===t&&(t=[]);if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){o(r[n],t)}else t.push(e);return t}function a(e){var t=e.length,n=new Array(t);n[t-1]=1;for(var r=t-2;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}e.computeStrides=a;function u(e){if(Ks(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;){t.push(e.length);e=e[0]}return t}e.inferShape=u;function s(e,t){return e instanceof Float32Array?"f32":e instanceof Int32Array?"i32":e instanceof Float64Array?"f64":t}e.inferDType=s;function l(e,t){return s(e)===t?e:f(Array.isArray(e)?o(e):e,t)}e.asTypedArray=l;function f(e,t){switch(t){case"f32":return new Float32Array(e);case"i32":return new Int32Array(e);case"f64":return new Float64Array(e)}i(t);return null}e.copyToTypedArray=f}(tl||(tl={}));var yl;!function(e){function t(e){return o(e.tl.x,e.br.x,e.tl.y,e.br.y)}e.copy=t;function n(e,t){t.tl.x=e.tl.x;t.tl.y=e.tl.y;t.br.x=e.br.x;t.br.y=e.br.y}e.copyTo=n;function r(e){return e.br.x-e.tl.x}e.width=r;function i(e){return e.br.y-e.tl.y}e.height=i;function o(e,t,n,r){if(e>t){var i=t;t=e;e=i}if(n>r){i=r;r=n;n=i}return{tl:{x:e,y:n},br:{x:t,y:r}}}e.create=o;function a(e,t,n){var o=r(e),a=i(e);e.tl.x=t;e.tl.y=n;e.br.x=t+o;e.br.y=n+a}e.moveTo=a;function u(e,t){void 0===t&&(t={x:0,y:0});t.x=e.tl.x+.5*(e.br.x-e.tl.x);t.y=e.tl.y+.5*(e.br.y-e.tl.y);return t}e.center=u;function s(e,t){return e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.br.x===t.br.x&&e.br.y===t.br.y}e.equals=s;function l(e,t,n,r){return!(t+r>e.br.x||t-r<e.tl.x||n+r>e.br.y||n-r<e.tl.y)}e.contains=l;function f(e,t){return l(e,t.x,t.y,0)}e.containsPoint=f;function c(e,t,n){d(e,t-r(e),n-i(e))}e.resize=c;function d(e,t,n){var r=.5*t,i=.5*n;e.tl.x-=r;e.tl.y-=i;e.br.x+=r;e.br.y+=i}e.resizeBy=d;function h(e,t,n){c(e,r(e)*t,i(e)*n)}e.scale=h;function v(e,t){return e.tl.x<t.br.x&&e.br.x>t.tl.x&&e.tl.y<t.br.y&&e.br.y>t.tl.y}e.intersects=v;function g(e,t){return o(Math.min(e.tl.x,t.tl.x),Math.max(e.br.x,t.br.x),Math.min(e.tl.y,t.tl.y),Math.max(e.br.y,t.br.y))}e.union=g}(yl||(yl={}));var bl=function(){function e(e,t,n,r){this.parentIdx=e;this.quad=t;this.beginIdx=n;this.endIdx=r;this.firstChild=-1}return e}();function xl(e,t,n,r,i){return t[e[r]]<=i?r:_s(e,i+1,(function(e,n){return t[e]<n}),n,r-n+1)-1}var Al=new Uint32Array([1431655765,858993459,252645135,16711935]);function wl(e,t){e=((e=((e=((e=(e|e<<8)&Al[3])|e<<4)&Al[2])|e<<2)&Al[1])|e<<1)&Al[0];t=((t=((t=((t=(t|t<<8)&Al[3])|t<<4)&Al[2])|t<<2)&Al[1])|t<<1)&Al[0];return(e|(t<<=1))>>>0}var Ml=function(){function e(e,t){void 0===t&&(t=2);this.maxDepth=e;this.splitThreshold=t;this.N=0;this.aabb=yl.create(0,1,0,1);this.zorder=null;this.tree=[];this.path=new El(this.tree,this.aabb)}e.prototype.build=function(t,n,r){var i=t.size,o=this.zorder;if(void 0!==r)this.aabb=yl.copy(r);else{var a=gl(t),u=a[0],s=a[1],l=gl(n),f=l[0],c=l[1];this.aabb=r=yl.create(u,s,f,c)}null!==o&&o.length===i||qs(o=this.zorder=new Int32Array(i));for(var d=yl.width(r),h=yl.height(r),v=new Uint32Array(i),g=d>0?65535/d:0,p=h>0?65535/h:0,m=r.tl.x,y=r.tl.y,b=function(e,t){return wl((e-m)*g>>>0,(t-y)*p>>>0)},x=0;x<i;){var A=o[x],w=t.get(A),M=n.get(A);if(yl.contains(r,w,M,0)){v[A]=b(w,M);x++}else Js(o,x,--i)}this.N=i;void 0===this.maxDepth&&(this.maxDepth=hs(Math.ceil(Math.log(i+1)),1,e.MAX_DEPTH));var E=o.subarray(0,this.N);Array.prototype.sort.call(E,(function(e,t){return v[e]-v[t]}));this.buildTree(r,E,v,this.maxDepth,this.splitThreshold,b)};e.prototype.buildTree=function(t,n,r,i,o,a){var u=n.length,s={x:0,y:0},l=yl.copy(t),f=this.tree,c=this.path;f.length=0;f.push(new bl(-1,-1,0,u-1));c.resize(l);for(var d=0;d>=0;){var h=f[d];if(h.firstChild<0&&h.endIdx-h.beginIdx>=o-1&&c.depth<i){c.copyTo(l);yl.center(l,s);var v=a(s.x,s.y),g=a(l.br.x,s.y),p=a(s.x,l.br.y),m=h.beginIdx,y=h.endIdx,b=xl(n,r,m,y,v),x=1/0;if(b>=m){x=f.push(new bl(d,0,m,b))-1;m=b+1}var A=xl(n,r,m,y,g);if(A>=m){x=Math.min(x,f.push(new bl(d,1,m,A))-1);m=A+1}var w=xl(n,r,m,y,p);if(w>=m){x=Math.min(x,f.push(new bl(d,2,m,w))-1);m=w+1}y>=m&&(x=Math.min(x,f.push(new bl(d,3,m,y))-1));h.firstChild=x}d=e.nextDFS(f,c,!0)}};e.prototype.traverse=function(){if(null===this.tree||0===this.tree.length)return Es();var t=this.tree,n=yl.copy(this.aabb),r=new El(this.tree,n),i=0,o={value:null,done:!1};function a(){if(i>=0){var a=t[i];r.copyTo(n);o.value={id:i,aabb:n,count:a.endIdx-a.beginIdx+1};i=e.nextDFS(t,r,!0)}else o.done=!0;return o}return{next:a,size:t.length}};e.nextDFS=function(e,t,n){var r=t.currentIdx,i=n?e[r].firstChild:-1;if(i>=0){t.descend(i);return i}var o=e.length;r=e[r].parentIdx;for(;r>=0;){if((i=t.pop()+1)<o&&e[i].parentIdx===r){t.descend(i);return i}r=e[r].parentIdx}return-1};e.MAX_DEPTH=15;return e}(),El=function(){function e(e,t){this.tree=e;this.path=new Int32Array(Ml.MAX_DEPTH);this.resize(t)}e.prototype.resize=function(e){this.cxcy0=yl.center(e);this.w0=yl.width(e);this.h0=yl.height(e);this.hypot0=ls(this.w0,this.h0);this.reset()};e.prototype.reset=function(){this.hypot=this.hypot0;this.currentIdx=0;this.depth=0};e.prototype.descend=function(e){this.hypot*=.5;this.path[++this.depth]=e;this.currentIdx=e};e.prototype.pop=function(){this.hypot*=2;var e=this.depth--,t=this.path[e];this.currentIdx=this.path[e-1];return t};e.prototype.copyTo=function(e){for(var t=e.tl,n=e.br,r=this.w0,i=this.h0,o=this.cxcy0,a=o.x,u=o.y,s=0,l=this.depth,f=this.tree,c=this.path;s<=l;s++){r*=.5;i*=.5;switch(f[c[s]].quad){case 0:a-=r;u-=i;break;case 1:a+=r;u-=i;break;case 2:a-=r;u+=i;break;case 3:a+=r;u+=i}}t.x=a-r;t.y=u-i;n.x=a+r;n.y=u+i};return e}();function Il(e,t,n){return e>=t&&e<=n}var Cl=function(e){Ms(t,e);function t(t,n,r){void 0===t&&(t="f32");var i=e.call(this,n,r)||this;i.dtype=t;i.outboundExpansions=null;return i}t.prototype.buildXYM=function(e,t,n,r){var i=r.length;if(void 0===this.zxs||this.zxs.length<i){this.zxs=ll(this.dtype,i);this.zys=ll(this.dtype,i);this.zms=ll(this.dtype,i)}for(var o=this,a=o.zxs,u=o.zys,s=o.zms,l=0;l<i;l++){var f=r[l];a[l]=e.get(f);u[l]=t.get(f);s[l]=n.get(f)}this.index=r};t.prototype.build=function(t,n,r,i){e.prototype.build.call(this,t,n,r);this.buildXYM(t,n,i,this.zorder);this.computeExpansions()};t.prototype.buildSubset=function(t,n,r,i,o){this.buildXYM(n,r,o,t);e.prototype.build.call(this,ul(this.zxs),ul(this.zys),i);var a=this.zorder;$s(this.zxs,a);$s(this.zys,a);$s(this.zms,a);$s(t,a);this.computeExpansions()};t.prototype.computeExpansions=function(){for(var e=this,t=e.tree,n=e.N,r=e.zxs,i=e.zys,o=e.zms,a=this.outboundExpansions=sl([t.length,3],this.dtype),u=a.values,s=t.length-1,l=n;l>0&&s>=0;s--){var f=t[s];if(!(f.firstChild>=0)){for(var c=0,d=0,h=0,v=f.endIdx;v>=f.beginIdx;v--){var g=o[v];d+=r[v]*g;h+=i[v]*g;c+=g;l--}for(var p=s;p>=0;){u[m=a.index(p,0)]+=d;u[m+1]+=h;u[m+2]+=c;f=t[p=f.parentIdx]}}}for(s=t.length-1;s>=0;s--){var m;g=1/u[(m=a.index(s,0))+2];u[m]*=g;u[m+1]*=g}};t.prototype.runOnPoint=function(e,t,n,r,i,o){void 0===o&&(o=.5);null!==this.outboundExpansions&&0!==this.outboundExpansions.size&&this.runOnPointInternal(e,t,n,r,this.path,i,o,-1)};t.prototype.runOnPoints=function(e,t,n,r){void 0===r&&(r=.5);if(null!==this.outboundExpansions&&0!==this.outboundExpansions.size)for(var i=this,o=i.zxs,a=i.zys,u=i.zms,s=i.N,l=i.index,f=i.path,c=t.values,d=n.values,h=0;h<s;h++){var v={x:0,y:0};this.runOnPointInternal(e,o[h],a[h],u[h],f,v,r,h);var g=l[h];c[t.index(g)]+=v.x;d[n.index(g)]+=v.y}};t.prototype.runOnPointInternal=function(e,t,n,r,i,o,a,u){var s=this,l=s.tree,f=s.zxs,c=s.zys,d=s.zms,h=s.outboundExpansions;i.reset();for(var v=0;v>=0;){var g=l[v],p=g.beginIdx,m=g.endIdx,y=h.get(v,0),b=h.get(v,1);if(!Il(u,p,m)&&i.hypot/fs(t,n,y,b)<a)e(t,n,r,y,b,h.get(v,2),o);else{if(g.firstChild>=0){i.descend(v=g.firstChild);continue}for(;p<=m;){p!==u&&e(t,n,r,f[p],c[p],d[p],o);p++}}v=Ml.nextDFS(l,i,!1)}};t.prototype.traverse=function(){var t=this.outboundExpansions;return Cs(e.prototype.traverse.call(this),(function(e){e.x=t.get(e.id,0);e.y=t.get(e.id,1);e.mass=t.get(e.id,2);return e}))};return t}(Ml),Sl={__proto__:null,BarnesHut:Cl},kl={x:0,y:0};function Ll(e,t){var n=ls(e,t);return n>as?{x:e/n,y:t/n}:{x:e,y:t}}function Rl(e,t){return e.x*t.x+e.y*t.y}function Tl(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y,u=r*(e.x+t.x)+i*(e.y+t.y),s=o*(e.x+n.x)+a*(e.y+n.y),l=r*(n.y-t.y)-i*(n.x-t.x);if(Math.abs(l)<as)return null;var f=(a*u-i*s)*(l=.5/l),c=(r*s-o*u)*l;return{x:f,y:c,rSq:(e.x-f)*(e.x-f)+(e.y-c)*(e.y-c)}}function Bl(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y;t.tl.x=Math.min(t.tl.x,i);t.tl.y=Math.min(t.tl.y,o);t.br.x=Math.max(t.br.x,i);t.br.y=Math.max(t.br.y,o);n=e.next()}return t}function Ol(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y,a=r.r;t.tl.x=Math.min(t.tl.x,i-a);t.tl.y=Math.min(t.tl.y,o-a);t.br.x=Math.max(t.br.x,i+a);t.br.y=Math.max(t.br.y,o+a);n=e.next()}return t}function Gl(e,t,n){var r=gl(e),i=r[0],o=r[1],a=gl(t),u=a[0],s=o-i,l=a[1]-u;if(s<os&&l<os)return null;var f=Math.max(s,l),c=i+.5*s,d=u+.5*l;return[{x:c-n*f,y:d-f},{x:c,y:d+n*f},{x:c+n*f,y:d-f}]}function Dl(e,t,n,r,i,o){var a=Tl(r<0?e[~r]:{x:t.get(r),y:n.get(r)},i<0?e[~i]:{x:t.get(i),y:n.get(i)},o<0?e[~o]:{x:t.get(o),y:n.get(o)});if(null!==a){a.adx=r;a.bdx=i;a.cdx=o}return a}function Fl(e,t,n){for(var r=e.length-1,i=e.length-1;i>0;i-=2){var o=e[i],a=e[i-1];if(t===o&&n===a||t===a&&n===o){Js(e,i,r);Js(e,i-1,r-1);e.length-=2;return}}e.push(t,n)}function Zl(e,t){void 0===t&&(t=[-1,-1]);var n={value:t,done:!1},r=0,i=0,o=-1,a=-1,u=-1;return{next:function(){if(r<e.length||i>0)switch(i){case 0:o=e[r++];a=e[r++];u=e[r++];t[0]=o;t[1]=a;i++;break;case 1:t[1]=u;i++;break;case 2:t[0]=a;i=0}else n.done=!0;return n},size:e.length}}function Yl(e,t,n,r,i){var o=new Int32Array(e.size);qs(o);return zl(o,e,t,n,r,i)}function zl(e,t,n,r,i,o){void 0===i&&(i=0);for(var a=r.length,u=null;;){if(null===(u=Vl(e,t,n,r))||i--<=0)break;r.length=a;for(var s=u[0],l=u[1];s<l;s++){t.set(s,t.get(s)+o());n.set(s,n.get(s)+o())}}return u}function Vl(e,t,n,r){var i=t.size;if(i<3)return null;var o=Gl(t,n,1e3);if(null===o)return[0,i];var a=[Dl(o,t,n,-1,-2,-3)],u=-1;Array.prototype.sort.call(e,(function(e,n){return t.get(n)-t.get(e)}));for(var s=e.length-1;s>=0;s--){for(var l=e[s],f=[],c=t.get(l),d=n.get(l),h=a.length-1;h>u;){var v=a[h],g=v.x,p=v.y,m=v.rSq,y=v.adx,b=v.bdx,x=v.cdx,A=c-g;if(A>0&&A*A>m)Js(a,++u,h);else{h--;var w=d-p;if(!(A*A+w*w-m>as)){Fl(f,y,b);Fl(f,b,x);Fl(f,x,y);Js(a,h+1,a.length-1);a.pop()}}}for(var M=0,E=f.length-1;M<E;){var I=Dl(o,t,n,f[M++],f[M++],l);if(null===I)return[l,l+1];a.push(I)}}var C=r.length;for(s=a.length-1;s>=0;s--){var S=a[s];S.adx>=0&&S.bdx>=0&&S.cdx>=0&&r.push(S.adx,S.bdx,S.cdx)}return r.length===C?[0,i]:null}var Wl={__proto__:null,edgesOf:Zl,triangulate:Yl,triangulateSubset:zl};function Xl(e,t){return function(n,r,i){var o=e.get(n),a=e.get(r),u=e.get(i),s=t.get(n),l=t.get(r),f=t.get(i),c=fs(o,s,a,l);return fs(u,f,o,s)<c&&fs(u,f,a,l)<c}}function Ul(e,t,n,r){return function(i,o){var a=e.get(i),u=e.get(o);return fs(a,t.get(i),u,t.get(o))-(n.get(i)+n.get(o))>r}}function Nl(e,t){var n=e[t],r=e[t+(t%3==2?-2:1)];if(n>r){var i=n;n=r;r=i}return[n,r]}function jl(e){var t=new Int32Array(e.length);qs(t);Array.prototype.sort.call(t,(function(t,n){var r=Nl(e,t),i=r[0],o=r[1],a=Nl(e,n),u=a[0],s=a[1];return i===u?o-s:i-u}));return t}function Kl(e,t){return Cs(Ts(Ds(e),(function(e){return e>=0})),(function(e){return Nl(t,e)}))}function Hl(e,t,n){if(0===t.length)return Es();var r=jl(t),i=[],o=new Int32Array(e),a=new Int32Array(r.length);Hs(a,-1);for(var u=0;u<r.length-1;){var s=Nl(t,c=r[u]),l=Nl(t,d=r[u+1]);if(s[0]!==l[0]||s[1]!==l[1]){i.push(c);o[s[0]]=1;o[s[1]]=1}else{a[c]=d;a[d]=c;u++}u++}if(u===r.length-1){i.push(r[u]);o[r[u]]=1}if(n)for(var f=0;f<i.length;f++){var c,d=void 0,h=void 0;switch((c=i[f])%3){case 0:d=c+1;h=c+2;break;case 1:d=c+1;h=c-1;break;case 2:d=c-2;h=c-1}var v=t[c],g=t[d],p=t[h];if(0===o[p]&&n(v,g,p)){i[f]=-1;i.push(a[d],a[h]);o[p]=1}}return Kl(i,t)}var Ql={__proto__:null,longestSideConcavity:Xl,circleConcavity:Ul,concave:Hl},Jl=function(){function e(e,t){this.xs=[];this.ys=[];this.bins=[];this.xs.push({index:0,size:e});this.ys.push({index:0,size:t});this.bins.push({filled:0,data:[!1]})}e.prototype.rows=function(){return this.ys.length};e.prototype.cols=function(){return this.xs.length};e.prototype.splitRow=function(e,t){for(var n=this,r=n.xs,i=n.ys,o=n.bins,a=i.length,u=i[e].index,s=0;s<r.length;s++)o[s].data.push(o[s].data[u]);var l={index:a,size:t};i.splice(e+1,0,l);return i[e].size-=t};e.prototype.splitColumn=function(e,t){var n=this,r=n.xs,i=n.bins,o=r.length,a=r[e].index;i.push({data:i[a].data.slice(0),filled:i[a].filled});var u={index:o,size:t};r.splice(e+1,0,u);return r[e].size-=t};e.prototype.isEmpty=function(e,t){return!this.bins[this.xs[t].index].data[this.ys[e].index]};e.prototype.totalFilled=function(e){return this.bins[this.xs[e].index].filled};e.prototype.fillRange=function(e,t,n,r){for(var i=this,o=i.xs,a=i.ys,u=i.bins,s=n;s<=r;s++)for(var l=u[o[s].index],f=e;f<=t;f++){l.data[a[f].index]=!0;l.filled+=a[f].size}};e.prototype.width=function(e){return this.xs[e].size};e.prototype.height=function(e){return this.ys[e].size};return e}();function _l(e,t){for(var n=1.2,r=0,i=0,o=0,a=0;a<e.length;a++){var u=yl.width(e[a]),s=yl.height(e[a]);r+=u*s*n;i=Math.max(i,u);o=Math.max(o,s)}var l=Math.sqrt(r/t),f=l*t;return yl.create(0,Math.max(i,f),0,Math.max(o,l))}var ql=function(){function e(e){void 0===e&&(e=os);this.tolerance=e}e.prototype.addRectangle=function(e,t,n){for(var r=yl.height(n),i=yl.width(n),o=0,a=0,u=0,s=0,l=t.rows(),f=yl.width(e)-i,c=yl.height(e);o<=f;)if($l(e,u,r)>0||c-t.totalFilled(a)<r){o+=t.width(a++);u=0;s=0}else{for(;s<l&&!t.isEmpty(s,a);)u+=t.height(s++);if(s<l&&$l(e,u,r)<=0){if(this.tryToFit(t,s,a,i,r,this.tolerance)){yl.moveTo(n,e.tl.x+o,e.tl.y+u);return!0}u+=t.height(s++)}}return!1};e.prototype.tryToFit=function(e,t,n,r,i,o){for(var a=e.width(n),u=e.height(t),s=e.cols(),l=e.rows(),f=n,c=t;u<i-o;){if(++c>=l)return!1;u+=e.height(c)}for(;a<r-o;){if(++f>=s)return!1;a+=e.width(f)}for(var d=n;d<=f;d++)for(var h=t;h<=c;h++)if(!e.isEmpty(h,d))return!1;var v=a-r;v>o&&e.splitColumn(f,v);var g=u-i;g>o&&e.splitRow(c,g);e.fillRange(t,c,n,f);return!0};e.prototype.solve=function(e,t){void 0===t&&(t=_l(e,1));for(var n=new Jl(yl.width(t),yl.height(t)),r=0;r<e.length;r++)if(!this.addRectangle(t,n,e[r])){var i=new Int32Array(e.length-r);qs(i,r);return{bounds:t,bins:n,unpacked:i}}return{bounds:t,bins:n,unpacked:[]}};return e}();function $l(e,t,n){return n-(yl.height(e)-t)}var ef={__proto__:null,DynamicBins:Jl,estimateDimensions:_l,Solver:ql},tf=-1;function nf(e,t){var n=new Int32Array(e);void 0!==t&&0!==t&&Hs(n,t);return n}function rf(e,t,n,r){var i={done:!1,value:r},o=0;return{next:function(){if(t<n){r[0]=e[o++];r[1]=e[o++];r[2]=t++}else i.done=!0;return i},size:n-t}}function of(e,t,n,r,i){var o={done:!1,value:i},a=0;return{next:function(){for(;t<n;){var r=e[a++],u=e[a++];if(r!==tf&&u!==tf){i[0]=r;i[1]=u;i[2]=t++;return o}t++}o.done=!0;return o},size:n-t-r}}function af(e,t){var n={value:null,done:!1},r={value:null,done:!0,group:null};function i(){for(;r.done;){var i=e.next();if(i.done){n.done=!0;return n}t.reset(i.value);r=t.next()}n.value=[r.group,r.value];r=t.next();return n}return{next:i}}function uf(e,t,n){void 0===n&&(n=nf(t.countVertices()));var r=t.adjacency(),i=Array.isArray(e)?e:[e];Hs(n,-1);i.forEach((function(e){return n[e]=e}));sf(i,r);function o(){for(;;){var e=r.next();if(e.done){if(!sf(i,r))return e}else{var t=e.value;if(n[t]<0){n[t]=e.group;i.push(t);return e}}}}return{next:o}}function sf(e,t){for(;e.length>0;){var n=e.shift();if(t.reset(n)>0)return!0}return!1}function lf(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function ff(e){return lf(e)?hf({},e):e}var cf=new Map;function df(e,t){if(cf.has(t))return cf.get(t);cf.set(t,e);Object.keys(t).forEach((function(n){var r=t[n];Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]?lf(r)&&lf(e[n])&&(e[n]=df(ff(e[n]),r)):e[n]=ff(r)}));return e}function hf(e,t){return lf(e)&&lf(t)?df(e,t):e}function vf(e){for(var t=1;t<arguments.length;t++)hf(e,arguments[t]);cf.clear();return e}function gf(e,t,n){return e<=n&&n<t}function pf(e,t,n){return e.indexOf(t)>=0?t:n}function mf(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n){n=!0;t=e.apply(this,r)}return t}}var yf=function(){function e(e){this.buffer=e;this.start=0;this.size=this.end=e.length}e.wrapArray=function(t){return new e(t)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};e.prototype.has=function(e){
return gf(this.start,this.end,e)};return e}(),bf=function(){function e(e,t){this.size=e;this.value=t;this.start=0;this.end=e}e.fromSize=function(t,n){return new e(t,n)};e.prototype.get=function(){return this.value};e.prototype.set=function(){};e.prototype.has=function(e){return gf(this.start,this.end,e)};return e}(),xf=function(){function e(e,t){this.buffer=e;this.inverse=t;this.start=0;this.size=this.end=e.length}e.fromValues=function(t){for(var n=[],r={},i=0,o=t.next();!1===o.done;o=t.next()){var a=o.value;if(void 0===r[a]){r[a]=i;n.push(a);i++}}return new e(n,r)};e.fromKeyValuePairs=function(t){for(var n=[],r={},i=0,o=t.next();!1===o.done;o=t.next()){var a=o.value,u=a[0],s=a[1];if(void 0!==r[s])throw new Error("Value must be unique: "+s);if(u>=0){for(;n.length<=u;){n.push(null);i++}n[u]=s;r[s]=u;i--}}if(i>0)throw new Error("Keys must be contiguous");return new e(n,r)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.has=function(e){return gf(this.start,this.end,e)};e.prototype.set=function(e,t){this.buffer[e]=t;this.inverse[t]=e};e.prototype.getUniqueInverse=function(e){return this.inverse[e]};e.prototype.getInverse=function(e){return Is(this.inverse[e])};return e}();function Af(e){for(var t=e.iterateAdjacentPairs(),n=new Int32Array(e.countVertices()),r=t.next();!1===r.done;r=t.next()){n[r.value[0]]++;n[r.value[1]]++}return yf.wrapArray(n)}function wf(e,t){void 0===t&&(t=Af(e));for(var n=e.countVertices(),r=e.iterateAdjacentPairs(),i=new Float32Array(e.countVertices()),o=r.next();!1===o.done;o=r.next()){var a=o.value,u=a[0],s=a[1];i[u]+=t.get(s);i[s]+=t.get(u)}for(var l=0;l<n;l++)i[l]/=Math.max(1,t.get(l));return yf.wrapArray(i)}function Mf(e,t){void 0===t&&(t=0);for(var n=new Int32Array(e.countVertices()),r=Ws(uf(t,e,n),t),i=r!==t?Ws(uf(r,e,n),r):r,o=0,a=i;a!==r;o++)a=n[a];return{diameter:o,extremes:[r,i]}}function Ef(e,t){void 0===t&&(t=Af(e));for(var n=e.countVertices(),r=new Int32Array(n),i=new Int32Array(n),o=new Int32Array(n),a=0,u=0;u<n;u++){var s=t.get(u);a=Math.max(a,s);r[u]=s}if(0===a)return yf.wrapArray(r);var l=new Int32Array(a+1);for(u=0;u<n;u++)l[r[u]]++;s=0;for(var f=0;s<=a;s++){var c=l[s];l[s]=f;f+=c}var d=l;for(u=0;u<n;u++){var h=d[s=r[u]];o[h]=u;d[s]++;i[u]=h}s=0;for(var v=0;s<=a;s++){var g=d[s];d[s]=v;v=g}for(var p=e.adjacency(),m=d[1];m<n;m++){var y=o[m],b=r[y];p.reset(y);for(var x=p.next();!1===x.done;x=p.next()){var A=x.value,w=r[A];if(w>b){var M=i[A],E=d[w];if(E!==M){var I=o[E];Js(o,E,M);i[A]=E;i[I]=M}d[w]++;r[A]--}}}return yf.wrapArray(r)}var If=function(){function e(e,t,n){this.fwd=e;this.bwd=t;this.emptyValue=-1;this.start=0;this.size=this.end=n}e.identiy=function(t){return new e(null,null,t)};e.emptyMap=function(t){return new e([],null,t)};e.fromIdPairs=function(t){for(var n=null,r=null,i=-1,o=t.next();!1===o.done;o=t.next()){var a=o.value,u=a[0],s=a[1];if(!(u<0)){i=Math.max(u,i);if(u!==s){n=[];r=[];for(var l=0;l<i;l++){n.push(l);r.push(l)}break}}}for(;!1===o.done;o=t.next()){var f=o.value;u=f[0],s=f[1];if(!(u<0)){i=Math.max(u,i);for(;n.length<=u;)n.push(-1);for(;r.length<=s;)r.push(-1);n[u]=s;s>=0&&(r[s]=u)}}return new e(n,r,i+1)};e.prototype.get=function(e){return Cf(e,this.fwd)};e.prototype.getUniqueInverse=function(e){return Cf(e,this.bwd)};e.prototype.getInverse=function(e){return Is(this.getUniqueInverse(e))};e.prototype.has=function(e){return gf(this.start,this.end,e)};e.prototype.set=function(){};return e}();function Cf(e,t){return null!==t?e<t.length?t[e]:-1:e}function Sf(e,t,n){var r=xf.fromValues(e),i=function(e){var t=e[0],n=e[1],i=e[2];return[r.getUniqueInverse(t),r.getUniqueInverse(n),i]},o=n.buildKeyed(Cs(t,i),e.size),a=xf.fromKeyValuePairs(o);return{vertexMap:r,edgeMap:a}}function kf(e){var t=null,n=null;if("function"!=typeof e){t=e.defaultValue;void 0!==e.map&&(n=e.map)}else n=e;return{map:n,defaultValue:t}}function Lf(e,t,n){n=void 0!==n?n:e.size;var r={},i=[];Object.keys(t).forEach((function(e){var o=kf(t[e]),a=o.map,u=o.defaultValue;if(null!==a){for(var s=[],l=0;l<n;l++)s.push(u);i.push({buffer:s,map:a});r[e]=yf.wrapArray(s)}else r[e]=bf.fromSize(n,u)}));for(var o=e.next(),a=i.length;!o.done;o=e.next()){var u=o.value,s=u[0],l=u[1];if(s>=0&&s<n)for(var f=0;f<a;f++){var c=i[f];c.buffer[0|s]=c.map(l)}}return r}function Rf(e,t){return Object.keys(t).reduce((function(n,r){n[r]=Tf(e,t[r]);return n}),{})}function Tf(e,t){var n=kf(t),r=n.map,i=n.defaultValue;if(null===r)return bf.fromSize(e,i);for(var o=[],a=0;a<e;a++)o.push(r(a));return yf.wrapArray(o)}function Bf(e,t){var n=-1,r=[n,n],i=Cs(Bs(e.start,e.end),(function(i){var o=e.get(i),a=t.getUniqueInverse(o);r[0]=i;r[1]=void 0!==a?a:n;return r}));return If.fromIdPairs(i)}function Of(e,t,n){if(void 0===e[t]){var r;Object.defineProperty(e,t,{enumerable:!0,get:function(){void 0===r&&(r=n(e));return r}})}}function Gf(e,t){Object.keys(t).forEach((function(n){return Of(e,n,t[n])}))}var Df=function(){function e(e,t,n){this.tourStart=e;this.tours=t;this.nTours=n;this.defaultValue=-1;this.start=0;this.size=this.end=t.length}e.prototype.iterateGroups=function(){for(var e=this.tourStart,t=[],n=0,r=this.nTours;r>0;){if(e[n]===n){t.push(n);r--}n++}return Ds(t)};e.prototype.iterateGroup=function(e){e=this.tourStart[e];var t=this.tours,n={done:!1,value:e},r=!1;return{next:function(){n.value=e;n.done=r;r||(t[e]>e?e=t[e]:r=!0);return n}}};e.prototype.groupSize=function(e){e=this.tourStart[e];for(var t=1;e<(e=this.tours[e]);)t++;return t};e.prototype.countGroups=function(){return this.nTours};e.prototype.get=function(e){return this.tourStart[e]};e.prototype.set=function(){throw new Error("Readonly")};e.prototype.has=function(e){return e>=this.start&&e<this.size};e.build=function(t){for(var n=t.length,r=new Int32Array(n),i=new Int32Array(n),o=0,a=0;a<n;a++){var u=Ff(t,a,!1),s=void 0;if(u===a){o++;s=a}else s=i[u];t[a]=u;r[s]=a;i[u]=a}return new e(t,r,o)};return e}();function Ff(e,t,n){for(var r=t,i=0;r>=0&&e[r]!==r;){r=e[r];i++}if(n)for(var o=void 0;i>1;){o=t;t=e[t];e[o]=r;i--}return r}function Zf(e){return Pf(e.iterateAdjacentPairs(!1),e.countVertices())}function Pf(e,t){var n=new Int32Array(t);qs(n,0);for(var r=e.next();!1===r.done;r=e.next()){var i=r.value,o=i[0],a=i[1],u=Ff(n,o,!0),s=Ff(n,a,!0);u>s?n[u]=s:u<s&&(n[s]=u)}return Df.build(n)}function Yf(e){var t=new Int32Array(e);return Df.build(t)}var zf=function(){function e(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!1);this.directedCategory=e;this.selfLoops=t;this.rewriteEdges=n;this.badIncidence=0;this.initialize(0,0)}e.prototype.rawPairs=function(){return this.pairs};e.prototype.iterateEdges=function(){return Bs(0,this.E)};e.prototype.iterateVertices=function(){return Bs(0,this.V)};e.prototype.countVertices=function(){return this.V};e.prototype.countEdges=function(){return this.E};e.prototype.countInvalidIncidence=function(){this.buildAdjacency();return this.badIncidence};e.prototype.source=function(e){return this.pairs[2*e]};e.prototype.target=function(e){return this.pairs[2*e+1]};e.prototype.containsEdge=function(e){return gf(0,this.E,e)};e.prototype.containsVertex=function(e){return gf(0,this.V,e)};e.prototype.incidence=function(){this.buildAdjacency();return Vf(this.bufferIndex,this.buffers.incidence)};e.prototype.adjacency=function(){this.buildAdjacency();return Vf(this.bufferIndex,this.buffers.adjacency)};e.prototype.iterateAdjacentPairs=function(e,t){void 0===t&&(t=[-1,-1,-1]);if(0===this.countEdges())return Es();this.buildAdjacency();return!e&&this.badIncidence>0?of(this.pairs,0,this.E,this.badIncidence,t):rf(this.pairs,0,this.E,t)};e.prototype.isAdjacent=function(e,t){throw new Error("not impl")};e.prototype.isIncident=function(e,t){throw new Error("not impl")};e.prototype.insertEdge=function(e,t){var n=t[0],r=t[1],i=2*e;if(gf(0,this.V,n)&&gf(0,this.V,r)&&(this.selfLoops||n!==r)){this.pairs[i]=n;this.pairs[i+1]=r;this.bufferIndex[n]++;this.bufferIndex[r]++}else{this.badIncidence++;this.pairs[i]=tf;this.pairs[i+1]=tf}};e.prototype.buildAdjacency=function(){if(null===this.buffers){for(var e=this.pairs,t=this.bufferIndex,n=this.rewriteEdges,r="d"===this.directedCategory,i=this.countVertices(),o=0;o<e.length;o+=2)if(e[o]!==tf){n&&t[e[o]]<t[e[o+1]]&&Js(e,o,o+1);r&&t[e[o+1]]--}var a=0;for(o=0;o<i;o++){var u=t[o];t[o]=a;a+=u}t[i]=a;this.buffers=Wf(a);var s=Xf(e,t,this.buffers,r);if(s>0){var l=this.buffers,f=l.adjacency,c=l.incidence,d=0;for(o=0;o<i;o++){var h=t[o],v=t[o+1];t[o]-=d;for(;h<v;){if(f[h]>=0){f[h-d]=f[h];c[h-d]=c[h]}else d++;h++}}t[i]-=d;this.badIncidence+=s}}};e.prototype.buildKeyed=function(e,t){var n=this;this.initialize(t,e.size);var r=0,i={value:[-1,void 0],done:!1};return{next:function(){var t=e.next();if(t.done)i.done||(i.done=!0);else{n.insertEdge(r,t.value);i.value[0]=r++;i.value[1]=t.value[2]}return i},start:0,end:e.size}};e.prototype.build=function(e,t){this.initialize(t,e.size);for(var n=0,r=e.next();!r.done;r=e.next(),n++)this.insertEdge(n,r.value)};e.prototype.initialize=function(e,t){this.V=e;this.E=t;this.bufferIndex=nf(e+1);this.pairs=nf(2*t,tf);this.badIncidence=0;this.buffers=null};return e}();function Vf(e,t){var n={done:!1,group:0,value:0},r=e[0],i=e.length>1?e[1]:r;return{reset:function(t){r=e[t];var o=(i=e[t+1])-r;n.group=t;n.done=0===o;return o},next:function(){r>=i?n.done=!0:n.value=t[r++];return n}}}function Wf(e){return{incidence:nf(e,tf),adjacency:nf(e,tf)}}function Xf(e,t,n,r){for(var i=0,o=0,a=0;a<e.length;a+=2,o++){var u=e[a],s=e[a+1];if(u!==tf&&s!==tf){if(Uf(n,t[u],s,o)<0||!r&&Uf(n,t[s],u,o)<0){e[a]=tf;e[a+1]=tf;i++}}}return i}function Uf(e,t,n,r){for(var i=e.adjacency,o=e.incidence;t<i.length;){var a=i[t];if(a===tf){i[t]=n;o[t]=r;return t}if(a===n)return-1;t++}return-1}var Nf=function(){function e(e){this.parent=e;this.vInv=nf(e.countVertices(),tf)}e.prototype.induceAll=function(e){return this.induceFrom(Cs(e.iterateGroups(),(function(t){return e.iterateGroup(t)})))};e.prototype.induceFrom=function(e,t){void 0===t&&(t=function(){return!0});var n=this,r=n.vInv,i=n.parent,o=i.incidence(),a=nf(i.countEdges()),u=nf(i.countVertices()),s=0,l=0,f=0,c=0;return Cs(e,(function(e){c=f;for(;l<s;)r[u[l++]]=tf;for(var n=e.next();!1===n.done;n=e.next(),s++){u[s]=n.value;r[n.value]=s-l}for(var d=l;d<s;d++){var h=u[d];o.reset(h);for(var v=o.next();!1===v.done;v=o.next()){var g=i.target(v.value);h!==g&&r[g]>=0&&t(v.value)&&(a[f++]=v.value)}}var p={vs:u.subarray(l,s),es:a.subarray(c,f)};return[Ds(p.es,(function(e){return[r[i.source(e)],r[i.target(e)],e]})),p]}))};return e}(),jf={__proto__:null,items:nf,degrees:Af,avgNeighborDegree:wf,diameter:Mf,kcore:Ef,buildFromLabeledIterators:Sf,buildPropertyBagFrom:Lf,buildPropertyBag:Rf,buildProperty:Tf,buildLabelMapping:Bf,defineLazyProperty:Of,defineLazyProperties:Gf,DefaultIdMapping:If,connectedComponents:Zf,connectedComponentsFrom:Pf,all:Yf,ArrayPropertyMap:yf,ConstantPropertyMap:bf,StringLabelMap:xf,AdjacencyGraph:zf,SubgraphBuilder:Nf,byGroup:af,bfs:uf},Kf=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=0);this.padding=e;this.rotation=t}e.prototype.applyTo=function(e,t,n,r,i,o){void 0===i&&(i=0);if(0===t.size)return i;void 0===o&&qs(o=new Int32Array(t.size));Array.prototype.sort.call(o,(function(e,t){return r.get(t)-r.get(e)}));var a=0;if(0===i){var u=o[a];t.set(u,e.x);n.set(u,e.y);i+=r.get(u)+this.padding;a++}for(var s=this.rotation,l=Math.PI,f=2*l,c=o.length;a<c;){var d=this.sizeRing(o,a,r,i,l),h=this.positionRing(e,t,n,r,o,a,2,s,l+s,i);h+=a+d.n>=c?this.positionRing(e,t,n,r,o,a,1,f+s,f+s,i,-1):this.positionRing(e,t,n,r,o,a,1,l+s,f+s,i);i+=2*d.meanRadius+this.padding;a+=h}return i};e.prototype.sizeRing=function(e,t,n,r,i){void 0===i&&(i=2*Math.PI);for(var o=0,a=0;t<e.length;){var u=e[t++];if((i-=2*(n.get(u)+.5*this.padding)/r)<0)break;a+=n.get(u);o++}return{n:o,meanRadius:o>0?a/o:0}};e.prototype.positionRing=function(e,t,n,r,i,o,a,u,s,l,f){void 0===f&&(f=1);for(var c=0,d=Hf(u-s);o<i.length;){var h=i[o];if(h>=0){var v=r.get(h)+.5*this.padding,g=f*(v/(v+l));if(d!==Hf(u+2*g-s))break;t.set(h,e.x+Math.cos(u+g)*(v+l));n.set(h,e.y-Math.sin(u+g)*(v+l));i[o]=-1;u+=2*g;c++}o+=a}return c};return e}();function Hf(e){return e>0?1:-1}var Qf=function(){function e(e,t,n,r){void 0===e&&(e=0);void 0===n&&(n=!0);this.padding=e;this.focalPoint=t;this.robust=n;this.perturb=r;this.state=null}e.prototype.build=function(e,t,n,r,i){var o=e.size,a=this.padding;r=null!=r?r:sl([o],"f32",1);var u=new zf("u",!1),s=[];if(o>2){var l=Yl(e,t,s,this.robust?o:0,this.perturb);if(null!==l)return l;u.build(Zl(s),o);var f=qf(u,e,t,n);f.length>0&&u.build(Vs(Ds(f)),o)}else if(2===o){u.build(Ds([[0,1]]),o);fs(e.get(0),t.get(0),e.get(1),t.get(1))<os&&e.set(1,e.get(1)+2*os)}else u.build(Es(),o);var c=function(r,i){var o=fs(e.get(r),t.get(r),e.get(i),t.get(i)),u=n.get(r)+n.get(i)+a;return o-u<u},d=Jf(this.focalPoint,e,t,n),h=d.min,v=_f(h,d.distances,r,u,c,i);this.state={root:h,xs:e,ys:t,rs:n,es:v.es,triangles:s,predecessors:v.predecessors,vs:v.vs,ss:r};return null};e.prototype.pack=function(e){void 0===e&&(e=.5);var t=this.state,n=t.xs,r=t.ys,i=t.rs,o=t.predecessors,a=t.vs,u=t.ss,s=t.root,l=this,f=l.focalPoint,c=l.padding;if(s>=0){var d=u.get(s)*e;n.set(s,vs(f.x,n.get(s),d));r.set(s,vs(f.y,r.get(s),d))}for(var h=c*e*.5,v=a.length,g=0,p=0;p<v;p++){var m=a[p],y=o[m],b=n.get(m),x=r.get(m),A=n.get(y)-b,w=r.get(y)-x,M=ls(A,w),E=i.get(m)+i.get(y)+c;if(M>os){var I=1/M,C=(M-E)*I;g+=C*C;C>0&&(C=C*C+h*I);C*=e*u.get(m);n.set(m,b+A*C);r.set(m,x+w*C)}}return v>0?g/v:0};e.prototype.packTowards=function(e,t,n){void 0===n&&(n=.5);for(var r=this.state,i=r.xs,o=r.ys,a=r.ss,u=i.size,s=0;s<u;s++){var l=a.get(s)*n;i.set(s,vs(e.get(s),i.get(s),l));o.set(s,vs(t.get(s),o.get(s),l))}};e.prototype.solve=function(e,t,n){void 0===t&&(t=.5);n=null!=n?n:Math.max(.25*this.padding,os);var r=this,i=r.padding,o=r.focalPoint,a=this.state,u=a.xs,s=a.ys,l=a.rs,f=a.es,c=a.ss,d=0;do{d=0;for(var h=0;h<f.length;){var v=f[h++],g=f[h++],p=u.get(v),m=s.get(v),y=l.get(v),b=u.get(g),x=s.get(g),A=l.get(g),w=b-p,M=x-m,E=ls(w,M),I=y+A+i;if(E+n<I&&E>0){d++;var C=$f(p,m,b,x,y,A,c.get(v),c.get(g),o),S=t*((E-I)/E);w*=S;M*=S;u.set(v,p+C*w);s.set(v,m+C*M);u.set(g,b-(1-C)*w);s.set(g,x-(1-C)*M)}}}while(--e>0&&d>0);return d};return e}();function Jf(e,t,n,r){for(var i=t.size,o=new Float32Array(i),a=-1,u=0,s=1/0;u<i;u++){var l=fs(t.get(u),n.get(u),e.x,e.y),f=r.get(u);o[u]=l+f;if(l<s){a=u;s=l}}return{min:a,distances:o}}function _f(e,t,n,r,i,o){var a=r.countEdges()-r.countInvalidIncidence(),u=r.countVertices(),s=void 0!==o,l=nf(u),f=nf(2*a),c=nf(u);if(u>0&&a>0){for(var d=r.adjacency(),h=uf(e,r,l),v=0,g=0,p={value:e,done:!1};!1===p.done;p=h.next()){var m=p.value,y=n.get(m),b=t[m];d.reset(m);for(var x=-1,A=d.next(),w=b;!1===A.done;A=d.next()){var M=A.value,E=n.get(M),I=t[M];if(!(I>b||y+E<os)){if(i(m,M)){f[v++]=m;f[v++]=M}if(I<w&&(!s||o.get(M)>0)){x=M;w=I}}}if(x>=0&&y>os){l[m]=x;c[g++]=m}}f=f.subarray(0,v);c=c.subarray(0,g)}return{predecessors:l,es:f,vs:c}}function qf(e,t,n,r){for(var i=e.countVertices(),o=e.adjacency(),a=e.adjacency(),u=[],s=0;s<i;s++){o.reset(s);for(var l=r.get(s),f=o.next();!f.done;f=o.next()){if(r.get(f.value)<l){a.reset(f.value);for(var c=a.next();!c.done;c=a.next())if(!(c.value<=s)){var d=l+r.get(c.value);fs(t.get(c.value),n.get(c.value),t.get(s),n.get(s))-d<.5*d&&u.push(s,c.value)}}s<f.value&&u.push(s,f.value)}}return u}function $f(e,t,n,r,i,o,a,u,s){var l=0;if(a!==u)l=(a-u)/(a+u);else{var f=fs(e,t,s.x,s.y),c=fs(n,r,s.x,s.y),d=Math.min(f-i,c-o);l=(f-i-(c-o))/(Math.max(f+i,c+o)-d)}return.5*(1+l)}var ec={__proto__:null,InterleavingCircles:Kf,Solver:Qf};function tc(e,t,n,r,i){void 0===r&&(r=nf(n.countVertices()));void 0===i&&(i=new Float32Array(n.countVertices()));var o=t.get(e),a=uf(e,n,r);i[e]=0;for(var u=0,s=0,l=a.next();!1===l.done;l=a.next(),u++){var f=l.value,c=r[f],d=.5*i[c];if(c!==e){var h=t.get(c),v=t.get(f),g=Rl(Ll(h.x-o.x,h.y-o.y),Ll(v.x-h.x,v.y-h.y)),p=.5+.5*Math.cos(.5*Math.PI*(g+1));d=Math.max(d,p*p*p)}i[f]=d;s+=d}return u>0?s/u:0}function nc(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<e.r-t.r+os}function rc(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,u=t.r,s=o-n,l=a-r,f=u-i,c=Math.sqrt(s*s+l*l);return{x:(n+o+s/c*f)/2,y:(r+a+l/c*f)/2,r:(c+i+u)/2}}function ic(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,u=t.y,s=t.r,l=n.x,f=n.y,c=n.r,d=2*(r-a),h=2*(i-u),v=2*(s-o),g=r*r+(i*i-o*o-a*a-u*u)+s*s,p=2*(r-l),m=2*(i-f),y=2*(c-o),b=r*r+(i*i-o*o-l*l-f*f)+c*c,x=p*h-d*m,A=(h*b-m*g)/x-r,w=(m*v-h*y)/x,M=(p*g-d*b)/x-i,E=(d*y-p*v)/x,I=w*w+E*E-1,C=2*(A*w+M*E+o),S=A*A+M*M-o*o,k=(-C-Math.sqrt(C*C-4*I*S))/(2*I);return{x:A+w*k+r,y:M+E*k+i,r:k}}function oc(e,t){switch(t.length){case 0:return{x:0,y:0,r:0};case 1:return e[t[0]];case 2:return rc(e[t[0]],e[t[1]]);default:var n=ic(e[t[0]],e[t[1]],e[t[2]]);if(!(n.r>=0)){var r=rc(e[t[0]],e[t[1]]),i=rc(e[t[0]],e[t[2]]),o=rc(e[t[1]],e[t[2]]);n=(n=r.r>i.r?r:i).r>o.r?n:o}return n}}function ac(e){if(0===e.length)return null;for(var t=e.length,n={i:0,prev:null,R:[],c:null};;){var r=n.i,i=n.R,o=n.prev,a=n.c;if(r===t||3===i.length){o.c=oc(e,i);n=o}else if(null===a)n={i:r+1,prev:n,R:i,c:null};else if(nc(a,e[r])){if(null===o)return a;o.c=a;n=o}else n={i:r+1,prev:n,R:i.concat([r]),c:null}}}var uc=function(){function e(e,t){void 0===e&&(e=0);this.maxPerturbations=e;this.rng=t;this.mesh=new zf("u",!1);this.clusterState=null}Object.defineProperty(e.prototype,"clusters",{get:function(){return null===this.clusterState?null:this.clusterState.cc},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"rejectedEdges",{get:function(){return null===this.clusterState?-1:this.clusterState.rejectedEdges},enumerable:!1,configurable:!0});e.prototype.triangulate=function(e,t,n,r){var i=e.length;if(i<=3){switch(i){case 3:r.push(e[0],e[1],e[2]);case 2:r.push(e[0],e[1],e[0]);case 1:r.push(e[0],e[0],e[0])}return null}return zl(e,t,n,r,this.maxPerturbations,xs.uniform(0,1,this.rng))};e.prototype.buildSubsets=function(e,t,n){for(var r=[],i=e.next();!i.done;i=e.next()){var o=this.triangulate(i.value,t,n,r);if(null!==o)return o}this.mesh.build(Zl(r),t.size);this.xs=t;this.ys=n;return null};e.prototype.build=function(e,t){var n=new Int32Array(e.size);qs(n);return this.buildSubsets(Is(n),e,t)};e.prototype.evaluateEdges=function(e,t){for(var n=this,r=n.mesh,i=n.xs,o=n.ys,a=r.countEdges(),u=r.iterateAdjacentPairs(!1),s=new Int32Array(a),l=new Float32Array(a),f=0,c=u.next();!c.done;c=u.next()){var d=c.value,h=d[0],v=d[1],g=d[2],p=t.get(h),m=t.get(v),y=fs(i.get(h),o.get(h),i.get(v),o.get(v))-(p+m);if(y<=Math.min(p,m)*e){l[g]=Math.max(0,y);s[g]=1;f++}}return{edgeMask:s,separations:l,valid:f}};e.prototype.evaluate=function(e,t,n,r){void 0===r&&(r=2);var i=this.evaluateEdges(e,t),o=i.valid,a=i.edgeMask,u=i.separations,s=t.size,l=this.mesh,f=0,c=lc(a,l,s);if(n){for(var d=l.incidence(),h=c.iterateGroups(),v=new Float32Array(o),g=new Int32Array(o),p=h.next();!p.done;p=h.next()){for(var m=af(c.iterateGroup(p.value),d),y=0,b=m.next();!b.done;b=m.next()){var x=b.value[1];if(a[x]>0){v[y]=u[x];g[y]=x;a[x]=0;y++}}for(var A=ml(ul(v,[y])),w=A[0],M=A[1]+r*w,E=0;E<y;E++)v[E]<=M?a[g[E]]=1:f++}f>0&&(c=lc(a,l,s))}this.clusterState={rejectedEdges:f,edgeMask:a,cc:c};return l};e.prototype.describeAll=function(e,t,n){for(var r=this.clusterState.cc,i=new Map,o=r.iterateGroups(),a=o.next();!1===a.done;a=o.next()){var u=Ps(r.iterateGroup(a.value)),s=dl(e,u),l=dl(t,u),f=dl(n,u),c=u.length,d={size:c,radius:0,center:{x:pl(s),y:pl(l)}};if(1===c)d.radius=f.get(0);else{for(var h=new Float32Array(c),v=d.center,g=v.x,p=v.y,m=0;m<c;m++)h[m]=fs(s.get(m),l.get(m),g,p);var y=pl(ul(h));d.radius=1.5*y+pl(f)}i.set(a.value,d)}return i};e.prototype.separations=function(e,t,n){var r=this.mesh,i=this.clusterState.cc,o=nf(r.countVertices());return function(a,u){for(var s=i.get(a),l=i.get(u),f=uf(a,r,o),c=f.next();!1===c.done&&i.get(c.value)!==l;)c=f.next();is(i.get(c.value));for(var d=0,h=a,v=u,g=c.value;g!==a;){var p=o[g],m=i.get(g),y=i.get(p);if(m!==y){var b=fs(e.get(g),t.get(g),e.get(p),t.get(p))-(n.get(g)+n.get(p));if(b>d){d=b;h=g;v=p}if(y===s)break}g=p}return[h,v]}};return e}(),sc=[-1,-1];function lc(e,t,n){return Pf(Ds(e,(function(e,n){return e>0?[t.source(n),t.target(n)]:sc})),n)}function fc(e,t){void 0===t&&(t=ws());return new uc(e,t)}var cc,dc={__proto__:null,nbody:Sl,delaunay:Wl,hull:Ql,circlePacking:ec,binPacking:ef,radialExtents:ac,dbscan:fc,LinearQuadTree:Ml,get Rect(){return yl},fastStress:tc,origin:kl,unit:Ll,dot:Rl,circleIntersecting:Tl,pointExtents:Bl,circleExtents:Ol};!function(e){e.position2d="@@pos2d";e.group="@@group";e.groupStress="@@groupStress";e.radius="@@radius";e.sparseRadius="@@sparseRadius";e.degree="@@degree";e.avgNeighbourDegree="@@avgDegree";e.kcore="@@kcore";e.speed="@@speed";e.groupSpeed="@@groupSpeed";e.groupCenter="@@groupCenter";e.vAdaptive="@@vAdaptive";e.eAdaptive="@@eAdaptive"}(cc||(cc={}));var hc={seed:void 0,consistentSeeds:!1,scale:void 0,adaptive:!1,minGroupSizes:1},vc=function(){function e(e,t,n){var r=this;this.V=e;this.rng=t;this.opts=n;this.groupSeeds=new Map;this.done=!1;this.progress=function(){return r.done?1:0}}e.prototype.state=function(){return this.groupSeeds};e.prototype.initialize=function(e,t){var n=this,r=this.opts;if(r.consistentSeeds&&void 0!==t&&void 0!==e[cc.vAdaptive]){var i=e[cc.vAdaptive],o=e[cc.group];Ss(o.iterateGroups(),(function(e){var a=i.get(e);t.has(a)&&o.groupSize(e)>=r.minGroupSizes&&n.groupSeeds.set(e,t.get(a))}))}};e.prototype.run=function(e){this.done=!0;var t=this,n=t.opts,r=t.groupSeeds,i=e[cc.group],o=xs.uniform(0,1,this.rng);Ss(i.iterateGroups(),(function(t){var a=i.groupSize(t)>=n.minGroupSizes,u=a?n.scale:void 0,s=n.adaptive?pc(e,u):gc(e,t,u);n.consistentSeeds&&a&&(r.has(t)?o.rng.reset(r.get(t)):r.set(t,o.rng.state()));Ss(i.iterateGroup(t),(function(e){var t=o()*Math.PI*2,n=Math.sqrt(o());s(e,Math.cos(t)*n,Math.sin(t)*n)}))}))};return e}();function gc(e,t,n){var r,i=e,o=i[cc.position2d],a=i[cc.group],u=i[cc.radius],s=i[cc.speed],l=void 0===s?bf.fromSize(o.size,1):s,f=(null===(r=e[cc.groupCenter])||void 0===r?void 0:r.get(t))||kl;void 0===n&&(n=mc(a.iterateGroup(t),u));return function(e,t,r){if(l.get(e)>os){var i=o.get(e);i.x=f.x+t*n;i.y=f.y+r*n}}}function pc(e,t){void 0===t&&(t=.5);var n=e,r=n[cc.position2d],i=n[cc.radius],o=n[cc.speed],a=void 0===o?bf.fromSize(r.size,1):o,u=n[cc.vAdaptive];return function(e,n,o){if(a.get(e)>os&&(!u||u.get(e)===u.emptyValue)){var s=i.get(e)*t,l=r.get(e);l.x+=n*s;l.y+=o*s}}}function mc(e,t,n){void 0===n&&(n=.75);var r=0,i=0;Ss(e,(function(e){r+=t.get(e);i++}));r/=i;return Math.sqrt(i/n)*r}function yc(e,t){var n=vf({},t,hc);return new vc(e.countVertices(),bs(n.seed>0?n.seed:ys()),n)}function bc(e,t){for(var n=[],r=t.parts.iterateGroups(),i=r.next();!1===i.done;i=r.next())for(var o=-1,a=t.parts.iterateGroup(i.value),u=a.next();!1===u.done;u=a.next()){var s=t.labels.get(u.value),l=e.labels.getUniqueInverse(s);if(void 0!==l){var f=e.parts.get(l);if(o<0)o=f;else if(o!==f){Ps(t.parts.iterateGroup(i.value),(function(e){return t.labels.get(e)}),n);break}}}return n}var xc={__proto__:null,findAdaptiveGroups:bc},Ac=function(){function e(e){this.maxIterations=e;this.iterations=0}e.prototype.increment=function(e){e?this.iterations=this.maxIterations:this.iterations++};e.prototype.progress=function(){return 0===this.maxIterations?1:this.iterations/this.maxIterations};return e}(),wc={__proto__:null,adaptiveExpand:xc,ProgressCounter:Ac};function Mc(e){return"function"==typeof e.state}var Ec={progress:function(){return 1},initialize:function(){},run:function(){}},Ic=function(){function e(e){this.layouts=e;this.initialized=!1;this.index=0;this.currentLayoutProgress=0}e.prototype.progress=function(){return(this.index+this.currentLayoutProgress)/this.layouts.length};e.prototype.phase=function(){return this.progress()<1?this.layouts[this.index][1]:null};e.prototype.initialize=function(e,t){this.layouts.forEach((function(n){var r=n[0],i=n[1];if(void 0!==r.initialize){var o=t&&t.has(i)?t.get(i):void 0;r.initialize(e,o)}}));this.initialized=!0};e.prototype.run=function(e){for(;this.progress()<1;){var t=this.layouts[this.index][0];if(t.progress()<1){t.run(e);this.currentLayoutProgress=t.progress();break}this.index++;this.currentLayoutProgress=0}};e.prototype.state=function(e){for(var t=this,n=t.layouts,r=t.index,i=Math.min(r,n.length-1),o=new Map,a=0;a<=i;a++){var u=n[a],s=u[0],l=u[1];Mc(s)&&o.set(l,s.state(e))}return o};e.prototype.getPhase=function(e){return this.layouts.reduce((function(t,n){var r=n[0];n[1]===e&&t.push(r);return t}),[])};return e}();function Cc(e,t,n){var r=1/(1+e*e*.001);r=n.min+(n.max-n.min)*r;var i=Math.min(1,1-t);return function(e,t){return Math.min(e*r,vs(t,e,i))}}var Sc={speed:void 0,iterations:{min:10,max:60},focalPoint:0,padding:{proportion:0,min:0,max:0},cpIterations:8,initialize:1,adaptive:!1,liveUpdate:!1,scale:{attenuation:0}},kc=function(){function e(e){this.opts=e;this.groupState=[];this.schedule=null}e.prototype.progress=function(){return this.counter?this.counter.progress():0};e.prototype.initialize=function(e){this.counter=new Ac(this.opts.iterations.max);var t=e,n=t[cc.group],r=t[cc.position2d],i=t[cc.sparseRadius],o=void 0===i?e[cc.radius]:i,a=t[cc.speed],u=n.iterateGroups();if(this.opts.adaptive){var s=e[cc.vAdaptive];Ps(u,(function(e){var t=n.iterateGroup(e);if(s){for(var i=0,u=n.iterateGroup(e),l=u.next();!1===l.done;l=u.next())s.get(l.value)===s.emptyValue&&i++;i>0&&i<n.groupSize(e)&&(t=Ts(t,(function(e){return s.get(e)!==s.emptyValue})))}var f=Lc(t,r,o);f.id=e;var c=n.iterateGroup(e);for(l=c.next();!1===l.done;l=c.next())if(a.get(l.value)<os){var d=r.get(l.value),h=d.x,v=d.y;f.anchor={x:h,y:v,id:l.value};break}return f}),this.groupState)}else Ps(u,(function(e){return{x:0,y:0,id:e}}),this.groupState)};e.prototype.run=function(e){var t=this.opts,n=e,r=n[cc.group],i=n[cc.position2d];if(null===this.schedule){var o=i.size;if(0===o){this.schedule=new Oc({min:0,max:0},0);this.counter.increment(!0);return}var a=e,u=a[cc.sparseRadius],s=void 0===u?e[cc.radius]:u,l=a[cc.groupSpeed],f=void 0===l?bf.fromSize(o,1):l,c=this.initInternal(i,s,r,f);this.schedule=new Oc(t.iterations,c)}var d=this.runSolver(this.schedule.packingSpeed()),h=this.schedule.update(d.convergence,d.broken);(t.liveUpdate||h>=1)&&this.moveGroups(i,r);this.counter.increment(this.schedule&&this.schedule.progress>=1)};e.prototype.runSolver=function(e){var t=this,n=t.opts,r=t.solver,i=cl(t.xyrs),o=i[0],a=i[1],u=i[2],s=i[3];if(null!==r.build(o,a,u,s,this.attractionMask))throw new Error("packing fail");return{convergence:e>os?r.pack(e):1,broken:r.solve(n.cpIterations,.5)}};e.prototype.initInternal=function(e,t,n,r){var i,o=this,a=this.opts.padding,u=n.countGroups(),s=cl(this.xyrs=sl([4,u],"f32")),l=s[0],f=s[1],c=s[2],d=s[3],h=a.min;this.groupState.forEach((function(r,i){var u=Lc(n.iterateGroup(r.id),e,t),s=u.x,v=u.y;if(o.opts.adaptive)if(r.anchor){var g=e.get(r.anchor.id);s=r.anchor.x+u.x-g.x;v=r.anchor.y+u.y-g.y}else{s=r.x;v=r.y}r.x=u.x;r.y=u.y;var p=hs(u.r*a.proportion-h,0,a.max-h);l.set(i,s);f.set(i,v);c.set(i,u.r+p);d.set(i,1)}));this.opts.adaptive&&this.moveGroups(e,n);var v=[],g=[];this.groupState.forEach((function(e,t){var n=r.get(e.id);n>os?g.push(t):v.push(t);d.set(t,n)}));var p=null,m=this.opts.focalPoint;if("object"!=typeof m){p=Tc(0===m&&v.length>0?v:g,l,f,c)}else p=m;var y=2===this.opts.initialize?v.length>0?1:3:this.opts.initialize;if(3!==y){var b=void 0,x=0;if(1===y&&v.length>0){var A=Rc(l,f,c,p,h,v);b=A.rotation;x=A.radius;if(A.mask){this.attractionMask=A.mask;g.forEach((function(e){return o.attractionMask.set(e,1)}))}}new Kf(2*h,b).applyTo(p,l,f,c,x,g)}var w=bs(37),M=gl(c)[1],E=xs.uniform(-.01*M,.01*M,w);this.solver=new Qf(2*h,p,!0,E);return null!==(i=this.opts.speed)&&void 0!==i?i:.75};e.prototype.moveGroups=function(e,t){for(var n=this,r=n.groupState,i=n.xyrs,o=0;o<r.length;o++){for(var a=r[o],u=i.get(0,o)-a.x,s=i.get(1,o)-a.y,l=i.get(3,o),f=t.iterateGroup(a.id),c=f.next();!c.done;){var d=e.get(c.value);d.x+=u*l;d.y+=s*l;c=f.next()}a.x+=u;a.y+=s}};return e}();function Lc(e,t,n){return ac(Ps(e,(function(e){var r=t.get(e);return{x:r.x,y:r.y,r:n.get(e)}})))}function Rc(e,t,n,r,i,o){var a,u,s=6*i,l=[],f=0;if(null===zl(o,e,t,l,0)){u=sl([e.size],"i32");for(var c=Ul(e,t,n,s),d=Hl(e.size,l,c),h=d.next(),v=1/0;!1===h.done;h=d.next()){var g=h.value,p=g[0],m=g[1];u.set(p,1);u.set(m,1);var y=.5*(e.get(p)+e.get(m)),b=.5*(t.get(p)+t.get(m)),x=fs(r.x,r.y,y,b);if(x<v){a=Math.atan2(r.y-b,y-r.x);v=x}}a<0&&(a+=2*Math.PI)}for(var A=0;A<o.length;A++){var w=o[A],M=fs(r.x,r.y,e.get(w),t.get(w))+n.get(w);M>f&&(f=M)}return{rotation:a,radius:f+=i,mask:u}}function Tc(e,t,n,r){for(var i=e.length,o=0,a=0;a<i;a++){o+=(f=r.get(e[a]))*f}for(var u=0,s=0,l=(a=0,1/o);a<i;a++){var f,c=e[a],d=l*(f=r.get(c))*f;u+=d*t.get(c);s+=d*n.get(c)}for(var h=0,v=(a=0,1/0);a<i;a++){c=e[a];var g=fs(t.get(c),n.get(c),u,s)-r.get(c);if(g<v){h=c;v=g}}return{x:t.get(h),y:n.get(h)}}var Bc=function(){function e(e){this.opts=e;this.initialized=!1;this.groups=[]}e.prototype.progress=function(){return this.counter?this.counter.progress():0};e.prototype.run=function(e){var t=e,n=t[cc.position2d],r=t[cc.group];if(!this.initialized){this.initialized=!0;this.initInternal(n,r);this.counter=new Ac(this.opts.iterations.max*this.groups.length)}var i=this.currGroup;if(!i){if(0===this.groups.length){this.counter.increment(!0);return}i=this.currGroup=this.createGroup(e,this.groups[0])}var o=this.runSolver(this.currGroup),a=i.schedule.update(0,o);(this.opts.liveUpdate||a>=1)&&this.moveGroup(n,r.iterateGroup(this.groups[0]),i.xs,i.ys);if(a>=1){this.currGroup=void 0;this.groups.shift()}this.counter.increment(this.initialized&&0===this.groups.length)};e.prototype.createGroup=function(e,t){var n,r=this,i=e,o=i[cc.radius],a=i[cc.sparseRadius],u=void 0===a?o:a,s=i[cc.speed],l=i[cc.group],f=cl(sl([6,l.groupSize(t)],"f32")),c=f[0],d=f[1],h=f[2],v=f[3],g=f[4],p=f[5],m=this.opts.padding,y=m.min,b=this.sizer;Ss(l.iterateGroup(t),(function(e,t){var n=b(o.get(e),u.get(e)),i=s.get(e),a=hs(n*m.proportion-y,0,m.max-y),l=r.xyOrigin.get(0,e),f=r.xyOrigin.get(1,e);c.set(t,l);d.set(t,f);h.set(t,l);v.set(t,f)
;g.set(t,n+a);p.set(t,i)}));return{schedule:new Oc(this.opts.iterations,null!==(n=this.opts.speed)&&void 0!==n?n:.03),solver:new Qf(2*y,{x:pl(h),y:pl(v)},!1),originXs:c,originYs:d,xs:h,ys:v,rs:g,ss:p}};e.prototype.runSolver=function(e){var t=this.opts,n=e.originXs,r=e.originYs,i=e.xs,o=e.ys,a=e.rs,u=e.ss,s=e.schedule,l=e.solver;if(null!==l.build(i,o,a,u))return 0;var f=s.packingSpeed();f>os&&l.packTowards(n,r,f);return l.solve(t.cpIterations,.5)};e.prototype.initInternal=function(e,t){var n=e.size;this.sizer=Cc(n,this.opts.scale.attenuation,{min:1,max:4});for(var r=this.xyOrigin=sl([2,n],"f32"),i=0;i<n;i++){var o=e.get(i);r.set(0,i,o.x);r.set(1,i,o.y)}var a=this.groups;Ss(t.iterateGroups(),(function(e){t.groupSize(e)>1&&a.push(e)}))};e.prototype.moveGroup=function(e,t,n,r){for(var i=t.next(),o=0;!1===i.done;i=t.next(),o++){var a=e.get(i.value);a.x=n.get(o);a.y=r.get(o)}};return e}(),Oc=function(){function e(e,t){this.opts=e;this.speed=t;this.repulsionOnly=!1;this.iteration=-1;this.progress=0;this.update(1,1)}e.prototype.packingSpeed=function(){return this.repulsionOnly?0:this.speed};e.prototype.update=function(e,t){var n=++this.iteration,r=this.opts,i=r.min,o=r.max;n>=i&&e<=.04&&(this.repulsionOnly=!0);return this.progress=n>=o||0===t&&this.repulsionOnly?1:0};return e}();function Gc(e){return new kc(vf({},e,Sc))}function Dc(e){return new Bc(vf({},e,Sc))}var Fc={__proto__:null,DefaultSchedule:Oc,createGroupPacking:Gc,removeOverlaps:Dc},Zc={aspectRatio:1.33,padding:{proportion:0,min:0,max:0},groupOrder:void 0};function Pc(e,t){return t+2*hs(t*e.proportion,e.min,e.max)}function Yc(e,t){return e.reduce((function(e,n){var r=.5*(yl.width(n)+yl.height(n));return Math.min(e,Pc(t,r))}),2*t.max)}function zc(e,t,n){return n>os?Math.max(ds(t,n),cs(e,n)):e}function Vc(e,t,n,r){var i=e;if(n&&t>os){var o=e/t;i=hs(Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))*t,e,1.33*e)}var a=Math.max(e+2*r.min,i);return zc(Math.max(Pc(r,e),i),a,t)}var Wc=function(){function e(e){var t=this;this.opts=e;this.groupState=[];this.packingResult=null;this.bounds=null;this.progress=function(){return null!==t.packingResult&&0===t.packingResult.unpacked.length?1:0}}e.prototype.run=function(e){var t=e,n=t[cc.position2d],r=t[cc.radius],i=t[cc.sparseRadius],o=void 0===i?r:i,a=t[cc.group],u=t[cc.groupSpeed];null===this.bounds?this.bounds=this.initInternal(n,o,a,u):null!==this.packingResult&&this.packingResult.unpacked.length>0&&yl.scale(this.bounds,1.05,1.05);this.packingResult=this.solver.solve(this.groupState,this.bounds);this.offsetGroups(n,a)};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.aspectRatio,u=i.groupOrder,s=Ps(void 0!==u?Ds(u):n.iterateGroups(),(function(i){var o=Ol(Cs(n.iterateGroup(i),(function(n){var r=e.get(n);return{x:r.x,y:r.y,r:t.get(n)}})));o.filter=r&&r.get(i)<os;o.cxcy=yl.center(o);o.id=i;return o}),this.groupState),l=Yc(s,o),f=s.length>3;s.forEach((function(e){return yl.resize(e,Vc(yl.width(e),l,f,o),Vc(yl.height(e),l,f,o))}));this.solver=new ql(.01*o.min);return _l(s,a)};e.prototype.offsetGroups=function(e,t){for(var n=this.groupState,r=0;r<n.length;r++){var i=n[r];if(!i.filter){for(var o=yl.center(i),a=o.x-i.cxcy.x,u=o.y-i.cxcy.y,s=t.iterateGroup(i.id),l=s.next();!l.done;l=s.next()){var f=e.get(l.value);f.x+=a;f.y+=u}i.cxcy=o}}};return e}();function Xc(e){return new Wc(vf({},e,Zc))}var Uc={__proto__:null,create:Xc};function Nc(e){return"number"==typeof e}var jc=function(){function e(e){var t=this;this.opts=e;this.pinPoint=null;this.done=!1;this.progress=function(){return t.done?1:0}}e.prototype.initialize=function(e){var t=this.opts.pinTo;if(void 0!==t)if(Nc(t)){var n=e[cc.position2d],r=t;if(n.has(r)){var i=n.get(r),o=i.x,a=i.y;this.pinPoint={x:o,y:a}}}else this.pinPoint=t};e.prototype.run=function(e){this.done=!0;var t=this.pinPoint,n=this.opts.pinTo,r=e[cc.position2d];if(t){var i;if(Nc(n))i=r.get(n);else{var o=e[cc.radius],a=Cs(Bs(0,r.size),(function(e){var t=r.get(e);return{x:t.x,y:t.y,r:o.get(e)}}));i=yl.center(Ol(a))}var u=t.x-i.x,s=t.y-i.y;if(Math.abs(u)>os||Math.abs(s)>os)for(var l=0,f=r.size;l<f;l++){var c=r.get(l);c.x+=u;c.y+=s}}};return e}();function Kc(e){void 0===e&&(e={});return new jc(e)}var Hc={__proto__:null,create:Kc},Qc=["rectangle","circle","adaptive","none"],Jc={packing:void 0,packingOptions:{}},_c={adaptive:!0,initialize:2,iterations:{min:2,max:60},speed:.5};function qc(e,t){switch(pf(Qc,e.packing,t)){case"circle":return Gc(e.packingOptions);case"adaptive":return Gc(vf(e.packingOptions,_c));case"rectangle":return Xc(e.packingOptions);case"none":return Ec}}function $c(e,t){void 0===e&&(e={});void 0===t&&(t="rectangle");e=vf({},e,Jc);return new Ic([[qc(e,t),0],[Kc(e),1]])}var ed={__proto__:null,create:$c},td={iterations:{min:void 0,max:150},speed:void 0,liveUpdate:!0,scale:{base:.043,attenuation:0},maxRepulsionBias:.0065,momentum:{beta1:.9,beta2:.95},clustering:{minGroupSize:15,maxLength:300,epsilon:void 0,reweightSpeed:.06,maxSeparation:void 0},adaptive:!1},nd=function(){function e(e,t){this.graph=e;this.opts=t;this.activeGroups=-1;this.groups=[];this.adaptiveState=null}e.prototype.progress=function(){return this.counter?this.counter.progress():0};e.prototype.initialize=function(e,t){this.opts.adaptive&&void 0!==t&&(this.adaptiveState=t)};e.prototype.run=function(e){var t;if(!this.counter){var n=this.graph.countVertices();this.initInternal(e[cc.group],((t={})[cc.position2d]=e[cc.position2d],t[cc.radius]=e[cc.radius],t[cc.sparseRadius]=e[cc.sparseRadius]||e[cc.radius],t[cc.degree]=e[cc.degree],t[cc.avgNeighbourDegree]=e[cc.avgNeighbourDegree],t[cc.kcore]=e[cc.kcore],t[cc.speed]=e[cc.speed]||bf.fromSize(n,1),t[cc.eAdaptive]=e[cc.eAdaptive],t[cc.vAdaptive]=e[cc.vAdaptive],t[cc.groupStress]=e[cc.groupStress],t))}for(var r=this.groups,i=0;i<this.activeGroups;i++){var o=r[i],a=o.run()>=1;a&&Js(r,i--,--this.activeGroups);this.counter.increment(0===this.activeGroups);if(!a&&!this.opts.liveUpdate)break;o.extractPositions(e[cc.position2d])}};e.prototype.initInternal=function(e,t){var n=this,r=0,i=this.graph.countVertices(),o=new Nf(this.graph),a=Cc(i,this.opts.scale.attenuation,{min:1.5,max:4}),u=this.opts.adaptive&&t[cc.groupStress]?t[cc.groupStress]:bf.fromSize(i,1);this.groups=Rs(o.induceAll(e),(function(i,o){var s=o[0],l=o[1],f=l.vs.length;if(f<=1)return i;var c=new zf("u",!1,!0);c.build(s,f);var d=e.get(l.vs[0]),h=new rd(n.opts,c,l);h.initialize(t,a,n.adaptiveState,u.get(d));i.push(h);r+=Math.ceil(h.schedule.maxIterations);return i}),[]);this.activeGroups=this.groups.length;this.counter=new Ac(r)};e.prototype.state=function(e){var t={edges:xd(this.graph.countEdges()),verts:yd(this.graph.countVertices())};this.groups.forEach((function(n){n.extractState(t,e)}));return t};return e}(),rd=function(){function e(e,t,n){this.opts=e;this.subg=t;this.map=n;this.nbodyModel=new Cl("f32",14,16);this.vState=md(t.countVertices());this.eState=bd(t.countEdges());this.clustering=fc(0)}e.prototype.initialize=function(e,t,n,r){for(var i=e[cc.radius],o=e[cc.sparseRadius],a=e[cc.degree],u=e[cc.avgNeighbourDegree],s=e[cc.kcore],l=e[cc.speed],f=e[cc.position2d],c=e[cc.eAdaptive],d=e[cc.vAdaptive],h=this,v=h.subg,g=h.eState,p=h.vState,m=h.opts,y=h.map,b=y.vs,x=y.es,A=b.length,w=x.length,M=0,E=0,I=0;I<A;I++){var C=b[I],S=a.get(C),k=u.get(C),L=f.get(C),R=t(G=i.get(C),o.get(C)),T=cd(S,k,s.get(C));M+=1-.75/Math.max(1,S*S);E+=Math.log(G);p.position.xs.set(I,L.x);p.position.ys.set(I,L.y);p.radius.set(I,R);p.mass.set(I,T);p.speed.set(I,l.get(C))}this.avgRadius=E=Math.exp(E/A);var B=w>0?dd(m.scale):1,O=Math.sqrt(1/B);for(I=0;I<A;I++){var G;(G=p.radius.get(I))>E&&(G=E+.5*(G-E));p.mass.set(I,p.mass.get(I)*G/O)}for(var D=m.clustering,F=D.maxLength,Z=D.reweightSpeed,P=0;P<w;P++){var Y=v.source(P),z=v.target(P),V=sd(p.radius.get(Y),p.radius.get(z),E,F),W=V[0],X=V[1];g.targetLength.set(P,W);g.maxTargetLength.set(P,X);var U=b[Y],N=b[z],j=1===Math.min(a.get(U),a.get(N));g.reweightSpeed.set(P,j?0:Z)}var K=Mf(v).diameter,H=void 0===m.speed?ld(A,K,M,m.scale.attenuation):m.speed,Q=1;this.opts.adaptive&&(Q=n?this.incrementalInit(n,d,c):this.adaptiveInit(r));var J=void 0===m.iterations.min?Math.min(m.iterations.max,fd(A,K,Q)):m.iterations.max;this.schedule=new id(m.momentum,J,m.maxRepulsionBias/E,H,m.adaptive)};e.prototype.adaptiveInit=function(e){if(e<1){var t=hs(e,.5,1);vl(this.vState.speed,(function(e){return Math.min(e,t)}))}return 1};e.prototype.incrementalInit=function(e,t,n){for(var r=this,i=r.subg,o=r.eState,a=r.vState,u=r.map,s=u.vs,l=u.es,f=i.countVertices(),c=i.countEdges(),d=new Float32Array(f),h=.2,v=.5,g=.6,p=0,m=0;m<f;m++){var y=t.get(s[m]),b=y!==t.emptyValue?od(v,a.mass.get(m),e.verts.mass.get(y)):1;d[m]=b;p+=b}for(var x=a.position,A=x.xs,w=x.ys,M=0;M<c;M++){var E=n.get(l[M]),I=i.source(M),C=i.target(M);b=1;if(E!==n.emptyValue){var S=e.edges.mass.get(E);if(S>1+os){o.mass.set(M,S);o.maxTargetLength.set(M,1.025*e.edges.maxTargetLength.get(E))}var k=fs(A.get(I),w.get(I),A.get(C),w.get(C)),L=e.edges.length.get(E);b=od(v,k,L)}if(b>d[I]){p+=b-d[I];d[I]=b}if(b>d[C]){p+=b-d[C];d[C]=b}}if(p>f*(v+os)&&p<f+f*os){var R=i.rawPairs(),T=1-g+os,B=void 0;do{B=!1;for(var O=0;O<R.length;){var G=R[O++],D=R[O++],F=d[G],Z=d[D];if(Math.abs(F-Z)/Math.max(F,Z)>T){B=!0;F>Z?d[D]=F*g:d[G]=Z*g}}}while(B);p=0;for(m=0;m<f;m++)p+=d[m]}var P=v+Math.sqrt(p/f-v);vl(a.speed,(function(e,t){return Math.min(e,hs(P*d[t],v,1))}));return gs(v,1,h,1,P)};e.prototype.run=function(){var e=this.schedule.update();if(e<1){this.setupIteration();this.applyRepulsion();this.applyAttraction();this.applyDisplacement()}return e};e.prototype.setupIteration=function(){for(var e=this.vState,t=e.position,n=e.displacement,r=e.nesterov,i=t.xs,o=t.ys,a=r.nxs,u=r.nys,s=i.size,l=this.schedule.momentum().beta1,f=0;f<s;f++){i.set(f,i.get(f)+a.get(f)*l);o.set(f,o.get(f)+u.get(f)*l)}hl(n.dxs,0);hl(n.dys,0);s>=this.opts.clustering.minGroupSize&&this.schedule.periodicals().edgeLengths&&null===this.clustering.build(i,o)&&this.calculateEdgeLengths()};e.prototype.applyAttraction=function(){for(var e=this.vState,t=e.displacement,n=e.position,r=e.nesterov,i=this.eState,o=i.mass,a=i.targetLength,u=i.maxTargetLength,s=i.massIntegral,l=i.reweightSpeed,f=1/this.avgRadius,c=this.subg.rawPairs(),d=t.dxs,h=t.dys,v=r.nxs,g=r.nys,p=n.xs,m=n.ys,y=o.size,b=0,x=0;b<y;b++){var A=c[x++],w=c[x++],M=p.get(w)-p.get(A),E=m.get(w)-m.get(A),I=o.get(b),C=ls(M,E);if(C>u.get(b)||I>1){var S=pd(C,ls(p.get(w)-v.get(w)-(p.get(A)-v.get(A)),m.get(w)-g.get(w)-(m.get(A)-g.get(A))),u.get(b),s.get(b),I,l.get(b),f);o.set(b,S.m);s.set(b,S.int);I=S.m}var k=gd(C,I,a.get(b));M*=k;E*=k;d.values[d.index(w)]-=M;h.values[h.index(w)]-=E;d.values[d.index(A)]+=M;h.values[h.index(A)]+=E}};e.prototype.applyRepulsion=function(){var e=this,t=e.schedule,n=e.vState,r=n.position,i=n.displacement,o=n.mass;this.nbodyModel.build(r.xs,r.ys,void 0,o);var a=hd(t.repulsion());this.nbodyModel.runOnPoints(a,i.dxs,i.dys,t.theta())};e.prototype.applyDisplacement=function(){for(var e=this,t=e.schedule,n=e.vState,r=e.avgRadius,i=n.moment,o=i.mxs,a=i.mys,u=n.moment2,s=u.m2xs,l=u.m2ys,f=n.displacement,c=f.dxs,d=f.dys,h=n.position,v=h.xs,g=h.ys,p=n.nesterov,m=p.nxs,y=p.nys,b=n.speed,x=t.speed()*r,A=t.sms(),w=.5*r,M=t.momentum(),E=M.beta1,I=M.beta2,C=0,S=v.size;C<S;C++){var k=c.get(C),L=d.get(C),R=vs(o.get(C),k,E),T=vs(a.get(C),L,E);o.set(C,R);a.set(C,T);var B=vs(s.get(C),k*k,I),O=vs(l.get(C),L*L,I);s.set(C,B);l.set(C,O);var G=x*b.get(C);k=G*(R/(Math.sqrt(B*A)+w));L=G*(T/(Math.sqrt(O*A)+w));v.set(C,v.get(C)-m.get(C)+k);g.set(C,g.get(C)-y.get(C)+L);m.set(C,k);y.set(C,L)}};e.prototype.calculateEdgeLengths=function(){var e=this,t=e.vState,n=t.position,r=t.radius,i=e.eState,o=i.targetLength,a=i.maxTargetLength,u=i.reweightSpeed,s=e.subg,l=e.clustering,f=e.opts.clustering.epsilon||Math.max(5,Math.sqrt(.5*s.countVertices()));l.evaluate(f,r,!0,1.5);var c=l.clusters;if(!(c.countGroups()<=1))for(var d=n.xs,h=n.ys,v=l.separations(d,h,r),g=s.rawPairs(),p=0,m=0;m<g.length;p++){var y=g[m++],b=g[m++];if(!(c.get(y)===c.get(b)||u.get(p)<os)){var x=d.get(y)-d.get(b),A=h.get(y)-h.get(b),w=ls(x,A),M=v(y,b),E=M[0],I=M[1],C=Math.abs(Rl({x:d.get(E)-d.get(I),y:h.get(E)-h.get(I)},{x:x/w,y:A/w})),S=Math.min(r.get(y),r.get(b)),k=vs(w-2*S-(C-f*S),Math.min(a.get(p),w),.5);a.set(p,Math.max(k,o.get(p)))}}};e.prototype.extractPositions=function(e){for(var t=this.map.vs,n=this.subg.countVertices(),r=this.vState.position,i=r.xs,o=r.ys,a=0;a<n;a++){var u=e.get(t[a]);u.x=i.get(a);u.y=o.get(a)}};e.prototype.extractState=function(e,t){for(var n=t[cc.position2d],r=this.clustering.clusters||{get:function(){return 0}},i=this.subg,o=this.map,a=o.es,u=o.vs,s=0,l=this.eState;s<a.length;s++){var f=a[s];e.edges.mass.set(f,l.mass.get(s));e.edges.maxTargetLength.set(f,l.maxTargetLength.get(s));var c=n.get(u[i.source(s)]),d=n.get(u[i.target(s)]);e.edges.length.set(f,fs(c.x,c.y,d.x,d.y))}var h=0;for(l=this.vState;h<u.length;h++){var v=u[h];e.verts.mass.set(v,l.mass.get(h));e.verts.cluster.set(v,r.get(h))}};return e}(),id=function(){function e(e,t,n,r,i){this.moments=e;this.maxIterations=t;this.maxRepulsionBias=n;this.targetSpeed=r;this.adaptive=i;this.progress=0;this.iteration=-1;this.edgeLengthPeriod={progress:.08,iteration:4}}e.prototype.theta=function(){return ud(1.1,5,10,100,this.maxIterations-this.iteration,8)};e.prototype.speed=function(){return this.targetSpeed};e.prototype.sms=function(){var e=1-(this.maxIterations-this.iteration)/20,t=Math.exp(6*(e-1));return 1+this.targetSpeed*t};e.prototype.repulsion=function(){return this.adaptive?this.maxRepulsionBias:ud(0,this.maxRepulsionBias,0,.5,this.progress,10)};e.prototype.momentum=function(){var e=this,t=e.moments,n=e.iteration,r=.5,i=ad(t.beta1,n,r),o=ad(t.beta2,n);return{beta1:i,beta2:o,correction:Math.sqrt(1-o)/(1-i)}};e.prototype.periodicals=function(){var e=this,t=e.edgeLengthPeriod,n=e.progress,r=e.iteration,i=n>=t.progress&&r>=t.iteration&&n<.9;if(i){t.progress=1.7*n;t.iteration=r+4}return{edgeLengths:i}};e.prototype.update=function(){this.iteration++;return this.progress=hs((this.iteration+1)/this.maxIterations,0,1)};return e}();function od(e,t,n){return Math.abs(t-n)<os?e:1-(1-e)*(t<n?t/n:n/t)}function ad(e,t,n){void 0===n&&(n=0);return e-(1-n)*Math.pow(e,1+t)}function ud(e,t,n,r,i,o){void 0===o&&(o=12);return ps(e,t,.5*(r-n),o/(r-n),1,i-n)}function sd(e,t,n,r){var i=Math.min(e,t,n),o=e+t+i;return[o,o+i*r]}function ld(e,t,n,r){var i=1.5,o=1.5*Math.log(n)-1.5+.33*Math.log(t/e);return Math.max(i,o)*(2/(r+2))}function fd(e,t,n){var r=5,i=Math.log(e),o=Math.log(t/e),a=44.34*i+26.05*o+1.16*i*o;return Math.max(r,a*n*.55)}function cd(e,t,n){return 1+Math.log(Math.max(Math.pow(n,2),t,1))*Math.sqrt(e)}function dd(e){var t=e.base,n=e.attenuation;return t*Math.pow(15,-1*n)}function hd(e){return function(t,n,r,i,o,a,u){return vd(e,t,n,r,i,o,a,u)}}function vd(e,t,n,r,i,o,a,u){var s=i-t,l=o-n,f=s*s+l*l,c=f*e,d=r*a/(as+f+c*c);u.x-=s*d;u.y-=l*d}function gd(e,t,n){var r=(e-n)/(as+e);r>0&&(r*=r*t);return r}function pd(e,t,n,r,i,o,a){var u=((e-n)*o-(t-e))*a;u<0!=r<0&&(r=0);i+=.6*u+(r+=.3*u);return{m:Math.max(1,i),int:r}}function md(e){var t=cl(sl([2,e],"f64")),n=t[0],r=t[1],i=cl(sl([11,e],"f32")),o=i[0],a=i[1],u=i[2],s=i[3],l=i[4],f=i[5],c=i[6],d=i[7],h=i[8],v=i[9],g=i[10];hl(l,1);hl(f,1);hl(c,1);return{position:{xs:n,ys:r},displacement:{dxs:o,dys:a},nesterov:{nxs:u,nys:s},moment:{mxs:d,mys:h},moment2:{m2xs:v,m2ys:g},mass:l,radius:c,speed:f}}function yd(e){return{mass:sl([e],"f32"),cluster:sl([e],"i32")}}function bd(e){var t=cl(sl([4,e],"f32",1));return{targetLength:t[0],maxTargetLength:t[1],mass:t[2],reweightSpeed:t[3],massIntegral:sl([e],"f64")}}function xd(e){var t=cl(sl([3,e],"f32",1));return{length:t[0],maxTargetLength:t[1],mass:t[2]}}function Ad(e,t){return new nd(e,vf({},t,td))}var wd={__proto__:null,defaultOpts:td,biasedRepulsionKernel:vd,attractionKernel:gd,edgeReweightingKernel:pd,create:Ad},Md={iterations:50,scaleRatio:void 0,minGroupSize:2,adaptive:!1,adaptiveStressThreshold:.33,leafThreshold:25},Ed=function(){function e(e,t){this.graph=e;this.opts=t}e.prototype.progress=function(){return this.counter?this.counter.progress():0};e.prototype.run=function(e){var t,n=e[cc.position2d];if(void 0===this.constraints){var r=this,i=r.opts,o=r.graph,a=o.countVertices(),u=e,s=u[cc.vAdaptive],l=u[cc.eAdaptive],f=u[cc.group],c=u[cc.degree],d=u[cc.speed],h=void 0===d?bf.fromSize(a,1):d,v=u[cc.kcore],g=void 0,p=h;this.adaptiveState&&s&&l?(g=(t=Rd(o,s,l,n,c,this.adaptiveState,f,h,i.minGroupSize)).groupSeeds,p=t.speeds):g=Ld(f.iterateGroups(),f,n,i.minGroupSize);this.constraints=this.initializeContraints(g,e,f,v,p,c);var m=this.constraints,y=m.longWeights,b=m.shortWeights;m.edgeGroups.forEach((function(e){Bd(n,y,e.long);Bd(n,b,e.short)}))}var x=this.constraints,A=x.longWeights,w=x.shortWeights,M=x.edgeGroups;M.length-=el(M,(function(e){Od(n,A,e.long);Od(n,w,e.short);return--e.iterations>0}));this.counter.increment(0===this.constraints.edgeGroups.length)};e.prototype.state=function(e){return e[cc.degree]};e.prototype.initialize=function(e,t){this.opts.adaptive&&(this.adaptiveState=t)};e.prototype.initializeContraints=function(e,t,n,r,i,o){for(var a,u=this,s=u.graph,l=u.opts,f=s.countVertices(),c=t,d=c[cc.radius],h=c[cc.position2d],v=Gd(f),g=new Float32Array(f),p=nf(f),m=new Float32Array(f),y=new Float32Array(f),b=new Float32Array(f),x=0,A=s.adjacency(),w=e.next();!1===w.done;w=e.next())if(!(w.value<0)){for(var M=0,E=0,I=0,C=(re=n.iterateGroup(w.value)).next();!1===C.done;C=re.next()){E+=g[j=C.value]=d.get(j);M+=i.get(j);I++}E/=I;for(C=(re=n.iterateGroup(w.value)).next();!1===C.done;C=re.next()){g[j=C.value]+=E*Math.sqrt(o.get(j))}for(var S=Td(w.value,Math.max(1,2*Math.log(M+1)),2,s,i,p),k=S.maxReach,L=S.anchors,R=M<l.leafThreshold?1:2,T=null!==(a=l.scaleRatio)&&void 0!==a?a:kd(I),B=[],O=[],G=0;G<L.length;G++){var D=L[G],F=h.get(D),Z=uf(D,s,p);m[D]=g[D];for(var P=Z.next();!1===P.done;P=Z.next()){var Y=p[te=P.value],z=o.get(te),V=i.get(te),W=g[te]*T,X=V<1?Id(F,h.get(te)):m[Y]+W;Y!==D&&z>=R&&V>os&&B.push({len:X,a:D,b:te});var U=m[te]=X+W+Cd(E,r.get(te));y[te]+=U}}B.sort((function(e,t){return t.len-e.len}));for(var N=w.value,j=(re=n.iterateGroup(w.value)).next();!1===j.done;j=re.next())o.get(j.value)>1&&y[j.value]<y[N]&&(N=j.value);if(l.adaptive&&!this.adaptiveState){var K=tc(N,h,s,p,m),H=n.get(w.value);if(K<l.adaptiveStressThreshold){b[H]=K;continue}b[H]=1}var Q=N;for(Z=uf(Q,s,p);Q>=0;){for(var J=h.get(Q),_=g[Q],q=A.reset(Q),$=A.next(),ee=.5;!1===$.done;$=A.next(),ee++){var te=$.value;V=i.get(te);if(p[te]<0&&V>os){X=V<1?Id(J,h.get(te)):(_+g[te])*(.5+ee/q);O.push({len:X,a:Q,b:te})}}var ne=Z.next();Q=!1===ne.done?ne.value:-1}var re,ie=1/Math.max(1,Math.log(I));for(C=(re=n.iterateGroup(w.value)).next();!1===C.done;C=re.next()){j=C.value,K=i.get(j);var oe=o.get(j);v.shortWeights[j]=oe>1?K/Math.sqrt(oe):K;v.longWeights[j]=K*ie}var ue=Sd(M,k);x=ue>x?Math.ceil(ue):x;v.edgeGroups.push({iterations:ue,long:B,short:O})}this.opts.adaptive&&(t[cc.groupStress]=yf.wrapArray(b));this.counter=new Ac(x);return v};return e}();function Id(e,t){return fs(e.x,e.y,t.x,t.y)}function Cd(e,t){return.7*e*Math.log(t+1)}function Sd(e,t){var n=Math.sqrt(11*t)+Math.log(1+.3*e);return Math.max(5,n)}function kd(e){return 1+.02*Math.sqrt(e)}function Ld(e,t,n,r){return Cs(e,(function(e){var i=t.groupSize(e);if(i<r)return-1;for(var o=1/i,a=0,u=0,s=(l=t.iterateGroup(e)).next();!1===s.done;s=l.next()){a+=o*(d=n.get(s.value)).x;u+=o*d.y}var l,f=1/0,c=-1;for(s=(l=t.iterateGroup(e)).next();!1===s.done;s=l.next()){var d,h=(a-(d=n.get(s.value)).x)*(u-d.y),v=h*h;if(v<f){c=s.value;f=v}}return c}))}function Rd(e,t,n,r,i,o,a,u,s){for(var l=e.countVertices(),f=new Float32Array(l),c=[],d={},h=.75,v=0;v<l;v++){var g=t.get(v);(g===t.emptyValue||o.get(g)>i.get(v))&&(f[v]=1)}for(var p=e.iterateAdjacentPairs(!1),m=p.next();!1===m.done;m=p.next()){var y=m.value,b=y[0],x=y[1],A=y[2];(n.get(A)===n.emptyValue||Id(r.get(b),r.get(x))<=os)&&(f[b]=f[x]=1)}for(v=0;v<l;v++)if(f[v]>0&&a.groupSize(v)>=s){d[a.get(v)]=v;c.push(v)}for(var w=nf(l),M=new Float32Array(l),E=uf(c,e,w),I=E.next();!1===I.done;I=E.next()){v=I.value;var C=a.get(v),S=w[v];M[C]=f[v]=f[S]+1}for(v=0;v<l;v++){var k=u.get(v);if(f[v]>1){C=a.get(v);var L=1-f[v]/(h*M[C]);k=L>0?Math.min(k,L):0}f[v]=k}return{speeds:yf.wrapArray(f),groupSeeds:Ds(Object.keys(d),(function(e){return d[e]}))}}function Td(e,t,n,r,i,o){for(var a=[],u=0,s=-1;s<t;s++){for(var l=uf(s<0?e:a.slice(),r,o),f=-1,c=e,d=l.next();!1===d.done;d=l.next()){var h=d.value;i.get(h)<1?f=h:c=h}var v=f>=0?f:c,g=0;for(h=v;o[h]!==h;h=o[h],g++);u=Math.max(u,g);if(!(g>=n||s<0))break;a.push(v)}return{anchors:a,maxReach:u}}function Bd(e,t,n){for(var r=n.length,i=2*Math.PI/(1+r),o=0;o<r;o++){var a=n[o],u=e.get(a.b),s=e.get(a.a);if(u.x-s.x<=os&&u.y-s.y<=os){var l=a.len*t[a.b];u.x-=Math.sin(i*o)*l;u.y-=Math.cos(i*o)*l}}}function Od(e,t,n){for(var r=0;r<n.length;r++){var i=n[r],o=e.get(i.b),a=e.get(i.a),u=o.x-a.x,s=o.y-a.y,l=ls(u,s);if(l>os){var f=(l-i.len)/l;f<0&&(f=-Math.sqrt(-f));f*=t[i.b];o.x-=u*f;o.y-=s*f}}}function Gd(e){return{longWeights:new Float32Array(e),shortWeights:new Float32Array(e),edgeGroups:[]}}function Dd(e,t){var n=vf({},t,Md);return new Ed(e,n)}var Fd={__proto__:null,defaultOpts:Md,create:Dd},Zd=["random","none"],Pd={initialization:"random",initializationOptions:{minGroupSize:2}},Yd={padding:{proportion:.025,min:1,max:1/0},reduceOverlapsOnly:!0,iterations:{min:1,max:10}},zd=function(e){Ms(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.fd=function(){return this.getPhase(2)[0]};return t}(Ic);function Vd(e,t){var n;t=vf({},t,Pd);var r=[];if("random"===pf(Zd,t.initialization,Pd.initialization)){var i=t.initializationOptions;r.push([yc(e,i),0],[Dd(e,i),1])}var o=vf({scale:{attenuation:null===(n=null==t?void 0:t.scale)||void 0===n?void 0:n.attenuation}},Yd);r.push([Ad(e,t),2],[Dc(o),3],[$c(t,t.adaptive?"adaptive":void 0),4]);return new zd(r)}var Wd={__proto__:null,Impl:zd,create:Vd};function Xd(e,t){var n;null!=t||(t={});Gf(t,((n={})[cc.group]=function(){return Zf(e)},n[cc.degree]=function(){return Af(e)},n[cc.avgNeighbourDegree]=function(t){is(t[cc.degree].size,e.countVertices());return wf(e,t[cc.degree])},n[cc.kcore]=function(t){is(t[cc.degree].size,e.countVertices());return Ef(e,t[cc.degree])},n));return t}var Ud,Nd=function(){function e(e,t){this.currLabels=e;this.layout=t;this.state=null;this.prevLabels=null;this.vMap=null;this.eMap=null}e.prototype.progress=function(){return null===this.layout?1:this.layout.progress()};e.prototype.addAdaptiveProps=function(e){this.props=e;null!==this.vMap&&(e[cc.vAdaptive]=this.vMap);null!==this.eMap&&(e[cc.eAdaptive]=this.eMap);return e};e.prototype.initialize=function(e){void 0!==this.layout&&this.layout.initialize(this.addAdaptiveProps(e),this.state)};e.prototype.run=function(e){void 0!==this.layout&&this.layout.run(this.addAdaptiveProps(e))};e.prototype.reset=function(e,t){var n=this.layout;if(void 0!==n&&"function"==typeof n.state&&1===n.progress()){this.state=n.state(this.props);this.prevLabels=this.currLabels}this.layout=t;if(null!==this.prevLabels){this.vMap=Bf(e.vertexMap,this.prevLabels.vertexMap);this.eMap=Bf(e.edgeMap,this.prevLabels.edgeMap)}this.currLabels=e};return e}(),jd=function(){function e(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);this.layout=e;this.interval=t;this.batchBudget=n;this.timePerIteration=-1;this.timeid=-1}e.prototype.initialize=function(e){this.input=e;void 0!==this.layout.initialize&&this.layout.initialize(e)};e.prototype.start=function(e,t){this.onComplete=mf(e);this.onBatch=t;this.nextStep()};e.prototype.cancel=function(){this.timeid>=0&&clearTimeout(this.timeid)};e.prototype.nextStep=function(){var e=this;try{this.work(this.batchBudget);if(1===this.layout.progress()){this.timeid=-1;this.onComplete(void 0)}else this.timeid=setTimeout((function(){return e.nextStep()}),this.interval)}catch(e){this.onComplete(e)}};e.prototype.work=function(e){var t,n=this,r=n.layout,i=n.input,o=Date.now(),a=e+o;do{for(var u=this.timePerIteration>0?Math.max(1,Math.ceil(e/this.timePerIteration)):1,s=0;s<u&&r.progress()<1;s++)r.run(i);var l=Date.now()-o;o+=l;this.timePerIteration=Math.max(l,.01)/u}while(o<a&&r.progress()<1);null===(t=this.onBatch)||void 0===t||t.call(this,this.layout.progress())};return e}();!function(e){e.forceDirected="forcedirected";e.random="random";e.organic="organic";e.diskpacking="diskpacking";e.removeOverlaps="remove-overlaps";e.rectpacking="rectpacking";e.pack="pack"}(Ud||(Ud={}));function Kd(e,t,n){switch(e){case Ud.organic:return Vd(t,n);case Ud.forceDirected:return Ad(t,n);case Ud.random:return yc(t,n);case Ud.diskpacking:return Gc(n);case Ud.removeOverlaps:return Dc(n);case Ud.rectpacking:return Xc(n);case Ud.pack:return $c(n);default:throw new Error("unknown layout")}}var Hd={__proto__:null,diskpacking:Fc,rectpacking:Uc,pack:ed,get Names(){return Ud},createLayout:Kd,get KnownProperties(){return cc},forceDirected:wd,organic:Wd,pin:Hc,linkRelaxation:Fd,analysisProps:Xd,AdaptiveProxy:Nd,SetTimeoutRunner:jd,noopLayout:Ec,PhasedLayout:Ic,nodeSizer:Cc},Qd=function(){function e(e,t,n,r,i){this.nodeList=e;this.edgeList=t;this.staticGraph=n;this.vertexMap=r;this.edgeMap=i}return e}();function Jd(e){return js.fromArray(e,(function(e){return"string"==typeof e?e:e.id}))}function _d(e){return js.fromArray(e,(function(e,t){return[e.id1,e.id2,void 0!==e.id?e.id:t.toString()]}))}function qd(e,t){var n=new jf.AdjacencyGraph("u",!1,!0),r=jf.buildFromLabeledIterators(Jd(e),_d(t),n);return new Qd(e,t,n,r.vertexMap,r.edgeMap)}function $d(e,t){var n=e.edges;if(t){var r=[];Object.keys(e.selfAdjacency).forEach((function(t){var n=e.selfAdjacency[t];r.push({id:n[0],id1:t,id2:t,ids:n})}));r.length>0&&(n=n.concat(r))}return qd(Object.keys(e.vertices),n)}function eh(e,t,n){var r=e.vertexMap,i=e.staticGraph.countVertices(),o=js.flatMap(js.fromArray(t),(function(e,t){var i=n(e,t);if(i.length<1)return js.empty();var o=r.getUniqueInverse(i[0]);return js.fromArray(i,(function(e){return[o,r.getUniqueInverse(e)]}))}));return jf.connectedComponentsFrom(o,i)}var th=de,nh=es,rh=ts,ih=3,oh="_dummy",ah=RegExp("^"+oh);function uh(e){return ah.test(e.id)}function sh(e){var t=A(e)?e:5;t=Math.max(0,t);return t=Math.min(10,t)}function lh(e){return 10*(5-sh(e))}function fh(e,t,r){var i=r||30;n(e,(function(e){if(!e.fixed){e.x+=i*(t.next()-.5);e.y+=i*(t.next()-.5)}}))}function ch(e){var t=0,r=0,i=0,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,(function(e){t+=1;r+=e.x;i+=e.y;a=Math.min(a,e.x);o=Math.min(o,e.y);u=Math.max(u,e.x);s=Math.max(s,e.y)}));r/=t;i/=t;var l=0,f=!1;n(e,(function(e){var t=e.x-r,n=e.y-i,o=Math.sqrt(t*t+n*n);l=Math.max(o+1.5*e.r,l);f=f||e.fixed}));return{x:r,y:i,sum:t,size:l,fixed:f,miny:o,minx:a,maxy:s,maxx:u}}function dh(e){return"number"==typeof e.w&&!b(e.w)&&"number"==typeof e.h&&!b(e.h)}function hh(e){return!(e.u||e.fi||e.c||e.b||e.w&&e.h)}function vh(e,t){var r=1/0,i=1/0,o=-1/0,a=-1/0,u=0,s=t?function(e){var t=e.w?e.w/2:e.r||0,n=e.h?e.h/2:e.r||0,s=e.labelOffset;r=Math.min(r,e.x-t);i=Math.min(i,e.y-n+s);o=Math.max(o,e.x+t);a=Math.max(a,e.y+n+s);u++}:function(e){var t=e.r||0;r=Math.min(r,e.x-t);i=Math.min(i,e.y-t);o=Math.max(o,e.x+t);a=Math.max(a,e.y+t);u++};Array.isArray(e)?e.forEach(s):n(e,s);return u>0?{x1:r,y1:i,x2:o,y2:a,c:u}:null}function gh(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function ph(e,t){var n=js,r=qd(q(e),t),i=jf.connectedComponents(r.staticGraph),o={},a=r.vertexMap;n.forEach(i.iterateGroups(),(function(t,r){var u={};n.forEach(i.iterateGroup(t),(function(t){var n=a.get(t),i=e[n];u[n]=i;i.c=r}));o[t]={verts:u,edges:[],extents:vh(u),c:r}}));for(var u=0;u<t.length;u++){var s=t[u],l=o[i.get(a.getUniqueInverse(s.id1))];l.edges.push(s);s.c=l.c}return q(o)}function mh(e){var t=0;e.b&&(t=A(e.bw)?e.bw:nh);!e.donut||e._combo&&e._combo.open||(t=e.donut.w+2*e.donut.bw);return t}function yh(e,t){if(e.t){var n=""+e.t;if(void 0!==t&&n.length>t){n=n.substring(0,Math.max(0,t-3));n+="..."}return n.split(/\r\n|\r|\n/)}return[""]}function bh(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)o[a]=or(t,e[a],n,r,i||"sans-serif").width;return o}function xh(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function Ah(e,t,n,r){var i=0,o=0;if(e.t){var a=(e.fs||In)*n,u=ih*n,s=yh(e,r);i=xh(bh(s,t,a,!!e.fb,e.ff));o=(a+u)*s.length}return{width:i,height:o}}function wh(e,t){return!t&&("boolean"==typeof e.tc?e.tc:!e.w&&(!e.u&&!e.fi))}function Mh(e,t,n,r){var i=0,o=(ih+(e.fs||In))*n.e,a=Ah(e,t,n.e,r.maxLength),u=a.width,s=hh(e),l=s?Math.max(u/10,rh):u,f=a.height,c=wh(e,n.isOpenCombo),d=s?2*rh:n.height,h=th(l/2,d/2+f/2);if(r.partial){var v=Math.max(1,u/(4*n.radius))*o,g=Math.min(n.radius+v,u/2);if(c){u/2<=n.radius+o&&(g=u/2);i=th(g,f/2)}else i=Math.max(g,(n.height+f)/2)}else i=th(u/2,c?f/2:n.height/2+f);return{width:u,height:f,centred:c,distanceToCorner:i,legacyDistToCorner:h}}function Eh(e,t,n,r,i){var o,a,u=0,s=0,l=0,f=0,c=e.e||1,d=dh(e),h=d&&"circle"===e.sh,v=hh(e),g=!1;if(e.du)return{radius:10,radiusWithoutLabel:10,baseRadius:10,borderSize:10,width:10,height:10};a=mh(e);e._combo&&(g="boolean"==typeof i?i:e._combo.open);if(g){a=e.oc&&"bw"in e.oc?e.oc.bw:ku.bw;if("rectangle"===r){s=de(l=e.oc.w,f=e.oc.h)/2;u=de(l+=2*a,f+=2*a)/2}else{s=e.oc.w/2;f=l=e.oc.w+2*a;u=s+a}}else if(d){c=1;if(h){var p=Math.min(e.w,e.h);f=l=p+2*a;u=(s=p/2)+a}else{s=th(e.w,e.h)/2;l=e.w+2*a;f=e.h+2*a;u=th(l,f)/2}}else if(!v){f=l=2*(s=rh*c)+2*(a*=c);u="box"===e.sh?th(l,f)/2:s+a}var m=u;if(n.include&&e.t&&e.t.length>0){var y=Mh(e,t,{radius:u,height:f,width:l,e:c,isOpenCombo:g},n);o=Math.max(y.legacyDistToCorner,u);u=Math.max(y.distanceToCorner,u);l=Math.max(y.width,l);y.centred?f=Math.max(y.height,f):f+=y.height}else{var b=0;if(e.t){b=(yh(e,n.maxLength).length+1)*((e.fs||In)*c)}o=u+b/2;!g&&v&&(o+=rh*c)}if(v&&e.g&&e.g.length>0){for(var x=0,A=0;A<e.g.length;A++){var w=2*Wa(e.g[A]);x+=w;f=Math.max(f,w)}u=e.t?Math.max(l,x):x/2;l+=x}return{legacyRadius:Math.round(o),radius:Math.round(u),radiusWithoutLabel:Math.round(m),baseRadius:Math.round(s),borderSize:Math.round(a),width:Math.round(l),
height:Math.round(f)}}function Ih(e){return wh(e,e._combo&&e._combo.open)}function Ch(e,t){var n=0;if(e.t){var r=e.fs||In,i=dh(e)?1:e.e||1;if(!Ih(e)){n=(r+ih)*i*yh(e,t).length/2}}return Math.round(n)}function Sh(e,t,n){var r=vh(e.map((function(e){var r=Eh(e,t,{},n);return{id:e.id,x:e.x,y:e.y,r:r.radius,w:r.width,h:r.height,labelOffset:Ch(e)}})),!0);return r?gh(r):void 0}function kh(e,t,r){if(!t||!A(t.x)||!A(t.y))return 1/0;function i(e){var n=ce(t.x,t.y,e.x,e.y)+e.r,r=e.x>t.x?e.w/2:-e.w/2,i=e.y+e.labelOffset>t.y?e.h/2+e.labelOffset:-e.h/2-e.labelOffset,o=ce(t.x,t.y,e.x+r,e.y+i);return Math.min(n,o)}var o=0;Array.isArray(e)?e.forEach((function(e){o=Math.max(o,i(e))})):n(e,(function(e){o=Math.max(o,i(e))}));var a=Math.max(0,0|r);return Math.ceil(o+a)}function Lh(e,t){void 0===t&&(t=0);var n=[];e.forEach((function(e){var r=e.r;r+=t;if(!A(e.x)||!A(e.y)||!A(r))throw new Error("Inputs must be finite");n.push({x:e.x,y:e.y,r:r})}));return dc.radialExtents(n)}function Rh(e,t,n,r){if("rectangle"===e){var i=n.x,o=n.y,a=vh(t,!0);if(!a)return{width:0,height:0};var u=a.x1,s=a.y1,l=a.x2,f=a.y2,c=Math.abs(i-u),d=Math.abs(i-l),h=Math.abs(o-s),v=Math.abs(o-f);return{width:Math.ceil(2*(Math.max(c,d)+r)),height:Math.ceil(2*(Math.max(h,v)+r))}}var g=kh(t,n,r);return{width:2*g,height:2*g}}function Th(e,t,n,r){void 0===r&&(r="circle");var i={include:void 0,maxLength:n};return function(n,o){i.include=o;return void 0!==e[n]?Eh(e[n],t,i,r):null}}var Bh=function(){function e(){this.eventsHandlers=new Map}e.prototype.on=function(e,t){if("function"==typeof t){var n=this.eventsHandlers.get(e);if(!n){n=new Map;this.eventsHandlers.set(e,n)}n.set(t,t)}};e.prototype.off=function(e,t){if(e){var n=this.eventsHandlers.get(e);n&&(t?n.delete(t):n.clear())}else this.eventsHandlers.forEach((function(e){return e.clear()}))};e.prototype.fire=function(e,t){var n=this.eventsHandlers.get(e);n&&n.forEach((function(e){e(t)}))};return e}();function Oh(){var e=new Bh,t=new Bh;return{on:function(e,n){t.on(e,n)},off:function(e,n){t.off(e,n)},privateOn:function(t,n){e.on(t,n)},privateOff:function(t,n){e.off(t,n)},fire:function(n,r){e.fire(n,r);t.fire("all",{name:n,event:r});t.fire(n,r)},privateFire:function(t,n){e.fire(t,n)}}}var Gh={on:function(){},fire:function(){},privateOn:function(){},privateFire:function(){},privateOff:function(){},off:function(){}};function Dh(e,t){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a={},u=[];t.forEach((function(e){n(i[e],(function(e){e.forEach((function(e){if(!a[e]){u.push(e);a[e]=!0}}))}));var t=o[e];if(t)for(var r=0;r<t.length;r++)u.push(t[r])}));return u}function Fh(e,t,n){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a=[];i[t]&&(a=i[t][n]||[]);t===n&&o[t]&&(a=a.concat(o[t]));return a}function Zh(e,t){var r=e.getCache({combos:"all",all:!1}),i=r.adjacency,o=r.selfAdjacency,a={};t.forEach((function(e,t){var r=i[t];r&&n(r,(function(e){for(var t=0;t<e.length;t++){var n=e[t];a[n]=!0}}));var u=o[t];if(u)for(var s=0;s<u.length;s++)a[u[s]]=!0}));n(a,(function(e,n){var r=t.get(n);r&&2===r||t.set(n,1)}))}function Ph(e){return!!e.weights}function Yh(e){e.all=!!e.all}function zh(e){return/^(component|chart)$/.test(e.normalization)?e.normalization:"unnormalized"}function Vh(e){if(!/^(chart|component|unnormalized)$/.test(e.normalization))throw new TypeError("opts normalization property should be either 'component', 'chart' or 'unnormalized'")}function Wh(e){e.direction=e.direction||"any";if(!/^(any|from|to)$/.test(e.direction))throw new TypeError("opts direction property should be either 'from', 'to' or 'any'")}function Xh(e,t){var n=js,r=z(t,{all:!1});Yh(r);var i=$d(e.getCache(r),!0),o=jf.connectedComponents(i.staticGraph),a={},u=i.vertexMap;n.forEach(o.iterateGroups(),(function(e){a[e]={nodes:n.toArray(n.map(o.iterateGroup(e),(function(e){return u.get(e)}))),links:[]}}));for(var s=i.edgeList,l=0;l<s.length;l++)for(var f=s[l],c=a[o.get(u.getUniqueInverse(f.id1))],d=0;d<f.ids.length;d++)c.links.push(f.ids[d]);return q(a)}function Uh(e,t,n){return!!(e[t].a2&&e[t].id2===n||e[t].a1&&e[t].id1===n)}function Nh(e,t,n,r,i){return"any"===i.direction||("from"===i.direction&&Uh(e,r,n)||"to"===i.direction&&Uh(e,r,t))}function jh(e){return Ph(e)?Kh:Hh}function Kh(e,t,n,r,i){var o=Hh(e,t,n,r,i);return b(o)?o:1/o}function Hh(e,t,n,r,i){var o=i.getLinks(),a=NaN;Nh(o,e,t,n,r)&&(r.value?o[n].d&&(a=+o[n].d[r.value]):a=1);return a}function Qh(e,t){t.eachLink(e,(function(n){if(Hh(n.id1,n.id2,n.id,e,t)<=0)throw new Error("Link Weight must be Positive")}));return{direction:e.direction,value:e.value,weights:Ph(e)}}function Jh(e,t){Wh(e);return Qh(e,t)}function _h(e,t,n,r){var i,o=e.getCache(r).adjacency[t][n],a=1/0,u=jh(r);if(o)for(var s=0;s<o.length;s++){var l=u(t,n,o[s],r,e);if(A(l)){if(l<a){a=l;(i=[]).push(o[s])}l===a&&a!==1/0&&i.push(o[s])}}return{value:a,links:i}}function qh(e,t,r){function i(e,t){return G[e]-G[t]}function o(e){e.sort(i);return e.shift()}function a(e,t){e.sort(i);_(e,t)||e.push(t)}function s(t,n){var r=_h(e,t,n,w).value;return A(r)?r:g()||A(r)?1/0:1}function l(e){return e.length>0}function f(){k.length=0;L.length=0;e.eachNode(m,(function(e){for(var t=0;t<F.length;t++)d(F[t].dict,e.id,F[t].value)}))}function c(t,n,r){e.eachNode(t,(function(e){d(n,e.id,r)}))}function d(e,t,n){Array.isArray(n)&&l(n)&&e[t]?e[t].length=0:e[t]=u(n)}function h(){for(var t=Xh(e,m),n={},r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.nodes.length;o++)n[i.nodes[o]]=i.nodes.length;return n}function v(){return!N(m.value)}function g(){return!!m.directed}function p(){return!!m.endpoints}var m=z(t,{all:!1,combos:"toplevel",directed:!1,endpoints:!1,normalization:"component",value:void 0,weights:!1});m.combos="toplevel";Vh(m);Yh(m);var y=v()||g()?"dijkstra":"regular",b=p()?"endpoints":"regular",x=zh(m),w={direction:g()?"from":"any",value:m.value,weights:Ph(m),all:m.all};Jh(m,e);var M,E,I,C,S={},k=[],L=[],R={},T={},B={},G={},D=0,F=[{dict:T,value:0},{dict:G,value:1/0},{dict:R,value:[]},{dict:B,value:0}];function Z(e,t){if(!A(G[t])){G[t]=G[M]+1;k.push(t)}if(G[t]===G[M]+1){T[t]+=T[M];R[t].push(M)}}function P(e,t){if(G[t]>G[M]+s(M,t)){G[t]=G[M]+s(M,t);a(k,t);T[t]=0;R[t]=[]}if(G[t]===G[M]+s(M,t)){T[t]+=T[M];R[t].push(M)}}var Y=e.getCache(m).adjacency,V={regular:function(e){T[e]=1;G[e]=0;k.push(e);for(;l(k);){M=k.shift();L.push(M);n(Y[M],Z)}},dijkstra:function(e){T[e]=1;G[e]=0;k.push(e);for(;l(k);){M=o(k);L.push(M);n(Y[M],P)}}},W={regular:function(e){for(;l(L);){E=L.pop();for(var t=(1+B[E])/T[E],n=0;n<R[E].length;n++){M=R[E][n];B[M]+=T[M]*t}E!==e&&(S[E]+=B[E])}},endpoints:function(e){S[e]+=L.length-1;for(;l(L);){E=L.pop();for(var t=(1+B[E])/T[E],n=0;n<R[E].length;n++){M=R[E][n];B[M]+=T[M]*t}E!==e&&(S[E]+=B[E]+1)}}},X={chart:function(){if(D>2){I=1/((D-1)*(D-2));n(S,(function(e,t){S[t]*=I}))}},component:function(){C=h();n(S,(function(e,t){if(C[t]>2){I=1/((C[t]-1)*(C[t]-2));S[t]*=I}}))},unnormalized:function(){if(!g()){I=.5;n(S,(function(e,t){S[t]*=I}))}}};function U(){H();O(r,S)}var j=V[y]||V.regular,K=W[b]||W.regular,H=X[x]||X.chart;e.eachNode(m,(function(){D++}));c(m,S,0);function Q(e,t){f();j(e.id);K(e.id);t()}e.asyncEachNode(m,"betweenness",Q,U)}function $h(e,t,r){var i,o={},a={},u=[],s=e.getCache(r).adjacency;function l(){for(var e=0,t=1/0,n=0;n<u.length;n++){var r=o[u[n]];if(r<=t){e=n;t=r}}return e}function f(e,t,n){a[e]||(a[e]=[]);a[e].push({id:t,links:n})}e.eachNode(r,(function(e){var t=e.id;o[t]=1/0;a[t]=void 0;u.push(t)}));o[t]=0;function c(t,n){var u=_h(e,i,n,r),s=o[i]+u.value;if(s<o[n]){o[n]=s;a[n]=[{id:i,links:u.links}]}else s===o[n]&&f(n,i,u.links)}for(;u.length>0;){var d=l();i=u[d];if(o[i]===1/0)break;u.splice(d,1);n(s[i],c)}return{distance:o,previous:a}}function ev(e,t,r){if(!e.getNodes()[t])throw new Error("distances error: id(s) must be present in the graph");var i=z(r||{},{combos:"toplevel",all:!1});Jh(i,e);Yh(i);var o=$h(e,t,i),a={};n(o.distance,(function(e,t){A(e)&&(a[t]=e)}));return a}function tv(e,t,r){var i=z(t,{all:!1,combos:"toplevel",direction:"any",mode:"auto",normalization:"component",value:void 0,weights:!1});i.combos="toplevel";var o=e.getCache(i).adjacency;function a(e){var t=0;n(e,(function(e){t+=A(e)?1:0}));return t}function u(e){return 0===Object.keys(e).length}function s(e){return!N(e)}function l(t){var n=e.getLinks();return!n[t].a1&&!n[t].a2}function f(e){var t={},r=0,i={},a={};a[e]=!0;function l(e,i){if(!s(t[i])){t[i]=r;n(o[i],(function(e,t){a[t]=!0}))}}for(;!u(a);){i=a;a={};n(i,l);r+=1}return t}function c(){return"any"!==i.direction}function d(){i.mode=i.mode||"auto";if(!i.mode.match(/^(connected|disconnected|auto)$/))throw new TypeError("Option mode property should be either 'connected', 'disconnected' or 'auto'")}function h(){d();return"auto"===i.mode?m():i.mode}function v(){return!N(i.value)}function g(){return!!zh(i).match(/chart/)}function p(){return!!zh(i).match(/component/)}function m(){var t="disconnected",n=Xh(e,i);if(1===n.length){t="connected";if(c())for(var r=0;r<n[0].links.length;r++)if(l(n[0].links[r]))return"disconnected"}return t}var y=Jh(i,e);Vh(i);Yh(i);y.all=i.all;var b=v()||c()?"dijkstra":"regular",x=0,w={},M=h(),E={regular:function(e){return f(e)},dijkstra:function(t,n){return ev(e,t,n)}},I={connected:function(e,t){var r=0;n(t,(function(e){r+=A(e)?e:0}));return r?1/r:0},disconnected:function(e,t){var r=0;n(t,(function(t,n){r+=e!==n?1/t:0}));return r}};function C(){O(r,w)}var S=E[b]||E.regular,k=I[M];x=0;e.eachNode(i,(function(){x++}));w={};function L(e,t){var n,r=S(e.id,y),i=a(r);w[e.id]=k(e.id,r);if(x>1){n=g()?Math.pow(i-1,2)/(x-1):p()?i-1:1;w[e.id]*=n}t()}e.asyncEachNode(i,"closeness",L,C)}function nv(e,t){var n=z(t,{all:!1,combos:"toplevel",consistent:!0,factor:5});n.combos="toplevel";Yh(n);var r,i=[],o=[],a=[],u=[],s={},l=0,f=[],c=[],d=[],h=[],v=[];e.eachNode(n,(function(e){u.push(e.id);o.push([]);a.push([]);s[e.id]=u.length-1;f.push([u.length-1]);c.push(u.length-1);v.push(u.length-1);i.push(0);d.push(0)}));e.eachLink(n,(function(e){var t=m(e,n);l+=t;var r=s[e.id1],u=s[e.id2];if(!a[r][u]){a[r][u]=0;a[u][r]=0}a[r][u]+=t;a[u][r]+=t;i[r]+=t;i[u]+=t;d[r]+=t;d[u]+=t;o[r].push(u);o[u].push(r)}));var g=Math.max(1e4,50*u.length);if(0===u.length)return[];0===l&&(g=0);var p=me();p.setSeed(n.consistent?900736044081:null);function m(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function y(e){r=A(r=+e)?r:5;r=Math.max(0,r);r=(r=Math.min(10,r))*r*r/125}y(n.factor);for(var b=0;b<g;b++){if(p.next()>.95){S(v[Math.floor(p.next()*v.length)],v[Math.floor(p.next()*v.length)])}if(b<.5*g&&p.next()>.98){L(v[Math.floor(p.next()*v.length)])}var x=Math.floor(u.length*p.next()),w=o[x][Math.floor(p.next()*o[x].length)],M=c[w],E=c[x];if(M!==E){C(M,E,x)>=0&&k(x,M)}}function I(){for(var e=[],t=0;t<v.length;t++){for(var n=[],r=0;r<f[v[t]].length;r++)n.push(u[f[v[t]][r]]);e.push(n)}return e}function C(e,t,n){var u=d[t],s=d[e],f=i[n],h=(u-s-f)*f*r;h/=2*l;for(var v=0;v<o[n].length;v++){var g=o[n][v];c[g]===t?h-=a[n][g]:c[g]===e&&(h+=a[n][g])}return h/l}function S(e,t){if(t!==e&&0!==f[e].length&&0!==f[t].length){var n=d[e],i=d[t],u=0;u-=r*n*i/l;for(var s=0;s<f[e].length;s++)for(var h=f[e][s],v=0;v<o[h].length;v++)c[o[h][v]]===t&&(u+=a[h][o[h][v]]);if((u/=l)>0){var g=f[e].length;for(s=0;s<g;s++)k(f[e][0],t)}}}function k(e,t){var n=c[e];c[e]=t;for(var r=[],o=0;o<f[n].length;o++)f[n][o]!==e&&r.push(f[n][o]);if(0===f[t].length){v.push(t);h.splice(h.indexOf(t),1)}f[n]=r;f[t].push(e);d[t]+=i[e];d[n]-=i[e];if(0===f[n].length){h.push(n);v.splice(v.indexOf(n),1)}}function L(e){var t=f[e].length;if(1!==t&&h.length){for(var n=[],r=0;r<t;r++)n.push(f[e][r]);for(r=0;r<t&&h.length;r++)k(n[r],h[0])}}return I()}function rv(e,t){var r=z(t,{all:!1,combos:"toplevel",multi:!0});r.combos="toplevel";Jh(r,e);Yh(r);var i=e.getCache(r).adjacency,o={};e.eachNode(r,(function(t){var a=t.id;o[a]=0;n(i[a],(function(t,n){for(var i=0;i<t.length;i++){var u=Hh(a,n,t[i],r,e);if(A(u)){o[a]+=u;if(!r.multi)break}}}))}));return o}function iv(e,t){var r,i,o=z(t,{all:!1,combos:"toplevel",direction:"any"});o.combos="toplevel";o.direction="any";Yh(o);Qh(o,e);var a={},u=Xh(e,o);function s(e,t){a[t]=e*u[r].nodes.length}for(r=0;r<u.length;r++){var l={};for(i=0;i<u[r].nodes.length;i++)l[u[r].nodes[i]]=!0;n(f(l),s)}return a;function f(t){var n={},r=[],i=[],a=[],u=0,s=[],l=0;e.eachNode(o,(function(e){var o=e.id;if(t[o]){r.push(o);n[o]=r.length-1;i.push([]);a.push({})}}));var f=Math.max(100,5*Math.sqrt(r.length));e.eachLink(o,(function(e){if(t[e.id1]&&t[e.id2]){var r=n[e.id1],s=n[e.id2];if(!a[r][s]){i[r].push(s);i[s].push(r);a[s][r]=0;a[r][s]=0}var f=h(e,o);a[r][s]+=f;a[s][r]+=f;u+=f;l++}}));var c={};if(0===r.length)return c;if(1===r.length){c[r[0]]=1;return c}if(2===r.length){c[r[0]]=.5;c[r[1]]=.5;return c}u/=l;f=Math.max(100,5*Math.sqrt(r.length));for(var d=0;d<r.length;d++)s.push(Math.random());for(d=0;d<f;d++){s=v(s);d%10==0&&g()}g();for(d=0;d<r.length;d++)c[r[d]]=s[d];return c;function h(e,t){return t.value&&e.d?+e.d[t.value]:1}function v(e){for(var t=[],n=0;n<r.length;n++){for(var o=0,s=0;s<i[n].length;s++)o+=a[n][i[n][s]]*e[i[n][s]];o+=u*e[n];t.push(o)}return t}function g(){for(var e=1/p(s),t=0;t<r.length;t++)s[t]*=e}function p(e){for(var t=0,n=0;n<e.length;n++)t+=Math.abs(e[n]);return t}}}function ov(e,t,r){var i=null;function o(){i=null}function a(e,t,n,r,i){e[n]||(e[n]={});e[r]||(e[r]={});if(!e[n][r]){e[r][n]=[];e[n][r]=e[r][n];t.push(i)}e[n][r].push(i)}function u(e,t,n){var r={id:t.id,id1:t.id1,id2:t.id2,ids:n};e.edges.push(r);e.connections.push(n)}function s(i){var o={connections:[],adjacency:{},vertices:{},edges:[],selfAdjacency:{},selfConnections:[]};t(i,(function(e){o.vertices[e.id]={x:e.x,y:e.y};o.adjacency[e.id]={}}));var s=[],l={};e(i,(function(e){if(e.id1===e.id2){l[e.id1]=l[e.id1]||[];l[e.id1].push(e.id)}else a(o.adjacency,s,e.id1,e.id2,e.id)}));for(var f=s.length,c=r(),d=0;d<f;d++){var h=c[s[d]];u(o,h,o.adjacency[h.id1][h.id2])}if(te(l)){var v=o.connections.slice();n(l,(function(e){v.push(e)}));o.selfConnections=v}else o.selfConnections=o.connections;o.selfAdjacency=l;return o}function l(e){var t=z(e,{all:!1,combos:"toplevel"}),n=(t.all?"all":"visible")+"-"+t.combos;i||(i={});i[n]||(i[n]=s(t));return i[n]}return{getCache:l,clearCache:o}}function av(e,t){var r={},i={},o=ov(l,f,c),a=o.clearCache,u=o.getCache;function s(e,t,r){var i=t.all,o="toplevel"!==t.combos,a="underlying"!==t.combos;n(e,(function(e){!i&&e.hi||!o&&e.parentId||!a&&e._combo||r(e)}))}function l(e,t){s(i,e,t)}function f(e,t){s(r,e,t)}function c(){return i}function d(){return r}function h(e,t){r=e;i=t;a()}function v(n,r,i,o){function a(){var e=[];f(n,(function(t){e.push(t)}));return e}var u=a(),s=u.length,l=-1,c=0,d=500,h=Date.now(),v=h,g=700;function m(){if(++l>=s){y(1);o()}else i(u[l],x)}function y(n){if(t){e.fire("progress",{task:r,progress:n});t.trigger("progress",r,n)}}function b(){h=Date.now();if(c++>d||h-v>g){c=0;v=Date.now();return!0}return!1}function x(){if(b()){y(l/s);p(m,0)}else m()}y(0);x()}function g(e,t,n){var r=u(e);if(t===n)return r.selfAdjacency[t];var i=r.adjacency;return i[t]&&i[t][n]}function m(e){var t=u(e);return e.self?t.selfConnections:t.connections}return{asyncEachNode:v,clearCache:a,connections:m,eachLink:l,eachNode:f,findAdjacency:g,getCache:u,getLinks:c,getNodes:d,privateSetProperties:h}}function uv(e,t,r){var i=e.getNodes(),o=e.getLinks(),a=P(t),u={},s={},l=ne(a),f=z(r,{all:!1,direction:"any",hops:1});if(f.hops<1)throw new Error("neighbours error: hops must be a positive number");Yh(f);var c=0,d={},h={},v=l,g=e.getCache(f),p=g.adjacency,m=g.selfAdjacency;n(l,(function(e,t){var n=Q(t);if(!i[n]&&!o[n])throw new Error("neighbours error: ids must be present in the graph");c++}));function y(e,t,n){if(!h[t]&&Nh(o,n,e,t,f)){u[t]=!0;h[t]=!0;if(n!==e){s[e]=!0;e in v&&(s[n]=!0);if(!(e in l)){c++;d[e]=!0}}}}function b(){n(l,(function(e,t){if(i[t]){p[t]&&n(p[t],(function(e,n){for(var r=0;r<e.length;r++){y(n,Q(e[r]),t)}}));var r=m[t];if(r)for(var a=0;a<r.length;a++)y(t,r[a],t)}else if(o[t]){var u=o[t];if(!h[u.id2]&&Nh(o,u.id2,u.id1,t,f)){s[u.id2]=!0;h[u.id2]=!0;h[t]=!0;if(!(u.id2 in l)){c++;d[u.id2]=!0}}if(!h[u.id1]&&Nh(o,u.id1,u.id2,t,f)){s[u.id1]=!0;h[u.id1]=!0;h[t]=!0;if(!(u.id1 in l)){c++;d[u.id1]=!0}}}}))}for(;f.hops--&&c;){c=0;b();l=d;d={}}return{nodes:Object.keys(s),links:Object.keys(u)}}function sv(e,t){var n=z(t,{all:!1,combos:"toplevel",directed:!0});n.combos="toplevel";Yh(n);Jh(n,e);var r={},i=[],o=[],a=[],u=[],s=[],l=.85;e.eachNode(n,(function(e){i.push(e.id);r[e.id]=i.length-1;o.push([]);a.push({});u.push(0)}));var f=Math.max(100,5*Math.sqrt(i.length));e.eachLink(n,(function(e){var t=r[e.id1],i=r[e.id2],s=v(e,n);if(!n.directed||e.a2||!e.a1&&!e.a2){if(!a[i][t]){a[i][t]=0;o[i].push(t)}a[i][t]+=s;u[t]+=s}if(!n.directed||e.a1||!e.a1&&!e.a2){if(!a[t][i]){a[t][i]=0;o[t].push(i)}a[t][i]+=s;u[i]+=s}}));for(var c=0;c<i.length;c++)s.push(Math.random());var d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;for(c=0;c<f;c++)s=g(s);d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;var h={};for(c=0;c<i.length;c++)h[i[c]]=s[c];return h;function v(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function g(e){for(var t=[],n=0,r=0,f=0;f<i.length;f++)n+=e[f];for(f=0;f<i.length;f++){for(var c=0,d=0;d<o[f].length;d++){var h=o[f][d];c+=a[f][h]*e[h]/u[h]}0===u[f]&&(r+=l*e[f]);c*=l;c+=(1-l)*n/i.length;t.push(c)}r/=i.length;for(f=0;f<s.length;f++)t[f]+=r;return t}function p(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}}function lv(e,t,n,r){var i=e.getNodes();if("string"!=typeof t||"string"!=typeof n)throw new Error("shortestPaths error: ids must be strings");if(!i[t]||!i[n])throw new Error("shortestPaths error: ids must be present in the graph");var o=z(r,{combos:"toplevel",all:!1});Jh(o,e);Yh(o);var a=$h(e,t,o),u=a.previous;if(a.distance[n]===1/0)return{onePath:[],one:[],items:[],distance:1/0};for(var s=[],l=[],f=n;u[f];){s.unshift(f);l.unshift(f);l.unshift(u[f][0].links[0]);f=u[f][0].id}s.unshift(f);l.unshift(f);function c(e){for(var t=[],n=0;n<e.length;n++)u[e[n].id]&&(t=t.concat(u[e[n].id]));return t}var d={};d[n]=!0;var h=[];h.push({id:n});for(var v=c(h);v.length>0;){for(var g=0;g<v.length;g++){d[v[g].id]=!0;for(var p=0;p<v[g].links.length;p++)d[v[g].links[p]]=!0}v=c(v)}return{onePath:l,one:s,items:Object.keys(d),distance:a.distance[n]}}function fv(e,t){var n=z(t,{all:!1,combos:"toplevel"});n.combos="toplevel";Yh(n);for(var r=$d(e.getCache(n),!1),i=jf.kcore(r.staticGraph),o={},a=0,u=0;u<i.size;u++){var s=i.get(u);o[r.vertexMap.get(u)]=s;a=Math.max(a,s)}return{maximumK:a,values:o}}function cv(e,t){var n=av(e,t);return{internalMarkLinks:function(e){return Zh(n,e)},privateGetLinkIdsBetween:function(e,t){return Fh(n,e,t)},privateNeighbourLinks:function(e){return Dh(n,e)},clearCache:n.clearCache,connections:n.connections,findAdjacency:n.findAdjacency,privateSetProperties:n.privateSetProperties,betweenness:function(e,t){return qh(n,e,t)},closeness:function(e,t){return tv(n,e,t)},clusters:function(e){return nv(n,e)},components:function(e){return Xh(n,e)},degrees:function(e){return rv(n,e)},distances:function(e,t){return ev(n,e,t)},eigenCentrality:function(e){return iv(n,e)},kCores:function(e){return fv(n,e)},neighbours:function(e,t){return uv(n,e,t)},pageRank:function(e){return sv(n,e)},shortestPaths:function(e,t,r){return lv(n,e,t,r)}}}var dv=2*Math.PI,hv=Math.PI/2;function vv(){var e=-Math.PI/12,t=Math.sin(e),n=Math.cos(e);function r(e,t){if(e.r===t.r){if(e.t){if(!t.t)return-1;if(e.t<t.t)return-1;if(e.t>t.t)return 1}else if(t.t)return 1;return e.id===t.id?0:e.id<t.id?-1:1}return e.r<t.r?1:-1}function i(i,o){var a,u=i;if(!u||0===u.length)return u;var s=z(o,{padding:8,radialPadding:0}),l=s.padding,f=0;u.sort(r);u=u.map((function(e){return{id:e.id,r:e.r+l,x:e.x,y:e.y,labelOffset:e.labelOffset,w:e.w,h:e.h}}));var c=[],d=0,h=u[f++];if(1===u.length)g();else if(2===u.length)m();else if(3===u.length)b();else if(4===u.length)y();else if(u.length>4){var v=u[0].r;u[2].r/v>.5&&u.length>10?b():u[1].r/v>.5&&u.length>10?m():g();a=Math.abs(u[0].y-u[0].r)+s.radialPadding;h=u[f++];for(;h;)A();w();p()}function g(){u[0].x=0;u[0].y=-u[0].labelOffset}function p(){var e=u[0],t=u[0];u.forEach((function(n){n.y<e.y?e=n:n.y>e.y&&(t=n)}));var n=(Math.abs(e.y-e.r)-(Math.sqrt(t.x*t.x+t.y*t.y)+t.r))/4;u.forEach((function(e){e.y+=n}))}function m(){var e=h,t=u[f++];e.x=0;e.y=-t.r-e.labelOffset;t.x=0;t.y=e.r-t.labelOffset}function y(){var e=h,n=u[f++],r=u[f++],i=u[f++];if(n.r===r.r&&r.r===i.r){n=u[2];r=u[1]}var o=e.r+r.r,a=e.r,s=Math.sqrt(o*o-a*a),l=e.r-n.r,c=t*s;e.x=-n.r;e.y=-e.labelOffset-c;n.x=e.r;n.y=-n.labelOffset+c;r.x=l+c;r.y=-s-r.labelOffset;i.x=l-c;i.y=s-i.labelOffset}function b(){var e=h,r=u[f++],i=u[f++],o=(e.r+r.r+l)/Math.sqrt(3),a=(e.r-r.r)/2,s=1.25*Math.PI;e.x=o*t;e.y=-o*n+a;r.x=o*n;r.y=-o*t-r.labelOffset+a;i.x=o*Math.sin(s);i.y=-o*Math.cos(s)-i.labelOffset+a}function x(e){return 2*e.r+l}function A(){d+=h.r+a+s.radialPadding;a=h.r;var e=dv*d,t=e-x(h),n={items:[],radius:d,spaceLeft:0,circumference:e};c.push(n);for(;h&&t>0;){n.items.push(h);(h=u[f++])&&(t-=x(h))}h&&(t+=x(h));n.spaceLeft=t;if(h&&u.length-f<5){for(var r=0;h;){r+=x(h);n.items.push(h);h=u[f++]}n.radius=(e-t+r)/dv;n.circumference=dv*n.radius;n.spaceLeft=0}}function w(){c.forEach((function(t){var n=dv/(t.circumference-t.spaceLeft),r=0,i=n*t.items[0].r;4===t.items.length&&(i-=e);t.items.forEach((function(e){var o=n*e.r,a=r+o;e.x=t.radius*Math.cos(a-hv-i);e.y=t.radius*Math.sin(a-hv-i)-e.labelOffset;r+=n*x(e)}))}))}return u}return{compareCircles:r,concentricLayout:i}}var gv=function(){};function pv(e,t,n,r){void 0===r&&(r=gv);return function(i,o){var a={vertices:i,updatedEdges:o,extents:vh(i)};e.fire("progress",{task:"layout",progress:1});t.trigger("progress","layout",1);r(a,n);return a}}var mv=Hd.KnownProperties,yv=Hd.Names,bv=js.fromArray,xv={proportion:.12,min:20,max:200},Av=.5;function wv(e,t,n,r){var i,o=oe(n?n.nodeIds:[]),a=e.vertexMap,u=jf.buildPropertyBagFrom(bv(e.nodeList,(function(e){return[a.getUniqueInverse(e.id),e]})),((i={})[mv.position2d]=function(e){return e},i[mv.sparseRadius]=function(e){return Math.max(t(e.id,!0).radius,Av)},i[mv.radius]=function(e){var n=t(e.id,!1).radius;return Math.max(n<Av?t(e.id,!0).radius:n,Av)},i[mv.speed]=function(e){return void 0!==o[e.id]?0:1},i));r&&(u[mv.group]=r);var s=Hd.analysisProps(e.staticGraph,u),l=n&&n.absolute?Mv(e,s[mv.position2d],s[mv.group],n.nodeIds):{};return le(s,l)}function Mv(e,t,n,r){for(var i,o=e.vertexMap,a=o.size,u=new Map,s=[],l=0;l<r.length;l++){var f=o.getUniqueInverse(r[l]),c=n.get(f),d=t.get(f);if(!u.has(c)){s.push(c);u.set(c,[])}u.get(c).push({x:d.x,y:d.y})}var h=function(e){return dc.Rect.center(dc.pointExtents(bv(e)))};return jf.buildPropertyBagFrom(bv(s,(function(e){return[e,u.get(e)]})),((i={})[mv.groupCenter]={map:h,defaultValue:null},i[mv.groupSpeed]={map:function(){return 0},defaultValue:1},i),a)}function Ev(e,t){var n=new Hd.SetTimeoutRunner(e,0,100);n.initialize(t);return{start:n.start.bind(n),cancel:n.cancel.bind(n)}}function Iv(e,t){e.initialize&&e.initialize(t);return{start:function(n,r){try{for(;e.progress()<1;){e.run(t);r&&r(e.progress())}}catch(e){n(e);return}n()},cancel:function(){}}}function Cv(){var e;return(e={})[Hd.Names.organic]=null,e}function Sv(e,t,n){var r=qd(q(e.v),e.e);function i(t){var n=t.klOpts.fixed&&Array.isArray(t.klOpts.fixed)?t.klOpts.fixed.filter((function(t){return void 0!==e.v[t]})):[],i={};t.pinTo&&(t.pinTo.firstFixed&&n.length>0?i.pinTo=r.vertexMap.getUniqueInverse(n[0]):t.pinTo.fallback&&(i.pinTo=t.pinTo.fallback));return{nodeIds:n,absolute:!!t.klOpts.absoluteFixed,pinOptions:i}}function o(e,t,i,o,a){var u=Hd.createLayout(e,r.staticGraph,i.libgOpts);if(n&&void 0!==n[e]){var s=n[e];null===s?n[e]=new Hd.AdaptiveProxy(r,u):s.reset(r,u);u=n[e]}var l=(a?Iv:Ev)(u,t),f=function(e,t){return l.start((function(t){return e(t)}),t)};f.cancel=l.cancel;f.state=r;f.fixConfig=o;return f}function a(e,n){var a,u,s=e.klOpts,l="adaptive"===s.mode,f=null!==(a=s.packing)&&void 0!==a?a:l?"adaptive":void 0,c={attenuation:sh(s.tightness)/5-1},d=i(e),h=wv(r,t,d);e.libgOpts=le({adaptive:l,initializationOptions:{seed:s.consistent?7:void 0,consistentSeeds:s.consistent,adaptive:l},liveUpdate:!1,packing:f,packingOptions:{padding:xv,aspectRatio:s.ratio},pinTo:null===(u=d.pinOptions)||void 0===u?void 0:u.pinTo,scale:c},e.libgOpts||{});return o(Hd.Names.organic,h,e,d,n)}function u(e,n,a){var u,s=e.klOpts,l=i(e),f=wv(r,t,l,n);e.libgOpts=le({packing:s.packing,packingOptions:{padding:xv,aspectRatio:s.ratio},pinTo:null===(u=l.pinOptions)||void 0===u?void 0:u.pinTo},e.libgOpts||{});return o(Hd.Names.pack,f,e,l,a)}function s(e,n,i){var a={absolute:!1,nodeIds:[]},u=wv(r,t,a,n);e.libgOpts={iterations:{min:3,max:3},padding:{proportion:(10-sh(e.klOpts.tightness))/100,min:.5,max:1/0}};return o(Hd.Names.removeOverlaps,u,e,a,i)}return{state:r,adaptiveState:n||null,organic:a,reduceOverlaps:s,pack:u}}function kv(e,t,n,r){for(var i,o,a=2*t+24+n,u=Math.floor(Math.sqrt(e.length)),s=Math.ceil(e.length/u),l=0,f=0,c={},d={x:0,y:0},h=0;h<u;h++){for(var v=0;v<s;v++){var g=s*h+v;if(e[g]){c[e[g]]={x:l,y:f};d.x+=l;d.y+=f}l+=a}l=0;f+=a}if("absolute"===r){i=a*(s-1)/2;o=a*(u-1)/2}else{i=d.x/e.length;o=d.y/e.length}for(h=0;h<e.length;h++){c[e[h]].x-=i;c[e[h]].y-=o}return c}function Lv(e,t,n){for(var r=0,i={},o=0;o<t.length;o++)r+=e[t[o]].r;if(1===t.length)i[t[0]]={x:0,y:0};else{var a=Math.PI/4;2===t.length&&(a=Math.PI/2);4===t.length&&(a=0);t.length<4&&(r*=1.5);var u=2*Math.PI/t.length,s=n*r/4;for(o=0;o<t.length;o++){i[t[o]]={x:s*Math.cos(a),y:s*Math.sin(a)};a+=u}}return{positions:i,radius:r}}function Rv(e,t,n,r,i){if(0===n){r[e[0]]={x:0,y:0};return{radius:t,index:-1}}var o=2*t,a=(n+1)*o,u=o,s=Math.sqrt(a/(Math.PI*u))*u,l=Math.floor(2*Math.PI*s/o);l=Math.min(l,n+1);var f,c=2*Math.PI/l;switch(l){case 2:f=Math.PI/2;s*=.75;break;case 3:f=Math.PI/3;s*=.85;break;case 4:f=0;s*=.85;break;case 5:f=0;s*=.9;break;default:f=0}s*=i/2;for(var d=0;d<l;){r[e[n-d]]={x:s*Math.cos(f),y:s*Math.sin(f)};f+=c;d++}return{radius:s,index:n-l}}function Tv(e,t,n){var r,i={},o=0,a=e.length-1;do{var u=Rv(e,t,a,i,n);o=Math.max(u.radius,o);a=u.index}while(a>=0);switch(e.length){case 4:r=2;break;case 3:r=2.5;break;case 2:r=3;break;case 1:r=1;break;default:r=2}return{positions:i,radius:o*r}}function Bv(e,t){for(var n=[],r=0;r<t.length;r++)e[t[r]]&&n.push(t[r]);return n}function Ov(e,t,r,i){n(e,(function(e){if(e.arranged){e.x+=t;e.y+=r}}));i(e,{})}function Gv(e,t,n,r,i,o){var a=t.map((function(e){return Object.keys(e.verts).filter((function(e){return void 0===n[e]}))})).filter((function(e){return e.length>0}));a.push(Object.keys(n));var u=Sv({v:e,e:[]},r),s=u.state.vertexMap,l=eh(u.state,a,(function(e){return e})),f={tightness:5,ratio:i,absoluteFixed:!1},c={packingOptions:{groupOrder:a.map((function(e){return l.get(s.getUniqueInverse(e[0]))})),padding:{proportion:.12,min:20,max:200}}};u.pack({klOpts:f,libgOpts:c},l,!0)((function(){return o(e,{})}))}function Dv(e,t,r,i,o,a,u,s){var l={tidy:function(e,t,n){var r=ph(d,o.e);return Gv(d,r,e,u,t.ratio,n)},average:function(e,t,n){return Ov(d,t.centre.x,t.centre.y,n)},absolute:function(e,t,n){return Ov(d,t.absolute.x,t.absolute.y,n)}},f={grid:function(e,t,n,r,i){return kv(e,n,r,i)},circle:function(e,t,n,r){return Lv(t,e,1.25-(5-r)/50).positions},radial:function(e,t,n,r){return Tv(e,n,1.25-(5-r)/50).positions}},c=z(a,{tightness:5,position:"average",x:0,y:0});r.trigger("prechange","arrange");t.fire("prechange",{type:"arrange"});var d=o.v,h=lh(c.tightness),v=l[c.position]||l.average,g=f[e]||f.grid,p={x:+c.x||0,y:+c.y||0},m=P(i);if((m=Bv(d,m)).length){for(var y=0,b={x:0,y:0},x=0;x<m.length;x++){y+=d[m[x]].r;b.x+=d[m[x]].x;b.y+=d[m[x]].y}y/=m.length;b.x/=m.length;b.y/=m.length;var A=g(m,d,y,h,c.position),w={};n(A,(function(e,t){d[t].x=e.x;d[t].y=e.y;w[t]=d[t];w[t].arranged=!0}));var M={centre:b,absolute:p,ratio:c.ratio};v(w,M,pv(t,r,c,s))}else s()}function Fv(e){var t={include:!1};function r(e,t,n){return{id:t,x:e.x,y:e.y,fixed:n,d:e.d,labelOffset:Ch(e),lc:0,r:1,w:1,h:1}}function i(e,t,n,i){if(!(n in e)){if(!(n in t))throw new Error("link has end which is not in nodes list");var o=t[n];if(o.hi)throw new Error("link has end which is hidden");e[n]=r(o,n,n in i)}}function o(e,t,o,a,u,s,l){for(var f={},c=[],d=0;d<a.length;d++){var h=a[d],v=o[h[0]],g=v.id1,p=v.id2;i(f,t,g,u);i(f,t,p,u);for(var m=[],y=1,b=0;b<h.length;b++){var x=h[b],A=o[x];m.push({id:x,sign:A.id1===g?1:-1,off:A.off||0,a1:A.a1||!1,a2:A.a2||!1});y=Math.max(y,A.w||1)}c.push({id:g<p?g+"-"+p:p+"-"+g,id1:g,id2:p,arrowSize:e.currentArrowLength(y,1),links:m,numLinks:m.length});f[g].lc+=1;f[p].lc+=1}n(t,(function(e,t){if(!(e.hi||!s&&e.parentId)){f[t]||(f[t]=r(e,t,e.id in u));if(l[t]){var n=f[t],i=l[t];n.x=i.x;n.y=i.y}}}));return{v:f,e:c}}function a(e,t,n,r,i){var o=Eh(t,e,n,i);r.r=o.legacyRadius;r.w=o.width;r.h=o.height}function u(e,t,n,r,i){var o=Eh(t,e,n,i);r.r=o.radius;r.w=o.width;r.h=o.height}function s(n,r,i,o,s,l){for(var f=Object.keys(yv).indexOf(n)>=0,c=e.privateGetMaxLabelLength(),d="radial"!==n?{include:!0,maxLength:c}:t,h="lens"===n||f?u:a,v=0;v<i.length;v++)h(r,o[i[v]],d,s[i[v]],l)}return function(e,t,n,r,i,a,u,l,f,c){var d={};if(a)for(var h=0;h<a.length;h++)d[a[h]]=!0;var v=o(e,n,r,i().connections({all:!1,combos:f}),d,void 0!==f&&"toplevel"!==f,null!=c?c:{}),g=v.v,p=v.e,m=Object.keys(g);s(u,t,m,n,g,l);return{e:p,extents:vh(g),v:g,vcount:m.length}}}function Zv(e,t,r){void 0===r&&(r="r");var i,o,a,u,s=[],l=Vv(e);function f(e){if(e[u]){for(var n=e[u].vertices,s=0;s<n.length;s++){var l=n[s],f=t[l][r];o+=f;i=Math.max(i,f)}a+=n.length}}for(u=0;u<l;u++){i=0;o=0;a=0;var c=0;n(e,f);var d=o/a,h=s[u-1];h&&i<h.max+h.yOffset&&(c=(h.max+h.yOffset)/2);s[u]={max:i,average:d,sum:o,yOffset:c}}return s}function Pv(e,t,n){var r=[];if(n>0){var i=e[n];i&&i.edges&&i.edges.forEach((function(e){e.id1===t?r.push(e.id2):e.id2===t&&r.push(e.id1)}))}return r}function Yv(e,t,n){return Pv(e,t,n+1)}function zv(e){var t={up:function(e){e.y=-e.y},down:function(e){},right:function(e){var t=e.y;e.y=e.x;e.x=t},left:function(e){var t=e.y;e.y=e.x;e.x=-t}}
;return t[e]||t.down}function Vv(e){var t=0;n(e,(function(e){t=Math.max(t,e.length)}));return t}function Wv(e){return uh(e)&&"intra"===e.duType}function Xv(e,t){return uh({id:e.id})&&(Wv(t[e.id1])||Wv(t[e.id2]))}function Uv(e,t,r){var i={};function o(t,n){"level"in e[n]||(e[n].level=1/0);e[n].level=Math.min(e[n].level,t)}for(var a=0;a<r.length;a++){n(t.distances(r[a]),o);(i[e[r[a]].c]=i[e[r[a]].c]||[]).push(r[a])}var u=0;n(e,(function(e){u=Math.max(u,e.level)}));return{topByComponent:i,maxLevelNum:u}}function Nv(e,t,n){var r={},i=0;if(n){for(var o=[],a={},u=0;u<e.length;u++)for(var s=0;s<t[u].length;s++)if(!a[t[u][s]]){o.push(t[u][s]);a[t[u][s]]=!0}o.sort((function(e,t){return e-t}));i=o.length;for(u=0;u<e.length;u++){r[u]={};for(s=0;s<o.length;s++)r[u][o[s]]=s}}else for(u=0;u<e.length;u++){r[u]={};for(s=0;s<t[u].length;s++)r[u][t[u][s]]=s;i=Math.max(i,t[u].length)}return{customLevelMap:r,maxLevelNum:i}}function jv(e){for(var t={},n=_v(e),r=Kv(n);r;){var i=qv(Hv(r),t);$v(e,i);Object.keys(i).forEach((function(e){t[e]=!0}));r=Kv(n=_v(e))}return Jv(e)}function Kv(e){var t={},r={},i={},o=[],a=1;function u(s){o.push(s);i[s]=!0;t[s]=a;r[s]=a;a++;for(var l=Object.keys(e[s]),f=0;f<l.length;f++){var c=l[f];if(void 0===t[c]){var d=u(c);if(d)return d;r[s]=Math.min(r[s],r[c])}else i[c]&&(r[s]=Math.min(r[s],t[c]))}if(t[s]===r[s]){var h={},v=void 0;do{v=o.pop();i[v]=!1;h[v]=!0}while(o.length>0&&s!==v);if(Object.keys(h).length>1){var g={};Object.keys(h).forEach((function(t){g[t]=g[t]||{};n(e[t],(function(e,n){h[n]&&(g[t][n]=e)}))}));return g}}}for(var s=Object.keys(e),l=0;l<s.length;l++){var f=s[l];if(!t[f]){var c=u(f);if(c)return c}}}function Hv(e){var t,n=[],r=[],i=new Map,o={},a=!1;function u(e){o[e]=!1;i.has(e)&&i.get(e).forEach((function(t){i.get(e).delete(t);o[t]&&u(t)}))}function s(l){var f=!1;o[l]=!0;for(var c=e[l],d=Object.keys(c),h=0;h<d.length;h++){if(a)return!0;var v=d[h];if(v===t){n.push(hr(r,[c[v]]));f=!0}else if(!o[v]){r.push(c[v]);f=s(v)}}r.pop();if(f){n.length<100?u(l):a=!0;return!0}d.forEach((function(e){var t=i.get(e);if(!t){t=new Set;i.set(e,t)}t.add(l)}));return!1}for(var l=Object.keys(e),f=0;f<l.length;f++){i.clear();o={};s(t=l[f]);Qv(e,t);if(Object.keys(e).length<3)break;if(!Kv(e))break}return n}function Qv(e,t){n(e,(function(n,r){r===t&&delete e[r];Object.keys(n).forEach((function(n){n===t&&delete e[r][n]}))}))}function Jv(e){var t={},n={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=dr({isIncomingEdge:!0,tight:!1},e);(t[e.head]=t[e.head]||{})[e.tail]=dr({isIncomingEdge:!1,tight:!1},e);(n[e.tail]=n[e.tail]||[]).push(e.head);n[e.head]=n[e.head]||[]}));return{directedAdjacencyList:n,incidenceList:t}}function _v(e){var t={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=e;t[e.head]=t[e.head]||{}}));return t}function qv(e,t){var n,r,i={},o={},a={},u=[];if(1===e.length){var s=e[0].filter((function(e){return!t[e.id]}));return(n={})[(s.length>0?eg(s):e[0][0]).id]=!0,n}e.forEach((function(e){var n,r=e.filter((function(e){return!t[e.id]}));if(r.length>0){n=eg(r);u.push(r)}else n=e[0];0!==n.netDirection||a[n.id]||(a[n.id]=!0);o[n.id]=!0}));if(Object.keys(a).length>0)return a;u.forEach((function(e){e.forEach((function(e){i[e.id]=i[e.id]?++i[e.id]:1}))}));var l=Object.keys(i);if(l.length>0){var f=l.reduce((function(e,t){return i[e]>i[t]?e:t}));if(1!==i[f])return(r={})[f]=!0,r}return o}function $v(e,t){for(var n=Object.keys(t).length,r=0;r<e.length&&n>0;r++){var i=e[r];if(t[i.id]){i.head=i.head===i.id1?i.id2:i.id1;i.tail=i.head===i.id2?i.id1:i.id2;n--}}}function eg(e){var t=e.filter((function(e){return e.directionInferred}));return(t.length>0?t:e).reduce((function(e,t){return Math.abs(t.netDirection)<Math.abs(e.netDirection)?t:e}))}function tg(e,t){for(var r={},i={},o=0,a=0;a<e.length;a++){i[a]=ng(e[a],r);o=Math.max(o,i[a].length)}var u={};n(t,(function(e){e.level=r[e.id]||0;0===e.level&&(u[e.c]=u[e.c]||[]).push(e.id)}));return{topByComponent:u,maxLevelNum:o}}function ng(e,t){if(0===e.edges.length)return[];var n=gg(e.edges),r=jv(n),i=r.directedAdjacencyList,o=r.incidenceList;rg(i,t);ig(n,o,t);return ug(n,o,t)}function rg(e,t){var r=i(e),o=0,a=Object.keys(e).length,u={};function s(e){if(0!==a){var r={};n(e,(function(e,t){u[t]||e.forEach((function(e){e&&(r[e]=!0)}))}));ee(e).forEach((function(e){if(!r[e]&&!u[e]){t[e]=o;u[e]=!0;a--}}));o++;s(e)}}s(r)}function ig(e,t,n){var r=Object.keys(t).length,i=og(e,t,n),o=i.vertsInTightTree,a=i.nonTreeEdges;function u(){var e=Object.keys(o);if(e.length!==r){var i,s=1/0,l={};a.forEach((function(e){var t,r=cg(e,n);if(o[e.tail]||o[e.head])if(r<s){s=r;i=!!o[e.head];l=((t={})[e.id]=!0,t)}else r===s&&(l[e.id]=!0)}));if(s>0){var f=i?-s:s;e.forEach((function(e){n[e]+=f}))}a=a.filter((function(e){if(l[e.id]&&(o[e.head]||o[e.tail])){if((i||0===s)&&o[e.head]&&!o[e.tail]){vg(o,e);hg(t,e,!0);return!1}if((!i||0===s)&&!o[e.head]&&o[e.tail]){vg(o,e);hg(t,e,!0);return!1}}if(o[e.tail]&&o[e.head]){dg(e,n)&&hg(t,e,!0);return!1}return!0}));u()}}u()}function og(e,t,n){var r=[],i=Object.keys(t);function o(e){return dg(e,n)}for(var a=0,u=i[a];0===q(t[u]).filter(o).length;)u=i[++a];var s=ag(t,u,n);e.forEach((function(e){s[e.id1]&&s[e.id2]||r.push(e)}));return{nonTreeEdges:r,vertsInTightTree:s}}function ag(e,t,r){var i={},o={};function a(t){i[t]=!0;n(e[t],(function(t,n){if(dg(t,r))if(i[n]){if(i[n]&&o[n]){hg(e,t,!0);vg(o,t)}}else{hg(e,t,!0);vg(o,t);a(n)}}))}a(t);return o}function ug(e,t,n){var r,i=lg(t);function o(e){n[e]-=r}for(;i;){r=1/0;for(var a=[],u=0;u<e.length;u++){var s=cg(e[u],n);if(i.tailSegmentVerts[e[u].head]&&!i.tailSegmentVerts[e[u].tail]&&s>0){a.push(e[u]);r=Math.min(s,r)}}Object.keys(i.tailSegmentVerts).forEach(o);a.forEach((function(e){dg(e,n)&&hg(t,e,!0)}));hg(t,dr({id1:i.tail,id2:i.head},i),!1);i=lg(t)}return fg(n,t)}function sg(e,t,r){var i=!1,o={},a={};function u(s){a[s]=!0;o[s]=!0;n(e[s],(function(e,n){if(e.tight&&!o[n]){if(s!==t&&n===r){i=!0;return}if(n!==r){a[n]=!0;u(n)}}}))}u(t);var s=0;i||n(e,(function(e,t){n(e,(function(e,n){if(e.isIncomingEdge){a[t]&&!a[n]&&s++;!a[t]&&a[n]&&s--}}))}));return{cutValue:s,tailSegmentVerts:a}}function lg(e){for(var t=Object.keys(e),n=0;n<t.length;n++)for(var r=e[t[n]],i=t[n],o=q(r),a=ee(r),u=0;u<o.length;u++)if(o[u].isIncomingEdge&&o[u].tight){var s=a[u],l=sg(e,i,s),f=l.cutValue,c=l.tailSegmentVerts;if(f<0)return{head:s,tail:i,tailSegmentVerts:c}}}function fg(e,t){var n=[],r=ee(t),i=1/0,o=-1/0;r.forEach((function(t){var n=e[t];i=n<i?n:i;o=n>o?n:o}));r.forEach((function(t){e[t]+=-i}));o+=-i;for(var a=0;a<=o;a++)n.push(a);return n}function cg(e,t){return Math.abs(t[e.id1]-t[e.id2])-1}function dg(e,t){return 1===Math.abs(t[e.id1]-t[e.id2])}function hg(e,t,n){e[t.id1][t.id2].tight=n;e[t.id2][t.id1].tight=n}function vg(e,t){e[t.id1]=!0;e[t.id2]=!0}function gg(e){return e.map((function(e){var t,n=0,r=0;e.links.forEach((function(e){e.a1&&(n+=e.sign);e.a2&&(n-=e.sign);e.a1||e.a2||(r-=e.sign)}));t=0!==n?n>0?e.id1:e.id2:0!==r?r>0?e.id1:e.id2:e.id1<e.id2?e.id2:e.id1;var i=0===n,o=i?r:n,a=t===e.id2?e.id1:e.id2;return dr(dr({},e),{directionInferred:i,netDirection:o,head:t,tail:a})}))}function pg(e,t,r,i,o){for(var a={},u={},s=0;s<i.length;s++)u[s]=mg(t,r,i[s],a);var l=Nv(i,u,o),f={};n(e,(function(e){e.level=l.customLevelMap[e.c][a[e.id]]||0;0===e.level&&(f[e.c]=f[e.c]||[]).push(e.id)}));return{topByComponent:f,maxLevelNum:l.maxLevelNum}}function mg(e,t,r,i){var o={},a=[],u=1/0;function s(t){if(t.d&&A(t.d[e])){var n=t.d[e];if(!o[n]){o[n]=[];a.push(n)}o[n].push(t.id);i[t.id]=n;n<u&&(u=n)}}function l(){for(var e=0;e<a.length;e++){for(var n=a[e],r=[],u=t.neighbours(o[n]),s=((a[e+1]||n+1)+n)/2,l=0;l<u.nodes.length;l++){var f=u.nodes[l];if(N(i[f])){r.push(f);i[f]=s}}if(r.length){a.splice(e+1,0,s);o[s]=r}}}n(r.verts,s);if(u===1/0)return ng(r,i);a.sort((function(e,t){return e-t}));l();return a}function yg(e,t,n,r,i,o,a,u){var s=n(),l=i,f=i?"sequential":"hierarchy";function c(){return a?pg(e,a,s,r,l):o&&o.length>0||!i?Uv(e,s,o):tg(r,e)}var d=c(),h={},v=Ag(e,t,r,h,d.maxLevelNum);bg(e,t,f,v,h,u);"hierarchy"===f&&a&&xg(e,s,v,h,d.topByComponent)}function bg(e,t,n,r,i,o){void 0===o&&(o=[]);for(var a=0,u=t.length;a<u;a++){var s=void 0,l=void 0,f=t[a],c=e[Q(f.id1)],d=e[Q(f.id2)],h=c.level,v=d.level;if(A(h)&&A(v)){f.level=Math.max(h,v);if(h<v){i[d.id]=!0;l=c;s=d}else if(v<h){i[c.id]=!0;l=d;s=c}}var g=Math.abs(h-v);if(g>1)r.insertChain(s,l,f);else if("sequential"===n&&0===g){r.insertInternalLink(c,d,f);o.push(f)}}}function xg(e,t,r,i,o){n(e,(function(n,a){if(!i[a]&&0!==n.level){for(var u=o[n.c],s=void 0,l=1/0,f=0;f<u.length;f++){var c=t.shortestPaths(a,u[f]);if(c.distance<l){s=c;l=c.distance}}for(var d=0;d<s.one.length;d++){var h=s.one[d],v=e[h];if(v&&"level"in v&&v.level<n.level){var g=r.insertEdge(n,v,n.c);n.level-v.level>1&&r.insertChain(n,v,g);break}}}}))}function Ag(e,t,n,r,i){var o=0;function a(t,i){var a=t.origId||t.id,u={id:oh+a+"-"+o++,level:t.level-1,origId:a,x:0,y:0,c:t.c,r:10,fixed:!1,lc:t.lc,duType:i,w:20,h:20,labelOffset:0};e[u.id]=u;n[t.c].verts[u.id]=u;r[u.id]=!0;return u}function u(e,r,i,o){void 0===o&&(o=0);var a={id:oh+e.id+"-"+r.id,id1:e.id,id2:r.id,c:i,numLinks:o};"level"in e&&"level"in r&&(a.level=Math.max(e.level,r.level));t.push(a);n[i].edges.push(a);return a}function s(e,t,n){var r=n.c,i=n.numLinks,o=a(e,"chain"),l=n.id1===t.id;u(l?o:e,l?e:o,r,i);o.level===t.level+1?u(l?t:o,l?o:t,r,i):s(o,t,n)}return{insertEdge:u,insertChain:s,insertInternalLink:function(e,t,n){var r=n.c,o=n.numLinks;if(e.level>0){var s=a(e,"intra");u(e,s,r,o);u(s,t,r,o)}if(e.level<i-1){var l=a(e,"intra");l.level+=2;u(e,l,r,o);u(l,t,r,o)}}}}function wg(e,t,n,r,i,o,a,u,s){Mg(r,i,0,a,u,s);Eg(e,t,i,n,o,u)}function Mg(e,t,n,r,i,o){var a=2*i+24+o;r||(e.x=n);var u=n-e.subChildrenCount*(a/2),s=e.children;if(s)for(var l=0;l<s.length;l++){var f=t[s[l]],c=f.subChildrenCount;0===c&&(c=1);var d=u+c*a;Mg(f,t,(d+u)/2,!1,i,o);u=d}}function Eg(e,t,n,r,i,o){for(var a=0,u=Math.PI*(2/3),s=0,l=0;l<t[e].length;l++){var f=t[e][l].vertices,c=r[l].yOffset,d=r[l].average,h=2*((o<d?d:o)+12)+c;a+=s;for(var v=0;v<f.length;v++){var g=f[v],p=n[g];p.y=a;if(!i){var m=p.children;if(m&&m.length>1){var y=Ig(Cg(m.map((function(e){return n[e]}))),u);h=Math.max(h,y)}}}s=h}}function Ig(e,t){return e/(2*Math.tan(t/2))}function Cg(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r].x;t=Math.min(t,i);n=Math.max(n,i)}return n-t}function Sg(e,t,r,i,o){function a(e,t){return(e.r+t.r)/(e.a-t.a)}function u(e,t,n){var r=t>0?e+n:e+n/2;return r>0?r:e}function s(e,t,n,r){if(r&&1===e.length)return 0;for(var i=t,o=i,s=1;s<e.length;s++)o=Math.max(a(l[e[s]],l[e[s-1]]),o);return u(o,o-i,n)}var l,f=lh(o);n(t,(function(t,n){for(var o=ch(r[+n].verts),a=0,u=a,c=4*i,d=c,h=2*i+24,v=0;v<t.length;v++){var g=t[v].vertices,p=void 0;l={};for(var m=0;m<g.length;m++){var y=g[m],b=(p=e[y]).x-o.minx,x=o.maxx-o.minx+h;if((b*=2*Math.PI/x)<0||b>2*Math.PI)throw new Error("[Radial] Theta angle should be in the range [0; 2*PI]");l[y]={a:b,r:p.r}}u=a;0===v?g.length>1&&(a+=c/2):a+=c;if((a=s(g,a,f,v<1))-u>d){d=a-u+1;c=Math.max(c,d/2);0===v&&g.length<3&&(a/=2)}for(m=0;m<g.length;m++){(p=e[g[m]]).x=a*Math.cos(l[p.id].a);p.y=a*Math.sin(l[p.id].a)}}}))}function kg(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++)"level"in t[o]&&i(t[o].c,t[o].level,"edges",t[o]);return r}function Lg(e){var t=0,r=0;n(e,(function(e){if("level"in e&&!uh(e)){t+=e.r;r+=1}}));return t/r}function Rg(e,t,r){var i=zv(r);n(t,(function(t){for(var n=0;n<t.length;n++)for(var r=t[n].vertices,o=0;o<r.length;o++)i(e[r[o]])}))}function Tg(e,t,r,i,o,a){var u=z(r,{top:[],orientation:"down",stable:!0,flatten:!1}),s=e.v,l=e.e,f=ph(s,l),c=u.level,d=i?1:lh(u.tightness),h=c?[]:Y(u.top,s),v=!i&&u.flatten;yg(s,l,t,f,!1,h,c);var g=kg(s,l),p=Lg(s),m=Zv(g,s);function y(){n(g,(function(e){for(var t=e.length-1;t>=0;t--)for(var n=e[t].vertices,r=[],i=0;i<n.length;i++){var o=n[i],a=Yv(e,o,t);s[o].children=[];s[o].subChildrenCount=0;if(0!==a.length){for(var u=[],l=0;l<a.length;l++)r.indexOf(a[l])<0&&u.push(a[l]);if(u.length>0){s[o].children=u;s[o].subChildrenCount=b(u);for(l=0;l<u.length;l++){r.push(u[l]);s[u[l]].parent=o}}}}}))}function b(e){for(var t=0,n=0;n<e.length;n++){var r=s[e[n]].subChildrenCount;t+=0===r?1:r}return t}y();n(g,(function(e,t){var n={children:e[0].vertices,subChildrenCount:b(e[0].vertices)};wg(t,g,m,n,s,v,!0,p,d)}));i?Sg(s,g,f,p,u.tightness):Rg(s,g,u.orientation);n(s,(function(e){uh(e)&&delete s[e.id]}));u.tidy||n(g,(function(e,t){var n=f[t].extents,r=vh(f[t].verts),i=0,o=0;if(n&&r){i=(n.x1+n.x2-(r.x1+r.x2))/2;o=(n.y1+n.y2-(r.y1+r.y2))/2}for(var a=0;a<e.length;a++)for(var u=e[a].vertices,l=0;l<u.length;l++){var c=u[l],d=s[c];if(d){d.x+=i;d.y+=o}}}));a((function(){return o(s,{})}))}function Bg(){var e,t,r,i,o,a,u,s,l,f,c,d,h,v,g,p,m,y=3,b=.5,x=ts,A=[],w=[];function M(e,t){l+=f;e.fire("progress",{task:"layout",progress:l});t.trigger("progress","layout",l)}function E(e,t){function n(e,t,n,r,i){return{isLeaf:!0,children:[],points:[],x1:e,y1:t,x2:n,y2:r,depth:i,m:0}}function r(e){return e.depth>=t}function i(e,t){var r,i,o,a,u=.5*(e.x1+e.x2),s=.5*(e.y1+e.y2);if(0===t||1===t){o=e.y1;a=s}else{o=s;a=e.y2}if(0===t||2===t){r=e.x1;i=u}else{r=u;i=e.x2}e.isLeaf=!1;e.children[t]=n(r,o,i,a,e.depth+1)}function o(e,t){t(e);for(var n=0;n<4;n++)e.children[n]&&o(e.children[n],t)}function a(e,t){if(t.x<e.x1||t.y<e.y1||t.x>e.x2||t.y>e.y2)throw Error("[Layout] Error: the point is out of range.");if(r(e)){e.points.push(t);e.m+=t.m}else{e.points.push(t);var n=.5*(e.x1+e.x2),o=.5*(e.y1+e.y2),u=0;t.x>=n&&t.y<o&&(u=1);t.x<n&&t.y>=o&&(u=2);t.x>=n&&t.y>=o&&(u=3);e.children[u]||i(e,u);a(e.children[u],t)}}for(var u=e.length,s=new Float64Array(u),l=new Float64Array(u),f=0;f<u;f++){s[f]=e[f].x;l[f]=e[f].y}var c=Math.min.apply(0,s),d=Math.max.apply(0,s),h=Math.min.apply(0,l),v=Math.max.apply(0,l),g=d-c,p=v-h;g>p?v=h+g:d=c+p;var m=dr(dr({},n(c,h,d,v,0)),{addPoint:function(e){a(m,e)},visit:function(e){o(m,e)}});for(f=0;f<e.length;f++)m.addPoint(e[f]);return m}function I(){var e=[];n(c,(function(t,n){var i=r[n];e.push({id:n,x:g[i],y:p[i],m:m[i]})}));var t=E(e,y);A.length=0;w.length=0;function i(e){function n(t){if(t.isLeaf){var n=e.x-.5*(t.x1+t.x2),o=e.y-.5*(t.y1+t.y2),a=de(n,o);if((t.x2-t.x1)/a>b){for(var u=t.points,s=u.length,l=0;l<s;l++)if(e.id!==u[l].id){a=de(n=e.x-u[l].x,o=e.y-u[l].y);var f=u[l].m;r+=n/a*f;i+=o/a*f}}else{r+=n/a*t.m;i+=o/a*t.m}}}var r=0,i=0;t.visit(n);A.push(r);w.push(i)}for(var o=0;o<e.length;o++)i(e[o]);B(A,w)}function C(e,t,n){for(var r=t,i=R(e,L(T(t,n),-1)),a=new Float64Array(i.buffer.slice(0)),u=k(i,i),s=0;s<20&&u/o>.01;s++){var l=T(a,n),f=u/k(l,a);r=R(r,L(a,f));var c=R(i,L(l,-f));i=c;var d=k(c,c),h=d/u;u=d;a=R(c,L(a,h))}return r}function S(){v=new Array(o);h=new Array(o);for(var e=0;e<o;e++){v[e]=new Int32Array(o);h[e]={};h[e][e]=!0;for(var t=0;t<o;t++)v[e][t]=0}for(e=0;e<i.length;e++){var n=i[e],a=r[n.id1],u=r[n.id2];h[a][u]=!0;h[u][a]=!0;v[a][u]-=1;v[u][a]-=1;v[a][a]+=1;v[u][u]+=1}}function k(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function L(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]*t;return n}function R(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}function T(e,t){for(var r=new Float64Array(o),i=0,a=function(t){i=0;n(h[t],(function(n,r){i+=v[t][r]*e[r]}));r[t]=i},u=0;u<o;u++)a(u);r=L(r,t);i=0;for(u=0;u<o;u++)i+=e[u];var s=new Float64Array(o);for(u=0;u<o;u++)s[u]=o*e[u]-i;return R(r,s)}function B(e,t){for(var n=0,r=0,i=0;i<e.length;i++){n+=e[i];r+=t[i]}n/=e.length;r/=e.length;for(i=0;i<e.length;i++){e[i]-=n;t[i]-=r}}function O(e,t,n,r){for(var i=0;i<n;i++){M(e,t);I();g=C(A,g,r);p=C(w,p,r);B(g,p)}}function G(n,l){d=Object.keys(c);r={};g=new Float64Array(o);p=new Float64Array(o);m=new Float64Array(o);var h,v=0,y=0,b=sh(n.tightness);b=2-2*b/10+1;for(var A=0;A<d.length;A++){var w=d[A];v+=h=Math.max(1,c[w].r);y+=Math.max(1,c[w].w)*Math.max(1,c[w].h);r[w]=A;m[A]=h}var M=y/o,E=1+.015*(Math.sqrt(M)-2*x);s=42*Math.sqrt(o)*b*E;if(i.length/o<1){var I=.65,C=i.length/o;s*=I+C*(1-I)}var S=v/o;for(A=0;A<d.length;A++){p[A]=s*l.next();g[A]=s*l.next();m[A]/=S}e=10*o;t=o/40;f=1/((a=8)+(u=14-a)+2)}function D(e){function t(e){var t=g[r[e]],n=p[r[e]];c[e].x=s*t;c[e].y=s*n}e.forEach(t)}function F(n,r,s,f,h,v,g,p){l=0;c=s.v;i=s.e;if((o=s.vcount)>1){G(h,v);S();O(n,r,a,e);O(n,r,u,t);D(d);M(n,r);var m=jf.all(s.vcount);Sv({v:s.v,e:[]},f).reduceOverlaps({klOpts:h},m,p)((function(){return g(c,{})}))}else g(c,{})}return{lens:F}}function Og(e,t,r,i,o){var a=zg(e,t,r);n(r,(function(e){if(void 0!==e.orderPos){e.children.sort((function(e,t){return r[e].orderPos-r[t].orderPos}));e.parents.sort((function(e,t){return r[e].orderPos-r[t].orderPos}))}}));var u=Yg(a,r,"ul",i,o),s=Yg(a,r,"ur",i,o),l=Yg(a,r,"dl",i,o),f=Yg(a,r,"dr",i,o),c=[u.extents,s.extents,l.extents,f.extents].sort((function(e,t){return e.max-e.min-(t.max-t.min)}))[0];function d(e,t){return e-t}for(var h=0;h<a.length;h++)for(var v=a[h].vertices,g=function(e){var t=v[e],n=r[t],o=[u.xs[t]-u.extents.min+c.min,s.xs[t]-s.extents.max+c.max,l.xs[t]-l.extents.min+c.min,f.xs[t]-f.extents.max+c.max].sort(d);n.x=(o[1]+o[2])/2;if(n.group){var a=n.group,h=n.x-n[i]/2;a.ids.forEach((function(e,t){r[e].x=h+a.positions[t]}))}},p=0;p<v.length;p++)g(p)}function Gg(e,t,n){var r=t;if(e.root!==e.id)return r;var i=function(e){return n[n[e.root].sink]},o=i(e).shift;if(void 0!==o)return o<1/0?r+o:r;var a=i(e).shiftData;o=1/0;for(var u=0;u<a.length;u++){var s=a[u].dist;n[a[u].vert].shift<1/0&&(s+=n[a[u].vert].shift);o=Math.min(o,s)}i(e).shift=o;return o<1/0?r+o:r}function Dg(e,t,n,r){if(e.group){var i=e.group.positions.slice(t)[0];return{before:r?i:e[n]-i,after:r?e[n]-i:i}}return"w"===n?{before:e.w/2,after:e.w/2}:r?{before:e.h/2-e.labelOffset,after:e.h/2+e.labelOffset}:{before:e.h/2+e.labelOffset,after:e.h/2-e.labelOffset}}function Fg(e,t,n,r,i,o,a){var u=e[t],s=e[t].filter((function(e){return uh({id:e})}));s.length>0&&(u=s);for(var l=0,f=[],c=0;c<u.length;c++){var d=o[u[c]];f.push(l);l+=d.group?d.group.ids.length:1}if(l>0){for(var h=[Math.floor((l+1)/2)-1,Math.ceil((l+1)/2)-1],v=Math.floor((f.length+1)/2)-1;f[v+1]<=h[0];)v++;for(;f[v-1]>=h[0];)v--;var g=[{id:u[v],groupIdx:h[0]-f[v]}];f[v+1]<=h[1]&&v++;g.push({id:u[v],groupIdx:h[1]-f[v]});for(var p=0;p<2;p++){var m=i?g[p]:g[1-p],y=r[m.id],b=y.pos;if(n<b){y.align=e.id;y.sizeSplit=a(m.id,m.groupIdx);e.root=y.root;e.align=e.root;return b}}}return n}function Zg(e,t,n,r,i){for(var o=[],a={},u=r?0:e.length-1,s=r?1:-1,l=function(t){return r?t<e.length:t>=0},f=function(e){return n?0:e.length-1},c=n?1:-1,d=function(e,t){return n?e<t.length:e>=0},h=function(e,r){return Dg(t[e],r,i,n)},v=u;l(v);v+=s)for(var g=e[v].vertices,p=void 0,m=-1,y=0,b=f(g);d(b,g);b+=c){var x=g[b],A=t[x];o.push(x);a[x]={id:g[b],pos:y++,predecessor:p,align:x,root:x,sink:x,shiftData:[],sizeSplit:h(x,n?0:-1),parents:A.parents.filter((function(e){return!Wv(t[e])})),children:A.children.filter((function(e){return!Wv(t[e])}))};var w=r?"parents":"children";m=Fg(a[x],w,m,a,n,t,h);p=x}return{order:o,details:a}}function Pg(e,t,n,r){var i,o,a,u;if(void 0===n[e.id]){i=e;n[e.id]=0;do{if(void 0!==i.predecessor){Pg(a=t[(o=t[i.predecessor]).root],t,n,r);e.sink===e.id&&(e.sink=a.sink);u=i.sizeSplit.before+o.sizeSplit.after+r;e.sink!==a.sink?(t[a.sink].shiftData=t[a.sink].shiftData||[]).push({vert:e.sink,dist:n[e.id]-n[a.id]-u}):n[e.id]=Math.max(n[e.id],n[a.id]+u)}i=t[i.align]}while(i.id!==e.id)}}function Yg(e,t,r,i,o){for(var a="l"===r[1],u="u"===r[0],s={},l=1/0,f=-1/0,c=Zg(e,t,a,u,i),d=0;d<c.order.length;d++){(v=c.details[c.order[d]]).root===v.id&&Pg(v,c.details,s,o)}for(d=0;d<c.order.length;d++){var h=c.order[d],v=c.details[h];s[h]=Gg(v,s[v.root],c.details)}for(d=0;d<c.order.length;d++){h=c.order[d],v=c.details[h];l=Math.min(l,s[h]-v.sizeSplit.before);f=Math.max(f,s[h]+v.sizeSplit.after);void 0!==t[h].group&&(s[h]+=(v.sizeSplit.after-v.sizeSplit.before)/2)}if(!a){n(s,(function(e,t){s[t]*=-1}));return{xs:s,extents:{max:-l,min:-f}}}return{xs:s,extents:{max:f,min:l}}}function zg(e,t,n){var r=[],i=[];e.forEach((function(e){for(var o=t[e],a=0;a<o.length;a++){r[a]||(r[a]={vertices:[],edges:[]});r[a].vertices=r[a].vertices.concat(o[a].vertices.filter((function(e){return!Wv(n[e])})));r[a].edges=r[a].edges.concat(o[a].edges.filter((function(e){return!Xv(e,n)})));i[a]=r[a].vertices.length}}));return r}function Vg(e,t,r,i,o,a,u){var s="equal"===u?Wg:Xg,l=0;e.forEach((function(e){s(t[e],r,o,a);var u=i[e].verts,f=vh(u);if(f){l-=f.x1;n(u,(function(e){e.x+=l}));l+=f.x2+a}}))}function Wg(e,t,n,r){for(var i=function(i){var o=0,a=e[i].vertices;tp(a,t,(function(e){if(!uh(e)){var t=e[n]/2,i="h"===n?e.labelOffset:0;o+=t-i;e.x=o;o+=t+i+r}}));var u=(o-r)/2;tp(a,t,(function(e){e.x-=u}))},o=0;o<e.length;o++)i(o)}function Xg(e,t,n,r){for(var i=[],o=[],a=0,u=function(u){var s=e[u].vertices;i[u]=0;o[u]=0;tp(s,t,(function(e){if(!uh(e)){i[u]+=e[n];o[u]++}}));var l=i[u]+r*(o[u]-1);a=Math.max(a,l)},s=0;s<e.length;s++)u(s);var l=function(r){var u=e[r].vertices;if(o[r]>1){var s=(a-i[r])/(o[r]-1),l=0;tp(u,t,(function(e){if(!uh(e)){var t=e[n]/2,r="h"===n?e.labelOffset:0;l+=t-r;e.x=l;l+=t+r+s}}))}else for(var f=0;f<u.length;f++){var c=t[u[f]];uh(c)||(c.x=a/2)}};for(s=0;s<e.length;s++)l(s)}function Ug(e,t,r,i,o,a){var u,s=Ng(e,t,r,i,o,a),l=function(e){e.y=u};n(e,(function(e){u=0;for(var n=0;n<e.length;n++){tp(e[n].vertices,t,l);u+=s}}));return s}function Ng(e,t,n,r,i,o){for(var a=0,u=Zv(e,t,r),s=[],l=0;l<n.length;l++){var f=n[l].level,c=n[l].arrowSize;s[f]=Math.max(s[f]||0,2*c)}for(var d=0;d<u.length;d++){var h=u[d].max/2,v=0;u[d+1]&&(v=u[d+1].max/2);var g=s[d]||0;a=Math.max(a,h+v+i+Math.max(i,g))}return a*o}function jg(e,t,n,r,i,o,a,u,s,l){"auto"===a?Og(e,t,n,r,i):Vg(e,t,n,o,r,i,a);return Ug(t,n,u,s,i,l)}function Kg(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};for(var o=0;o<t;o++)r[e][o]=r[e][o]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++){var a=t[o];if("level"in a)if(e[a.id2].level-e[a.id1].level==1)i(a.c,a.level,"edges",a);else if(e[a.id1].level-e[a.id2].level==1){var u={id:a.id,id1:a.id2,id2:a.id1,numLinks:a.numLinks,level:a.level};i(a.c,a.level,"edges",u)}}return r}function Hg(e,t){for(var n=0;n<e.length;n++){for(var r=e[n].vertices,i=0;i<r.length;i++){var o=r[i],a=t[o];a.childEdges=[];a.parentEdges=[];a.children=[];a.parents=[];a.barycenter=1/0;a.orderPos=i}e[n].edges.forEach((function(e){t[e.id1].childEdges.push(e);t[e.id1].children.push(e.id2);t[e.id2].parentEdges.push(e);t[e.id2].parents.push(e.id1)}))}}function Qg(e,t,n){var r=[],i=0,o=0,a=0,u=0;e.forEach((function(e){var s=t[e];r.push(i+s.w/2);i+=s.w+n;o=Math.max(o,s.h-2*s.labelOffset);a=Math.max(a,s.h+2*s.labelOffset);u+=s.lc||0}));return{w:i-=n,h:o+a,labeloff:(a-o)/2,lc:u,positions:r}}function Jg(e,t,n){var r=[],i=0,o=0,a=0;e.forEach((function(e){var u=t[e];r.push(o+(u.h/2-u.labelOffset));o+=u.h+n;i=Math.max(i,u.w);a+=u.lc||0}));return{w:i,h:o-=n,labeloff:0,lc:a,positions:r}}function _g(e,t,n,r,i){var o=("w"===r?Qg:Jg)(t,n,i);return{id:e,w:o.w,h:o.h,x:n[t[0]].x,y:n[t[0]].y,fixed:!1,labelOffset:o.labeloff,lc:o.lc,level:n[t[0]].level,group:{ids:t,positions:o.positions}}}function qg(e,t,n,r){for(var i=e.sort((function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0})),o=0;o<i.length;o++){var a=i[o][t];r[a]=r[a]||{str:"",list:[]};r[a].str=r[a].str+" _"+i[o][n];r[a].list.push(i[o][n])}}function $g(e,t,n,r,i){var o={},a=e.filter((function(e){var a;if(-1===r.indexOf(e[t]))return!0;if(o[e[n]]){o[e[n]].numLinks+=e.numLinks||0;o[e[n]].arrowSize=Math.max(o[e[n]].arrowSize,e.arrowSize||0);(a=o[e[n]].links).push.apply(a,e.links||[])}else{var u="id1"===n?{id1:e[n],id2:i}:{id1:i,id2:e[n]};u.id=e.id;u.c=e.c;u.level=e.level;u.numLinks=e.numLinks||0;u.links=e.links||[];o[e[n]]=u}return!1}));a.push.apply(a,q(o));return a}function ep(e,t,r,i){var o,a=0,u=0;function s(n){var s=n.filter((function(e){return!uh({id:e})}));if(s.length>1){for(var l=o[s[0]].list,f=1;f<s.length;f++){if(o[s[f]].list.length!==l.length)return;if(!o[s[f]].list.every((function(e,t){return e===l[t]})))return}var c="_group"+a+++"c"+t[s[0]].c;t[c]=_g(c,s,t,r,i);e[u].vertices=e[u].vertices.filter((function(e){return-1===s.indexOf(e)}));e[u].vertices.push(c);u>0&&(e[u].edges=$g(e[u].edges,"id2","id1",s,c));u<e.length-1&&(e[u+1].edges=$g(e[u+1].edges,"id1","id2",s,c))}}for(var l=function(){o={};u>0&&qg(e[u].edges,"id2","id1",o);u<e.length-1&&qg(e[u+1].edges,"id1","id2",o);var t={};n(o,(function(e,n){(t[e.str]=t[e.str]||[]).push(n)}));n(t,s)};u<e.length;u++)l()}function tp(e,t,n){for(var r=0;r<e.length;r++){var i=t[e[r]];i.group?i.group.ids.forEach((function(e){n(t[e])})):n(i)}}function np(e,t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(r.barycenter===1/0)break;r.orderPos=n}}function rp(e,t,n,r){for(var i=!0,o=-1,a={},u=0;u<e.length;u++){var s=e[u];a[s]=u;if(!n&&t[s].barycenter===1/0){i=!1;break}for(var l=0,f=0,c=t[s][r],d=0;d<c.length;d++)if(t[c[d]].barycenter===1/0)i=!1;else{f++;var h=t[c[d]].orderPos;-1!==h&&(l+=h)}var v=!0;f>0?t[s].barycenter=l/f:t[s].barycenter===1/0?i=!1:0===u?t[s].barycenter=0:v=!1;if(v){var g=u-o-1;if(g>0)for(var p=t[e[o]].barycenter,m=Math.min(p,t[s].barycenter),y=Math.abs(p-t[s].barycenter),b=y===1/0?1:y/(g+1),x=1;x<=g;x++)t[e[o+x]].barycenter=m+b*x;o=u}}e.sort((function(e,n){return t[e].barycenter===t[n].barycenter?a[e]-a[n]:t[e].barycenter-t[n].barycenter}));np(e,t);return i}function ip(e,t,n,r){e.sort((function(e,i){var o=t[e[n]].orderPos,a=t[e[r]].orderPos,u=t[i[n]].orderPos,s=t[i[r]].orderPos;return o<u||o===u&&a<s?-1:1}))}function op(e,t,n){if(t<1||e.length<=t)return 0;var r=e[t].edges,i=e[t-1].vertices,o=e[t].vertices;return i.length>o.length?ap(r,n,"id1","id2"):ap(r,n,"id2","id1")}function ap(e,t,n,r){if(e.length<2)return 0;ip(e,t,n,r);var i=e.map((function(e){return t[e[r]].orderPos}));i.sort((function(e,t){return e-t}));var o={};i.forEach((function(e,t){o[e]=t}));for(var a=e.map((function(e){var n=o[t[e[r]].orderPos];return{index:n,multiplier:void 0===n?0:e.numLinks}})),u=1;u<a.length;)u*=2;var s=new Int32Array(2*u-1);u-=1;for(var l=0,f=0;f<a.length;f++){var c=a[f].index+u;s[c]+=a[f].multiplier;for(;c>0;){c%2&&(l+=s[c+1]*a[f].multiplier);s[c=Math.floor((c-1)/2)]+=a[f].multiplier}}return l}function up(e,t,n){var r=e.concat(t),i={};r.forEach((function(e){i[e[n]]=!0}));var o=Object.keys(i),a=o.length;return{verts:o,edges:r,common:e.length===a&&t.length===a}}function sp(e,t){return up(e.childEdges||[],t.childEdges||[],"id2")}function lp(e,t){return up(e.parentEdges||[],t.parentEdges||[],"id1")}function fp(e,t,n){for(var r=1,i=e[t].vertices,o=0,a=0,u=0;u<i.length-1;u+=r){var s=i[u],l=i[u+1],f=!1,c=t>0?lp(n[s],n[l]):{common:!0,edges:[]},d=t<e.length-1?sp(n[s],n[l]):{common:!0,edges:[]},h=c.common?[]:c.edges,v=d.common?[]:d.edges,g=ap(h,n,"id1","id2")+ap(v,n,"id2","id1"),p=n[l].orderPos;n[l].orderPos=n[s].orderPos;n[s].orderPos=p;var m=ap(h,n,"id1","id2")+ap(v,n,"id2","id1");if(g<=m){n[s].orderPos=n[l].orderPos;n[l].orderPos=p}else{f=!0;o+=g-m;i[u]=l;i[u+1]=s;if(1===r){a=Math.max(a,u);r=-1}if(0===u){u=a;r=1}}if(!f&&-1===r){u=a;r=1}}return o}function cp(e,t){var n,r=100;do{n=0;for(var i=0;i<e.length;i++)n+=fp(e,i,t)}while(n>0&&--r>0)}function dp(e,t,n){for(var r,i,o=e,a=!1,s=!1,l=!0,f=0,c=o.length,d=0;d<o.length;d++)if(o[d].vertices.length>0){c=d;break}if(c===o.length-1)return o;o[c].vertices.sort((function(e,n){return t[n].childEdges.length-t[e].childEdges.length}));t[o[c].vertices[0]].barycenter=0;t[o[c].vertices[0]].orderPos=0;var h=1/0;do{r=h;if(s){h=0;i=u(o)}else h=1/0;for(d=c;d<o.length-1;d++){a=rp(o[d+1].vertices,t,!0,"parents");if(l){rp(o[d].vertices,t,!1,"children");a=rp(o[d+1].vertices,t,!1,"parents")}}s=a;for(d=o.length-1;d>c;d--){a=rp(o[d-1].vertices,t,d<f+2,"children");if(l){rp(o[d].vertices,t,!1,"parents");a=rp(o[d-1].vertices,t,!1,"children")}else h+=op(o,d,t);a||(s=!1)}l=!s}while(f++<100&&(h===1/0||h<r));i&&(o=i).forEach((function(e){np(e.vertices,t)}));h>0&&n<1e4&&cp(o,t);return o}function hp(e,t,n){var r=[],i=[],o={};if(n.length>0){var a={};n.forEach((function(n){var i=t[n].c;if(!a[i]){r.push(i);a[i]=!0;o=se(o,e[i].verts)}}));r.length<e.length&&e.forEach((function(e){if(!a[e.c]){i.push(e);a[e.c]=!0}}))}else e.forEach((function(e){o=se(o,e.verts);r.push(e.c)}));i.unshift({verts:o,edges:[]});return{orderedComponents:r,packingComponents:i}}function vp(e,t,n,r,i,o,a){void 0===r&&(r="down");for(var u={},s=0;s<e.length;s++){var l=e[s];l.links.sort((function(e,t){return(V(e.off)?e.off*e.sign:1/0)-(V(t.off)?t.off*t.sign:1/0)}));var f=0,c=0,d=0,h=!0,v=t[l.c][l.level].vertices,g=n[l.id1].orderPos,p=n[l.id2].orderPos,m=g<p?[g,p]:[p,g],y=g<p?1:-1;r.match(/right|up/)&&(y*=-1);for(var b=m[0]+1;b<m[1];b++){var x=n[v[b]];uh(x)||(h=!1);for(var A=0;A<x.parentEdges.length;A++)f+=x.parentEdges[A].numLinks;for(A=0;A<x.childEdges.length;A++)c+=x.childEdges[A].numLinks;var w=(x[i]||x.r)/2;d=Math.max(d,w)}if(!h){if(c===f){f=n[v[m[0]]].parentEdges.length+n[v[m[1]]].parentEdges.length;c=n[v[m[0]]].childEdges.length+n[v[m[1]]].childEdges.length}var M=c<f?-y:y,E=d+20,I=40,C=a/2;E+=Math.abs(n[l.id1].x-n[l.id2].x)/o;(E=Math.min(E,C))+(l.links.length-1)*I>C&&(I=Math.max(10,(C-E)/(l.links.length-1)));for(b=0;b<l.links.length;b++){var S=l.links[b],k=E+b*I;u[S.id]={off:M*S.sign*k}}}}return u}function gp(e,t,r){var i=zv(r);n(t,(function(t){for(var n=0;n<t.length;n++)tp(t[n].vertices,e,i)}))}function pp(e,t){return null!==e&&"boolean"!=typeof e&&""!==e&&A(+e)&&+e>=0?+e:t}function mp(e,t,r,i,o,a){var u={top:[],orientation:"down",spacing:"auto",stretch:1},s=z(r,u),l=e.v,f=e.e,c=s.level,d=c?[]:Y(s.top,l),h=50+lh(s.tightness),v=s.orientation.match(/right|left/)?"h":"w",g=s.orientation.match(/right|left/)?"w":"h",p=pp(r.stretch,u.stretch),m=ph(l,f),y=[];yg(l,f,t,m,!0,d,c,y);var b=Kg(l,f);n(b,(function(e,t){
ep(e,l,v,h);Hg(e,l);b[t]=dp(e,l,f.length)}));var x=hp(m,l,d),A=x.orderedComponents,w=x.packingComponents,M=eh(o.state,w,(function(e){return Object.keys(e.verts)})),E=o.pack(a,M),I=jg(A,b,l,v,h,m,s.spacing,f,g,p),C=vp(y,b,l,s.orientation,g,h,I);s.orientation.match(/up|right|left/)&&gp(l,b,s.orientation);n(l,(function(e){(e.group||uh(e))&&delete l[e.id]}));E((function(){return i(l,C)}))}var yp=Math.pow(10,-3.8),bp=1.35,xp=Math.pow(ts,bp);function Ap(e,t,n,r){return{leaf:!0,nodes:{},point:null,x1:e,y1:t,x2:n,y2:r}}function wp(e,t){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=.5*(n+i),u=.5*(r+o),s=t.x>=a,l=t.y>=u,f=(l?2:0)+(s?1:0);e.leaf=!1;s?n=a:i=a;l?r=u:o=u;e.nodes[f]||(e.nodes[f]=Ap(n,r,i,o));Mp(e.nodes[f],t)}function Mp(e,t){if(e.leaf){var n=e.point;if(n){if(Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<.01){wp(e,t);return}e.point=null;wp(e,n);wp(e,t);return}e.point=t}else wp(e,t)}function Ep(e,t){if(!e(t))for(var n=t.nodes,r=0;r<4;r++)n[r]&&Ep(e,n[r])}function Ip(e){var t=0,n=0;e.charge=0;e.size=0;if(!e.leaf)for(var r=e.nodes,i=0;i<4;i++){var o=r[i];if(o){Ip(o);e.charge+=o.charge;e.size+=o.size;t+=o.charge*o.cx;n+=o.charge*o.cy}}if(e.point){var a=Cp(e.point);e.pointCharge=a;e.charge+=a;e.size+=e.point.r;t+=a*e.point.x;n+=a*e.point.y}e.cx=e.charge?t/e.charge:0;e.cy=e.charge?n/e.charge:0}function Cp(e){return ts*Math.pow(e.r,bp)/xp*(1+(e.lc?e.lc:1)/3)}function Sp(e,t){var r=ch(e),i=r.minx,o=r.miny,a=r.maxx,u=r.maxy,s=a-i,l=u-o;s>l?u=o+s:a=i+l;var f,c=.5;function d(e){if(e.point!==f){var t=e.cx-f.x,n=e.cy-f.y,r=1/de(t,n);if((e.x2-e.x1)*r<c){v(f,e.charge,r,t,n);return!0}e.point&&v(f,e.pointCharge,r,t,n)}return!e.charge}var h=1e5;function v(e,t,n,r,i){g(e,t,r,i,Math.min(n,h))}function g(e,n,r,i,o){if(!(o<yp)){var a=t*Cp(e)*n*o*o*o;e.dx-=r*a;e.dy-=i*a}}var p=Ap(i,o,a,u);n(e,(function(e){Mp(p,e)}));function m(){n(e,(function(e){f=e;Ep(d,p)}))}Ip(p);m()}function kp(e){var t=sh(e.tightness);return Math.pow(2,.4*(t-5))}function Lp(e,t,n,r){Op(e[t.id1],e[t.id2],n,r)}function Rp(e,t,n){return e.r+t.r+n*(1+((e.lc?e.lc:1)+(t.lc?t.lc:1))/6)}function Tp(e,t,n,r){var i=t[e.id1],o=t[e.id2],a=i.x-o.x,u=i.y-o.y,s=Rp(i,o,n),l=de(a,u);if(l>.02){var f=r*((l-s)/l),c=a*f,d=u*f;i.dx-=c;i.dy-=d;o.dx+=c;o.dy+=d}}function Bp(e,t){if(!e.fixed){var n=de(e.dx,e.dy),r=e.dx/n*Math.min(n,t),i=e.dy/n*Math.min(n,t);e.x+=r;e.y+=i}}function Op(e,t,n,r){var i,o,a;if(!e.fixed||!t.fixed){var u=2*r.next()*Math.PI;a=1.3*Rp(e,t,n)/2;if(e.fixed||t.fixed){i=e.fixed?e.x:t.x;o=e.fixed?e.y:t.y;a*=2}else{i=(e.x+t.x)/2;o=(e.y+t.y)/2}if(!e.fixed){e.x=i+a*Math.cos(u);e.y=o+a*Math.sin(u);u+=Math.PI}if(!t.fixed){t.x=i+a*Math.cos(u);t.y=o+a*Math.sin(u)}}}function Gp(e,t){var n=e.extents,r=0,i=0;if(n){r=n.c;var o=n?Math.max(n.x2-n.x1,n.y2-n.y1):0,a=120*Math.sqrt(r);i=Math.max(o,a)/2}var u=0;r>1&&(u=Math.min(Math.pow(r,2.5),100));var s=u*r*Math.log(r),l=1/kp(t);return{repulsionFactor:40*(l>1?Math.pow(l,2):l),coeff:1,naturalDistance:20*l,iterations:u,chunk:20,temperature:i,estTime:s}}function Dp(e,t,n,r){var i={temperature:10,i:0},o={verts:e.v,edges:e.e},a=Gp(e,t);a.chunk=5;a.iterations=5;i.temperature=Math.pow(a.temperature,.72);Fp(i,o,a,n);r(e.v,{})}function Fp(e,t,r,i){var o,a,u=Math.min(e.i+r.chunk,r.iterations);function s(e){e.dx=0;e.dy=0;o++}function l(e){Bp(e,a)}for(;e.i<u;){var f=t.verts,c=t.edges;o=0;n(f,s);fh(f,i,2);if(1===o){e.i=u;return}if(2===o){if(c[0])Lp(f,c[0],r.naturalDistance,i);else{var d=q(f);Op(d[0],d[1],r.naturalDistance,i)}e.i=u;return}Sp(f,r.repulsionFactor);for(var h=0;h<c.length;h++)Tp(c[h],f,r.naturalDistance,r.coeff);a=e.temperature*(1-e.i/r.iterations);n(f,l);e.i++}}function Zp(e,t,n,r,i,o,a,u){var s={i:0,temperature:r.temperature};function l(){return i+(o-i)*(s.i/r.iterations)}function f(){return s.i>=r.iterations}function c(){Fp(s,n,r,a)}function d(){c();if(f())u();else{var n=l();t.trigger("progress","layout",n);e.fire("progress",{task:"layout",progress:n});p(d,0)}}d()}function Pp(e){var t=0,r=0,i=0,o=!1,a=0,u=0;n(e,(function(e){t+=e.x;r+=e.y;i+=1;o=o||e.fixed}));if(!(i<3||o)){t/=i;r/=i;n(e,(function(e){var n=Math.sqrt((e.x-t)*(e.x-t)+(e.y-r)*(e.y-r));if(n>u){u=n;a=Math.atan2(e.y-r,e.x-t)}}));a=-a;var s=Math.sin(a),l=Math.cos(a);n(e,(function(e){var n=t+(e.x-t)*l-(e.y-r)*s,i=r+(e.x-t)*s+(e.y-r)*l;e.x=n;e.y=i}))}}function Yp(e,t){var r=P(e.fixed||[]),i=ne(r),o=0,a=0;if(r.length){n(i,(function(e,n){if(n in t.v){o+=t.v[n].x;a+=t.v[n].y}}));o/=r.length;a/=r.length}n(t.v,(function(e,n){if(!i[t.v[n].id]){t.v[n].x=o;t.v[n].y=a}}))}function zp(e,t,n,r,i,o,a){Yp(r,n);for(var u=n.v,s=n.vcount,l=n.e,f=ph(u,l),c=s/(s+f.length),d=0,h=r.tidy?c:1,v=[],g=0,m=Date.now(),y=0;y<f.length;y++){var b=Gp(f[y],r);g+=b.estTime;v.push(b)}for(var x=0,A=0;A<f.length;A++){v[A].start=x;var w=x+(h-d)*(v[A].estTime/g);v[A].stop=w;x=w}var M=0;function E(n){var r=n,o=f[r],a=v[r];Zp(e,t,o,a,a.start,a.stop,i,(function(){Pp(o.verts);r++;M++;if(r<f.length){var e=Date.now();if(e-m>16||M>1e3){m=e;M=0;p((function(){E(r)}),0)}else E(r)}else I()}))}function I(){var e=function(){return o(u,{})};a?a(e):e()}f.length>0?E(0):o(u,{})}function Vp(e,t,n,r,i,o){e[t]=r?n[t]:le(n[t],{x:i,y:o})}function Wp(e,t,r){var i={},o=[],a=0;n(e.rev,(function(u,s){for(var l={x:0,y:0,size:0},f=u.length,c=0;c<f;c++){var d=t[u[c]];l.x+=d.x;l.y+=d.y;l.size+=d.r}l.x/=f;l.y/=f;var h=vv(),v=q(t).filter((function(t){return e.rev[s].indexOf(t.id)>-1})).map((function(e){var t=r(e.id,!0);e.r=t.radiusWithoutLabel;e.radiusWithText=t.radius;e.labelOffset=0;return e})),g=0,p=0;v.forEach((function(e){g+=e.r;p+=e.radiusWithText}));var m=(p-g)/v.length,y=.5,b=h.concentricLayout(v,{padding:Math.max(8,m*y)}),x={positions:ie(b)},A=kh(b,{x:0,y:0},0);i[s]={id:s,x:l.x,y:l.y,r:A,fixed:!1,lc:0,w:void 0,h:void 0,labelOffset:0,radiusWithText:A,jit:x};a++;for(var w=u[0],M={},E=e.index[w],I=0;I<E.length;I++){var C=E[I];M[e.ids[C]]=!0}n(M,(function(e,t){s<t&&o.push({id1:s,id2:t})}))}));for(var u=0;u<o.length;u++){var s=o[u].id1,l=o[u].id2;i[s].lc++;i[l].lc++}n(t,(function(t,n){if(!e.ids[n]){i[n]={id:n,x:t.x,y:t.y,lc:0,fixed:t.fixed,labelOffset:0,radiusWithText:t.r,r:t.r,w:t.w,h:t.h,jit:{radius:t.r,position:{x:0,y:0}}};a++}}));return{v:i,e:o,vcount:a,extents:vh(i)}}function Xp(e,t,n){e[n]||(e[n]=[]);e[n].push(t)}function Up(e,t){Xp(e,t.id1,t.id2);Xp(e,t.id2,t.id1)}function Np(e){for(var t={},n=0;n<e.length;n++)Up(t,e[n]);return t}function jp(e){var t={},r={};n(e,(function(e,n){e.sort();for(var i="",o=0;o<e.length;o++)i+=e[o];t[i]||(t[i]=[]);t[i].push(n);r[n]=i}));return{rev:t,ids:r,index:e}}function Kp(e){return jp(Np(e))}function Hp(e,t,r,i,o,a,u,s){var l=Kp(r.e),f=Wp(l,r.v,i),c=function(e){var t={};n(e,(function(e,n){if(l.rev[n])for(var i=l.rev[n],o=e.fixed,a=0;a<i.length;a++){var u=i[a],s=e.x,f=e.y;if(e.jit.positions){s+=e.jit.positions[u].x;f+=e.jit.positions[u].y}Vp(t,u,r.v,o,s,f)}else Vp(t,n,r.v,r.v[n].fixed,e.x,e.y)}));s((function(){return u(t,{})}))},d=function(e,t){c(e);return{vertices:e,updatedEdges:t,extents:null}};zp(e,t,f,le({},o,{tidy:!1}),a,d)}var Qp=new RegExp("^(standard|hierarchy|lens|sequential|radial|structural|tweak|"+Object.keys(yv).join("|")+")$"),Jp=new RegExp("^(standard|lens|structural|"+yv.organic+")$"),_p=new RegExp("^(standard|tweak|"+yv.organic+")$"),qp=new RegExp("^(standard|structural|"+yv.organic+"|radial|hierarchy|sequential)$");function $p(e,t,n){var r=me(),i=Cv();function o(e,o,a,u,s,l,f){n.trigger("prechange","layout");t.fire("prechange",{type:"layout"});if(!Qp.test(e))throw new Error("The layout name is not valid.");Jp.test(e)||delete s.consistent;_p.test(e)||delete s.fixed;qp.test(e)&&(N(s.packing)?N(s.tidy)||s.tidy||(s.packing="none"):s.tidy="none"!==s.packing);var c=Sv(o,u,i),d={klOpts:s,pinTo:{firstFixed:!!s.pinToFirstFixed,fallback:o.extents&&"adaptive"!==s.packing&&"none"!==s.packing?gh(o.extents):void 0}};n.trigger("progress","layout",0);t.fire("progress",{task:"layout",progress:0});var h=pv(t,n,s,l);function v(e){if(e<1){n.trigger("progress","layout",e);t.fire("progress",{task:"layout",progress:e})}}if(e===yv.organic){c.organic(d,f)((function(){return h(o.v,{})}),v)}else{r.setSeed(s.consistent?900736044081:null);var g=c.pack(d);switch(e){case"standard":"adaptive"===s.mode?Dp(o,s,r,h):zp(t,n,o,s,r,h,g);break;case"hierarchy":Tg(o,a,s,!1,h,g);break;case"lens":Bg().lens(t,n,o,u,s,r,h,f);break;case"sequential":mp(o,a,s,h,c,d);break;case"structural":Hp(t,n,o,u,s,r,h,g);break;case"radial":Tg(o,a,s,!0,h,g);break;case"tweak":Dp(o,s,r,h)}}}return{arrange:Dv,extractStructure:Fv(e),layout:o}}function em(){var e=10,t=.05;function n(n,r){void 0===r&&(r=1);for(var i=Math.round(Math.sqrt(n.length/r)),o=Math.ceil(n.length/i),a=[0],u=[0],s=[],l=0,f=0,c=0,d=0;f<n.length;f++,d++){if(f<o)s[d]=0;else if(d===o){d=0;a[++c]=0;u[c]=0}var h=n[f].h/2-n[f].labelOffset,v=n[f].h/2+n[f].labelOffset;a[c]=Math.max(a[c],h);u[c]=Math.max(u[c],v);s[d]=Math.max(s[d],n[f].w);l+=(Math.sqrt(n[f].w*n[f].h)-l)/(f+1)}var g=e+t*l,p=s.reduce((function(e,t){return e+t}),0)+g*(o-1),m=a.reduce((function(e,t){return e+t}),0)+u.reduce((function(e,t){return e+t}),0)+g*(i-1),y=-p/2+s[0]/2,b=y,x=-m/2+a[0];for(f=0,c=0,d=0;f<n.length;f++,d++){if(d===o){b=y;x+=u[c]+g+a[c+1];d=0;++c}n[f].x=b;n[f].y=x;b+=s[d]/2+g+s[d+1]/2}return n}return{arrange:n}}function tm(e,t,r,i,o,a,s,l){var f=vv(),c=im(t,l),d={},h={list:[],index:{},nulls:0,comboLinkAdj:{}},v={},g=null,p=[],m={},y=z(e,{resize:!0,updateGlyph:!0});y.adapt=nm(y.adapt,"all");function b(){h={list:[],index:{},nulls:0,comboLinkAdj:{}};d={};v={};g=null;p=[]}function x(){return{itemsToMergeList:h.list,propertiesToSetMap:d,idsToRemoveMap:v,idsToSelectMap:g}}function w(){var e={nodes:{},links:{}};t.privateGetRawItems().concat(h.list).forEach((function(t){if(null!==t){var n=ge(t.id),r=S(t.id);n||r||("node"===t.type?e.nodes[t.id]=C(t.id):e.links[t.id]=t)}}));return e}function M(e,n){var r,i=d[e];if(void 0!==i&&void 0!==(r=i[n]))return r;var o=X(e);if(null!==o&&void 0!==(r=o[n]))return r;var a=t.privateGetItem(e);return a?u(a[n]):void 0}function E(e,t){return M(e,t)}function I(e,t){return M(e,t)}function C(e){if(v[e])return null;var n=u(t.privateGetItem(e))||{},r=X(e);null!==r&&se(n,r);d[e]&&se(n,d[e]);return n}function S(e){return M(e,"parentId")}function k(e){return M(e,"_combo")}function L(e){return k(e)}function R(e,t){var n=M(e,"_combo");if(n){n.nodeIds&&n.nodeIds.forEach(t);n.linkIds&&n.linkIds.forEach(t)}}function T(e){var t=d[e];if(!t){t={id:e};d[e]=t}return t}function B(e,t,n){T(e)[t]=n}function G(e,t,n){B(e,t,n)}function D(e){var t=T(e.id);le(t,e)}function F(e,t){G(e,"_offset",t)}function Z(e,t,n){var r=L(e);r[t]=n;B(e,"_combo",r)}function P(e,t){if(r&&r.api.isShown()){var n=C(e),i=r.internalUse.preMerge([n]);B(e,"hi",i[0].hi);Ae(e,i[0].x-n.x,i[0].y-n.y)}else if(y.reposition&&t){var o=I(e,"_offset"),a=I(t,"x"),u=I(t,"y"),s=I(e,"x"),l=I(e,"y");Ae(e,a-o.x-s,u-o.y-l)}}function Y(e,t){var n=S(e)||null;if(t!==n){ce(e);B(e,"parentId",t);if("node"===M(e,"type"))if(t)I(e,"_offset")||F(e,{x:I(t,"x")-I(e,"x"),y:I(t,"y")-I(e,"y")});else{P(e,n);F(e,void 0)}}}function V(e,t){e.forEach((function(e){Y(e,t);v[e]&&ce(e)}))}function W(e){var t=h.index[e];if(void 0!==t){var n=h.list[t];h.list[t]=null;delete h.index[e];h.nulls++;var r=h.list.length;if(r>0&&h.nulls/r>.5){h.index={};for(var i=0,o=0;o<r;){if(null!==h.list[o]){h.list[i]=h.list[o];h.index[h.list[i].id]=i;i++}o++}h.list.length=i;h.nulls=0}if(null!==n&&"link"===n.type&&n._combo){var a=h.comboLinkAdj;delete a[n.id1][n.id2];delete a[n.id2][n.id1]}}}function X(e){var t=h.index[e];return void 0===t?null:h.list[t]}function U(e){if(void 0===h.index[e.id]){h.index[e.id]=h.list.push(e)-1;if("link"===e.type&&void 0!==e._combo){var t=h.comboLinkAdj,n=e.id1,r=e.id2;void 0===t[n]&&(t[n]={});void 0===t[r]&&(t[r]={});t[n][r]=e;t[r][n]=e}}else h.list[h.index[e.id]]=e}function j(e,t,n){if(n){var r=k(n);if(r){var i=!1;if(e&&r.nodeIds&&e.length>0){i=rm(r.nodeIds,e);e.forEach((function(e){m[e]=!0}))}if(t&&t.length>0){i=rm(r.linkIds,t)||i;t.forEach((function(e){m[e]=!0}))}i&&B(n,"_combo",r)}}n&&J(n)&&t.length&&te(n)}function K(e,t){j(e,[],t);V(e,t)}function H(e,t){j([],e,t);V(e,t)}function Q(e){var t=e,n=[];do{n.unshift(t);t=S(t)}while(t);return n}function J(e){return!!k(e)&&"link"===M(e,"type")}function _(e){return!!k(e)&&"node"===M(e,"type")}function $(){var e=[];q(d).forEach((function(t){t._combo&&_(t.id)&&e.push(t.id)}));return e}function ee(e){for(var t,n,r,i=Q(E(e,"id1")),o=Q(E(e,"id2")),a=0,u=Math.min(i.length,o.length);a<u&&i[a]===o[a];)a++;if(a===i.length){t=o[a-1];n=o[a];r=t}else if(a===o.length){t=i[a-1];n=i[a];r=t}else{t=i[a];n=o[a];r=0===a?null:i[a-1]}return{id1:t,id2:n,parentId:r}}function te(e){if(!v[e]){for(var t=E(e,"id1"),n=k(e).linkIds,r=n.length,i=!1,o=!1,a=!0,u=0;u<r;u++){var s=!!E(n[u],"a1"),l=!!E(n[u],"a2"),f=t===ee(n[u]).id1;o=o||(f?l:s);if((i=i||(f?s:l))&&o)break}for(u=0;u<r;u++)if(!M(n[u],"hi")){a=!1;break}D({id:e,a1:i,a2:o,hi:a})}}function ne(t,n,r){var o=i(),a=u(r,!0);a.id=o;a.id1=t;a.id2=n;if(e&&e.comboLinkStyle){var s=e.comboLinkStyle;A(s.b1)&&(a.b1=s.b1);A(s.b2)&&(a.b2=s.b2);s.c&&(a.c=s.c);s.ls&&(a.ls=s.ls);A(s.w)&&(a.w=s.w)}a.off=0;a.parentId=void 0;a._combo={linkIds:[]};return a}function re(e){var t=ee(e.id),n=xe(t.id1,t.id2);if(!n){var r=ne(t.id1,t.id2,e);n=r.id;U(r);null!==t.parentId&&H([n],t.parentId)}return n}function oe(e){var t={},n=[];e.forEach((function(e){if(!v[e.id]){var r=S(e.id1),i=S(e.id2);if(r||i){var o=null;o=r===i||r===e.id2?r:i===e.id1?i:re(e);e.parentId!==o&&(t[o]||(t[o]=[])).push(e.id)}else null!==e.parentId&&n.push(e.id)}}));var r=Object.keys(t);r.forEach((function(e){j([],t[e],e)}));j([],n,null);r.forEach((function(e){V(t[e],e)}));V(n,null)}function ue(e){if(!v[e.id]){var t=S(e.id1),n=S(e.id2),r=n===e.id1?n:t;H([e.id],r||null)}}function fe(e,t){if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}function ce(e){var t=S(e);if(t&&!v[t]){var n=k(t),r=n.nodeIds,i=n.linkIds;fe(r,e);fe(i,e);if(r&&r.length||i.length){B(t,"_combo",n);J(t)&&te(t)}else me(t)}}function ge(e){return!!v[e]}function pe(){return Object.keys(v)}function me(e){if(!v[e]){v[e]=!0;ye(t.privateNeighbourLinkIds([e]));ce(e);delete d[e];W(e)}}function ye(e){e.forEach(me)}function be(e){g=g||{};e.forEach((function(e){g[e]=!0}))}function xe(e,n){var r=null,i=h.comboLinkAdj[e];void 0!==i&&void 0!==i[n]&&(r=i[n].id);if(null===r)for(var o=t.privateGetLinksBetween(e,n),a=o.length,u=0;u<a;u++){var s=o[u];s._combo&&!v[s.id]&&(r=s.id)}return r}function Ae(e,t,n){var r=I(e,"x"),i=I(e,"y");G(e,"x",r+t);G(e,"y",i+n);var o=L(e);o&&o.nodeIds.forEach((function(e){Ae(e,t,n)}))}function we(){for(var e={},t=0,n=p.length;t<n;t++){void 0===e[(r=p[t]).id]&&(e[r.id]={id:r.id,dx:0,dy:0,sumX:0,sumY:0});r.norm=he(I(r.id,"x")-I(r.to,"x"),I(r.id,"y")-I(r.to,"y"));e[r.id].sumX+=r.norm[0]*r.distance;e[r.id].sumY+=r.norm[1]*r.distance}for(t=0,n=p.length;t<n;t++){var r,i=(r=p[t]).norm,o=ve(i[0],i[1],e[r.id].sumX,e[r.id].sumY),a=Math.abs(o)*r.distance;e[r.id].dx+=i[0]*a;e[r.id].dy+=i[1]*a}return q(e)}function Me(e,n){if("none"!==y.adapt){var i=S(e),o=[];i?o=t.privateGetItem(k(i).nodeIds):r.api.isShown()||"all"!==y.adapt||(o=t.privateGetRawItems().filter((function(t){var n=ge(t.id),r=S(t.id);return!n&&!r&&e!==t.parentId})));o.filter((function(t){return"node"===t.type&&!t.hi&&t.id!==e})).forEach((function(t){p.push({id:t.id,to:e,distance:n})}))}}function Ee(e){p.forEach((function(t){e[t.id]&&(t.distance=0)}))}function Ie(e,t){return"rectangle"===l?de(e,t):e}function Ce(e,t){if(0!==t&&!M(e,"hi")){Me(e,t);var n=S(e);if(n){var r=I(n,"oc")||{};"grid"===r.la&&Ye(n,void 0,r.la);var i=Pe(n),o=i.width,a=i.height;if(o!==r.w||a!==r.h){var u=Ie(r.w,r.h),s=(Ie(o,a)-u)/2;r.w=o;r.h=a;G(n,"oc",r);var l=k(n);l&&l.open&&Ce(n,s)}}}}function Se(e,n,r,i){var o=w(),a=t.privateGetCanvas(),u=t.privateGetMaxLabelLength();c.layout(e.name,o.nodes,o.links,Th(o.nodes,a,u,l),e,"toplevel",(function(e){Ee(e.vertices);Object.keys(e.vertices).forEach((function(t){var n=e.vertices[t],r=I(t,"x"),i=I(t,"y");Ae(t,n.x-r,n.y-i)}));n(e.updatedEdges);i(e.extents)}))}function ke(e){var n=Eh(e,t.privateGetCanvas(),{include:!1},l).radius;e._combo&&e._combo.open&&(e.oc&&A(e.oc.bw)?n-=e.oc.bw:n-=ku.bw);return Math.max(n,0)}function Le(e,n,r){var i=t.privateGetCanvas(),o={include:!1,maxLength:r},a=Eh(e,i,o,l,!0).radius,u=Eh(e,i,o,l,!1).radius;return n?a-u:u-a}function Re(e,t,n,r,i){for(var o=[],a=k(e).nodeIds,u=a.length,s={include:!0,partial:i,maxLength:r},f=0;f<u;f++){var c=C(a[f]);if(!c.hi){var d=n&&n[c.id],h=Eh(c,t,s,l);o.push({id:c.id,x:d?c.x+d.dx:c.x,y:d?c.y+d.dy:c.y,t:c.t,labelOffset:Ch(c,r),r:h.radius,rWithoutLabel:h.radiusWithoutLabel,w:h.width,h:h.height})}}return o}function Te(e,t,n){var r=Re(e,t,null,n,!0),i=f.concentricLayout(r,{includeLabels:!0}),o={include:!0,partial:!1,maxLength:n};i.forEach((function(e){var n=C(e.id);e.r=Eh(n,t,o,l).radius}));return ie(i)}function Be(e,t,n){var r=Re(e,t,null,n);return ie(em().arrange(r))}function Oe(e,t,n){var r,i=L(e),o=ie(i.nodeIds.map(C)),a=ie(i.linkIds.map(C).filter((function(t){return t.id1!==e&&t.id2!==e})));c.layout("lens",o,a,Th(o,t,n,l),{consistent:!0},"all",(function(e){r=e}),!0);var u=Re(e,t,null,n);u.forEach((function(e){e.x=r.vertices[e.id].x;e.y=r.vertices[e.id].y}));var s=Lh(u);null!==s&&u.forEach((function(e){e.x-=s.x;e.y-=s.y}));return ie(u)}function Ge(e,t,n){var r=t.width,i=t.height,o=I(e,"oc")||{};if(n||o.w<r||o.h<i){if("rectangle"!==l||n){o.w=r;o.h=i}else{o.w=Math.max(o.w,r);o.h=Math.max(o.h,i)}G(e,"oc",o);var a=L(e);if(a){a.comboScale=a.open?1:0;B(e,"_combo",a)}}}function De(e,t){var n,r,i=e.id,o=Pe(i,void 0),a=o.width,s=o.height,l=ke(e),f=I(i,"oc")||{};if(f.w&&f.w<=a||f.h&&f.h<=s){f.w=Math.max(null!==(n=f.w)&&void 0!==n?n:0,a);f.h=Math.max(null!==(r=f.h)&&void 0!==r?r:0,s);G(i,"oc",f);var c=u(e);c.oc.w=a;c.oc.h=s;l=ke(c)}Ce(i,l-t);qe()}function Fe(e,t,n){for(var r=L(e).nodeIds,i=r.length,o=I(e,"x"),a=I(e,"y"),u=0;u<i;u++){var s=r[u];if(!M(s,"hi")){var l={id:s},f=I(s,"x"),c=I(s,"y");if(n){l._offset={x:o-f-n.dx,y:a-c-n.dy};D(l)}Ae(s,o+t[s].x-f,a+t[s].y-c)}}}function Ze(e){var t=5,r=.05,i=0,o=0;n(e,(function(e){var t=2*(e.rWithoutLabel||e.r);i+=(t-i)/++o}));return t+r*i}function Pe(e,n){var r=t.privateGetCanvas(),i=ie(we()),o=ie(Re(e,r,i,n)),a={x:I(e,"x"),y:I(e,"y")};return Rh(l,o,a,Ze(o))}function Ye(e,n,r){var i,o=t.privateGetCanvas(),a=t.privateGetMaxLabelLength(),u=r||y.arrange;if("none"===u)Ge(e,i=Pe(e,a),!!y.resize);else{var s=("concentric"===u?Te:"grid"===u?Be:"lens"===u?Oe:"rectangle"===l?(u="grid",Be):(u="lens",Oe))(e,o,a);i=Rh(l,s,{x:0,y:0},Ze(s));Ee(s);Ge(e,i,!!y.resize);Fe(e,s,n)}var f=I(e,"oc")||{};f.la=u;G(e,"oc",f);return Ie(i.width,i.height)/2}function ze(e){Ge(e,Pe(e,t.privateGetMaxLabelLength()),!1)}function Ve(e){var t=L(e);return t?t.nodeIds.reduce((function(e,t){return e+Ve(t)}),0):M(e,"hi")?0:1}function We(e){var t=L(e);if(t&&void 0!==t.g){var n=!1,r=(M(e,"g")||[]).map((function(r){if(r.p===t.g){n=!0;return le(r,{t:Ve(e)})}return r}));if(n)B(e,"g",r);else{t.g=void 0;B(e,"_combo",t)}}}function Xe(){if(y.updateGlyph){var e={};[q(d),h.list].forEach((function(t){t.forEach((function(t){if(t){var n=t.id;if(t._combo&&"node"===M(n,"type")){Q(n).forEach((function(t){if(!e[t]){We(t);e[t]=!0}}))}}}))}))}}function Ue(e){if(g){t.selection(Object.keys(g));a.trigger("selectionchange");var n=new Set;e.forEach((function(e){return n.add(e)}));s.selection().hasChanged(n)&&o.fire("selection-change")}else{var r=e.filter(t.privateItemIsShown);if(e.length!==r.length){t.selection(r);a.trigger("selectionchange");o.fire("selection-change")}}}function Ne(e){for(var n=Q(e),r=0;r<n.length;r++){var i=n[r],o=k(i),a=t.privateGetItem(i),u=a&&a._combo;if(!(u&&u.open||o&&o.open))return i}return e}function je(e){for(var n=t.privateGetAncestryIds(e),r=0;r<n.length;r++){var i=t.privateGetItem(n[r])._combo;if(!i||!i.open)return n[r]}return e}function Ke(e,n){Object.keys(e).forEach((function(r){var i=e[r],o=u(t.privateGetItem(r)._combo);N(i.open)||(o.open=i.open);o.nodeIds=He(o.nodeIds,i.removeNodeIds);o.nodeIds=Qe(o.nodeIds,i.addNodeIds);o.linkIds=He(o.linkIds,i.removeLinkIds);o.linkIds=Qe(o.linkIds,i.addLinkIds);n.push({id:r,_combo:o})}))}function He(e,t){var n=e;t.length&&(n=n.filter((function(e){return-1===t.indexOf(e)})));return n}function Qe(e,t){var n=e;t.length&&(n=n.concat(t));return n}function Je(){var e=[],n={},r=[],i={},o={};function a(e){o[e]||(o[e]={addNodeIds:[],removeNodeIds:[],addLinkIds:[],removeLinkIds:[]})}function u(e,t,n){a(t);var r=(n?"add":"remove")+("node"===e.type?"NodeIds":"LinkIds");o[t][r].push(e.id)}function s(e){if(!0!==v[e])return!1;i[e]=!0;var n=t.privateGetItem(e);if(n)if("link"===n.type){s(n.id1);s(n.id2)}else n.parentId&&s(n.parentId);return!0}q(d).forEach((function(i){var u=i.id,l=t.privateGetItem(u);if("x"in i&&l){var f=Ne(u);r.push({id:u,x:I(f,"x"),y:I(f,"y")})}if("parentId"in i&&l&&l.parentId!==i.parentId){var c={id:u},h="node"===l.type;c.parentId=null;if(h){var g=je(u),p=t.privateGetItem(g);c.x=p.x;c.y=p.y;"x"in i||r.push({id:u,x:l.x,y:l.y})}else if(i.parentId)if(_(i.parentId)){var m=t.privateGetItem(i.parentId);if(m&&(!m._combo.open||!t.privateAllParentsOpen(i.parentId))&&l.parentId){delete c.parentId;s(l.parentId)}}else if(J(i.parentId)){var y=X(i.parentId),b=t.privateGetItem(i.parentId),x=y||b;if(x)if(t.privateGetItem(x.id1)&&t.privateGetItem(x.id2)){var A=d[x.id1]&&"parentId"in d[x.id1],w=d[x.id2]&&"parentId"in d[x.id2],E=A||t.privateAllParentsOpen(x.id1),C=w||t.privateAllParentsOpen(x.id2);if(E&&C){c.parentId=i.parentId;y&&(n[i.parentId]=!0)}else if(l.parentId&&v[l.parentId]){if(!M(u,"hi")){c.hi=!0;B(u,"hi",!1)}}else delete c.parentId}else s(l.parentId)&&delete c.parentId;else v[l.parentId]&&(c.parentId=i.parentId)}e.push(c)}if("_combo"in i&&_(u)&&l&&l._combo.open!==i._combo.open){r.push({id:u,_combo:{comboScale:i._combo.comboScale}});a(u);o[u].open=!0}if(_(u)&&l&&"oc"in i){var S=l;!S.oc||S.oc.w===i.oc.w&&S.oc.h===i.oc.h||r.push({id:u,oc:{w:i.oc.w,h:i.oc.h}})}}));e.forEach((function(e){var n=t.privateGetItem(e.id);if("parentId"in e){var r=n.parentId,o=e.parentId,a=r&&v[r]&&!i[r];r&&!a&&u(n,r,!1);o&&(X(o)||u(n,o,!0))}}));Object.keys(v).forEach((function(e){if(!i[e]){var n=t.privateGetItem(e);n&&n.parentId&&u(n,n.parentId,!1)}}));Ke(o,e);return{propertiesToSetBeforeAnimation:e,itemsToMergeBeforeAnimationMap:n,propertiesToAnimate:r,idsToRemoveAfterAnimationMap:i}}function _e(e,n){var r=!!y.animate&&Je();r&&Object.keys(r.idsToRemoveAfterAnimationMap).forEach((function(e){delete v[e]}));t.privateRemoveItem(Object.keys(v));if(r){var i=[];Object.keys(r.itemsToMergeBeforeAnimationMap).forEach((function(e){i.push(X(e));W(e)}));t.privateMerge(i);t.privateSetNonImageProperties(r.propertiesToSetBeforeAnimation);t.privateSetAllDirty();O(n);t.privateAnimateProperties(r.propertiesToAnimate,y,(function(){t.privateRemoveItem(Object.keys(r.idsToRemoveAfterAnimationMap));O(e)}),!1,!0)}else O(e)}function qe(e,n){y.updateGlyph&&Xe();var r=t.selection(),i=Object.keys(m);we().forEach((function(e){Ae(e.id,e.dx,e.dy)}));t.privateAddItemsToTransfer(i);_e((function(){t.privateMerge(h.list.filter((function(e){return null!==e})));y.animate||O(n);t.privateSetNonImageProperties(q(d),!0);t.privateRemoveItemsFromTransfer(i);m={};Ue(r);b();O(e)}),n)}function $e(){return{itemsToMerge:h.list.filter((function(e){return null!==e})),propertiesToSet:q(d)}}return{adjustForNewComboSize:Ce,adjustTopLevelLayout:Se,applyUpdates:qe,afterComboResize:De,forEachChild:R,getChangingComboNodeIds:$,getComboProperty:k,getDiameterFromExtents:Ie,getIdsToRemove:pe,getItem:C,getComboSizeChange:Le,getNodeComboProperty:L,getNodeProperty:I,getNodeSizeWithoutBorder:ke,getParentId:S,getProperty:M,layoutCombo:Ye,mergeItem:U,preMergeDetails:$e,privateState:x,removeItems:ye,removingItem:ge,selectItems:be,setComboMinimumSize:ze,setNodeComboSubProperty:Z,setNodeProperty:G,setProperty:B,transferComboLinkToCorrectParent:ue,transferNodesToCombo:K,transferRawLinksToCorrectParents:oe,updateComboLinkProperties:te,updateComboNodeGlyphs:Xe}}function nm(e,t){var n=["all","inCombo","none"],r=n.indexOf(e);return r>=0?n[r]:t}function rm(e,t){if(1===t.length){if(-1===e.indexOf(t[0])){e.push(t[0]);return!0}return!1}for(var n={},r=!1,i=0;i<e.length;i++)n[e[i]]=!0;for(var o=0;o<t.length;o++)if(!n[t[o]]){e.push(t[o]);r=!0}return r}function im(e,t){var n=$p(e,Gh,Sr);function r(r,i,o,a,u){var s=null;function l(){null===s&&(s=cv(Gh)).privateSetProperties(i,o);return s}var f=e.privateGetCanvas(),c=e.privateGetGenerator();return{getGraph:l,struct:n.extractStructure(c,f,i,o,l,a,r,t,u)}}function i(e,t,i,o,a,u,s,l){var f=r(e,t,i,a.fixed||[],u);n.layout(e,f.struct,f.getGraph,o,a,s,l)}return{layout:i}}function om(e,t,n,r,i,o,a){var s=0;function l(){return"circle"===a()?"lens":"grid"}function f(){var t=0;n.privateOn("drag-start",(function(n){var r=n.type,i=n.id;if("resize"===r&&i){var o=e.privateGetItem(i);if("node"===o.type&&o._combo&&o._combo.open){var a=V({animate:!1});t=a.getNodeSizeWithoutBorder(o)}}}));return function(n){var r=e.privateGetItem(n);if("node"===r.type&&r._combo&&r._combo.open){V({animate:!1}).afterComboResize(r,t)}}}function c(t){var n;do{n=t+ ++s}while(e.privateGetItem(n));return n}function d(){return c(Go)}function h(e){var t=e;["id","id1","id2","parentId"].forEach((function(e){e in t&&null!==t[e]&&void 0!==t[e]&&(t[e]+="")}))}function v(e){var t={};e.forEach((function(e){t[e]=!0}));return t}function g(e,t){return N(t.label)?e.map((function(e){return e.t})).filter((function(e){return!N(e)&&""!==e})).join("\n"):t.label}function p(e){return!(!e||"number"!=typeof e.lat||"number"!=typeof e.lng)}function m(e,t){if("first"!==e.position){var n=0,r=0,i=0;t.forEach((function(e){if(p(e.pos)){r+=e.pos.lat;i+=e.pos.lng;n++}}));if(n>0)return{lat:r/n,lng:i/n}}else for(var o=0,a=t.length;o<a;o++){var u=t[o];if(p(u.pos))return u.pos}}function y(){return{nodeIds:[],linkIds:[],open:!1,comboScale:0,g:void 0}}function b(){return{linkIds:[]}}function x(){return{p:"ne",c:"rgb(255, 0, 0)",t:"0"}}function w(e,t,n){e._combo=y();n?e.oc=n:e.oc||(e.oc={});e.oc=z(e.oc,i().openCombos);A(e.oc.w)||(e.oc.w=0);A(e.oc.h)||(e.oc.h=0);void 0===e.x&&(e.x=0);void 0===e.y&&(e.y=0);e.g=e.g||[];if(null!==t){var r=dr(dr({},x()),t||{});e.g.unshift(r);e._combo.g=r.p}}function E(n,r){var o=n.style,s=o||u(r[0],"d"),l="node",f=c(Oo),d=g(r,n);void 0===n.glyph&&i&&(n.glyph=i().comboGlyph);if(void 0!==n.glyph&&null!==n.glyph&&!S(n.glyph))throw new Error("[combo().combine] glyph must be an object");var h,v=o&&!N(o.hi)?o.hi:r.every((function(e){return!!e.hi})),y=o&&!N(o.bg)?o.bg:r.every((function(e){return!!e.bg})),b=o&&p(o.pos)?o.pos:m(n,r);if(t&&t.api.isShown()&&p(b)){var x=t.api.viewCoordinates(b.lat,b.lng);h=e.worldCoordinates(x.x,x.y)}else{var A=e.privateGetCanvas(),M=a();h="first"===n.position?r[0]:Sh(r,A,M)}var E=dr(dr({},s),{type:l,id:f,t:d,hi:v,bg:y,pos:b,x:(null==h?void 0:h.x)||0,y:(null==h?void 0:h.y)||0});w(E,n.glyph,n.openStyle);n.open&&(E._combo.open=!0);S(n.d)&&(E.d=n.d);return E}var I=Gu({strings:{label:!0}});function C(i,o,a){var s=P(i),f=t&&t.api.isShown(),c=z(o,{animate:!0,select:!0,time:250,arrange:l(),resize:!0,easing:"cubic"}),d=V(c),h=[],v=[],g={};s.forEach((function(t){var n,r={},i=[],o=[],a=u(t,"d");if(a&&a.ids){I.ensureObject(a,!1);n=e.privateGetItem(a.ids)}f&&a.open&&delete a.open;if(!n)throw new Error("[combo().combine] function must be passed valid combo definitions");n.forEach((function(e){if(!e)throw new Error("[combo().combine] function must be passed valid ids");if("node"===e.type){if(e.parentId)throw new Error("[combo().combine] nodes cannot be combined if they are already in a combo");if(g[e.id])throw new Error("[combo().combine] nodes should only be in one combo");g[e.id]=!0;r[e.id]=!0;i.push(e);o.push(e.id)}}));if(!Object.keys(g).length)throw new Error("[combo().combine] function must be passed at least one node id");var s=E(a,i);d.mergeItem(s);U(d,ie(i),o,s.id,[],[]);var l={dx:0|(a.dx||0),dy:0|(a.dy||0)};d.layoutCombo(s.id,l);h.push(s);v.push(s.id)}));c.select&&d.selectItems(v);n.fire("prechange",{type:"combine"});r.trigger("prechange","combine");d.applyUpdates((function(){e.applyRevealedLinkOffsets(h);e.privateSetAllItemsInComboDirty(v);O(a,v)}))}function k(t,n,r){var i=z(n,{animate:!0,time:250,full:!1,select:!0,reposition:!0}),o=P(t).filter((function(e){return G(e,"node")}));if(0!==o.length){var a=[];o.forEach((function(t){var n=e.privateGetItem(t),r=i.full?ue(L(n).nodes):n._combo.nodeIds;a=a.concat(r)}));K(a,null,i,"uncombine",r)}else O(r)}function L(t,n,r){void 0===n&&(n=null);void 0===r&&(r=!1);var i=t._combo,o=n||{nodes:[],links:[]},a=i.nodeIds,u=a?e.privateGetItem(a):[];function s(e){if(e._combo){L(e,o,r);r&&("node"===e.type?o.nodes.push(e):o.links.push(e))}else"node"===e.type?o.nodes.push(e):o.links.push(e)}e.privateGetItem(i.linkIds).forEach(s);u.forEach(s);return o}function R(t){var n=null,r=e.privateGetItem(t);r&&r._combo&&(n=L(r,n,!1));return u(n,!0)}function T(e,t){var n=P(e),r=z(t,{type:"all"});if(!r.type.match(/^(node|link|all)$/))throw new TypeError("[combo().isCombo] opts type property should be either 'node', 'link' or 'all'");return n.some((function(e){return B(e,r.type)}))}function B(t,n){var r=e.privateGetItem(t);return!(!r||"all"!==n&&n!==r.type)&&!!r._combo}function G(t,n){var r=e.privateGetItem(t);return B(t,n)&&!r.parentId}function D(t,n){var r=z(n,{parent:"top"});if(!Array.isArray(t)&&!A(t)&&"string"!=typeof t)throw new Error("[combo().find] Incorrect argument passed");var i={top:function(t){var n=e.privateTopParentId(t);return{parentComboId:n,isCombo:G(n,"all")}},first:function(t){var n=e.privateGetItem(t),r=n?n.parentId:null;return{parentComboId:r,isCombo:!!r&&B(r,"all")}}},o=i[r.parent]?i[r.parent]:i.top,a=!Array.isArray(t),u=P(t).map((function(e){var t=o(e);return N(t.parentComboId)||!t.isCombo||t.parentComboId===e?null:t.parentComboId}));return a?u[0]:u}function F(t){return e.privateGetAncestryIds(t).length}function Z(e,t,n){void 0===n&&(n=e.getChangingComboNodeIds());n.sort((function(e,t){return F(t)-F(e)})).forEach((function(n){
var r=e.getNodeComboProperty(n),i=e.getNodeProperty(n,"oc")||{},o=e.getDiameterFromExtents(i.w,i.h)/2,a=e.layoutCombo(n),u=r.open?a-o:0;(!t||t.resize||u>0)&&e.adjustForNewComboSize(n,u)}))}function Y(t,n){var r={},i=[];if(void 0===t)throw new Error("[combo().transfer] function must be passed a valid transfer destination");var o=t?v(e.privateGetAncestryIds(t)):{};e.privateGetItem(n).forEach((function(e){if(!e)throw new Error("[combo().transfer] function must be passed valid ids");if(o[e.id])throw new Error("[combo().transfer] cannot transfer a combo inside itself");if("node"===e.type){r[e.id]=e;i.push(e.id)}}));return{nodes:r,order:i}}function V(u){return tm(z(u,{comboLinkStyle:i().comboLinks}),e,t,d,n,r,o,a())}function X(t,n){var r={},i={};e.privateGetItem(e.privateNeighbourLinkIds(n)).forEach((function(t){var n=t;if(n._combo){i[n.id]=n;e.privateGetItem(n._combo.linkIds).forEach((function(e){r[e.id]=e}))}else r[n.id]=n}));q(i).forEach(t.transferComboLinkToCorrectParent);t.transferRawLinksToCorrectParents(q(r))}function U(e,t,n,r,i,o){var a={};e.transferNodesToCombo(n,r);var u={};q(t).forEach((function(e){u[e.id]=e;e._combo&&L(e,null,!0).nodes.forEach((function(e){u[e.id]=e}));e.hi||i.push(e.id);e.parentId&&(a[e.parentId]=!1)}));e.getIdsToRemove().forEach((function(t){var n=e.getProperty(t,"parentId");n&&(a[n]=!1)}));X(e,Object.keys(u));i.length>0&&!e.getProperty(r,"hi")&&(i.length=0);Object.keys(a).sort((function(e,t){return F(e)-F(t)})).forEach((function(t){if(!e.removingItem(t)){var n=!1;e.forEachChild(t,(function(t){e.getProperty(t,"hi")||a[t]&&!1!==a[t]||(n=!0)}));if(!n){a[t]=!0;o.push(t)}}}))}function j(e,t,n,r){K(e,t,n,"transfer",r)}function K(t,i,o,a,u){var s=z(o,{animate:!0,time:250,select:!1,arrange:l(),resize:!0,easing:"cubic",reposition:!1,adapt:"all"}),f=null;if(i&&(!(f=e.privateGetItem(i))||"node"!==f.type||!f._combo))throw new Error("[combo().transfer] comboId must be the id of a combo node or null");var c=V(s),d=Y(i,P(t)),h=Object.keys(d.nodes),v=[],g=[];s.select&&c.selectItems(h);U(c,d.nodes,d.order,i,v,g);Z(c,s);var p=[];if(f){var m=c.getNodeComboProperty(f.id);m&&!m.open&&p.push(f)}n.fire("prechange",{type:a});r.trigger("prechange",a);c.applyUpdates((function(){v.length>0&&e.show(v,!0);g.length>0&&e.hide(g);e.applyRevealedLinkOffsets(p);O(u)}),(function(){s.animate&&e.applyRevealedLinkOffsets(p)}))}function H(t){var n=P(t),r=e.privateGetItem(n).filter((function(e){return null!==e})),i=V({animate:!1});function o(t){var n=t._combo;e.privateGetItem(n.linkIds).forEach((function(t){var n=t;r.push(n);n._combo&&e.privateGetItem(n._combo.linkIds).forEach((function(e){r.push(e)}))}));n.nodeIds&&e.privateGetItem(n.nodeIds).forEach((function(e){var t=e;r.push(t);t._combo&&o(t)}))}r.forEach((function(e){e._combo&&o(e)}));var a=ie(r);e.privateNeighbourLinkIds(Object.keys(a)).forEach((function(t){r.push(e.privateGetItem(t))}));i.removeItems(r.map((function(e){return e.id})));i.applyUpdates()}function Q(t,n){var r=P(n);(r=r.filter((function(t){h(t);var n=e.privateGetItem(t.id);if(n&&t.type&&t.type!==n.type)return!1;var r=n,i=t;r&&r.oc&&(i.oc=le(r.oc,i.oc));if("node"===t.type)return!0;if("link"===t.type){if(!t.id1||!t.id2){if(n)throw new Error("You must specify both id1 and id2 for a link");return!1}if(n&&"link"===n.type&&(n.id1!==t.id1||n.id2!==t.id2))throw new Error("You cannot change the ends of an existing link. Remove the existing item first");return t.id1!==t.id2||e.options().selfLinks}throw new Error("The type of the item should be specified")}))).forEach(t.mergeItem);var o,a=i?i().comboGlyph:null,u=0,s=[],l={};try{o=Ae(t.preMergeDetails().itemsToMerge,(function(e){return[t.getParentId(e.id)]}),(function(e){return e.id}))}catch(e){throw new Error("A node's parentId can't refer to a child")}o.forEach((function(n){var r=e.privateGetItem(n.id);if(r&&W(n,"parentId")&&r.parentId!==n.parentId)throw new Error("You can't set or change the parentId of an existing item");if("link"!==n.type&&!(void 0===n.parentId||r&&n.parentId===r.parentId)){if(n.id===n.parentId)throw new Error("A node can't be the parent of itself");if(null!==n.parentId){var i=t.getItem(n.parentId);if(!i||!i.id){t.setProperty(n.id,"parentId",null);return}if("link"===i.type)throw new Error("The parentId of a node can't be a link");if(!i._combo){w(i,a,void 0);t.mergeItem(i);s.push(i.id)}void 0===n.x&&t.setNodeProperty(n.id,"x",i.x);void 0===n.y&&t.setNodeProperty(n.id,"y",i.y);n.parentId=i.id;t.setNodeProperty(n.id,"_offset",{x:0,y:0});(l[n.parentId]||(l[n.parentId]=[])).push(n.id);u++}}}));Object.keys(l).forEach((function(e){t.transferNodesToCombo(l[e],e)}));t.transferRawLinksToCorrectParents(o.filter((function(n){if("link"===n.type){e.privateGetItem(n.id)||void 0===n.parentId||(n.parentId=null);var r=e.privateGetItem(n.id);if(r){var i=r.parentId;i&&"link"===t.getProperty(i,"type")&&t.updateComboLinkProperties(i)}else if(0!==n.id2.indexOf("dummyEnd"))return!0}return!1})));s.forEach((function(e){return t.layoutCombo(e)}));u>0&&t.updateComboNodeGlyphs()}function J(e,t){var n=V(z(t,{arrange:"none",resize:!0}));Q(n,e);return n.preMergeDetails()}function _(t){var n=[];t.forEach((function(t){var r=e.privateGetItem(t.id),i=t.count;if(r.g){var o=!1,a=r.g.map((function(e){if(e.p===r._combo.g){o=!0;return le({},e,{t:i})}return e}));o&&n.push({id:r.id,g:a})}}));n.length&&e.privateSetNonImageProperties(n)}function $(e,t,n,r){return e.filter((function(e){return n[e.id]||!r[e.id]&&!e[t]}))}function ee(t,n,r,i,o){Object.keys(r).forEach((function(r){var a,u,s,l=e.privateGetItem(r),f=L(l),c=$(f.links,n,i,o);if(l._combo.nodeIds){s="nodes";a=(u=$(f.nodes,n,i,o)).length>0}else{s="links";a=c.length>0}if(s){if(a&&"hi"===n){var d={id:r,links:c};u&&(d.nodes=u);t.combos[s].push(d)}a!==!l[n]&&(a?i[r]=!0:o[r]=!0)}}));return t}function te(t,n,r,i,o){e.privateGetItem(t).forEach((function(t){if(t){var a=t[i]===o;if(t._combo){var u=L(t,null,!0);u.nodes.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));u.links.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));a&&(r[t.id]=!0)}for(var s=e.privateGetParentItems(t.id),l=s.length-1;l>=0;l--){var f=s[l];if("node"===t.type&&a&&"hi"===i||!!f[i]===o){r[f.id]=!0;a=!0}}}}))}function re(t,n,r){e.privateGetRawItems().forEach((function(e){if(xe(e.id)&&(!e.bg||t[e.id])){delete t[e.id];delete n[e.id];e.bg||(r[e.id]=!0)}}))}function oe(e){return"node"===e.type?"nodes":"links"}function fe(t,n,r){var i={toShow:[],toHide:[],shown:{nodes:[],links:[]},hidden:{nodes:[],links:[]},combos:{nodes:[],links:[]}},o={},a=ne(t),u=ne(n),s=t,l=n;if(r&&r.all){s=r.all.shown.nodes.concat(r.all.shown.links);l=r.all.hidden.nodes.concat(r.all.hidden.links)}te(s,a,o,"hi",!0);te(l,u,o,"hi",!1);i=ee(i,"hi",o,a,u);e.privateGetItem(Object.keys(a)).forEach((function(e){if(null!==e){i.toShow.push(e.id);i.shown[oe(e)].push(e.id)}}));e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){i.toHide.push(e.id);i.hidden[oe(e)].push(e.id)}}));return i}function ce(t,n,r,i){var o={toShow:[],toHide:[],foreground:{nodes:[],links:[]},background:{nodes:[],links:[]}},a={},u=ne(t),s=ne(n),l=t,f=n;if(r&&r.all){l=r.all.foreground.nodes.concat(r.all.foreground.links);f=r.all.background.nodes.concat(r.all.background.links)}te(l,u,a,"bg",!0);te(f,s,a,"bg",!1);i||re(a,u,s);o=ee(o,"bg",a,u,s);e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){o.toShow.push(e.id);o.foreground[oe(e)].push(e.id)}}));e.privateGetItem(Object.keys(s)).forEach((function(e){if(null!==e){o.toHide.push(e.id);o.background[oe(e)].push(e.id)}}));return o}function de(){var t=e.privateGetRawItems(),n={};t.filter((function(e){return e._combo})).forEach((function(t){var r=t._combo;n[t.id]=u(t,"d");n[t.id]._combo=u(r);"node"===t.type&&(n[t.id]._offsets=u(r.nodeIds.map((function(t){return e.privateGetItem(t)._offset})),!0))}));n.nodes=[];n.links=[];return n}function he(e,t){var n=e.combos||{},r=e.items||[],i={},o=[],a={};r.forEach((function(e){var t=e.id;if(n[t])throw new Error('Item "'+t+'" specified twice');if(void 0!==e.parentId&&null!==e.parentId){var r=n[e.parentId];if(r){var i=r._combo.nodeIds||[],o=r._combo.linkIds;i.indexOf(t)<0&&o.indexOf(t)<0&&(a[t]=e)}else a[t]=e}}));Object.keys(n).forEach((function(e){var t=n[e];if(t._combo&&("node"===t.type||"link"===t.type)){var a=t._offsets;delete t._offsets;if("node"===t.type){t._combo.nodeIds.forEach((function(e,n){i[e]={parentId:t.id,_offset:a[n]}}));if(!("g"in t._combo)){t._combo.g=void 0;if(t.g&&t.g.length){var u=t.g[0];u.t&&M(u.t)&&(t._combo.g=u.p)}}if(t.oc&&("w"in t.oc||"h"in t.oc)){t.oc.h=t.oc.h||t.oc.w;t.oc.w=t.oc.w||t.oc.h}else{o.push(e);t.oc=t.oc||{};t.oc.w=0;t.oc.h=0}}t._combo.linkIds.forEach((function(e){i[e]={parentId:t.id}}));var s="node"===t.type?y():b();se(s,t._combo);if("node"===t.type){var l=s;l.comboScale||(l.comboScale=l.open?1:0)}t._combo=s;r.push(t)}}));e.items=r.filter((function(e){if(a[e.id]||"link"===e.type&&(a[e.id1]||a[e.id2])){a[e.id]=e;return!1}i[e.id]&&se(e,i[e.id]);return!0}));O(t,{comboIdsToLayout:o,itemsToMerge:a})}function ve(e,t){function n(e){return 0===e.indexOf(Go)}var r={},i=[];e.combos.nodes.forEach((function(t){var n=t.nodes.map((function(n){var r=se({parentId:t.id,_offset:{x:n.x||0,y:n.y||0}},n);e.items.push(r);return n.id})),o=y();o.nodeIds=n;r[t.id]={type:"node",_combo:o,oc:{w:0,h:0}};i.push(t.id)}));e.items.forEach((function(e){if("node"===e.type&&r[e.id]){se(e,r[e.id]);e._combo.g=void 0;if(e.g&&e.g.length>0){var t=e.g[0];t.t&&M(t.t)&&(e._combo.g=t.p)}}"link"===e.type&&n(e.id)&&se(e,{_combo:{linkIds:[]}})}));O(t,{comboIdsToLayout:i,itemsToMerge:{}})}function ge(e,t,n){var r=V({animate:!1});t&&t.comboIdsToLayout.forEach((function(e){return r.layoutCombo(e)}));var i=e.combos;i&&i.links&&i.links.length?Q(r,i.links):t&&Q(r,q(t.itemsToMerge));r.applyUpdates(n)}function pe(e,t){s=0;if(e){var n=e.combos;n&&(n.links&&n.links.length||n.nodes&&n.nodes.length)?ve(e,t):he(e,t)}else O(t)}function me(e){var t=V({animate:!1});e.forEach((function(e){t.setComboMinimumSize(e)}));t.applyUpdates()}function ye(e,t,n){Ee(e,!0,t,n)}function be(e,t,n){Ee(e,!1,t,n)}function xe(t){var n=e.privateGetItem(t);return!!(n&&n._combo&&"node"===n.type&&n._combo.open)}function we(e,t,i){var o={animate:!0,time:300,name:l(),resize:!0,easing:"cubic",adapt:"all"},a="object"==typeof t?z(t,o):o;a.arrange=a.name;if(a.resize||"none"!==a.name){var u=P(e).filter((function(e){return B(e,"node")})),s=V(a);Z(s,a,u);n.fire("prechange",{type:"arrange combo"});r.trigger("prechange","arrange combo");s.applyUpdates(i)}else O(i)}function Me(e,t,i,o,a){var u=z(t.arrange,{animate:!0,time:300,name:l(),resize:!0,easing:"cubic",adapt:"all"});u.arrange=u.name;var s=V(u);if(u.resize||"none"!==u.name){var f=P(e).filter((function(e){return B(e,"node")}));Z(s,u,f)}n.fire("prechange",{type:"arrange combo"});r.trigger("prechange","arrange combo");s.adjustTopLevelLayout(t.layout,i,r,(function(e){o(e);s.applyUpdates(a)}))}function Ee(i,o,a,u){if(!t||!t.api.isShown()){var s=P(i),l=z(a,{animate:!0,time:300,easing:"cubic",adapt:"all",updateGlyph:!1}),f=e.privateGetMaxLabelLength(),c=o?"open":"close",d=V(l),h=Ce(s,o);if(h.length){h.sort((function(e,t){return F(e.id)-F(t.id)})).forEach((function(e){var t=d.getComboSizeChange(e,o,f);d.setNodeComboSubProperty(e.id,"open",o);d.setNodeComboSubProperty(e.id,"comboScale",o?1:0);d.adjustForNewComboSize(e.id,t)}));n.fire("prechange",{type:c});r.trigger("prechange",c);d.applyUpdates((function(){l.animate&&o||e.applyRevealedLinkOffsets(h);e.privateSetAllItemsInComboDirty(s);O(u)}),(function(){l.animate&&o&&e.applyRevealedLinkOffsets(h)}))}else O(u)}}function Ie(t){var n=e.privateGetItem(t);if(n)if("node"===n.type&&n._combo)Ee(t,!n._combo.open);else if(n.parentId){var r=e.privateGetItem(n.parentId);r&&"node"===r.type&&r._combo&&Ee(r.id,!1)}}function Ce(t,n){return e.privateGetItem(t).filter((function(e){return e&&"node"===e.type&&e._combo&&e._combo.open===!n}))}function Se(e,t){e.combos=t.combos;e.shown={nodes:t.shown.nodes,links:t.shown.links};e.hidden={nodes:t.hidden.nodes,links:t.hidden.links}}function ke(e,t){e.foreground={nodes:t.foreground.nodes,links:t.foreground.links};e.background={nodes:t.background.nodes,links:t.background.links}}var Le={api:{combine:C,combineNodes:C,uncombine:k,info:R,isCombo:T,find:D,transfer:j,open:ye,close:be,isOpen:xe,arrange:we,reveal:function(t){return e.privateReveal(t)}},internalUse:{hide:function(e,t){return Le.internalUse.filter([],e,null,t).toHide},show:function(e){return Le.internalUse.filter(e,[],null,{updateGlyph:!0}).toShow},filter:function(e,t,n,r){var i=fe(e,t,n);r.updateGlyph&&_(i.combos.nodes.map((function(e){return{id:e.id,count:e.nodes.length}})));n&&Se(n,i);return i},foreground:function(e,t,n,r){var i=ce(e,t,n,!!r.foregroundOpenCombos);ke(n,i);return i},preMerge:J,preDelete:H,serialize:de,preLoadUp:pe,postLoadUp:ge,dblclick:Ie,ensureMinimumOpenComboSize:me,arrangeAndLayout:Me,afterComboResize:f()}};return Le}var am=null,um="t",sm="bu",lm=/^do([0-9]|[1-9]\d+)$/,fm=/^a(1|2)$/,cm=/^(?:n|s|w|e|ne|nw|se|sw|\d|[1-9]\d|[1-2]\d\d|3[0-5]\d|(\d|[1-9]\d|[1-2]\d\d|3[0-5]\d)-(\d+|\d+\.\d+))$/,dm=/^ha([0-9])$/,hm=/^([0-9]|[1-9]\d+)-t(1|2)$/,vm=/^t(1|2)$/,gm=/^(n|s|w|e|ne|nw|se|sw)-resize$/;function pm(e){return"node"===e.type&&!(e.u||e.c||e.fi)}function mm(e){return"link"===e.type||pm(e)}function ym(e,t){if(t===um)return{subId:t,type:"label"};if(t===sm)return{subId:t,type:"bubble"};var n="node"===e.type&&e.donut&&lm.exec(t);if(n){return{subId:t,index:f=parseInt(n[1],10),type:"donut"}}if("link"===e.type&&(e.a1||e.a2)&&fm.test(t))return{subId:t,type:"arrowhead"};if(e.g&&(n=cm.exec(t))){for(var r=n[1],i=n[2],o=parseInt(t,10),a=null!=r?parseInt(r,10):o,u=null!=i?parseFloat(i):am,s=void 0,l=e.g.length,f=0;f<l;f++){var c=e.g&&e.g[f];if(c&&mm(e)&&o===f)return{subId:t,index:l-1-f,type:"glyph"};if(c&&(u===am||c.r===u)&&(c.p===t||c.p===a))return{subId:t,index:f,type:"glyph"}}return{subId:t,index:s,type:"glyph"}}if("node"===e.type&&dm.exec(t))return{subId:t,type:"halo"};if(n="link"===e.type&&!(!e.t1&&!e.t2)&&hm.exec(t)){var d=e,h=n[1],v=n[2],g=parseInt(h,10);if(1===(p=parseInt(v,10))&&d.t1&&"object"==typeof d.t1&&d.t1.g){return{subId:t,linkEnd:"t1",index:f=(l=d.t1.g.length)-1-g,type:"glyph"}}if(2===p&&d.t2&&"object"==typeof d.t2&&d.t2.g){return{subId:t,linkEnd:"t2",index:f=(l=d.t2.g.length)-1-g,type:"glyph"}}}if(n="link"===e.type&&!(!e.t1&&!e.t2)&&vm.exec(t)){var p;v=n[1];if(1===(p=parseInt(v,10)))return{subId:t,linkEnd:"t1",type:"label"};if(2===p)return{subId:t,linkEnd:"t2",type:"label"}}return"node"===e.type&&gm.test(t)?{subId:t,type:"resize"}:{subId:void 0,type:void 0}}function bm(e,t){var n=t.events,r=t.legacyEvents,i=t.controller,o=i.getActiveDragger,a=i.stopDrag,u=i.getFakeDragger,s=i.setFakeDragger,l=$m(e,t);n.fire("context-menu",l);var f=u();f&&e.validDownEvent&&!o()&&2!==e.button&&a(!1,f);s(null);r.trigger("contextmenu",l.id,e.x,e.y,l.subItem.subId||null);return l.defaultPrevented}function xm(e,t){var n=e.id,r=e.button,i=e.pointerType,o=t.events,a=t.model,u=t.controller,s=t.legacyEvents,l=t.overlays,f=$m(e,t);o.fire("pointer-down",f);var c=f.id,d=f.subItem;("mouse"===i?s.trigger("mousedown",c,e.x,e.y,r,d.subId||null):s.trigger("touchdown",c,e.x,e.y,d.subId||null))||f.defaultPrevented;var h=null;if(0===r&&!u.lock()){h=a.createDragger(t,u.getCanvasContext(),n,e,f.subItem,{},u.inMapMode());n&&!h&&(h=l.createDragger(n,e));u.setFakeDragger(h)}if(u.lock()){u.stopDrag(!1);u.setFakeDragger(null)}"mouse"===e.pointerType&&2!==r&&s.trigger("click",c,e.x,e.y,e.button,d.subId||null);s.suppress(!1)}function Am(e,t,n){var r=t.selection,i=n.modifierKeys,o=i.consistentCtrl,a=i.shift,u=null===e,s=e&&r().has(e);(u&&r().getSelections().length>1||!s||o)&&r().set(e,o,a)}function wm(e,t){var n=t.events,r=$m(e,t);n.fire("pointer-up",r)}var Mm={"Arrow-ne.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAARVBMVEUAAAAAruoAruoAruoArukArOsAre8AruoArusAr+0Ap+IArusAruoAruoAr+oAruoAr+oArusArusAreoAruoAruoArurGDVJ2AAAAFnRSTlMA7PlILTQSzUApCPry5LWHbmZYV56dONEurAAAAHFJREFUKM+90DkOgDAMRFGzZQOyQu5/VCRiVwzp4LdPsqyhj3MpG6vedBprreOu/RFiNg6pZKijhToaqaOBgK6MJ8BlY/TAhsppbNt9eYc2zG0NbPyzwtbUQmM1yEQLMtGETHIPA81sMKXFsLJhtfRjF/wgC8yO94CNAAAAAElFTkSuQmCC","Arrow-neDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAflBMVEUAAAD/////37//5rP/4cP/47j/5Lz/4Lv/4bz/3bv/3rz/37//3b//37v/4Lz/37z/37z/37z/377/37z/377/37z/37z/373/37z/373/3rz/373/373/3b3/3r3/3r3/3b3/3r3/3r3/3r3/3rz/3rz/3r3/3r3/3r3/3r322m5MAAAAKXRSTlMAAQgKERITKSotLjA0QEFIV1hmZ25vhoednrS1zM3O4+Tq6+7x8/j5+j1vUcwAAACJSURBVCjPvdHJDoJAEATQQkSQTVBUVNxYxPn/HwTHwRDS3Tes60sqlW5g3ix2aew5FqObl1Lq/Sgup+M+jW1Kh0QQNIGgGQQ9UKtagzmBYWPwTFg11Ba01br5Tlrp61WtRdjTN5uXtH3VZUxrxNlHk6mtR9fY8tb/V7BfAsGwuvEGOFfeenXxx3RuXxqKhuE8BgAAAABJRU5ErkJggg==","Arrow-nw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAPFBMVEUAAAAAruoAresArusAruoAqvEArusAresArusAp+IArekAruoAr+oAruoAr+oAruoAruoAr+oAresArurF+043AAAAE3RSTlMA7jL5SBJYQSwI8+TOzLWeh29nYHqaQgAAAHNJREFUKM+9z8kKwDAIRdHXIVOnDP7/v7Yk2QRU6KK9Sw+I4peMd7aEYRSczSle574Q0bJiyFGPMVjFkBVDUgxRMVwdt5nBk3oTo3vdufHafp8nTk2/hVXfjFdXTVBbTdDymKgBUBRv1St6GIgqG+ANPuwGG+MKJZ7NkmMAAAAASUVORK5CYII=","Arrow-nwDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAS1BMVEUAAAD/////37//5rP/47j/4bz/3rz/4L3/4Lz/37z/37z/37z/37z/373/373/373/373/3r3/3b3/3r3/3rz/3r3/3r3/3r3/3r1WtQojAAAAGHRSTlMAAQgKEiouMkFIWGdvh561zM7k7vP4+fqDBIPoAAAAgUlEQVQoz73SyQ6AIAwE0FFREfe9//+lHsQFHUk8aI99gXTSAj9UoGJt8tDpRdoUZVU33SwiY+Y+0HLU1WA8hsJjKD2GytpEDLXFISXYbN/2RDsRkWmgGqzZ056psnNSjbcMTPWej6g5st81P2W/qbM/PvMbTTzaKjzqswGJ+vKMF+HAD4Bl2YeRAAAAAElFTkSuQmCC","Arrow-se.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAP1BMVEUAAAAAr+oAruoAruoAruoAruoAsOkAr+sAreoAr+sAruoAp+IAr+sAruoAruoAruoAruoAruoAreoA//8Arur2XPH+AAAAFHRSTlMAL/nsSOsSaldAKgjx48/MtJ2GARaOxv8AAAB2SURBVCjPvcs5EoQwEENRYYxXGDbd/6yzdYCrmiaCH+qVcGehGPYaunMjT7UMNLS71r7RaqiPx2/fqHcJiooxQ1ExFmj6Nwao+jO3Q9Pxa5wARaUZio6Ci4LeCa6GcTOM0TAmw5gVc9O8rFtMuTZWP0sJOx7oDS3DCuS8EfUUAAAAAElFTkSuQmCC","Arrow-seDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAV1BMVEUAAAD/////37//5rP/4cP/5Lz/4Lv/3L//3r7/37//4Lv/37v/37z/37z/377/377/37z/37z/3rz/373/3rz/3r3/3r3/3r3/3r3/3r3/3r3/3r3/3r14z/qZAAAAHHRSTlMAAQgKERMpLC8wMUBIV2Zuhp20zM/j6+zx+Pn6sUvavwAAAI1JREFUKM+90MkOwjAMBFC3lG5xutKmDvP/38mBIKWQmBPM0U8eySb6Ya6NYre9zRuQ1WaHou13dV08KhXlId51J2WxcU0XKwsMZZQFqCmtLAAqSmnPAsAXlNLDA8D2eW/nELImvtEfAZcEsg84J0xetZNiGBWDVezte0+7b+syT6M1l5OVgzV1VdAf8gAxkxJYBEMmEAAAAABJRU5ErkJggg==","Arrow-sw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAQlBMVEUAAAAArusAruoArukAruoAruoArusAsvEAruoArusArusAr+0AruoAruoAr+oAruoAruoAr+oArusAn98As+YAruriSELzAAAAFXRSTlMA+Ugt7usyEc1XQCny5LWeh25mCArMFThRAAAAc0lEQVQoz73JSQ6EMAwEQAdmyMYO/f+vIpClFiLxDepa8qXW16/7BV8/gPs8/LNxrajNOFmb+kl0ujxK0OVRhi6PPM7l3blreTcDzu2LJwGKR6Nez6NJ0zWFnGHsAmMjjE0wdk9xmacxDI5b4HOK6ybvOgBebguIlLvi1QAAAABJRU5ErkJggg==","Arrow-swDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAflBMVEUAAAD/////37//5rP/4cP/47j/4Lv/4bz/3bv/3rz/4Lv/4L3/3L7/37v/4Lz/37z/37z/37z/377/37z/377/37z/37z/373/37z/373/3rz/373/373/3b3/3r3/3b3/3r3/3r3/3r3/3r3/3rz/3rz/3r3/3r3/3r3/3r2Q0tm3AAAAKXRSTlMAAQgKERIpKi0uMTIzQEFIV1hmZ25vhoednrS1zM3j5Orr7e7x8/j5+rQQtWQAAACSSURBVCjPvdJJEoJADAXQLyKiMjoPOKEC//4XdOjuhUXSO80ueVVJKhXgjxGHuk3ro6qzmtT0bbxEHotdGngMi1w3lE2uGjI6TXqGMa0KhhGNGpt8Lz/oPprcBAPOryrbh2ioaOPaNxys3QXDzmKbC7hxbRtBV/RoSY9m9OgwLZbr7b46dcpcc6swSot58OP3fQJ4/xpWfdtUuQAAAABJRU5ErkJggg==","Arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAAflBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////9wcHCRkpX9/f3S09TU1NWztLaSkpKGhoaPj492dnb39/empqahoaGJiYmDg4NycnLt7e3j4+Pc3NzExMS6urqysrOXl5eLi4t8fHz7+/vx8fHg4OCrq6vo6OjGxsZuZdNVAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAPxJREFUSMft1rlSw0AQhGEZMMe21rJ1opV1IWzD+78gVaNIimaagnKgP9vgizqYjbb+ptdHbfuF28X61vCQaCrj5zX0TtMhfrgv6Fl49CSsBxaiY2FIKJgC+ZmEmBoSIi1IiNOnGb5DqjwJMbAQHQtDwkGZ0wI/MCdzUlDmpKDMSUGZUw0zLBpYiI6FIaGgzKmDJ8zlwFRVVVneem+AUri4OT0Ms+ytcGozgam3wbRxHaTWBMfCuSIXWBrgeJNXKTAv9PDqpBbSt/nM+VpgZoauh/Rlhhdx49kM3Yi6b5hTfm39nX8e/gcOR03xCr7F6l6iRfsnbbtoa+u3/QB6AlluQsKWJgAAAABJRU5ErkJggg==","ArrowDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVlBMVEUAAADf39/o6OjV1dXY2Nja2tri4uLd3d3e3t7f39/b29vd3d3d3d3b29ve3t7d3d3a2trW1tbV19e7vsCusbSnqq2ZnKCWmp0tOD8uOUAvOkEyPEM2QEc3Qkg4Qkk5Q0o/SU9CS1JDTVNGT1VKU1lOV11PWF5QWV5RWl9TXGFUXWJWX2RZYWZaYmdhaW1iaW5iam9pcXVrcndyeX10en91e391fIB2fYF/hYmBh4uDiYyEiY2Fio6Jj5KLkJOMkZSNkpWSl5qXm56ZnqCbn6KcoKOdoaOfo6WhpKehpaekp6qqra+sr7GtsLKwsrSxtLaytbaztbe0tri0t7m1uLm2ubq3ubu4uru4u7y5u727vb67vr+8vr+8vsC+wMG/wcLAwcPAwsPBw8TCxMXDxMXExcbFx8jGx8jMzc7Nzs/Q0dHV1dbW1tbX19fa2trb29vc3Nzd3d0CjeBHAAAAGHRSTlMACAsMDSIjNTZHVFpbXGV/goSFna230dV0x2KbAAABXUlEQVRIx+3Wx1NCMRAGcOy9KybYsD8LdqwodsXesFdAUFGf3/9/8RDR996F3Tg6HPguueQ3yWQzs+tyZfMnKakgprzQ5nJrGolpqLLBvNqA0UOJ313phB5BieEuyywodeG81ISJBV0Ivx6MwxzSgo9AslcHxgA8d2jAKABE2vgwAgA4bGLDBwAANiUX3iuIIBfefUFMMuFtCprDPHiTgkgaLHj1DZ3lTAOvf6CjnGngpQXay5kGXlghQpIMz20Qi2R4ZoeYosJTBzRHiDDsgHg1aPAktR942gptrK8sz0kSPLbc0sv5AEcA8K7kNAceAHjxqaLEJAPuA9FOMaGOHGDB3VYhWt4AAKsMuLfkEUKINfW0zXTYr5ZBdddxdpuTcQBAmN8fZ9SRXWzoNQF87HTzO/I2ErPtOq28z+fJ8OHhf+DYKCUBB8ypriemrtQ+dhYUE1OUn53Rs/l1PgExgy+Px7+vfgAAAABJRU5ErkJggg==","Hand.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAArlBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////+RkpVwcHD9/f3S09TU1NWztLbKysqzs7Px8fHv7+/u7u7p6emWlpZzc3PS0tKDg4P5+fnCwsKioqJ3d3f19fXm5ubc3NzY2Ni5ubm2trapqambm5uRkZGLi4v8/Pzz8/Pr6+vi4uLGxsa8vLyvr6+Ojo6AgIB4eHh0dHTo6Oiurq6lpqd9fX2Hh4d7e3sYjczTAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAWNJREFUSMft1dduwjAYhmE66HA+QzMgk+zF3tDe/43VQqlQzIGdVEgc5JV+Owd5pESy5F7Xffp4ka1fc0+KfDwcDGU6KW88pESmgfLcQdbhmB8PLaBtAbDshtDwEh+lVsJPPKMBtHcAHJe4DoCdLQ3HezimNWFPE8t0sB/LwgzKlAwvcEimCjJZaGLJ1nU1SxSBJFSgslWrRgVQhC0h/HELWC7CDcwWMCJkAYs2h+wrR8DdYLhKhkVzSBMLrOZQBUqzgn8TGxJwi5SS+AJriWAAuGxLG0Md0NlGi6aQOjhd3rM5OBdAYle/Rzm4gC84chn8OblNxUYA3W9sprdwjUwASbiHdgtNeCJIPCDmHf1BJIQ0x3nGQR0IhJDMtshpHcZwiBiSCPDqcIVcBpIU1nJkXIvOWElBOgHXNhDBSqa7mjPn0rcVnenX3Ee/kR8Xal8yKRz8VKR779Xqv8r21Ovq+m+/Ii1ihjYVGpMAAAAASUVORK5CYII=","HandDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlVBMVEUAAADf39/o6OjV1dXY2Nja2tri4uLd3d3e3t7f39/b29vd3d3d3d3b29ve3t7d3d3a2trW1tbV19e7vsCusbSnqq2ZnKCWmp0tOD8uOUAvOkExPEMzPkU0P0Y1P0Y1QEY3Qkg4Qkk6REo6REs8Rk0+SE4/SU9ASlBBS1FDTFJDTVNETlRFTlRGUFZJUlhKU1lLVFpMVVtOV1xOV11PWF5QWV5RWl9SW2FWX2RZYWZaY2hdZWpeZmtfZ2xgaG1ka3BmbXJpcXVrcndsc3htdHludXpvdnpzen51e392fYF3foJ5gIR6gIR9g4eAhomBhoqDiYyEiY2Fio6Fi46HjJCIjZGJjpGLkJOPlJeQlZiRlpmWm52Xm56YnZ+doaOeoqSgpKajpqmnqqynqq2orK6rrrCsr7GusbOvsrSws7WxtLaztbe0t7m1uLm2ubq4uru4u7y8vr+8vsDAwsPDxMXGx8jHyMnHycrLzM3Mzc7Q0NHT09TT1NTU1dXV1dbV1tbX2NjY2dnZ2dna2trb29vc3Nzd3d3f4Z4UAAAAGHRSTlMACAsMDSIjNTZHVFpbXGV/goSFna230dV0x2KbAAABqklEQVRIx+3W5VPDMBgGcNxd0w6HDR1uQ4cOZ7i7jaEDhg/b9vzdhKErcH1bjm997iIf+rte0iRNQICWf0lkLDExYX4uKDGdmNR4PxicNF5fS0lfWpwUioyS+rRoDfJUzG/OV6iAZjcAt1khNAxaXXBMO+CyDhoUQPMNf5szg2U4eXtjJkPjA5w2zyrvrXpsTjwYqXAJdh1rW+G9lVams2ORCu2w8HqOl1leLNjPJcNeXs+8lV4+zsNKlRB3RhXwpKb6GNsqoImxBjwJymE5YyWA+F+wctjatqccCmOelzlUDrsBx67nFXa/laZCArzApMBavD74NXIwH8jmzaRiaAD0vBEPlELhDMu+59olsFRujO1Al292JbAO9zJLbgGush8Otx4cycDMUxzrvsPZ9838+8qpesTMd2jDgOzu6AeapU64RqMsFDZwVSCB/DPlyO/HvEtsSU7nFpxTjg6TF0P+cBTrpDNnCm5LceFHikxXGCFBcQ2SXObTfgHixO1X5t0pJf+txAL9Z7K0O4Ba2NlBybgEBiakEJMc5X/tDI0gJjxEu6Nr+XOeAcQkNGDJMjg5AAAAAElFTkSuQmCC","Nav-Control-Head.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAABDlBMVEUAAACRkpWWlpqRk5WRkpWRkpWRkpWRkpWRkpWOjpSRkpWRkpWRkZORkpWRkpWRkpWRk5WRkZeRkpWRkpWSkpWRkpWRkZaRkZaRkpWRkpWRkpWQkZWRkpWRkpSRkpX///8ArurQ0dORkpX8/v8Jsev7+/y/6/rY2NqfoKLq6usiue3f4OHg9f1TyfH4/f7Hx8nT1NWurrHp+f2UlZfw8fFNxvHz8/T29vfm5ufi4+S8vb6qq62Wl5qW3vfu7u+3t7nl9/2s5fiT3faJ2vVizfIpu+2am57y+/4RtOzE7fpr0fPc3N2xsbSnqKqD2PUZt+y36fmN2/bCwsSkpad+1vRGxfCk4/hy0/Q8we/Kysxfm/hGAAAAH3RSTlMA+QdRsCLmzbkMj+wZ8dWdeBRpWklCNCzcwXI8h35gX/9DngAABnpJREFUaN61mmlD2kAQhjfcyOl91oE3pAnFChTKXdFK8a7Wq/r//0g1tZiwTDZYeb7y4WF2J7Ozk4gpCC9tZGLr0bVEKrIWXQ/NbW/Oi/cmsLwV1SCTCC2svp9lfiFmS6xqJ3/WLu41mvViq2Q+9i96eCKSWQq8RyzBkAbUuuW2QTINs2M9u+ZW/jeYDwmg1y8ZxFPPdwFEg/+j2dKAqmmQir2yBaQX37iC8WdNv0i+0M0bYO1NUQUjqHXq5J9SFwiFp9WEQ0Cf0fAqC9qH6dZvUYNVoqkxyjVEpwgqkAHKbArsnpzs8mnRRSroe9miGLaJ4+Ayl7u84rOiDMz5W77NFKpN4viVs/nssVNDxOJCzZKGa93TY/ONNzUuEFWX220NeVJ4bL4Ti1HFmiolFlAzlR61qY+ItymIWkntUZv0DtaSgmdZwxmxHL461KY+onxGrKRQ8e1R71MswBXrCMpKj3/TBeYYUQh9X55CwZepMcTkGrEBy/Dj+bS/88mXqYRUeNIGaTX+7Ll3eoicpgPeVEZU3qZA2uNB/XLs8rhMx0d86nWRlURZVInlwO1xm66IZa+mjS9e2Gvh6N7tcZsOiKeMkJRx18SzU3B63KbCPvEY1ljmLdsZx3M78kimQ+/THWuufIih4t3kfH9Kh8HRWIp8fkqFb+RNF4vO1JYCklU7E7LraEdXNixIu3YoT7PiwrFLqxgaNCvOEB2J5lCmmaFbWPlXFBKo0+woj6p4EF2aIXUkAlIqzITuSzrEtVqTZkn+pQ4tTSqn+v4uvYGjLyTTQILLOf3Xca7we5LKqBdbreKeMbkk3j2VqY8kYcG+UUfRGvd8zj1zJ/n3zvIvmEWDO7XkotTBxnNLgp4ueSYeAA0z76BSHC8/A65bNhGyk7vKeHKn5KSYH6M0ZvrE9eVNpOyj9ZrxuEWlvMTYNfpHjjMNkRQigwrjyTn3tZWfwJkrpt85ztTFshDraDOegWuYMJGWK7c/caYOFoRIoDHZ83XXebvPT6bpSm/O9Ig5EUeP88iJIFMiP6YzhEQYltpDZp7D8GNqY12swlJ7mnmWIvkwFREVm7gYPXCMx145fu140/2okcSaWB49rwesh1q8yCTG5Gz5GoiIIM7pL19ZD5V4UYU8TN9HpUFzHBIPTDftWyRvwc+RKCE2R+f46WvI46W+PcXS0c+c9I/riIgV3IyqvGxS79GZh+fuNevSzufoY4Ez1XlRi/f8+DL6o4iKJIakNOm8qOHDQyXEhNBgqE0lNhd0Hx6qICNEGkVSmppsYfDjoWtkhQjBpMmmE3VIpiugQ8ZD5wgKsYUyTTZdOi4qhqneoROnR26DttEnxnToXLyKcuHuOI8BBIRdvhnTwNUDVRQeumQ81P57c0mgzphuyYZZvUqD3Dy4PPJ9IoQKTTQVdsb7R9OhaenSNILxUBVL9tBRnjWdXD57DuSOvN42bUtp1BRLbdCD5DFqmj26C2OoS8364eB2h5sdGDoxnJye3ss/lv5dLtNo0yzpIPtvftahGWL0kBQ2SfQMmh0mYq9zE5Nmx/nr7GRxlrflOlKjcXEgMsN06GDLOb+v0oxo1LR5IRwhFWk2XGPOPSE+J092bgeH0njr6vT0QBVQT0s6RfEISuTBQeH5fDohJ7sDu9PxHhP0x6fsQc+J3U5BPt13Xzrb316eNiJx4SaGsmLSaZskT66w6zlSXRTymHiPOAavHYvLY7PvNdiKCYksbgz+hYHT5PYc66ynBS0sZGJ8bT26dJlsj/rlRNPCtphAMsKXvBNnv+fyfGYD0s+RYd6HoVckCbnfu5I8zAaluXdiWQzrapON2lNBalVwZGA1edNUnjNoy4InhAuDN03hadcQFB4E1nGhjkntKfWwIDyJr8NS7ZPaYwIbQkEghKEi95SePLRFoSaDnsmb1B6jA21J+OED0DFYk8pTvEFkRfhjOYGbPc5k390HrKdSQ2xe+CW5jhr3LciX04ev7Lm6VwWyYho+MF+3KL9tWdsU0xGOAedTdSy6yX2to/4CCect39HkLSAWFm8hvhEBuqZBahqPQ2B9SbyVwEIE6HXauncwlSqAmGJzVKrFGACrY9aZjWk9VmtAKrMi/ptkNo1nWb/sfvPRbFeuqz0AWigYEO9DeCGUgM3Quqie96vdG6sHm/RcMC7eldXtrVBawyupaCYbTIrZEEiGV5aDi0ubq+F5MRV/AMrHP3wtA6vJAAAAAElFTkSuQmCC",
"Nav-Control-HeadDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAYAAAAdHLWhAAASzUlEQVR42u1dCVRU1xk2bdN9TU+X09O9p6db2sRoFncFWRQFNYrKJoIBBESQHUXWGYZ1hn3fkV3cQRDFfQMUhkHBiFtsmtg2afY2Gm/v99KhCQFm3rz37gxm3jn/wZwwj3n3e/f+2/f//7RpU+QihDx2+/bt742MjPz25ZdfnkVlOf23MxUPKj7Xr18PoBJK/x1BfwbfuHHDn/70orKBylr6+9ZUnqH//+evvvrq16eZL2FXV1fXl4aGhn5FF9eCLrbntWvXoi92dyvb2juq6xp3t5VUVHVnF5Rcy8wrvJWRnf9qambOP5KVWe8o0jPfT1Fm/ys9K/eeMif/blZe0Y28otIr5dW7Tjfv2be3s6urRK1WKwAmgKP3fo4C9wPziutx4c3GglFxu3r1amxH59Hy6tr6rszcwltJaaoPo2ITSUBoJHH32UJedNlIlqxaRxbbryYLlqwgs63syPOLbMnMBdbkBYslZK71crLIbiWxdlhDlq1xJuvcvchL/kFkW2Q0iZUnE4CZV1ymaWzZc+DsuXPZFKwQKiuxQ+lu/YIZjU/sFPoG/5EuzPqBgQFZ4+69+7PzC0cSU9LvB4XvIE6ePhwI0+dakj+/sEA0AZgAzsN3K4mMSSApyqy3C8sqLh8+0llJgQq7efOmDZUff26BeeWVV75GF2Dh8PBw1KHD7bvwNico0u57bdlGbFauFR0QnYBZ2JJVTu4kKGIHwHqrorr21Kkz53Khx27duvUH6MDPBTD9/f3foLtl8eDg1Zi6pt1tWIyA0CjisNaVPMMYlIlkDj0unenOxZEKHdbe0VlBd7kf/d5/fmSPP/pgj9MHtFRrNPE19Y2dSemq96AToCtMAZTx5C+zFhK71U4kdHsMUeUW3DnU2r6LGisBVEf+7pEChx5lv6dv4Lb6ppZWWUr6Bx6bA8gsy6UmC8x4Yr3CkUAnwjI8dvxkEXQmfa7vTmlg/ue3OB3tOl6ckZ33t81BoZyFNZWAGSu2VD9GxckewsynRk0i3VHz6enwxSkHDlWuT2o0mrji8sqeSHqW4w2cysB8Up6eY8FZl3J6TFOjcw8FyRsv41TRNV+iu2bZ8ROnCqnz+AYeBA8k9aLNnL+YOLs6EycXJzJzHhtjY/bipdyxl19SNjAwOBgDa8+kwaHO5feprtkMXROdqHgA/4XFQgVt8SFv9O8n5MZRTv5+aR/Z4ufF5G8/NXsRZ/EhknHi5Ol8qpdsTfLIo0fazzSaK9F5RaWDMJufpR49iwVKjQ8fBWasHKpRsTMiHNaQmETFfYSTqJXnSkH6ssmAg/DI5cv9Mlg4ri/5cuapscHRSmJ0CDtnd5EtCYmKIVW19V3QS/D5jA4OfVueutDdnZGWmft3xMdYLUZaQoROcLQi28kOJDjbOEGKK6ovUpC2GtV4oMfaDIRDktIz34JDZ4rgGAMk6CXvgGCC435oaCjcKCDBYjl3/mKmPFX5Ls5fUwbHGCDhmIdDDpCo4RT42muvsTvuqKXyy+7e3uQUVfYbCPmzeuj0RMPBMRZI3luDCZxa6CQmhgNC8Gq1Og6RgRXr3aYUOMY67qCTqmrrjlOV4CapCY4UAWJqmXmFN9e5v8QQnEjRwNGKnLHhAOsOyUH4SVIaBesqaupOegVsM0lw/nOtg3xIxRRBem6hDdkpS35w4tSpAnrciR9xoDvnBfABInbGM8vb8AHn9tkmYrl0GbFZZk/unt9tkiDBmEpTZf8TYSFRLbs7d+78pLe3NwUW23xbeyYPExnizxsc7Wf5ghS8dTMzkBAWQuwOmVpR9BEyiMPDw37gCSAlzOIh5lnZkrc1hwwCxxCQ3uw/QGZZWDMzGhBgbdl3oIU6+fPE0Dtz9uw/0Lw1LIrZW4bgpxBwDAHJb/MmZs+HKLgsVfke8kmCkn4jIyPf0Wg08UnpqndYpqbDgvwEg8MXpMAt3kxzSjjq4B8hoSnIaqM3uYAAKMsvb7PcgTy4fkQwOPqCBMuPz/3ESvpFxskeIn0OSoBB0QLkN7bHyx9ONwLbJj8tRhRw9AFJJY8ySmYW9DJlTt5fEVTlzRaC14s40or1G4zy5Z+avZDz+N/RtHKL+NH1TrK3PIPMtrARZHwcrFZx98I93xo4SGKjgpilR8aTwPDtBLxAajD8hY/P89PTZ8/mYPfA6jBm/n86PQrw9j+/wEq0e76w0JpY29mTp438bFrfSJVT8ArdEP56kyNBKSosLe9jmd/5PEtw1E4CyjEo0PocbT88f/Giamei4qPpJsL0fNQFGQHEN+nae+tjHNiiVMPJw9u8eAzTEiDwnzx9Jm9oaOgnk0YN6DYLT87Ienv2Yjvz4jGU9Ru9CDYG3UVLJuMX/A5nIUIR5kVjK9gQ2Bh0g0RMGKOjADnCOFjptMG8aEYQbIy2jiNV4zquSMcODg7GyVIzPpwx38q8YEYQbIwCukHoRlk9LrcN6IkZFIWzabFkGZkx1+KRW0z4UvOslojq5KKwAKWZsAM+4xNR1KxRVSZGKhvAKOLCRlMG/x5uJ5U5Mo4/LeYigb3qSH21TT7+JDgknIRRr9zHbytxps8wz0aa4C6c5lMthaNhoptnGomnp3gqAQlRBAk+U34JGxzMUAu7VYI9/yP1OePGvM7sLRL8xuHzbtQFUGWoyL7GRnKguXlCKc4vIAFBIRRIcY7s+VZLudyRlAzWjZsDSEPznkNoNfCp6mqNRpMUr0gTFNqZDBwxsper1rmSkoLCSUEZTxqqa4i3b4Dgl2N3aZrkNGMQQNE24FNpCJjXrW3tNVtCIiUFB9JYnGLQrgncFsobmLGSmpxGnhVgAN053yw5FxzHNno90B0U+ams6a7G5nY3Lz9JwYHUFih4gyNLlAsGRyulhUUGV/ndON2g1zMKBWlnooL0Xr6cOjQ09C1t9NqhqKyi1xD/hw84EE9PfryG4NAI0cDRSk5mtkFFZWWZCXo/pxCQ4A8dOXqsDDk5rYntgZYqlstflBScPeXpvO7v6OIuOjhaiYyKNoDbtpjcPtckOUib/AMJGnpQXGZqj7iw5IzMd1HfIhU4x5vzeflDuH9VaZlkAO1vaiKWy1YalI7/68UWSUFy3LCJlFfXnkG3ExxvXxkYHJTHJaWaDDgQ+DNSgTNqNKSkGcyZkBKkpS+uJ7lFpVeRl+OYO929vRk74uUmAw4EylxqgCCGRu2lBAmqBg2kKDYbuQQdirDCo+NMBpxFSxyYgAPxNNBylRIkdO9CizUugXf37t2fotEE0q66Pri/Uik5OBBvBsebVpIVKcJCPwDpgv4044hgf92pBys7jsONJoXoBvJrBElRwzIp+2SLNxNwuHhU5A5mABXl5YvC49MXpHcGW7kAsq5iZARN0cOO66Oz/1Brvd+28Ek/dKwxjwk4ELksiRlAdZVVopEt9QVJV0XFjHmLSVKa8j/UgIvi0gwfh3kiJv1QT2uZXn/c28tDeB0qta5YAdRSVydaJLqpOEWvNcpJmdwHe3bhx+Eeik044nC/gNeqK81dkyvX649/cPUw8fAQVhoZExvPDKCKklJRwMlS7NBbBfj6TE7URyewVFX2mxSgQK7m9MTp0/mhO2IntyysJw61iw3StuBwZgBlq7IEg5OdrD84Z/cV64yqowYrPSv3dXrE+aLu9AmU06Mjlc5cxUY3bvGlBmm9qwczgAwJ+RgKzsipBrLQRnefPOTk0EAQ3Y6noX7/cn9/CiKo+nwhLLrUIM2YZ0laGhqYALTC0dmkwNHSgbMLiq7THeTKNQxHT2p5qvK+vkxSFiDBP5EanIaaGoNbpUHRSwGOljxSVFbVS9WPgzaa7ZuRlfvaAurB63sTqUGydVgtOUC+W4JMDhwI8nK1DU0dFJe52mj2WpSa8O23wxekDe6uvO4vS5TOH6opKyfPGLB7MuXbJQUH4h8cQQ62Ha4d5cehG2/lrvoToJ/yvRkfkF7v2curvmeW5RJSU14hSarBYa0L72d12+BCHo50SgoOV+Eek0DQDX90ZAHVQU/v3nugxdAGFXxAUvKsZrO2X0321NeLChBoWoY85/kDJZKDA9JOYkr6R8PDw3GjFGBEtM+du5AVpYepLRQkvllViD09esHMEWPnIBBr6DP+rXuPpOBwqYZlq7iCLkx0+RQvju6iMHSBF9LPWh+QCtJiDOOk2SznApuGglNfXU1WrnMV5POoO6okBUdb5QACKYikY8seV4M477BOWJhmMpDeu9rGMTOFkBbdN/nw0ks4HsE6fVYEvnlIoK+k4EBAvUZ2ATHSsQ36nkEPaAy3EPpHYK3BIBgLDhpUiFW3+uJ6NxK9M5ZUlpSSvZ9wanGM1VZWEUVSMsdAfX6RjWjBULwgoDCPBae3tVwUcOCTJSanP7hy5UrCZ3rLobkPUt/RCXJRCOForYJmSM0lqVxJvZCdo8/CAQikr1kUPbu5uZDqXDlHwkRPIXDRxSooRqqbnmaeExUPb4aCYtXv2ixj6FZ+gaShefchEEknKiCe3bi75SB+0bxg7McNxCvSHvT1qRWjjNKx1717976JX8Avsmjnb5b/C6aBgWpFrTcXXT0SnHMLS6/iA+aFYycI74B6gCFSukbK/AmtScyFxGwLiBXpqnfp0bajp6fncZ0N/KgVEYSMHrxa8wJKLxh0+L/otaW+rWBmoomff3C4eQEZzHuQpynfx+g4vQfwYnTmtWvXQkGem2/rYF5IKX0qLz9SVdtwjJ5aNnxb/8/CqBXfoDDjdYKys+ecXARYM2SRglqRjfoanu5kV34S52SiHNOYrciwexKT0//d398vm9C0nmxqI91FIegwj8ZzzJs6BPiQd6+0fiafxDfpN8pzmGvBAT1eYbPY1ef6CtI7tY3Nh7kyE0MHaIC3DcYPS78IYSHE7sRKnwMcMF4nCnQivsYaHERrYIjRnROGEiAhjWWdMSiQZferidphGgKSLnC0HetZNttAvBD9EDqPHS+FWyN41GZ//4AMbYTnWLFpvIoAqxhEFH3A0YouQruYgmYhmBvO0apEmtkwB14u2KcsjjoYBELZQnzAQUcUsSLS+pASkzOy/qVWqxMwlFGs0ZuPYXBeaWX1eThVUj8EUhVj80l8QOIDDkQRy8ZSnbnAmmyPk33U2dVVgtFyog7XAAOVIh6Byi8WcTpYa4bw7viCg4pBFrsH5jzibbvqG4+MEhIlGIv2K/C4YbuzGLLBl3eH0he+4ExnZJ2Ca5CdX0zVzst+cGGknPo4D10ZMciWxcB0PiDxEZbgYFIZmLsDAwOxo1w3ieemLtt3sLUxYmfCw5kLrKYcSCzBQUffFGXWm5j5h1osVvO6H6NvgiOyryg+ZjHwSSyQWIKDbABmLoFzKMnULV0BVWp+b6iuazgKkKbCTmIJDgggspSM9zESbbSlC+sLIQqAhJ2E487QLlIsQGIJjv1aF87XQedEjJYz6qho7CR0C4ZOguEgVStKISCxBGeNqydibPd6enpTdaavWV3QSTAc2js6K2CCs/CT9AWJFTgofkOXqsy8gtt9fX0JdOf8ZpqpXVQRzoefBGcWEQepw0K6QGIFDqaThUXHkbKqXWeR6MRQxmmmetEv+Ovh4eEITO5C7G6OtbRBSBQ2j1d9vr8ygwk44LJTY+CDA61tdXTXuOidtjbmBX4djAfoJXlqxvtIVUi5m9AiAH0c0GwDHVFYzKObY2VHAkIjuWrsC93dGXDg9Z7/Yyp6CUfepb6+pMLSykuoGrNe4fhIMECdPH2IPF31XlPLvn0Yb8bMAZVo/vcT2PqI4CLcAY4Dn2JlUxEk2WA+YzAgEpiXL/fLb968uQBW7LRH4UL6HBwHvHVgCyGyK7SJOitgUBaPtH9uYcnQ8ROnCpFlFnXUswkde4+DLYRqPvDu0rNzX8eQPVSXmxoX/HkLW7LW/SVCfbuHGO2M4UvogGiS5rMEQMG5fY4+7DaUm4MLHpeU+gCmOeJXxqJCIaZov9aVoHce+rXBbEYcDanpKa1nBAD1RYynRLa2r0+djJAR6pO2x8m4Whl7RxfuTZby+Fq4dAXXZRcsWupk3y8oLle3tXdUo/M7nG+T9mkYx/W+De4DOjxd7O5WgjRZWFLen6LMehvnP0ozQbawW+PEdYPieySiBxt2J+bCYrIyAIlPSn0Ip7q8uuYMeuZprlxJwPRl6MtHRvlLZfnRhZqBQUfQV2jqgPrZipq6kxg8Ad0lT1M+iE5I4po+hETFcMW36Bq5OTCUoDkhqjPgKKO1QKwsmWuQB58FbBqkneFYYteiqhCDFTG/gv78qnn1DSOs/Igu3tN0MRfjDaf/7Ud3WkzPpUtp0BGwrDo6j5ZDn+0/2NaAI+rIseOlUOwYOapWqxX0sxH0c5vo51fCqUR+BjwL8wpLB9wXwGe+e/fu96EnwJdAbxsKwJMoYYdSR7NCmMN0R35tqj7nfwGivy1eWS5lPgAAAABJRU5ErkJggg==","Nav-Control-Short-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAMAAACMX59YAAABU1BMVEUAAACOjpiRkpWRkpWSkpWRkpWRkpWQkJWRkpWRkpWRkpWRkpWRkpWRkpWQkpWRk5SRkZWQkZWRk5WTk5WOjo6RkpWRkpWRkpWRkpWRkpWRkpWQkJWRkpaRkZaRkpWRkpWRkpWRkpWRkpWRk5WRkpWRkpWRkpWRkZWOjpSSk5aRkpWRkpWRk5WRkpWRk5WRkpWRkZWRkZWQkpT///+RkpUAruoiue2Q3Pas5fjFxceVlpj6+vqkpacRs+yhoqT9/v78/Pzx8fLk5OWur7Gen6H8/f7q6+u+v8D39/je3+DW19jOzs+7vL6nqKqcnaCXmJvR0dLIycq4ubu2triwsbOrq66am51+1vVo0PPo6OnCw8Wys7XS8fux5/nt7e4qvO4LsuvLzM3w+/7o+P3Y8/zH7vu56fma3/f09PROx/Ezv+4Zt+wEsOvg4OHa29yX3vY9we9ZHrf1AAAAM3RSTlMABfp2HfA8IWdV6+Cij09JQjArGArm2dLFYFo0JRP057CpmG7Xy5WADvb2vLZ8cKeJgoGIgHZSAAADoElEQVRo3u2Y2VfaQBSHQyCCCIgiitRq1bZ23+anLSFlF1BZBBG3Vu2+L///U0NJThNT7kx8as/J9wTk3C+ZO3NnbpD+aXyBYDDou2xwLHpjETry3Ep6xnX41bUl6LRyuQp0lGjA3d39i4DWKWWZTvZoZx+QH7l4ikAKKB8xC6ddYHZaNH5qCZUtdoEjDbcnBeMV9OrMQbYBWcgQDGNvk/2NDG6PCeTvBk6MeAc1TFzlCh4jl7XEvH5t+ZIvI8KdgDsoWUIOvq4fWr4WVVzhCKLYswS8WNd5b0vDNTp+RkGV/eHZQPDU8kNdRZAUpLHPKAHr4j4piGCXFmwhRQomUKUFWVWmauIW1DwtYBqmCME0NDbk6dmGzpeB4Png09mBYT5BjBCMYd+8tQPjQRqYFxEcOgWfRARTaLLffHAKDoZX9jBOCBLoG6v+4MtznfNB5Png08ahUWFNkBWp4CM9C/k2yIK8h21acIRZicKPLi3IYIWuZqh1SrBZQVwiuYcOJdg2RkCthPbHC/vBS0sl5DAvcbhm21EO9QVk2SGPMcc9KYOKraLfvrXVsnxF4jIOYyodlFT4JQH8MJ/BzpaKm5IkaGhk2QUKGZjxfNKLaG3bT5fvOch+SZjpFJDrnDKD4o4GzI5JbpifA9DqHWcyxycVABMPXHc68UgSBuFrMSKcIBDz64wvSP8zMwtXpgKXbRSvhpYnMGwUb066l0wvywDUSlNrQSe8dstVeCIC4GS7mGc6hepgISmrLp5iMgz1uGirxB6QEu5WQ0Cv6CjGCpKCreYq8Io5qZcRpk5m/o5S2MOSwCiCinl/p6GMu3zBXXTZKOoVhPgD6NfZSL5D4fWqc9hlBGWs8Q6WVoESlLBEr6cVZBhJDnFun0fSQZQ+nft5WlDCDbIIUGY0Wdyhq6DGhrz7uWHjs3lI95GgDiUzh2/O1y/ywszigojg/bqDHyKCVXMIb746BO+GV1rkEGLosSEvP2/YOPtgJlH2kd12hdFUcZ186VNQpAU7iHBapF1asI80p5qbjKKIxRlS4EviGyVoYEWieQBtk0ihKgc5At8sOmwUhSai/MYCKLHRb98CJ9wTtKujptBsNGkeov23ROYzwLgkgi8CZAqOCSxDTkuC3Jehbdn3kZ02ki4avbHrgPbq1Ex+qdYGlhOSC3yrSQD9cqNW6zZVAKm4+7/ClsMwuB4lsk+xMBkKhebjCcnDw8PDw8PDw8PDw+My/AIFurvICRtjawAAAABJRU5ErkJggg==","Nav-Control-Short-ZoomDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAYAAAC7gW9qAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKy0lEQVR42u1cCVSU1xW2adK0PdY2zWmaNumSnpw0bWqjpsY9ICpCcFfAiiCCgCiLssgism/DwCA7IyAGlB1RYiBsoiyaI9tBVhcUO1ZTjUlt2qKJ4fV+U+nRkEEGh///se875x1QYP659713373f/d5MmsTBISgYY9+6cePG5Fu3bk2h75964g2+dOnSTy9cuKBHw7avr8+Nvga2trZGN7W0KM6fPx9MP/e4ePGiPX1dQl9/AQc9CbP8bTJuFg3XhlOnEg/mFVTvTUr9iyw2/vOwKMWgX3A42x0UxkJk0SxSEfcvRULKtQMHc+uOn6jbR3/jSY4wIEc9OyGNpzf+BgwvKX2/KDou6aa3fzCzst/OFi1fy97WX8r+OEefTZ2tpx74/k96hkz/3VVsg40D8/ANYDJF/D9yC4vLe3p6fGhVvA1nTpRZf4aMN6usrsnEjLp4+jA941X/M3a0Y+7id5m9ixuTxyV+euT9Y4X0mlu6uromS9p4BDSa9a2H8gqqvP1DBhevWKe14V8f7xitYDu9/Fj6gawmWg0ely9fflGSxlNg+2F3d7eXMj2z3cndm721YPFjGz803py7kNlsc2VxycrL7e0doSqV6iVJGU9L8zu0RB1T0vd3bHJwemh/63Ks22jD9iamqnp7e73oeVMkc55TtDbPzi2o2bZz17gZPzQQSLHKaKs5NDc3PyO6A2hPTiuvqMz2oig/Y/4irYyZY2DI5i820no7ILDmFR4uwzEpqvGYAZoJDxxzC01Wa2WIMiaQfXWxmrFLNawoXU6GjX7lzFpoxCiPGOjo6AgVdStQ4JtfUHyk1HGnp1bGm5qbqw1/cGx33KLVa2zc4sgys3MaaRWsEm3vk/e9omLjb89bskyrN+/munWYA2RBu7R6DZwyQRHye23t7VGi5AeUnf2q6viJDDefPVoHMl04AMPOaScrKjl6pL+/f4YYwW9pZvbBRvNNdqI5wGTdBpa0L6OHtqKFGCvACcEPmZpYDsCpEyZXfEEZYmBtbe3TQhc7AfTwr3AsieUADJ+AEPbRmTN7aUX+SDDjr1279v2Wtjb5npAIjW8MCVFUkBfrqjnILtblPTQ+bioZ5oCbbUeH/V5P7SGWGh3Apo3g5B1eu1k1xSLaBr8UlNw42dCQ4rk7QOMb83Z3GmbkWEdsuK/G5zi4uLOjx8oKUH4L5gAUIzW1J9JGOgGKM6J15oCGkn0jngSUipTQpLwpaOV3pqkp1jcwVOMbC/Fz15kD0mKDND7H2cOblVdWZV25cuU3QiZBT1FFFgIqS3POrs+yksLYJ22l7PPOsofGQM+Hw4y8c65i2O991n6MHclUsJl6mktrT79ABrrt+vXrPxH0FKAU1EOmiPsn8nKxTgEE2sBwGevs7IygU+C7QucBpqlpmWdXmluK5gAUYLGJKVdpSzqKUQhNRfR13OEpmgNQEGXn5tfQ7OuLwfo+29HVFUpx4J62PIAuHIDlD6a5rqExWTSekJywLu1A9hlQ2UI7YJmpBUtIUfaBhBWND6Cj5znKCGXBkfK7M/UNR790LS2GOQBO0YYV8qEj+MTJeiVVgq+ITYkZZeXkH0dCos3yxfE2ZHz9YSWbPs9g1H9vbm3HEIApDm0QnRNEXQBaDJT12o2btVrGK9asZWvNzLQiUpeuNmfRexNunT17Nvjq1avPS4IZRhACXx+1N+FTw5Wm48YIL1i6HH3EgVOnTyfQ7L8mqd4ArYLfISOLiIm7vXK9lc6Nh2NDIqPvVFRWH6AkbJ5Uu0NTm1paZGheoEEyTYt9PVK8MLW0ZVhdcDAlYAsk3R88d+7cS+jc4HjcHRw+iNUwFtIEw3jNerZrTxBLUmb0tLW1h9JWe31CdIhv3rz5A8oRTDFjScr0XiQsFrZb1V3iRwU8MMxmm7Ywd19/Bi0ByA5a8tY0XphwGgGK0i/TtrA5WdeQkp2TV6tISL6+JyRczeI4uLqr21yWdtuYvbMbc/H0ZSivEeHB91fVHN9PRjtJLtiNBbQlfn5f7bEdshjMKuoICCBy8gsrIaKAngDcHm0hN+QWNH79RGqHQKaAvwOFRWM2OWYugicMVqlUP57EwfH/A7A4oLJQVEmi1z+eQOcGEZ0SmRW0711o+FE+H1nfeDrp9Edn4rq7u0Pp5170/w4ImFTl/eyJMBxqUDJsWU9Pjz+EFEiQ5HGJn4TLY78MCJOpEx10d4Ii5CwiOm4AFBeqSxyd90+EWRNGIvcg7uuG9Ds7O4MPZOfUk8F3nD182BoLa0p2TL4xOwSzBJ4PSRPYXuQEh4+WFkNvSK/1+wljPM328/SmXXDOh8sV/0ayAyGktqmwnvFKNe8PvSHyBFpJa2g1PC1p49GgONvV5Z+oTDsH5cgsA6PHLoigN/QJDB08VFBYQfHBDttKksZTgPstZXOxMQlJf/vzZnudKsbeemeJOl1W7n+vlWKDu+ScgIYpKjbsWwgXxoMQQdzYsn0HU2aonWAnuCZgJFoMsxKfvO8Savfx1An+Vybny3IKij6k7bBaEg6AUgtyGczOeBo/NBBQfYLCBlExYtuJzgcikfEPk92boUN98GgostjE5L+S851FrRrpDVhBI4zzXSjjhwa2AspqOh5nimX8C2BoQWSMlfZ6nIGkKSY+6QYSJVEcgDtAuAaDREdo4x8USYF6E4UyQ+GC3N3AZI1oDoDzMQmYDKFz/clQivmHRoqy/IcG7iCBPKXTwFbo5f8ypLK4ziKW8RhoykKpQg5wF9QB6ASVHivPf5RAwsbGijWX7WeXGwvGNDqqspi7q+OIjZNQWQzD3UNBj0NcZcOlBeutzpqjtJHJNwqitB2DfdXMdL25xufg/mFzc2sM+hGCOaC/v38OqrORTgDcAdCVVC4yULOAAloBJGOg1oQ8Af4APh93+zS9sSUmy9mXFyp14gBLy40anxMcKWeg1ATlCnBfAJ1a112+I8YAVyd71lefr9b8jWWoThexED+3ES9ORMTEDdCE7BKa+HgOy24ktagQA6wR+AdRpHIgLXG1dZ7hMtEcALnM/qxDp2gFGIuRCRrj4WZWtqI5wM17D0NZjNaa4A7o7e19BQ9HK1sM42cbGKuv3VNS5i1KSYyHgv1FPWC4ykxwB+A+MeoACsiGYhIir4OyBo8/3tdmHxJSUNyh2b9Nx5+fSqX6nqisEEQQoMG1lck9Li94/8rcHCk0OV9sbWsLlyni/47qTIgSGEJJyGQl0zaD4AH9vMBw2V18+sN4GQ/RFWIOleM++MAGqbW79dEADYqIuquLT4/4etUHUbYiPuljSPFQjkuuM3T/PrE+JOxRsfGf4QMPdEGWoCuEshuKM7TdcPxKvT/4Rlt7ezj0fWh/G602H5Ph0+cvUmd6VOx8gQ9ooD3vPGF0RAiMdDpshiIMlBXuGK63tlfrfR8V4cH5g2fwD4scTMt8r7mlpUVOr2Ui+L0gXTVMoferrq1Nh04A4gjcON3p7ade1psdnZnt9h0MH7wCJwVFyAehPM8tKC7H1Tx8PIdkVOGPExvw8VgUHwwhj2lqalHAIaUflOXlFxV/UHj4yNGy8oqDJ+vrU3EDDCuHfneOoASHwEfmFGiKkUWiq0P/nk6OeRUd5gm5zDk4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4JIn/AOeJiI1Ll4JOAAAAAElFTkSuQmCC","Nav-Control-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAMAAAAzNIUCAAABQVBMVEUAAACQkpWRkZaTk5aRkpWRkpWSkpWRkpWQkJWRkpWRkpWTk5WRkpWRkpWIiJmQkJaSkpaRkpWQkpSRkpWRkpWRkpWSkpSRkpWRkpWRkpWRkpWSkpaRk5WRkZGRkpWRkpWRk5WQkZWRk5WRk5aRk5SRkZX///+RkpWxsrTHx8kArurQ0dP9/f4iue36+vr29/fY2drd3t/4+Pjx8fLo6OmUlZj8/PyQ3Pbl5ues5fj09PSrrK7r6+zi4+Tb3N3U1NbNzc+cnZ8Rs+y3t7mgoaTu7u/k5OXa29zW1tjCw8S7vL6lpajf4OHS09WZmpyXmJvv7/Ds7e3KyszExcawsLOjpKaB1/WoqKuen6EqvO6/wMLX8vxoz/NPyPEKsuvw+/626Pl31PRq0PMZt+zO7/uj4veb3/eX3vaP2/aO2/ZkzvKuoX/yAAAAJnRSTlMAmGYM/fBd+iHZdRX26QUvt6KIgFVMHODIj0M8KgfFr2w00Kc6nNlHBgsAAAT9SURBVHja7ZxpV9pAFIbTyiII7mvVql3mRTMGAsRSwYWCoqC4r612X///D+hwIKfR6A04nlNp5/kky33IZO5cvORMtAdNd6eg+67BQ2OjEQiCzx4FOloO7xqIQpAvFk8h8I91tvbp4QhQ2c8YTGCkV7NAsL+Foxh+ChymmYO1AhDqaTa+J4pTk10jU0HkSXPxM34cxpkLo4zgUDPxnVEUOLuJA0ReeMdPjiLG2c2cY6TLUzCAI8MR8/694wE/RJ/nBESw7gg5vpz75Hi4a/lmPARjKDgC3s4JPjiemMUUHd/hR4794XVN8MrxRNzy0SkZQJZRAlbAACnog04LtvCUFIwgRwsMKzhJnQKfxWkBOwK1JCZwxOq8OpsXfK4J3swLzo4b5hiofH6BrP3RLhoHUkaAEIzbgnduwYUteEwtZFTqb/vmFhzb8zhIFTJUG1n/8fMbwWUt8rL21/y7hforJxjXCPxYpGeB74BckL1I0II0QhpFGAVaMItHdDnyWXFKwE/hURh7sU8JEvYIiEzYcZzGL9fqgVEUaeTBlH0W7IS6cKyOTTzr9izKfujOmvTW8cBEcEbzZNCHBLuRjIWw1gRhQL8p3rQcU0gbfCgnr4cvHMAZTxOIIL/CmZPlIoJhrWkmRoHi/p4dnVqtAKFxrRUCfgD5w82Dg83YKQTPJ7XWeIRKHg2qsRNRRloWzLKUuSoo7YpKeDeBjRLICbghJ0it6ImkhICv6Lq+JSEwdEFCZggJIcjICIyl5TRv8zxQAiV4EAJ7McktZ+mCIl3SpIuqZFlv9zxQAiW4H0EqF5cSrIvlnJIQLOiCZVlB6S8OQbCWXmz3PFACJVA90wPpmZJmYl31TEqgBKpnEgK+LQSmzBDWtvUNuZ5pIc7bPA+UQAnuqWfak+uZMu3fMy0JwZqMgKueSQn+EYFsyyO+nUuG7HJelxDEZQsK3xCCtMw5iJuJjGp5lEAJ7qXlMXMyAl5refZkC4op2zMtyZyDnOi5DNXyKIES3INgcc1gkv3CdlxCkNQFW7ICU2YIpuxlIr6Xjrd7HiiBEtyPgMsJdld0c0GmZ6r9pppp856ptKEuEymBEtyHwFg39/73nimty14mSi6qnkkJlOCf6JmkKxJbFoJdGQHPravLRH9fwJN3T+WD5c1sHoBVjO1nWxf0YQeCnWrVQo2+yZbCO/p9wMnsUrw2ilTpPA+MDLYQ3xMCCs4ts7x0BDzvaDZ+KIJKhl2F6zt4Ntxc/GAQZYO52K1gpCnDk2B9Bl0kswg1MYrhKDbZzSQrmPIW9CLGbmOxioDnABx7NN1sIOo1iKdYZQQnmKbjZ1A1KIGJEVowhnNGwU8xTgpCSDOSTfRT8V3Y4bTAY9f4E2QZTRx+SvAY5cZYj8/mr3D2s2GokvuVw3YW/phz8bX+ShGdpOCg/rYLt+CXvW99ghBM27N47BZ8r7+SxzC1ku2FwD/NX+NjfXoWLN8kVYpQZDQ5esdztx+LtEBHn8diXqEFh3jseQMEihSCXV63YMjQS+G5RjNAHkLK8vV4CDqi2HbFue9jQaaClbtNsI9ol+bJS+R3b6uIviHNm+5e5HM3pwDCzX2z9sJyZ0OyDN+A1hzdL4Hs1dLGN/KIBLSmCUSBWMn4s+n7CBid0Fqga8wPWCfl/dXV2UIRQKjlf1E6pkeDaOCfIs4+5Xgx3d/fPxCY0BQ0vwHPu0gIqkZhFgAAAABJRU5ErkJggg==","Nav-Control-ZoomDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAYAAAAE6nUwAAAACXBIWXMAAAsTAAALEwEAmpwYAAARa0lEQVR42u2dCVSUV5aA7aSTzPSkM93T08uZ7unumT7dMx2XoBGICLLIvopsgqCCLIIIsu87xU5R7CAgJcVmAYJoNG4BDS4DQUQlKC7gcjRHxvRJ0tNJZzreufcPZYOkbHGwCnjvP+edQln+/37vvvvuve/d9y9axC9+qfQCgO88ePDg9YcPH76BX7+04AW+efPmT69du6aPbeuNGzdC8TP5/PnzeX39/eKRkZFU/H749evXffHTBD//lQAthF5+GYXTxhbcc+ZMSX2z/LiktOJ2dkHR56Ic8aP41AyISxFBWnYeZIkL/0dcXH5PWt906v3uU7vwdyIQhBGCem1eCo8PvpgEb+880JpXWDoenZgKm3y3w1obB9AyMINlqwxg6Tv6QqOvV+qbgoHlOnDz8oPw2CTIFhd91tTSdnh4eDgGtUKLYM6XXn8FhXc+evxELfVoUEQM6FuseyzsszYdY0vwDQqF3MKSTzoOHGzBv+k9NDT0+pwWngwa9vq2hmb5sejEtEfGto4zFvzJtsbcFkKi4qFaWteH2hA+Ojr6szkpPBq2f/zoo4+iKqtrBwPDouFtPeP/t/CK9paOIXgFBENhWeXo4OCl9Dt37vx8TgmPqvkqqqh/efXuS5v9AqeM79lsju5eICmpuHPlypUovN8bc2Y+R2vtImuSnwgIiXxhwisaGVLSMhxqfh9++OErageAY1Lj8JGjsii08it0185ImFVGpqBrbD7j4UCGtbll3yGaJtUqPPUA9kQ4TXOGVvYzEqQyPxm+vn4c4OYJaK3ORcGeXXO0Dc0B/YgvLl26lK7WoYCGT1fe1tHpHxIxI+GdXFwEwSe37f7eM/ob7t7+UCtrPI1asE5tYx/pR+UUFH262sR6Rg8fGrxtGoDslMgZ/Q2aZVIyc/8yMDiYoxb/AL2zXx17v7smNCZhxoZsNgBQ8wkMgdb2/R1jY2Mr1GH8zGpl9addNvuoDYCVoxuU7qoZxqG4UR0aEEjGjzw1dQGgWUeUK/4KPcTkrq6u76o62EnCm39N05K6AFCLSUqDc729EtTIH6hM+Hv37n2vf2AgNyEtU+mDkUOUkxIFQyfq4fqp5int4772aQDGB/ZP+7nhrgaoyEsCjadA3hkVB8fRFuEw+KVKkxsne3rKI+KSlD5YdFjgNCGftxVkxCq9j19QGOw/eEhO4bfKAFAwcqKru+ppM0BbTd6sAehp3/XUmQBdkXbslLdUGvn19vUVxCanK32wtPiwWQNQVZCi9D47wqPh8NFjdbdu3fp3VTpBL2FElkapLOU+uwHUlYrgvwc64fPLh6a0L4bfmybkl1ePTPu5PwwehI5aMWjqKw+tI+KTgdJt9+/f/7FKZwF0QcOzxYV/JL9cXbMAGdrkjGy4fPlyJs4Cf6dqP8Cpoqr2op2Lh9oAUABWUFJ+F4ekvzoCoaVkff13RqgNAAVEsqa9J7D3DdSR9X3t0tBQOtqBv8w0DzAbAEj9KdN8qud0mdryhAjBsUoq66VUtqoBWDtthOLyyhuUhFVbPgCnnh+iR5idmpX7Z00D02dXXY+N0wAQlJlkhWJwCu4++UElRoL/pu6UmHld4973ySGZifrS9KYQ/oN9lbB8tdEz/77LFh8gA4x2yE3tOUGKCygtRilrB3fPGamx7XoHcHB2nlEi1czeBfIkxQ8vXryYevfu3R/NicwwGSHK1+dIij8xtXN6YRlhPTMbWkf84szZs8XY+7+bU2sDqAW/J48sM7/wU7sNm2ZdeAKblpX35ZGjx6XohK2eq6tDS/v6+7Np8YIWSDRmMK6fZi+cPLYCaRcBRgdMb06vD169evXntHJD02NcasYj0obnSZpQs1i/ASITUqC0smZ4YGAwHYfaf86LFeLx8fHvo4/gRD1WXr17jByWjVu3CavEf8vgUYbZebM3hMUmQklF1Wfvd51sRpXfgu0n826PAFrpX6DKFr773pH7ktIKWsyAhLQMIYvjFxwmLHN5+ASA745QCIqIBQqv6Weo1UhlcLa39zwKbr9oPl9oF6wb5a19tBuE1FkhoLJGEMh+0GfHgXdb8fdXznsAtILjtvUbT0/byByMrNaDpaMrkN9ABo7cWto5omNs9XgobA+NAtoYseAAPGvjADgADmBhA1iivQaWaOnBYmz0Sf9mBgAJS6s9BmbWYGK1DnSNLWApAZkEYcECICEXa+qC+xZvqKupgc6WFiiWFIKxpZ2gCUwAWK5jAPVSqSD8gdZWoSUlJsOyie8veAB6qPJ76+unACjIzQeNVYwAIFUngVsbGqFDLoe9snrYFrADv79m4QOgRpZf39QaEhKSQJwnhuCdYbB8tSEbNuCxIURh31y5WmhkFCcLz4wjtGRi6nvSB+CeIAfAAXAAHAAHwAFwANwRYsEVXqKlO/HJkCu8GIU2tbaHzIwsqCgphZjoONDUWytAYSIhsgzD3iJJEexrbhZyAi2NjRAUFMJ2QkSSx1BChFJiddU1UwDExSbAW6wAIBvg5OoB5Tj+m2UyyEJbQAkSphIi1Nu6xpZgYGYDOkbm+H96bKTFp/kA37Iowj1BDoAD4AA4AA6AA+AAOIAF7QnS9hhNXSEuWMzcFhkUeJWhGXhs8QbfbYHgiIHR5FCYif0BoWGR0LinDvbL5VBTUQmOG9yFfUJMANDSNxaEn5wPEKWJ2MkHaBuYIoA9UwBkpGewA4CGQFRULMh210JbUxNU4xDY4L6FjSGg2CJDRnCr33YIDgkHVw9P7H0DdhIij3eJ0jQ4MRUyNQ1yR4gD4AA4AA6AA+AAOABeMzRpaYy5miHaDPEOxgNUL6S1xpidxVES8k3N1eC8cTNIq6qFkFiSXwAGplbs1AxpUM1Q7dSaocT4JHbyAXomltO3yOSLWaoZ0oUSSSG0NTfDfoTQ2tgIO1jZJKXYJmdgbgPpaSIoKy6BiPAoWMFuzZCOYBR5zRD3BDkADoAD4AA4AA6AA+COEGOuMK0NMucKUzBEh6akJKcJyZAwDIZW6hqxUzO0VFsP8nPzhb0BlBOgIzT8twdNOUpnQQPQXWsBctnUhIg4N4+hmiGM/WU1u6cASIhLZKhmCA2f2yYvqCwrF2qG8rJz2TlIaXLlGAltbucA+mbW7BylxQ9T454gB8ABcAAcAAfAAXAAvGaI1wzxmiFeM8RrhnjNEK8Z4jVDvGaIe4IcAAfAAXAAHAAHwOprdpg8TY6EpvhfZ6JkZiWVzGgxVDJDQc8mL19okO6Bjr17hRMlVxmaMrJDRAiETIUiCUUo3N7cDOERUd/sFVr44bCecKbw5FwAZYWyRJnfHLC84AGgBtCGqOryCqHnSfimujrw9gsQIkM2coITWpCdmQ0lRcXCocpMbZBQHK2rKJnhr9nhJTPcFeYAOAAOgAPgADgAVh0h5gA8WTLDlCusCIYs7BxAlJYBBXn5wuEJGhORIhMAVuqthdKiksfhMJ0n4um9jZ1wmOoESHBFQoTSYrRDhJmECCVD5fX1U1Ni4ZGspMS+edOUl7cf1OyqEkpmMrD315hYsZEUVWjB26uNhDfPm9s6CMfqMJMW/9aSGZ4Q4a4wB8ABcAAcAAfAAXAA+gzuFWayZEZbT9gas3mrH/hs2w72Tm7srA4rzg6IjY0XQmLKC5QXl4DtehdBG5gAQKEvvXR5ckIkIT6RkYQICmhgZi1UikwGQMfqMgOAzhVOSkgW6oZosxQNAXtnNzaGwF+NoCX4BeyAoJ1h4Oy6ia33Dk8vmeFniHBPkAPgADgADoAD4AA4AHZfs8NcRojOFV2BQRFtlqCDE56sIF/wh6rSmQENUqkQCtPpEZoIYgkrNUN0hMaTNUNhYZHs1AyZ2a6fVjNE1SPMbJEhda+rrhEEp9bS0ADbAnYwVDOEECxsHUAiLoDqyl0QFhohbJth7DU7ukK90O/5a3Z4zRB3hTkADoAD4AA4AA6A1wzxmiFeM8RrhnjNEK8Z4jVDvGaI1wxxT5AD4AA4AA6AA+AAOAAOYOG/ZkdLV6k3uOAzQjpG5uDivgXcPX3Ayt4JlmkzdKwuFUxERETDXowEKS9QXFgkLJczUzNE0d+TNUPxsQnslMwYmttMA5CclMIOAHrxsig1XUiGUPHUrrJycHL1YKhmCK2+vqm1UC8UGRkjvISZuWN1FTVDlAdk9jU7zK4McU+QA+AAHrcVumvhLR1DNgDomdmAq6cvBEfGQnRiKqRk5oIoRyy0xPQsiIhPhoCQSFjnugl2RsUtDACjo6PrOg++e6mofNdjYSe3ZFE2pGblTvv/PQ1NcPrMub6bN286zkvBAeA7Y2Njy0dGRnY3yds+ycqXQFRCCnj4BICxrSOsWmsJGquNHqv822tMQNfUBqyc3MAnMETQiJLK6j92dZ/sRC3wvHbt2i/mjfAff/zxP+BDex04dLhJXFz2qV9QmCDcTIwg2QVzexdhWJRWVl85c/ZsMf5NYwI711X+Z8PDw+HV0rq+kOh40LdYNyPBn2zLVhmArYs7JIqyv9p/8JAcIbiiNrw2Vw3eLwcHL6UXllWOegUEf6t1f972jpGFoA11DU3dCMB/zkHAnv/B0NBQrLi4/J6ju9esCT5lytQzhsCwaJDWN51C2BvnzHBAwV/FHgkoq9p9mYzcixBe0Zaj3xARlwTtnQda8Z6mc6X3zRua5cfIeaEx+yIBUNM2Moek9Kz/PXmqpxzv/Wu1Cn/nzp1/6h8YyE7NzP1qpb7pCxde0Wi6LC6vvHH9+nVftQ4FVEPnKqmsd8MWX5UJr5gdwmIT4fDRY3VoD5aqrff7+vvF6LR8TWNTlQComdo5QUFJ+V0E4K8WAKh+Ok0tbYc3+wWqXHhFi0sRwbneXgl1hjrmfS+a802wJ9QFwNN/B1AnUGeoWv3//sKFi9kpGTmPZtPheZ5hQJ2AALaoFMDt27f/5URXd1VoTILahKemZWAG2QVFn6MxDlUpAAxT/6Pz3UPN/iERSh9OAzWjMj8Zrp1qgtHT8udqV7sboSAjFt1qA6VBU0ZuwSMEkKzS6ZASFfK2fQdpDCoDkJ8eA3DzxKy0hKhgpfdJSMuED8+fz0OP9HWVzgCNe1uOPs317W6rmDUAnXsKlN4nJikNzp7rLVTpTEDOR1vHgX2+O0KVPlhZbuKsAchIDFd6H0qtDQ0Pi3AIvKJK///X7x07vicoIlbpg1FdgLwqB8bP74c/DB58rvagvwOkxemCPVGWVM3MK/gzdki0So3g3bt3f9Rz5kwJJTfVOQtQpimvsHQcjeB2lef8RkZGInMKij6jZIW6ADi4ewLFIjgr2ajcE6SbUupr/UZPtQGgITgREP1WHa7wbw8fOSp7mh14kY3Cbxz/X6ImxqNGvqyO1PfLePPw/KLSB0ZW61UOgKZgqazxA7Wo/6TZQIPS3yFR8SoVnrJCGbniPw0ODqaPj49/X60LIJSllZRW3LZydFMZAL/gMCBHDB0yQ7XnBFEFf3XmXK9ElCP+0xpz2xcuvJPHViEddvXq1RDsgFfnRGIUbYH2kaPHpXEpoq81X2Bu0MzeBfIkxQ8vXLiQev/+/R/PqbUBMkat7fs7CAKtBM+28OtcN0NmfuGnE8tkv5uLC6Ivo1G0IxeZhoOlo+usCE4hL6XdJCUVd/r6+7MR9LI5vT44Nja26uzZ/yqihGVQRAzoW9g9d+bXxtkdYlNEj8jhGh4ejkYXfH6sEuPM8Bu0C0G0ySG3sOQTSpyQMLQM/rcE1zGxEgwdrQUWV1SPnOo5XUaLog8fPnxjvu0ReAkfXBOtdTSt7FZWSwcz8iRf0Kqxb1AobPLdDs6btgKtKVBihSBRcEVGrlZWf5pSbjjN+dAss2g+X7R2eOvWrcWoFY5XrlyJP97VVU1AKJtbK2voqWts6pbvaz9w8PB7jRRh4s/txGZGgs/5/QDPYyhptwe2N9FgaqOQJuTMYHubYot79+798yJ+8Ytf/FLx9X/oSgR4DSFppwAAAABJRU5ErkJggg==","Slider.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYBAMAAAB+X3LOAAAAIVBMVEUAAACRk5aRkZSSk5OWlpaSkpL5+v+RkpW7vMC1tbmhoqXGrO6IAAAABnRSTlMAaFgoEQ5LYgUfAAAANElEQVQoz2PADpgFMYADAwNjOQYwAIl2oAGwaEUaGlg+3EXLZ6KBcgNcYcashAECGAYDAADj/n4pps+kzwAAAABJRU5ErkJggg==","SliderDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYCAMAAAC7r5/PAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPFBMVEUAAADb29vf39/j4+PZ2dnn5+fc3Nzd3d3T1dXS0tLHyMrGx8fDxcews7Sqrq8tOD9iaW5mbnJ3fYGFio5wqsUhAAAAD3RSTlMABwgSFBUsNIaIkZOVq7P8Vew3AAAARElEQVQ4y2NgIAGwshMBmMBK2Xn4CAJOFohSPmEBAkCYG6ZUgJ8AEBpVOiSVCgsSAPA0wMVLEHBAlDKzEQEYGUYBAwMAUkYiCd2NGyEAAAAASUVORK5CYII=","TBFit.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh4eHh2dnZ9fX14eHh4eHh4eHh4eHh4eHh4eHhwcHB4eHhwcHB4eHh4eHhycnJ4eHh3d3dxcXF4eHh3d3d3d3d3d3dubm5xcXF5eXl4eHhxcXE+JRc1AAAAHHRSTlMA9qd7GAewklkjEvLn28fArJqNbWZkUi9QOjlR6dZl8gAAAVBJREFUSMfFVtuWgyAMXC4V1LZar90t/P9vbozIulVq56l58sBMyCSQ+PURO422Vaq14+kddGFr4YKJ2hYH8FwGdOTI/JV3M6MulWwaWV1mikmeMpTTftbrZUH32XRgOezjFbsL6MgxE0XtpUbSRpbvyMpoQ24TNuFV+mi5syjuKXF3sXE2kBPCp+xB2/+UF2V0kYyqXGfXkN7XFSXlZpUIEpAsaIS4P4ic6AdmVpkqhBM6VOP2DLyFCmgCLSpsVKCv/pngrzqqsGGtdq7nj5+z3xL8+Zs/eufqEAaVhb103u8QyDo+nTIzhzfSfebwfYrgWQjd9nGRUHH4aQILqRYRLSWMw08bC6Hkt0vZm84fWtc4p2ACHBIsGk4rXDj0asCXD77e6ANCnihD0CYAtxm0kQGt8hFbJd6M8XZ/PFAcmUJHFjoUwbELDnbw1+ET9gtaEjv2MjNk4gAAAABJRU5ErkJggg==","TBFitDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAulBMVEUAAAC/v7/V1dXb29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/g4ODi4uLf39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2trb29vc3Nze3t7a2tre3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nzc3Nzc3Nzc3Nzd3d3b29ve3t7c3Nzc3Nzd3d3e3t7c3Nze3t7c3Nzd3d3d3d3d3d3d3d3d3d1gGo1GAAAAPXRSTlMABAYHCAoLDA0REhcYGRooKSkrLC0xMjI2Nzk6PT5GSEhJSlJTVFVWVlhfYGZnbXh5ent9f5maxsfm5/n6D5blOgAAAb9JREFUSMfFVmtXgkAQxQwNtTBB00IUwRRfBIz2cv//32pYFnzAAtvpnObTnnk5j8tcJek/pNbRRoYx0jq1Kt63+jIAJv5Cr5e4t+YhXEg4bxW4y1bsvls5pumsdnHIVOb5dz20B26/mSiaAzcqz+vm+4+jdFbjUtmgP2rkjcZBg6tkDYqLBjs7MIeTCMWIInKUvsprTvUzyR4xicofn4rmi87lN2496UC88+la2G/xRrHz6dl+QwiV4gAFXU47nwNYZRibATgp3kII2L5uDteOBwa/RgBhgkQ97eD+nVwHkI+HtAud6ZYAffp4/iTZAPL1Qh8DgAUDBQKM4m3zTfICyHFLkYirjQHSQTzT8gnJDyCENoJob1OVBrCi5fMDaCNrgB5VjaKBReUXCTaC8BwmuDNp+YVy3JoJfCoGbNIA4ZKEm07Guq861vLFbaLHXbo4YWiIg+8c3vsq8Bb+gKp+osrvj4Ake4JnRuoKHjLxUylJNiYZ83nAzp57W/Dcx1c9SyizkM8DjLIGJ8p6KqQsnO6UkeI6IsU1I8WJXES7zjXtOiUQkOr6wk+J/VUrI/Z4YO3e0DCGvXalvw5/Lj8BQYMv73vyEQAAAABJRU5ErkJggg==","TBNext.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh1dXV4eHh5eXl3d3d4eHh0dHR4eHh7e3t0dHR4eHh4eHhxcXF4eHhxcXF4eHhycnJvb294eHh3d3dwcHB3d3d1dXV4eHh3d3d5eXl4eHhxcXGK2btVAAAAHHRSTlMA9pEkpgZ7sGxZGBOq8u/b2sC8lWRSRC8PfFBRuUo9rwAAAWBJREFUSMfFVll2gzAMxAvGZklKA4Ek9v2vWVEQslna6vUj8zXBM44lC4nsLcgHZ42xbsj/oh5dLfwCUbvxF7lCNXnUD/JKzqprq6XU7XW2yOpM3zfTetGV+KDsiukPm/5Y//jeDtXokZPFHKVGw0KhDsIqYEHvE6Zpoy3M5Dh4KJ7ZCZ5it1kPm5B+hxcsJ5FXzbqFzRA2TUgTZ1dCvAsN94wYASKXUSIgAIWyS8pI4ulnHdlD+KhihpBRpkbhRUmG8JkToxsEEVaiowhABrgRS6JwdKIuMQQbMUTnfT2zXHhfpoZwJ7aeCTIzn3CAes42houK2AKo9gFDaLcGSFDEZrQYhKWEkQESRGwtT4t1J/eGcCO23oRhG9hHYgfNTiv74rilwS4+dnlzXyDmKyoUtwmw2wy3kTFa5YtaZdqMH+dzQPPb/R7meKB4gOGOrH8PRYLS27GrFXOwMz8d3oEvPJs941PvdQ4AAAAASUVORK5CYII=","TBNextDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq1BMVEUAAAC/v7/MzMzb29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/e3t7f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2trd3d3e3t7e3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nze3t7c3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d3d3d3d3d3d3d3d3d3d3d09lSx4AAAAOHRSTlMABAUHCAoLDA0REhcYJygpKSssLTEyMjY3PT5ERUZISElKUlNUVVZWWF9ga214eXp7fX+VvNrv/MIr9REAAAHNSURBVEjHxVZrc4IwEMRatKjFClrFlopgFR8UOPvg//+yHgkQkoCamc70Pu0kd5HbbG7VtP+IzshaOM7CGnVuyb63dwkUEW/t7pX0wSYFLtLN4EK67tH00z5w3WB/oiUrvS1/HOF+Ek775UJ/FuafF42b85f5cV6PX+yRH3WaqAlwIzTkDSPEDV8mLGg5CMPJKxoWY7OtOTOWDnvCQ8x2+kzc5jrXP6ojjtXikSckqrPrYb8F/HnVJISBna9q95tCWvKTfT9KKOcKU9idbwC8EmfZ10BEeawBgkpvKSQ9VpB93gmI3GACaalEm3VA0rKzgMou7ALuAKZcQXbkEYkZwLYQBQqszxcQghiiSsSrpQIZoZ41voAQxBANVPuQAAtgLxbkBDFE4wAwIWBRI6wqQIIYquQ5L3XnygXZmSG645byUS5Q/qTmpo0aEppWprXp4l44ROKhujhlaaiLT1ne4gMyRCQ+oFufqNE8BCpaGJKGgKZHimNGGysOMvVRqWk+HrJs9wFfHve+4rinU102lHXa7gOFZc2YZT1ftCxkd1WY4iE3xUNhim/6JdsNRNsNjCtO3bW3cWXs79Y1Y6eEDSdzx5lPhjf9dfjz+AXdIn+vwb0h4QAAAABJRU5ErkJggg==","TBPause.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh3d3d4eHh7e3t5eXmBgYF4eHh4eHh4eHh3d3d4eHh3d3d5eXl1dXV4eHh4eHh4eHhxcXF4eHj1iuhDAAAAF3RSTlMA+ad78rBZUSMYkgjArI1tZC8UD9valLlU9lYAAAEtSURBVEjHxJXbkoQgDERJuCiOd9fd/v8v3R01W9SMgnmaPFnQB+gQovlIPKYwWDuE6XFHvYSOcITrwlKQ10xAGsR1Rj43u3xtue+5XXekma/0lXvO+zHKQBw9AXDVud5uy4lamG1Te5YaBuDrE1seAL8n7Km311vzyaCrcubsyxCAF312ev5f4mcLk37LAdLsNoA3OcB4oEkSQaA6B4hEggW/Bsx3kqnlj44lIBJIKjGIgytAXITjswPGMjAC3VEUBMQyEAG3F8gErKYMmC9gEgvtHaAVEwPAdwAGBrn2/g7QA1YNqI+kNq1Oq/ritKWhLj51eWsfkPqJapuAus3oG5m+Veqbsb7dl38ovxODVyiUV1mISlEEUimKwCpFCqtdzIqdBbliJ7npQH8AADUuN1z9SxsaAAAAAElFTkSuQmCC","TBPauseDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjVBMVEUAAAC/v7/b29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2tre3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nzc3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d1l6ZQlAAAALnRSTlMABAcICgsMDRESFxgoKSkrLC0xMjI2Nz0+RkhISUpSU1RVVlZYX2BteHl6e31/MGPHHQAAAYVJREFUSMfFlllzgkAQhMcEDF5RNIpEZI3iEdiP///z8sDhgRybSlXmaWuZ3mJ6eqdX5D+iN5qtPG81G/W6ZL+6h4Q84r370pI+2GnuQu8GDelWkKWfj8r31fGcQTZWXf7kAiTRvF9s9BdRAlwmz/PXgA7s+0070ID3jBoFRE71gxMBYZUwVXOQiHhA+GQzHtcVN44rh70D43r6xsBd5dZ3cUSapmmayuN6DZdbdgOIpAkgEWxu+qvRTjPA0ehrz3cQSDNAtqBKvWkSuw1gJ+hCiW5ZQQNAInDz5QHm7YAF7HNRJNBvB/QhzgQygrO0A+QMQxERmcGxC+AEUxERWd0Q1gRQsCx053cB+IV8jAHGv2RctDGtHRv3VjbOWBrm4jOWt/EF6npFnd8PAbEuhmNGJoaDzHxUioTAut4Hwuq4Dw3HfTbVq4ay1fU+kFvW4mpZH42WJWJtclM8Kd9Xp9wUP60m21WPtqucFqd+cfdxaexfszZjzwgbTpeet5wOOz0d/jx+AIW/dO9/0oYGAAAAAElFTkSuQmCC","TBPlay.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh4eHiBgYF4eHh0dHR4eHh4eHh4eHh3d3d4eHh3d3d4eHh3d3dxcXFxcXFxcXFxcXFxcXFwcHBwcHBwcHBycnJzc3N0dHRxcXF4eHhzyzi7AAAAHnRSTlMA9ad7F69ZIwiPEJPbwG1kUlAv7+HQu6OMdFxGMR+YuEezAAABRUlEQVRIx8VW2baDIAyUXaQu9e6b/v9f3rGWggJtc/rQPHlgBpghJFZPiXrUnRCdHut70I1WbD4HU7q5ATfcoz2Hmytw6VbUoeXW8vawUqws4Qd2OkZ/AchenYaGPF4sc07uN10oImcNx4QyGVkKEzw1bMGL8tY8M8iOJXFHliw2YBHgiwxMb5TLsMT7b+FULLbDQe/5c5o+/jIMKLeREeAbT0B8pgkByGxih1wVEaaXr8RGFznVsOiA0xqv3/u0AchvrIMCEHy8/SQqdPjsEwJia1h/WbaGpzJH2Bom4cyqbEQ+VznCzjBk++gltCVCbFjrRXQwrEwIhsH8zl+7LROCYRbpQyaQj0QWTbaVfHHU1CAnHzm9qQ+I9kQBoRYBepmhFzJ6qaQXY3q5v91QZoR4uGV5gCU1RXrbTRs71w3x1+EZ8Q9bFUNUrCre7AAAAABJRU5ErkJggg==","TBPlayDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw1BMVEUAAAD///+/v7/b29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/e3t7f39/a2trg4ODh4eHc3Nzd3d3b29vg4ODb29vg4ODe3t7a2tre3t7a2tre3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nze3t7e3t7c3Nzc3Nzc3Nze3t7c3Nzd3d3b29ve3t7c3Nzc3Nzd3d3c3Nzc3Nzc3Nzd3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3dBMNPAAAAQHRSTlMAAgQHCAoLDA0REhcYHygpKSssLTExMjI2Nz0+RkhISUpSU1RVVlZYXF1fYG10dXh5ent9f4uMoqO6u9Dh7/n+1QUKvQAAAc1JREFUSMfFVttSwjAUPAoFCwhCFaFWSoNQBRTbrPdb/v+rfOidJC2dccY8ddKzmZ49m90S/cc67o2mtj0d9Y4PqW5aqxDxCpZWo6K8s+AoLL7olJQbblS+XTPHYettBJkZuvrBDkDoX7STjfbYDwHsBur6KwDcbRU3Wy4HYKuoYQB8U35h+gA8mTCmOYiIbACeYjPo65rrB9JhZwD6evr6AAqdG4/pEe/nGkJ2eXZdwI8fhXg9VSB8YJabLwc3U4D4fpana3LwbHcBuJQBhPh6aO4j5gBL9cYRtgoAIT7vjvYmGIInSrSyDlKAEB+O1IUVP66ACxkgRJGwMbCMRRECbRWgSFgbCCKB9IAtqQEFwrZAl4iIRsBaB8gTtgGGREQ0zREmAzLCGDBJdOeUARLCnEQ+tQGVn3S790kVTd9LTZfS+qSgVT+4n5fc4E7SwWml8aaRRn3xKeV9WyJvxQW6L71A0hV9Ul9RU20CBWo0JkDGLrWZt4NshgY1jay+VRJ5AK70OeDJdu/VtPvI1eVAmXN9DsSRNc4i67I0soiMWRyKG+Y4bBOH4rVRFrtsP3aZWZHUDWsZpMF+M6oK9oiw7nBi25Nh96Bfhz9fv/lTjqtf/HEhAAAAAElFTkSuQmCC","TBPlayExtend.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh3d3d4eHh8fHx1dXVycnJ4eHh5eXl4eHh4eHh4eHh4eHh4eHh4eHh4eHhxcXFxcXFycnJvb292dnZ4eHhvb29vb29ycnJxcXF4eHh7Kc98AAAAHnRSTlMA9qd7F7CSUSMHbRD1WPLbwKyNZFrv2ryVMC8nRUR/XsosAAABT0lEQVRIx8VWV3bEIAxcinsvKXayzP1vGROw2WQBW1+rLz+YwdJISNxeYsXSlEKUzVJcQVfzwGCtHubqBJ5zhj/GeB6By9Sgup6PI+87Q0llCJ+1ej+ZDoCcEgagzfx44TtOppoifNJwAEnuCSsBwJ8F03gR/jX3LNZZMLj66bAMgAcf3JZtwJ/SOdA+ypECifdo9W0/EiB9EAJgud7e7B/h7euAwEnINd1PUO/V7oRTqmJgMkRQH4UJcwPtlTjrCIIE9XlEMdvVAZgiBGWkmoDBFgUDZIxgpJJAbbxbgO4WI1ipOmD9XWyAPkqwUvVAY7J5CKb8ZqXiQLmnfYwSrFQjIMgEskvkoMmyXkzc3SWOXhr04qOXN/0CnV9RBzlvAndPEyC0GXIjo7dKejOmt/vzgYLNBHVkUYciceyeD/baDfamuvR0WM3TYS1ur7AfgEVDcxHQFLwAAAAASUVORK5CYII=",
"TBPlayExtendDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq1BMVEUAAAC/v7/MzMzb29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/e3t7f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2trd3d3e3t7e3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nze3t7c3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d3d3d3d3d3d3d3d3d3d3d09lSx4AAAAOHRSTlMABAUHCAoLDA0REhcYJygpKSssLTEyMjY3PT5ERUZISElKUlNUVVZWWF9ga214eXp7fX+VvNrv/MIr9REAAAG0SURBVEjHxVZ/c4IwDK1zyFCHE3SKjoHgFJ0MyH7x/T/ZUltQBi30bnfLX1yaxOblNU9C/sN6Y2vpOEtr3OsSfWvvU+CW7Ox+S/hwm0HFsu1QEq75LPx0CF03PJxYiqeJ4icxnqfRTC8c+jyi14snzfErWs4fVJ2D8486TdCEeBAZ9QMjwoOgDlgoKITm0IwGZ2KKmjOTWrEHLGKK4TPxuNK59ia4z+sFkPgaXR/7bSz9/cQ/sHPvar4ZZBSfHK2akH/dc6ww5DLzLYBPmhPyTx62AQhLvmWQDkQJ+ccNm2AKWcFEu+igMSF/L7uwuXcPMJMk5AyqOcCOkwIJpssSGFQ6jpYRZIx8JrIEDhWyfXR2WgAHeQKD6ggwPTuXJWC50ChUSM9FwTu3LYFC5Rb0UU5QvlKXpo3rppVhbR/cmn7elYNTpoY6+ZTpLX9ARv0BdX2iRpclsG5cAkSLFdcMmSguMvVVSUiARVZiHQjq6z5QXPdsq9cFZZOJdYBL1vwiWY9SyUJ0PS6KRyqKRy6Kz5pMdsPfshsaLUrdt3dJKewvVpuwM8BG04XjLKajTn8d/tx+AP42ge+igiOUAAAAAElFTkSuQmCC","TBPrev.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAXVBMVEUAAAB4eHh4eHh4eHiBgYF3d3d4eHh4eHh3d3d4eHh6enpvb294eHhxcXF4eHhxcXF4eHh4eHhvb293d3dxcXF4eHhycnJ3d3dzc3N6enp4eHhycnJxcXF4eHhxcXFnXdd7AAAAHXRSTlMA9qeRCHuwWVEjFhDy79vZwKyVbWtkRC8mGXy8u51RKiIAAAFZSURBVEjHxVbbVoQwDLQt5S6CiMjq9P8/07JQkh6KGl92nmbptKczGxKeHoJsLkZrx2LO/qJuikFhhxqK5hd5pRUiKF39IK/Npup6bYzuu22Lqa/0Zbuu59MSHixTrgC0ZVp/Sx1Xm3WLTUWj/UJeJWzlfkGfA9P8oBh23ZF4qMpLc+p0WAkgrU8v1218xBuxI5CWx2G8X/bz3Z2Yd25YEN4Ay+fj2REjCUiio+3Ni3PE2CX0oVBQdMHs0zlH7LDpRaESi8jBq/PgjFwUOx2AiWJxKxgLmIBhv4MCForlDsYCFkBtBTIDHQvoDsYOdMAcLPQU0AbGDvTBxAhoCmgDsag8x1B3JgQUQCwqB/uvDfxKX0FGLL6S3LQ8VvkfJy8NefFReVNUxKLylr5AgleUJOImIG8z8kYmb5XUjG/Xc0DL2/0ZNj1Q4GGlI0s6FIVjVzjYhZ8Oj8A3c5hAJhDkPcoAAAAASUVORK5CYII=","TBPrevDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq1BMVEUAAAC/v7/b29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/d3d3f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2trd3d3e3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nze3t7c3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d18+0n7AAAAOHRSTlMABAcICgsMDRESFxgmKCkpKywtMTIyNjc9PkRGSEhJSlJTVFVWVlhfYGtteHl6e31/lbu82e7v+w/WaQ8AAAHNSURBVEjHxVbRcoIwEDxbtKjVKlrFUpFYRauFbLW2+f8v6wOBBCJqZjrTe1rCJpNslluI/qMa3eHU96fDbuMW9r23TiErWXl3V+jtJUep+LJ9ge6EGX23YUHANrtsytyp4/f3ANJ41MoHWuM4BbDvn+fPAPCwWR5shhyAf04aBiB2zRduDCAyBWM1CxGRDyA6M5j06g7XS4zFngD06uXrASid3PkoL/FeRTNgr6sbArH2+PJjoBiYa/fLwTV9Hr+FgVwOru58CYSajl9CVBHRAmCF3zhSdV+No5A0hYiomYLnTvRKJ/gUOU0heQpPwjUwUrKInKYQERGNgZXcQwq0lCw5TSHpRCDJDNIFdppAkqZQXjugQ0REQ2CjCZTRFCpqCwyIiGhaCNY4SpZQqGTPSe67QBNICCGEQmpCkNvHeoK2pUOxpcOFLVkfuiTrqZD1VCvrjRf3UFyctTXszVex96Gw96HG3tYfkPGJnoSB3DLFtgmQs7dsM9S3bGT2rZIoAjCrz4HIbPeRZbvPuroZKAtenwMyssYqsp4vRhaRM5ehuGVBwLYyFF+dS7HLqrHL3CtJfeetkiLY34bXgj0TrDOY+P5k0Lnp1+HP6xcYMnv/MeSLLQAAAABJRU5ErkJggg==","TBZoomIn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACWUlEQVRYw+VYwU7CQBAtN2960BA8gnf8FMSDiEfxiDEx7CyLB3+ARMBfgJoICX4Bfod8BSZyKAccZltoS9ttS0tM7CZNWbpvdmffvJ2ppv2T6/mgcQ4Vdg8CBN4rjfPng4SgH47YDYxgDktX+4EhVOFwJ3B+xt7A2IK2N4O98bNY4M0T6MLCBvUFEzaANrTxPsFfNiO80zyJCM/KMDOHz2HMbkXO/YbI8RqM166bsXJ49Aw8WXODrsgGvSqyvGc5kbW0TCi+oAsk/JjnQ+1UHlciR/TV3MpY8CHnY41qWSYUo8wXf1gpKilYCYkrJxaw2Etz9qVYpL4wR5f9ifkdPIeHpWx+/5vkmPmQFnlPW+vvRZUB5B9tN+94Ri2FlRHEHKUBrVEglIVHdKMorGz3AnVJaQD98Ep+0LckjcJlHhxWYQyILEW34ZJBVEzpf21XA+jsD8KqOhc2Iv7cJmKgRgaGDnmQorUtaXEMiJwMVpts4GlFgqw8fEIZQH9MCa+46ahQxyQpA/yTGHm12eJ72oGBF1jY5liBThOubzoEdbQTM9AmPLE/A+m7KO1NTp2myQYaO90KtNSlYg9il7pcp37gJHxkGo3C/g99SltmqaYtlFOnmXjtljoivDp1JC/2zTT2KUryu074+8pRKBv9aOk7MidC+u5Mxg3eUxUgyHur0BIR1mwvofgHr3mVUHCHohCrhDJJyzuOInCKKq+vikDQ8WlqLwLh5fE4ZhmLkIoyFnTPqA1/wSGW20NJQVch/s6vdyzEHdwq8iuorz4lQB2fiol9Svjz1y+we1CD3hl6FwAAAABJRU5ErkJggg==","TBZoomInDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjVBMVEUAAAC/v7/b29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2tre3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nzc3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d1l6ZQlAAAALnRSTlMABAcICgsMDRESFxgoKSkrLC0xMjI2Nz0+RkhISUpSU1RVVlZYX2BteHl6e31/MGPHHQAAAYNJREFUSMfFlttygkAQRMcEDd6iaBSJyBpFIbCH//+8PIB4QS6bSlXmiRqmt5ie3mlE/iN64/naddfzca9L9atzTCkiOTgvLeXDveYu9H7YUG75eXl0Up6nTlEO2Vp19dMYSMPF4JIYLMMUiKfP6zeA9vv3yb6vAfcZNQoI7eoLOwSCKmGq5iARcYHgSTKZ1DU3SSqHvQOTevomwF3n1vfDEVmWZQ+ExLfs+hBKE0BC2N7MV6PtZoCt0deZ78GXZoDsQJV606T9NkA/RV+U6Dx28AwgITjF4xEW7YAlHApRpDBoBwwgyQUyhkjaARLBSERE5nDqAjjDTERE1iVhWU2U8lxddOd1AXgX+RgDjD/JuGljWjsO7q0cnLE0zMVnLG/jC9T1itq/XwJixYZrRqaGi8x8VYoEwKbeB4Lqug8M132+1auGstP1PlBY1vJqWR+NliVibQtTPCvPU+fCFD+tJttVj7ar7BanfnEOSWnsX/M2Y88JG81WrruajTr9Ovx5/AANW2DPUFlUSwAAAABJRU5ErkJggg==","TBZoomOut.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACSklEQVRYw+VYwU7CQBCFGzc9SAgehTt+CuJB1CN4hJgYdpaFgz9AIuIv1JoICXwBfod8BSZwKAccpi20FGi33RITt0nTbrpvdmffvJ1pIvFP2nOqcQllVgcBAu/lxuVzShH04ym7hwHMYbl1zaAPd3ASCZzn2QcYHmjnZbAPng8F3kzDKywcUN8wZu/QgQ7ex/jmMMK7zbQkPCvB1Bo+hyGriOz2FyLLqzBcu27KSsHRk9C25wavInPoU5HhPduJrJVIBuILusCEH/KLQDt1gSsxR2j+3Era8AHnY49q2SZ8RlkfzlhRlhSsiMQ1J3ZgsdfW7IuhSH1ljS7tJ+aP7xwONosc0z2kRd7T1kr43ss/2m7e3Rm1FFZGMObsa40coSx2RDeKwsp2L6p2wRv5QfdIGoXL/HBYBWkiQ9FtbMkgKqbpfwWNjwjrzr2wAfGnosRAlQz0XfJgipZX0kI5KWsGq0M28LQiQVZ1/sGE8AqbjjJ1jFUZ4F/EyJvNFtdpB95dvFrKXa4V6DTh2qZDUEdHmYEO4YnjGYjfRXFvcuw0VRto7NwTaLFLxRHELna5jv3AUXxkGo3c8Q99SlumsaYtlFPHmXhFSx0RfhZk/UnQrDS2LZP8rhN+zXcUyoYml74jcyTSd3cybvCeXwGCvLcLLSGxZmcJxUe8uquEggcUhVAllEVa3nUVgRNUeX1VBIKOTxNnEQgvT2chy1iE9CljQd8ZtRLBc4Lldt+k4FYh/slvIxbiLm4V+A3UVr8SoIZPBWW/Ev58+wWZNt3EgwcumAAAAABJRU5ErkJggg==","TBZoomOutDM.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjVBMVEUAAAC/v7/b29vf39/m5ubo6Ojq6urY2Njh4eHj4+Pe3t7f39/f39/a2trg4ODh4eHc3Nzd3d3g4ODb29vg4ODe3t7a2tre3t7a2tre3t7c3Nzf39/c3Nzd3d3d3d3d3d3b29ve3t7b29ve3t7c3Nzc3Nzc3Nzc3Nzd3d3b29ve3t7c3Nzc3Nzd3d3d3d1l6ZQlAAAALnRSTlMABAcICgsMDRESFxgoKSkrLC0xMjI2Nz0+RkhISUpSU1RVVlZYX2BteHl6e31/MGPHHQAAAXxJREFUSMfFlttygkAQREeDBm8RNIpEwhpFIbAn//95eeCiBrlsKlWZJ2qZpnZ6eqYR+Y8YzJyt522d2aBP9pN7yigiPbrDjvTJQXMX+jBpSbeCPD0+K99X5ziH7K2m/EUCZNFqXB6M11EGJIvH+TtAB6P7w1GgAe8RNQqI7PoLOwLCOmGq4UMi4gHhg8N03lTcPK197AWYN9M3B+4qtz4b71MRktyyG0DU3tEI9jf91Wi7HWBr9LXnBwi6NPYOqtKbJht1AUYZulSi21lBUYVbPJ5g1Q1Yw7EQRQbjbsAY0lwgM4j7jFYMUxERceDcB3CBpYiIbCvCvhqikuem1J3fB+CX8jEGGF/JuGhjWns27rlqnLE0zMVnLG/jAeo7ovbvl4BYieGakYXhIjNflSIhsGv2gbC+7kPDdZ9v9bqhvOtmHygsa321rNdWyxKx9oUpXpTvq0thim9Wm+2qn7arOiQgQ/eYVsb+4Qz7jNZgutx43mY57fXr8OfxDQB9Um8d4L2kAAAAAElFTkSuQmCC","openhand.png":"data:image/png;base64,AAACAAEAICACAAgACAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8="},Em={nw:["x1","y1"],n:["y1"],ne:["x2","y1"],e:["x2"],se:["x2","y2"],s:["y2"],sw:["x1","y2"],w:["x1"]};function Im(e){if(e.subId&&"resize"===e.type){var t=e.subId.split("-")[0];return Em[t]}return[]}function Cm(e){return e.subId&&"resize"===e.type?e.subId:null}function Sm(e,t,n){var r,i,o=e.events,a=e.legacyEvents,u=e.getView,s=e.model,l=s.getByID,f=s.setDirty,c=e.controller,d=c.combo,h=c.options,v=n.id,g=n.dragging,p=g.startX,m=g.startY,y=g.started,b=n.modifierKeys,x=h().combos,A=!1,w=n,M=Q(v),E=l(M),I="circle"===E.sh,C=d.api.isOpen(M),S=null!==(r=C?E.oc.w:E.w)&&void 0!==r?r:0,k=null!==(i=C?E.oc.h:E.h)&&void 0!==i?i:0,L=S/2,R=k/2,T={x:E.x,y:E.y,w:S,h:k,x1:E.x-L,y1:E.y-R,x2:E.x+L,y2:E.y+R,ratioH:E.h/E.w,ratioW:E.w/E.h},B=b.shift,O=b.consistentCtrl||C;if(a.trigger("dragstart","resize",M,p,m,null))return null;var G=function(e){var t=T.x-L,n=e;E.x=(t+n)/2;return n-t},D=function(e){var t=e,n=T.x+L;E.x=(t+n)/2;return n-t},F=function(e){var t=e,n=T.y+R;E.y=(t+n)/2;return n-t},Z=function(e){var t=T.y-R,n=e;E.y=(t+n)/2;return n-t},P=function(e){var t=e[0],n="1"===e[1];return{position:T[t+(n?"2":"1")],direction:n?-1:1}},Y=function(e,t){var n="x"===e?"w":"h",r="w"===n?"h":"w",i="x"===e?T.ratioH:T.ratioW;if(C){"circle"===(null==x?void 0:x.shape)&&(E.oc[r]=t);E.oc[n]=t}else if(I){E[n]=t;E[r]=t}else{E[n]=t;B&&(E[r]=t*i)}},z=function(e,t,n){var r,i=n[0],o=n[1],a=function(e,t){return O?2*Math.abs(e-t):"1"===o?"x"===i?D(e):F(e):"x"===i?G(e):Z(e)};if("x"===i){r=a(e,T.x);Y(i,r)}else{r=a(t,T.y);Y(i,r)}f(M)};return{type:"resize",rebuild:{all:!0},scrollable:!0,setLastProps:function(e){w=e},getLastProps:function(){return w},getCursor:function(){return"move"},dragMove:function(e){var n=e.x,r=e.y,i=e.modifierKeys,o=i.consistentCtrl,a=i.shift;if(y){var s=u(),l=s.viewToWorldX(n),f=s.viewToWorldY(r);B=a;O=o||C;t.forEach((function(e){z(l,f,e)}));if(B&&!O){var c=E.w/2,d=E.h/2;if(2===t.length){var h=P(t[1]),v=h.position,g=h.direction;"x"===t[1][0]?E.x=v+c*g:E.y=v+d*g}var p=P(t[0]),m=p.position,b=p.direction;"x"===t[0][0]?E.x=m+c*b:E.y=m+d*b}if(!C){E.w=Math.abs(E.w);E.h=Math.abs(E.h)}}},endDrag:function(e){var t,n,r,i;if(!A){A=!0;u().cancelScroll();E=l(M);var s=w.x,c=w.y,h={x:E.x,y:E.y,w:E.w,h:E.h,oc:{w:null!==(n=null===(t=E.oc)||void 0===t?void 0:t.w)&&void 0!==n?n:0,h:null!==(i=null===(r=E.oc)||void 0===r?void 0:r.h)&&void 0!==i?i:0}};if(C){E.oc.w=T.w;E.oc.h=T.h}else{E.w=T.w;E.h=T.h}E.x=T.x;E.y=T.y;if(a.trigger("dragend","resize",M,s,c)||e)f(M);else{a.trigger("prechange","resize");if(y){o.fire("prechange",{type:"resize"});if(C){E.oc.w=h.oc.w;E.oc.h=h.oc.h}else{E.w=h.w;E.h=h.h}E.x=h.x;E.y=h.y;d.internalUse.afterComboResize(M)}}a.trigger("dragcomplete","resize",M,s,c)}}}}function km(e,t){var n=t.drag&&!t.drag.links,r=t.linkStyle&&("horizontal"===t.linkStyle.path||"vertical"===t.linkStyle.path);return!(!e||!n&&!r||"link"!==e.type)}function Lm(e,t,n,r,i,o){if(0!==i)return null;var a=e.controller,u=e.overlays,s="node"===(null==n?void 0:n.type)&&n,l="link"===(null==n?void 0:n.type)&&n,f=a.options(),c=f.handMode;return o&&c?null===t||n?"map":u.chooseDefaultDragger(t):n&&"resize"===r.type?"resize":l&&!km(l,f)?l.id1===l.id2?null:"link":c&&(null===t||l)?"pan":s?"node":null===t||l?"marquee":u.chooseDefaultDragger(t)}function Rm(e,t){var n=Cm(t);return n||(e?'url("'+Mm["openhand.png"]+'"), pointer':"auto")}function Tm(e,t){var n=t.controller,r=n.stopDrag,i=n.setPointerMoved;e.down||r(!1);i(e)}function Bm(e,t){var n=t.controller,r=n.options,i=n.getActiveDragger,o=n.updateCursor,a=n.deferHover,u=t.model.getByID,s=t.overlays,l=t.events,f=i();if(f&&"node"===f.type&&f.getDragIds&&e.lastDownId&&f.getDragIds().indexOf(Q(e.lastDownId))>-1){var c=dr(dr({},e),{id:e.lastDownId});l.fire("pointer-move",$m(c,t))}else{var d=$m(e,t);l.fire("pointer-move",d);var h=d.id,v=null;if(h){var g=u(h);if(g){var p=km(g,r());v="node"!==g.type&&p?p?"pointer":v:Rm(d.id,d.subItem)}else v=s.getCursor(h)}if(!f){o(v);a(d)}}}function Om(e,t){var n=e.id,r=e.button,i=e.isPrimary,o=e.x,a=e.y,u=t.events,s=t.legacyEvents,l=t.model,f=t.overlays,c=t.controller,d=c.getActiveDragger,h=c.getFakeDragger,v=c.setFakeDragger,g=c.stopDrag;if(!d()||!e.dragging.started){var p=$m(e,t);u.fire("click",p);if(!p.defaultPrevented&&i){!(p.id?l.getByID(p.id):null)&&p.id||Am(p.id,l,p);n&&0===r&&f.doclick(n,o,a)}var m=h();m&&e.validDownEvent&&!d()&&2!==e.button&&g(!1,m);v(null);"mouse"!==e.pointerType&&s.trigger("click",p.id,e.x,e.y,e.button,p.subItem.subId||null)}}function Gm(e,t){var n,r=t.controller,i=r.getActiveDragger,o=r.combo,a=r.zoomIn,u=t.model,s=t.events,l=t.legacyEvents;if(!i()||!e.dragging.started){var f=e.x,c=e.y,d=e.button,h=$m(e,t),v=h.id,g=h.subItem,p=0===d,m=p&&l.trigger("dblclick",v,f,c,null!==(n=g.subId)&&void 0!==n?n:null);s.fire("double-click",h);!(h.defaultPrevented||m)&&p&&(null===v?a(!0):u.getByID(v)&&o.internalUse.dblclick(v))}}function Dm(e,t,n){var r=t.x,i=t.y;if(!t.dragging.started)return{dx:0,dy:0};var o=e?e.viewToWorldX(r):r,a=e?e.viewToWorldY(i):i;return{dx:o-n.x,dy:a-n.y}}function Fm(e,t,n){var r=e.getByID(t);if(r){r._disableHitTesting=n;e.setDirty(t)}}function Zm(e,t){var n=e.topParentId,r=e.getByID,i=[];t.forEach((function(e){var t=r(e);"node"===(null==t?void 0:t.type)&&t.parentId&&i.push(n(t.parentId))}));return i}function Pm(e){return Array.isArray(e)?ne(e):S(e)&&Array.isArray(e.add)?ne(e.add):{}}function Ym(e,t,n){var r=t.id,i=t.dragging,o=i.startX,a=i.startY,u=e.model,s=e.legacyEvents,l=e.events,f=e.getView,c=t,d=r&&u.getByID(r),h=d&&"node"===d.type?d.id:null,v="node",g=!1,p="move",m=!0,y=!1,b=new Set,x=!h||u.selection().has(h),A=s.trigger("dragstart",p,h,o,a,J(r));if(A){if(!0===A)return null;var w=Pm(A);Object.keys(w).forEach((function(e){return b.add(e)}))}else n.alsoDrag&&(Array.isArray(n.alsoDrag)?n.alsoDrag.forEach((function(e){return b.add(e)})):b.add(n.alsoDrag));b.forEach((function(e){var t;"node"!==(null===(t=u.getByID(e))||void 0===t?void 0:t.type)&&b.delete(e)}));if(n.dragCombos&&(x||h)){var M=x?u.selection().getSelections():[h];Zm(u,M).forEach((function(e){b.add(e)}))}function E(e){return e.map((function(e){var t=u.getByID(e);return{id:t.id,x:t.x,y:t.y}}))}x&&u.selection().forEach((function(e){var t=u.getByID(e);"node"===(null==t?void 0:t.type)&&b.add(e)}));if(h){var I=d;y=I&&!(!I.w||!I.h)}if(h)if(y){var C=b;(b=new Set).add(h);C.forEach((function(e){return b.add(e)}))}else b.add(h);var S=[],k=[];b.forEach((function(e){var t=u.getAncestryIds(e,!0);(t=t.slice(0,t.length-1)).some((function(e){return b.has(e)}))||S.push(e);k.push(e)}));var L=new Map,R=[];S.forEach((function(e){u.findAllComboChildren(R,e)}));S.forEach((function(e){var t=u.getByID(e);L.set(t,{x:t.x,y:t.y})}));var T=f(),B={x:T.viewToWorldX(t.dragging.startX),y:T.viewToWorldY(t.dragging.startY)};function O(){u.moveAllNodesTo(L,0,0)}var G=!1,D=t.id;k.forEach(u.setDirty);function F(e){R.forEach((function(t){Fm(u,t,e)}));S.forEach((function(t){Fm(u,t,e)}))}return{type:v,rebuild:{positions:!0},scrollable:!0,setLastProps:function(e){c=e},getLastProps:function(){return c},direction:n,getDragIds:function(){return k},getCursor:function(){return"move"},dragMove:function(e){if(!g){if(!G){F(!0);G=!0;l.privateFire("redraw",{all:!0})}c=e;var t=Dm(f(),e,B);if(n){n.horizontalMovement||(t.dx=0);n.verticalMovement||(t.dy=0)}u.moveAllNodesTo(L,t.dx,t.dy);m&&!y&&h&&u.setDirty(h);u.drawInTransientLayer(S)}},afterDraw:function(t){var n=c.x,r=c.y;m=!1;var i=t(n,r);c.id=i;return D=ay(v,S,c,D,l,s,e)},getLegacyDragStartRequest:function(){if(A&&"object"==typeof A)return A},endDrag:function(e){if(!g){g=!0;var t=c.x,n=c.y,i=c.dragging.started;f().cancelScroll();if(s.trigger("dragend",p,Q(r),t,n)||e)O();else if(i){var o=E(S);O();s.trigger("prechange","move");l.fire("prechange",{type:"move"});u.setProperties(o,!1,{all:!0},!1)}F(!1);b.forEach(u.setDirty);s.trigger("dragcomplete",p,Q(r),t,n)}}}}function zm(e,t){var r=e.legacyEvents,i=e.events,o=e.getView,a=e.model,u=e.controller,s=t.dragging,l=s.startX,f=s.startY,c="marquee",d="area",h=u.options(),v=t,g=!1;if(r.trigger("dragstart",d,null,l,f,null))return null;var p=new Set;a.selection().forEach((function(e){p.add(e)}));var m=Ht.midgrey,y=Ht.blue,b={id:null,type:qt.rect,x1:l,y1:f,x2:l,y2:f,borderColour:m,borderWidth:1,fillColour:y,isFilled:!1,webglBorderColour:xn(m),webglFillColour:xn(y)},x={x1:0,y1:0,x2:0,y2:0};function A(e,t,n){b.x1=Math.min(l,t);b.y1=Math.min(f,n);b.x2=Math.max(l,t);b.y2=Math.max(f,n);x.x1=e.viewToWorldX(b.x1);x.y1=e.viewToWorldY(b.y1);x.x2=e.viewToWorldX(b.x2);x.y2=e.viewToWorldY(b.y2)}function w(e,t){var n=!1;a.selection().forEach((function(r){if(!(e.has(r)||t&&p.has(r))){a.selection().remove(r,!0);n=!0}}));e.forEach((function(e){if(!a.selection().has(e)){a.selection().add(e,!0);n=!0}}));if(n){i.privateFire("redraw",{all:!0});i.fire("selection-change")}}function M(e){var t=h.marqueeLinkSelection,r=new Set,i=a.getShownNodes(),o=a.getShownLinks();n(i,(function(e,t){Yn(x,e.x,e.y)&&r.add(t)}));"off"!==t&&n(o,(function(e,n){if("centre"===t)Yn(x,e._x,e._y)&&r.add(n);else if("ends"===t){var o=i[e.id1],a=i[e.id2];Yn(x,o.x,o.y)&&Yn(x,a.x,a.y)&&r.add(n)}}));w(r,e)}return{type:c,rebuild:{drawOnly:!0},scrollable:!0,setLastProps:function(e){v=e},getLastProps:function(){return v},getCursor:function(){return"crosshair"},generate:function(e){var t=e.getLayer(),n=e.getLayerPath();e.setLayerPath(null);e.setLayer(So.HANDLES);e.copyPrimitive(b);e.setLayerPath(n);e.setLayer(t)},dragMove:function(e){v=e;if(!g){var t=e.modifierKeys,n=t.consistentCtrl,r=t.shift,i=n||r;A(o(),e.x,e.y);M(i)}},endDrag:function(e){if(!g){g=!0;o().cancelScroll();var t=v.x,n=v.y;if(r.trigger("dragend",d,null,t,n)||e){var u=a.selection().hasChanged(p);a.selection().clear(!0);p.forEach((function(e){a.selection().add(e,!0)}));u&&i.fire("selection-change")}else r.trigger("selectionchange");r.trigger("dragcomplete",d,null,t,n)}}}}function Vm(e,t,n){var r,i,o=e.events,a=e.legacyEvents,u=e.getView,s=t.dragging,l=s.startX,f=s.startY,c="pan",d="hand",h=!1,v={horizontalMovement:!0,verticalMovement:!0},g=u(),p=g.offsetX(),m=g.offsetY(),y=0,b=0,x=t,A=g.zoom(),w=a.trigger("dragstart",d,null,l,f,null);if(w){if(!S(w)){n();return null}var M=w;v.horizontalMovement=null!==(r=M.x)&&void 0!==r?r:v.horizontalMovement;v.verticalMovement=null!==(i=M.y)&&void 0!==i?i:v.verticalMovement}function E(e,t){y=e-l;b=t-f;if(v){v.horizontalMovement||(y=0);v.verticalMovement||(b=0)}}function I(e){var t=e.zoom();if(t!==A){p=e.offsetX();m=e.offsetY();l=x.x;f=x.y;A=t}}function C(e,t,n){e.offsetX(p+t);e.offsetY(m+n);o.fire("view-change");a.trigger("viewchange")}return{type:c,rebuild:{drawOnly:!0},direction:v,dragMove:function(e){if(!h){if(t.dragging.started){var n=u();I(n);E(e.x,e.y);n.offsetX(p+y);n.offsetY(m+b);o.fire("view-change");a.trigger("viewchange")}x=e}},setLastProps:function(e){x=e},getLastProps:function(){return x},getCursor:function(){return"move"},endDrag:function(e){if(!h){h=!0;var t=x.x,n=x.y,r=x.dragging.started;a.trigger("dragend",d,null,t,n)||e?Math.abs(y)+Math.abs(b)>0&&C(u(),0,0):r||a.trigger("selectionchange");a.trigger("dragcomplete",d,null,t,n)}}}}function Wm(e,t){var n=e;return{type:null,rebuild:{drawOnly:!0},direction:{horizontalMovement:!0,verticalMovement:!0},dragMove:function(e){n=e},getCursor:function(){return"pointer"},setLastProps:function(e){n=e},getLastProps:function(){return n},endDrag:function(){t.getView().cancelScroll()},getDragIds:function(){return[]},scrollable:!1}}function Xm(e,t,n,r){var i=null,o=n.model;"node"===t.type?i=Ym(n,r,t):"marquee"===e?i=zm(n,r):"pan"===e&&(i=Vm(n,r,o.selection().clear));return i}function Um(e,t){var n,r,i,o,a,u=t.events,s=t.model,l=t.overlays,f=t.controller,c=t.legacyEvents,d=e.id,h=e.button,v=Q(d);if(!(v&&s.isTransferring(v)||e.pointers.length>1)){var g,p=f.getFakeDragger(),m=Nm();if("create-link"!==(null===(n=f.getActiveDragger())||void 0===n?void 0:n.type)){var y=$m(e,t,{dragIds:null,setDragOptions:function(e){var t=dr({},e);"marquee"!==t.type&&"node"!==t.type&&"pan"!==t.type||(g=t.type);m=z(t,m)},type:null});y.type=Lm(t,d,s.getByID(v),y.subItem,h,f.inMapMode());c.suppress(!0);var b=s.createDragger(t,f.getCanvasContext(),d,e,y.subItem,m,f.inMapMode());y.dragIds=(null==b?void 0:b.getDragIds)?hr(b.getDragIds()):[];c.suppress(!1);u.fire("drag-start",y);if("create-link"!==(null===(r=f.getActiveDragger())||void 0===r?void 0:r.type)){var x=y.x,A=y.y,w=y.defaultPrevented,M=null;c.suppress(!0);if(g)M=Xm(g,m,t,e);else if(!w&&p){var E=p.getLegacyDragStartRequest&&p.getLegacyDragStartRequest();E&&(m={alsoDrag:Object.keys(Pm(E)),dragCombos:null===(i=E.combos)||void 0===i||i,horizontalMovement:null===(o=E.x)||void 0===o||o,verticalMovement:null===(a=E.y)||void 0===a||a});M=s.createDragger(t,f.getCanvasContext(),d,e,y.subItem,m,f.inMapMode())}d&&!M&&(M=l.createDragger(d,e));M||(M=Wm(e,t));f.setActiveDragger(M);f.updateCursor(M.getCursor(x,A));c.suppress(!1);oy(e,t)}else oy(e,t)}}}function Nm(){return{dragCombos:!0,alsoDrag:[],horizontalMovement:!0,verticalMovement:!0}}function jm(e,t){var n=t.controller,r=n.stopDrag,i=(0,n.getActiveDragger)();i&&i.setLastProps(e);r(!1)}function Km(e,t){var n=t.events,r=t.getView,i=t.controller,o=t.legacyEvents,a=e.x,u=e.y,s=e.deltaY,l=e.isNormalised,f=ty(e),c=o.trigger("mousewheel",-s,a,u);n.fire("wheel",f);if(f.defaultPrevented||c)i.isMapMode()&&e.wheelEvent.stopImmediatePropagation();else if(!i.isMapMode()){e.wheelEvent.preventDefault();if(Math.abs(s)){var d=r().wheelToPosition(-s,a,u,l);l&&i.pushAnimation(d)}i.render({drawOnly:!0})}}function Hm(e,t){var n=t.events,r=t.controller,i=t.model,o=t.legacyEvents,a=e.keyCode,u=e.modifierKeys,s=ey(e);n.fire("key-down",s);var l=o.trigger("keydown",s.keyCode,u.ctrl,u.shift);if(s.defaultPrevented||l)e.keyboardEvent.preventDefault();else if(65===a&&u.consistentCtrl){i.selectAll();r.render()}else if(27!==a){if(i.hasSelection()){var f=0,c=0,d=20;switch(a){case 37:f=-d;break;case 38:c=-d;break;case 39:f=d;break;case 40:c=d}if(0!==f||0!==c){o.trigger("prechange","move");n.fire("prechange",{type:"move"});i.moveSelection(f,c);r.render();return}if(46===a){if(!o.trigger("delete")){o.trigger("prechange","delete");n.fire("prechange",{type:"delete"});var h=i.selectionPlusDummyNodes();r.removeItem(h)}r.render();return}113===a&&o.trigger("edit",i.doSelection())}}else r.stopDrag(!0)}function Qm(e,t){var n=t.events,r=ey(e);n.fire("key-up",r)}function Jm(e,t){t.controller.stopDrag(!1);return t.getView().zoom()}function _m(e,t,n){if(e.gesture){var r=e.gesture,i=r.scale,o=r.dx,a=r.dy,u=r.centreX,s=r.centreY,l=e.pointers,f=t.getView();2===l.length&&f.zoomToPosition(i*n,u,s);f.panBy(o,a,!1);t.controller.render({drawOnly:!0})}}function qm(e,t){}function $m(e,t,n){void 0===n&&(n={});var r=e.id,i=e.button,o=e.pointerType,a=e.modifierKeys,u=e.pointerId,s=e.x,l=e.y,f=!1,c=t.model,d=Q(r),h=J(r),v={};if(c){var g=d&&c.getByID(d);!g&&r||g&&h&&(v=ym(g,h)||{})}return dr({id:d,subItem:v,button:i,pointerType:o,pointerId:u,x:s,y:l,modifierKeys:a,get defaultPrevented(){return f},preventDefault:function(){f=!0}},n)}function ey(e){var t=e.keyCode,n=e.modifierKeys,r=!1;return{keyCode:t,modifierKeys:n,get defaultPrevented(){return r},preventDefault:function(){r=!0}}}function ty(e){var t=e.x,n=e.y,r=e.deltaX,i=e.deltaY,o=e.deltaMode,a=e.modifierKeys,u=!1;return{deltaX:r,deltaY:i,x:t,y:n,deltaMode:o,modifierKeys:a,get defaultPrevented(){return u},preventDefault:function(){u=!0}}}function ny(e,t){var n=t.controller.lock;function r(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return!n()&&e.apply(void 0,t)}}var i,o=!0;e.on("pointerdown",r((function(e){o=!0;xm(e,t)})));e.on("contextmenu",r((function(e){o=bm(e,t)})));e.on("pointerup",r((function(e){wm(e,t)})));e.on("pointermove",r((function(e){Tm(e,t)})));e.on("pointercancel",(function(){t.controller.stopDrag(!1)}));e.on("click",r((function(e){o&&Om(e,t)})));e.on("doubleclick",r((function(e){Gm(e,t)})));e.on("dragstart",r((function(e){Um(e,t)})));e.on("dragmove",r((function(e){oy(e,t)})));e.on("dragend",r((function(e){jm(e,t)})));e.on("wheel",r((function(e){Km(e,t)})));e.on("keydown",r((function(e){Hm(e,t)})));e.on("keyup",r((function(e){Qm(e,t)})));e.on("gesturestart",(function(e){i=Jm(e,t)}));e.on("gesturechange",r((function(e){_m(e,t,i)})));e.on("gestureend",(function(e){qm(e,t)}))}function ry(e){var t=e.drag&&!e.drag.panAtBoundary,n=!e.dragPan;return!(t||n)}function iy(e,t,n,r){var i=n.controller,o=n.getView,a=i.options();if(t.scrollable&&ry(a)){var u=o().maybeScroll(e,t,r);if(u){i.pushAnimation(u);return!0}}return!1}function oy(e,t){var n=t.events,r=t.controller,i=r.getActiveDragger();if(i&&e.isPrimary){var o=e.x,a=e.y,u=i.getDragIds?i.getDragIds():[],s=function(s){var l,f=r.getActiveDragger();if(f){f.dragMove(s);e.id=null!==(l=e.lastDownId)&&void 0!==l?l:null;var c=$m(e,t,{dragIds:hr(u),type:i.type});n.fire("drag-move",c);r.updateCursor(f.getCursor(o,a))}};iy(e,i,t,s)||s(e)}}var ay=function(e,t,n,r,i,o,a){var u=n.id,s=n.x,l=n.y,f=Q(u);if(t[0]===f)return r;if(f!==r){var c=$m(n,a,{dragIds:hr(t),type:e}),d=c.subItem;o.trigger("dragover",f,s,l,d.subId||null);i.fire("drag-over",c)}return f};function uy(e,t,n,r){var i=e.model,o=e.events,a=e.legacyEvents,s=e.controller,l=e.getView,f=i.getByID,c=i.moveNode,d=i.moveAllNodesTo,h=i.removeItem,v=n.dragging,g=v.startX,p=v.startY,m=n,y=!1,b=!1;if(a.trigger("dragstart","dummy",r,g,p,null))return null;var x,A=t.id2,w={x:l().viewToWorldX(g),y:l().viewToWorldY(p)},M=new Map,E=f(A),I=E.x,C=E.y;M.set(E,{x:E.x,y:E.y});function S(){return t.id1}function k(){c(A,I,C)}var L=[r];return{type:"create-link",rebuild:{all:!0},scrollable:!0,getDragIds:function(){return L},getCursor:function(){return"move"},dragMove:function(e){if(!y){if(!b){Fm(i,A,!0);Fm(i,t.id,!0);o.privateFire("redraw",{all:!0});b=!0}var n=Dm(l(),e,w);m=e;d(M,n.dx,n.dy)}},afterDraw:function(t){var n=t(m.x,m.y);m.id=n;x=ay("create-link",L,m,x,o,a,e);return n},getLastProps:function(){return m},setLastProps:function(e){m=e},endDrag:function(e){if(!y){y=!0;var n=m.x,r=m.y,i=Q(m.id);l().cancelScroll();var c=a.trigger("dragend","dummy",i,n,r)||e;k();a.trigger("prechange","move");if(!c&&f(i)&&i!==S()){o.fire("prechange",{type:"move"});var d=u(t);d.id2=i;delete d.off;delete d._du;delete d._disableHitTesting;h([A,t.id]);s.merge([d])}else i=null;a.trigger("dragcomplete","dummy",i,n,r)}}}}function sy(e,t,n,r){var i=e.legacyEvents,o=n.dragging,a=o.startX,u=o.startY,s=!1,l="hand",f="map",c=Q(t),d=n;i.trigger("dragstart",l,c,a,u,J(t));return{type:f,rebuild:void 0,direction:{},dragMove:function(e){d=e},getCursor:function(){return"move"},setLastProps:function(e){d=e},getLastProps:function(){return d},endDrag:function(){if(!s){s=!0;var e=d.x,t=d.y;i.trigger("dragend",l,c,e,t);i.trigger("dragcomplete",l,c,e,t)}}}}function ly(e,t,r,i,o,a){var u=e.legacyEvents,s=e.events,l=e.model,f=e.getView,c=o.dragging,d=c.startX,h=c.startY,v=!1,g=o;if(u.trigger("dragstart","offset",a,d,h,J(a)))return null;function p(e,t,n,r,i,o){return((n-e)*(t-o)-(e-i)*(r-t))/Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var m={},y={},b={};function x(e){var t=l.getByID(e);if(t&&"link"===t.type){m[e]=t.off||0;y[e]=t.off||0;b[e]=!0}}l.selection().has(i.id)?l.selection().forEach(x):x(i.id);var A=Object.keys(y);function w(e,n,r,o){var a=n===i,u=a?e.viewToWorldX(r):r,s=a?e.viewToWorldY(o):o,l=t(1,n),f=t(2,n),c=p(l.x,l.y,f.x,f.y,u,s);b[n.id]&&Math.abs(c-m[n.id])>8&&(b[n.id]=!1);if(!b[n.id]){Math.abs(a?c:c+m[n.id])<12&&(c=a?0:-m[n.id]);y[n.id]=a?c:c+m[n.id]}}return{type:"link",rebuild:{all:!0},scrollable:!0,setLastProps:function(e){g=e},getLastProps:function(){return g},getDragIds:function(){return A},getCursor:function(){return"move"},dragMove:function(e){if(!v){g=e;var r=e.x,o=e.y,a=f(),u=a.viewToWorldX(r)-a.viewToWorldX(d),s=a.viewToWorldY(o)-a.viewToWorldY(h);n(y,(function(e,n){var f=l.getByID(n);if(f)if(f===i)w(a,f,r,o);else{var c=t(1,f),d=t(2,f),h=(c.x+d.x)/2,v=(c.y+d.y)/2;w(a,f,h+u,v+s)}l.setLinkOffset(n,y[n])}))}},endDrag:function(e){if(!v){var t=g.x,r=g.y;v=!0;f().cancelScroll();var i=u.trigger("dragend","offset",a,t,r)||e;if(l.getByID(a))if(i)n(y,(function(e,t){l.setLinkOffset(t,m[t])}));else if(g.dragging.started){var o=[];n(m,(function(e,t){var n=l.getByID(t);o.push({id:t,off:n.off});l.setLinkOffset(t,e)}));u.trigger("prechange","offset");s.fire("prechange",{type:"offset"});o.forEach((function(e){var t=e.id,n=e.off;l.setLinkOffset(t,n)}))}u.trigger("dragcomplete","offset",a,t,r)}}}}var fy={w:!0,x:!0,y:!0,bw:!0,b1:!0,b2:!0},cy={b1:!0,b2:!0,bw:!0,e:!0,fs:!0,h:!0,off:!0,w:!0,x:!0,y:!0},dy={bs:!0,ff:!0,id1:!0,id2:!0,id:!0,ls:!0,sh:!0,t:!0,u:!0},hy={b:!0,c2:!0,c:!0,fbc:!0,fc:!0},vy={p:!0};function gy(e,t,r,i,o){var a,s,f,c=!1,d=new Set,h=new Set,v=new Set,g=new Set,p={hi:!0,bg:!0,ci:!0,du:!0,fb:!0,a1:!0,a2:!0,re:!0,tc:!0,a:!0},m={gh:!0},y={pos:!0},b={x:!0,y:!0,off:!0,lat:!0,lng:!0},x={ls:{solid:!0,dashed:!0,dotted:!0},bs:{solid:!0,dashed:!0}},w=["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"],M={},E={},I=[];function C(){return{allDirty:!1,allLinksMoved:!1,allLinksDirty:!1,anyLinkDirty:!1,dirty:new Map}}var S,k=C(),L=1,R=null,T=$p(e,t,r);function B(){return{betweenness:function(){},clearCache:function(){},closeness:function(){},clusters:function(){return[[]]},components:function(){return[{nodes:[]}]},connections:function(){return[[]]},degrees:function(){return{}},distances:function(){return{}},eigenCentrality:function(){return{}},findAdjacency:function(){},internalMarkLinks:function(){},kCores:function(){return{}},neighbours:function(){return{nodes:[]}},pageRank:function(){return{}},privateGetLinkIdsBetween:function(){return[]},privateNeighbourLinks:function(){return[]},privateSetProperties:function(){},shortestPaths:function(){return{onePath:[],one:[],items:[],distance:0}}}}function O(){c=!0;at();k.dirty.clear();R=null;M={};E={};k=C();T=null}function G(e){var t=k.dirty;t.delete(e);t.set(e,2);E[e]&&(k.anyLinkDirty=!0)}function D(){U();a=null;f=null}function F(e){n(E,(function(t){ye(t,e)}));n(M,(function(t){ye(t,e)}))}var Z,Y=Gu({numbers:cy,numOrString:vy,negatives:b,strings:dy,stringValues:x,colours:hy,booleans:p,reserved:m,mapPos:y,halos:w},G,D,F);function W(){R||(c?R=B():(R=cv(t,r)).privateSetProperties(M,E));return R}function X(e,t){var n=1===e?t.id1:t.id2,r=d.has(t.id)?je(n):M[n];return{x:r.x,y:r.y}}function U(){k.allDirty=!0;t.privateFire("redraw",{all:!0})}function N(e,t){G(t)}function j(e){k.allDirty=!1;k.allLinksMoved=!1;k.allLinksDirty=!1;k.anyLinkDirty=!1;k.dirty.clear();e.forEach(N)}function K(e,t){void 0===t&&(t=!1);var n=k.dirty,r=n.get(e);if(!r||t&&1===r){t&&n.delete(e);n.set(e,1)}}function H(){return!!(k.allDirty||k.allLinksMoved||k.allLinksDirty)||!!k.dirty.size}function J(e,t,n){ee(e,(function(e){e.x+=t;e.y+=n;K(e.id)}))}function _(e,t,n){e.forEach((function(e,r){$(r.id,e.x+t,e.y+n)}))}function $(e,t,n){var r=M[e];if(r){var i=t-r.x,o=n-r.y;if(r._combo)ee([e],(function(e){e.x+=i;e.y+=o;K(e.id)}));else{r.x+=i;r.y+=o;K(r.id)}}}function ee(e,t){
for(var n={},r=e.slice(0);r.length>0;){var i=r.shift(),o=M[i];if(o&&!n[i]){n[i]=!0;t(o);if(o._combo)for(var a=o._combo.nodeIds,u=0,s=a.length;u<s;u++)n[a[u]]||r.push(a[u])}}}function ne(e,t){var n=M[t]||E[t];if(n._combo){"node"===n.type&&n._combo.nodeIds.forEach((function(t){M[t]._combo&&ne(e,t);e.push(t)}));n._combo.linkIds.forEach((function(t){e.push(t)}))}}function oe(e,t){var n=E[e];if(n){n.off=t;G(e)}}function ue(e){if(e){M={};E={};It(!0);An();Y.typeCheck(e,E);var t=Y.filterNodesAndLinks(e.items,M,E,{selfLinks:S});E=t.links;M=t.nodes;pn(P(e.reveal).map((function(e){return""+e})),!1);Y.ensureHiddenItemConsistency(M,E);R=null;fe();rn();U()}nt()}function fe(){I=null}function ce(e){Object.keys(e).forEach((function(t){I.push(e[t])}))}function de(){if(!I){I=[];ce(E);ce(M)}return I}function he(e,t){switch(e){case"e":return 1;case"fs":return i.fontSize;case"off":case"b1":case"b2":return 0;case"x":case"y":return 0;case"w":case"h":return 1;case"bw":return 4;case"donut":var n=se({v:[]},Y.donutDefaults);if(t){t.b&&(n.b=yn(t.b,0));t.c&&Array.isArray(t.c)&&t.c.forEach((function(e,t){n.c[t]=yn(e,0)}))}return n;case"ha0":case"ha1":case"ha2":case"ha3":case"ha4":case"ha5":case"ha6":case"ha7":case"ha8":case"ha9":return{c:t&&t.c?yn(t.c,0):"rgba(0, 0, 0, 0)",r:0,w:0};case"fi":return{c:"black",t:""};case"oc":return ku;case"c":case"b":return Ht.midgrey;case"fc":return Ht.black;case"fbc":return Ht.textback;default:return}}function ve(e){return!e.hi&&!(M[e.id1].hi||M[e.id2].hi)}function ge(e){return W().privateNeighbourLinks(e)}function pe(e,t){for(var n=W().privateGetLinkIdsBetween(e,t),r=[],i=n.length,o=0;o<i;o++)r.push(E[n[o]]);return r}function me(e){return!(M[e.id1].bg||M[e.id2].bg)}function ye(e,t){e[t]&&wt(e.id)}function be(e){return e&&!!e.parentId}function xe(e,t,n){for(var r="x"===t||"y"===t?K:G,i=0;i<e.length;i++){var o=e[i],a=M[o],u=E[o];if(a){a[t]=n;r(o)}else if(u){u[t]=n;G(o)}}}function Ae(e,t){var n=!1;M[e]&&(n=Me(M[e],t));E[e]&&(n=Me(E[e],t));return n}function we(e){return Gt(e)&&!Ae(e,"gh")}function Me(e,t){return!!e[t]}function Ee(e){Le(e,"gh",!0)}function Ie(e){Te(e,"gh")}function Ce(e,t){Le(e,"hi",t);at()}function Se(){return Re("hi")}function ke(e){Te(e,"hi");at()}function Le(e,t,r){var i,o=P(e);xe(o,t,!1);Y.ensureConsistency(t,M,E);if(r){var a={},u={};for(i=0;i<o.length;i++)a[o[i]]=!0;n(E,(function(e){if(Me(e,t)&&!Me(M[e.id1],t)&&!Me(M[e.id2],t)&&(a[e.id1]||a[e.id2])){e[t]=!1;var n=e.parentId;n&&E[n]&&(u[n]=!0)}}));Y.applyPropertyRuleToComboLinks(u,t,E)}}function Re(e){var t=[];n(M,(function(n,r){n[e]&&t.push(r)}));n(E,(function(n,r){n[e]&&t.push(r)}));return t}function Te(e,t){xe(P(e),t,!0);Y.ensureConsistency(t,M,E)}function Be(e,t){e.type.match(/^(node|all)$/)&&n(M,t);e.type.match(/^(link|all)$/)&&n(E,t)}function Oe(e){var t=u(e);Y.ensureObject(t,!1,E);var n=null;"node"===t.type&&(n=M);if("link"===t.type){n=E;if(!Y.hasValidEnds(t,{},M,S))return;(M[t.id1].hi||M[t.id2].hi)&&(t.hi=!0)}Y.setZeroXY(t);if(t.id&&null!==n){var r=n[t.id];n[t.id]=t;if(r){r._combo&&(n[t.id]._combo=r._combo);r.parentId&&(n[t.id].parentId=r.parentId);r._offset&&(n[t.id]._offset=r._offset)}t.hi?Y.ensureHiddenItemConsistency(M,E):D();at();fe();G(t.id)}nt()}function Ge(){return"LinkChart"}function De(e,t){S=!!e.selfLinks;i.setOptions(e,t)}function Fe(e){Z=e}function Ze(e){Z&&G(Z);if(e){G(e);i.setSpecialOptions("showFullLabel",e)}else i.setSpecialOptions("showFullLabel",null)}function Pe(){var e=[];de().forEach((function(t){t._combo||e.push(u(t,"d"))}));return e}function Ye(){return{type:Ge(),items:Pe()}}function ze(e,t,r,i,o){var a,s,l,f,c,d=!1,h=function(){s=Q(e[a].id);f=[];if(s)if(t){c=new RegExp(s,"im");n(M,(function(e,t){c.test(t)&&f.push(e)}));n(E,(function(e,t){c.test(t)&&f.push(e)}))}else{M[s]&&f.push(M[s]);E[s]&&f.push(E[s])}var h=u(e[a]),v=function(){var e=!0,t=f[l],a=h;if(!i&&"node"===t.type&&(void 0!==a.x||void 0!==a.y)){var u=void 0===a.x?t.x:a.x,s=void 0===a.y?t.y:a.y;$(t.id,u,s)}n(h,(function(n,i){if("id"!==i&&"type"!==i){e&&"x"!==i&&"y"!==i&&(e=!1);switch(i){case"id1":case"id2":if(n!==t[i])throw Error("You cannot change the ends of an existing link");break;case"parentId":case"hi":if("parentId"===i&&o&&n!=t[i])throw Error("You cannot manually change the parentId of an item");r.all=!0;d=!0;t[i]=n;break;case"oc":var a=t;if(a.oc){r.all=!0;a.oc=le(a.oc,h.oc)}break;default:Tu[i]&&(t._noHalos=!1);fy[i]?r.positions=!0:r.all=!0;t[i]=n}}}));e?K(t.id):G(t.id)};for(l=0;l<f.length;l++)v()};for(a=0;a<e.length;a++)h();if(d){Y.ensureHiddenItemConsistency(M,E);at()}}function Ve(){var e={};function t(t){var n=t.parentId;if(n){var r=M[n]||E[n];if(!r)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item is not present in the model.");if(!r._combo)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item has no _combo property.");e[n]=e[n]||{};e[n][t.id]=!0}}function r(t){if(t._combo){var r={};(t._combo.nodeIds||[]).concat(t._combo.linkIds).forEach((function(n){r[n]=!0;var i=M[n]||E[n];if(!i)throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item is not present in the model.");if(!e[t.id][n])throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item's parentId property is "+(i.parentId?"set to '"+i.parentId+"'":"undefined."))}));n(e[t.id],(function(e,n){if(!r[n]){var i=M[n]||E[n];throw new Error("The "+i.type+" '"+i.id+"' has parentId set to '"+t.id+"' but is not included in the parent's _combo property.")}}))}}n(M,t);n(E,t);n(M,r);n(E,r)}function We(e,t,n){var r,i,o;for(r=0;r<e.length;r++){i=(o=e[r]).id;var a=void 0!==o.x,u=void 0!==o.y;if(!a&&!u||n)o._combo&&A(o._combo.comboScale)&&J([i],0,0);else{$(i,a?o.x:M[i].x,u?o.y:M[i].y)}se(M[i]||E[i],e[r]);t?G(i):K(i)}}function Xe(e,t,n,r,i,o){void 0===i&&(i=!1);var a=u(e);o&&o.api.isShown()&&o.internalUse.convertPos(a);var s=P(a);Y.ensureTypesInArray(s,!1,E);ze(s,t,n,r,i);nt()}function Ue(e){var t={};n(e,(function(e,n){var r=E[n];r&&void 0===r.off&&(t[n]=r)}));return t}function Ne(e){var t=u(e);Y.ensureTypesInArray(t,!1,E);var r={carefulWithXandY:!0,selfLinks:S},i=Y.filterNodesAndLinks(t,M,E,r);n(i.nodes,(function(e,t){M[t]=se(M[t],e);M[t]._noHalos=!1;G(t)}));n(i.links,(function(e,t){E[t]=se(E[t],e);E[t]._noHalos=!1;G(t)}));Y.ensureHiddenItemConsistency(M,E);at();fe();Nt(Ue(i.links));nt()}function je(e){var t=M[e]||E[e];if(t&&!t.hi){if("link"===t.type&&mn(e)&&$e(e))return t;var n=Je(e);n.push(t);var r=null;n.every((function(n){if(null===n)return!1;if(n.hi){r=null;return!1}if(n.id===e){r=t;return!1}if(n._combo){r=n;return n._combo.open}return!1}));return r}return null}function Ke(e){return u(_e(e),"d")}function He(e){for(var t=P(e),n=[],r=0;r<t.length;r++){var i=_e(t[r]);i=i||null;n.push(i)}return n}function Qe(e,t){var n=e,r=[],i=0;do{t&&1===i&&n.indexOf("_combolink")>-1||r.unshift(n);var o=_e(n);n=o&&o.parentId;i++}while(n);return r}function Je(e){var t=Qe(e,!1);t.pop();return He(t)}function _e(e){var t=Q(e);return M[t]||E[t]||null}function qe(e,t){return!_e(e).parentId||Je(e).every((function(e){return e._combo.open&&(!t||!e.hi)}))}function $e(e){var t=E[e];if(t&&!t.hi){if(t.parentId){if(et(t.parentId)){var n=je(t.id1);if(t.id1===t.id2&&n)return!0;var r=je(t.id2);return!(!n||!r||n.id===r.id)}return!1}return!0}return!1}function et(e){return!_e(e).parentId||Je(e).every((function(e){return!e.hi}))}function tt(e){for(var t=e,n=_e(t),r=n&&n.parentId;r;)(t=r)===(r=(n=_e(t))?n.parentId:null)&&(r=null);return t}function nt(){var e=new Set;it(M,e);it(E,e);o.forEach((function(t){t.isAsset||e.has(t.src)||o.delete(t.src)}))}function rt(e,t){e.forEach((function(e){e&&"string"!=typeof e&&e.g&&e.g.forEach((function(e){ot(e,t)}))}))}function it(e,t){n(e,(function(e){ot(e,t);rt([e,e.t1,e.t2],t);e.bu&&ot(e.bu.g,t)}))}function ot(e,t){if(e){var n=e.u;if(n){t.add(n);o.has(n)||o.get(n)}}}function at(){R&&R.clearCache()}function ut(){a={};s=0;for(var e=Object.keys(M),t=0,n=e.length;t<n;t++){var r=e[t],i=M[r];if(!i.hi&&qe(r,!0)){a[r]=i;s++}}}function st(){f={};for(var e=Object.keys(E),t=0,n=e.length;t<n;t++){var r=e[t],i=E[r],o=!i.hi;o&&(o=mn(r)?$e(r):qe(r,!0))&&(f[r]=i)}}function lt(){ct();return a}function ft(){ct();return f}function ct(){if(!a){ut();st()}}function dt(){if(!k.allDirty){var e=k.dirty.size;if(e>100)if(e>=s){k.allLinksMoved=!k.anyLinkDirty;k.allLinksDirty=k.anyLinkDirty}else vt();else{W().internalMarkLinks(k.dirty);d.forEach((function(e){var t=Ke(e).parentId;!k.dirty.has(e)&&t&&k.dirty.has(t)&&k.dirty.set(e,1)}))}}}function ht(e){var t=Ke(e);if(t&&"link"===t.type)return k.dirty.has(t.id1)||k.dirty.has(t.id2)}function vt(){null!==f&&n(f,(function(e,t){k.dirty.has(t)||(k.dirty.has(e.id1)||k.dirty.has(e.id2)||e.parentId&&ht(e.parentId))&&k.dirty.set(t,1)}))}function gt(e,t,n,r,o){void 0===r&&(r=!1);void 0===o&&(o=!1);var u,s=n.getUnzoom(),l=s!==L;l&&U();if(H()){ct();dt();j((u=i.generate(a,f,k,e,t,n,Et,d,Ot,Lt,r,o)).stillDirty);L=s}i.generateHandles(e,t,n,v);return i.animated()||u&&u.rebuildAll||l}function pt(e){return i.contains(e,M).filter((function(e){return!be(M[e])}))}function mt(){return i.animated()}function yt(){return i.getAlwaysRedraw()}function bt(t){var n=e.privateGetItem(t);n&&(n._combo||n.parentId)&&e.privateSetAllItemsInComboDirty([e.privateGetTopItemId(n.id)])}function xt(e,n,r){var i=Q(e),o=!e&&0===v.size,a=1===v.size&&v.has(e);if(!o){if(!n&&!r){if(a)return;It(!!i)}v.has(i)?n&&wt(i):At(i);t.privateFire("redraw",{all:!0})}}function At(e,n){void 0===n&&(n=!1);var i=Q(e);if(i&&!v.has(i)&&we(i)){bt(i);v.add(i);G(i);if(!n){r.trigger("selectionchange");t.fire("selection-change")}}}function wt(e,n){var i=Q(e);if(v.delete(i)){bt(i);G(i);if(!n){r.trigger("selectionchange");t.fire("selection-change")}}}function Mt(){return 0!==v.size}function Et(e){return!!v.size&&v.has(e)}function It(e){void 0===e&&(e=!1);var n=v.size;v.forEach((function(e){G(e);bt(e)}));v.clear();if(!e){r.trigger("selectionchange");n>0&&t.fire("selection-change")}}function Ct(e){n(e,(function(e,t){At(t,!0)}))}function St(e){e.forEach((function(e){h.add(e)}))}function kt(e){e.forEach((function(e){h.delete(e)}))}function Lt(e){return!!h.size&&h.has(e)}function Rt(){g.forEach((function(e){G(e);bt(e)}));g.clear()}function Tt(e){if(e&&e.length>0){e.forEach((function(e){g.has(e)||G(e)}));var t=re(e);g.forEach((function(e){t.has(e)||G(e)}));g=t}}function Bt(e){e.forEach((function(e){g.delete(e)&&G(e)}))}function Ot(e){return g.has(e)}function Gt(e){ct();return!(!a[e]&&!f[e])}function Dt(){var e=v.size;Ct(M);Ct(E);t.privateFire("redraw",{all:!0});r.trigger("selectionchange");e!==v.size&&t.fire("selection-change")}function Ft(){var e=[];v.forEach((function(t){e.push(t)}));return e}function Zt(e){if(e){It(!0);for(var n=0;n<e.length;n++)At(e[n],!0);t.privateFire("redraw",{all:!0})}return Ft()}function Pt(){return v}function Yt(e,t){var r=[];if(v.size){n(M,(function(e,t){Et(t)&&!be(e)&&r.push(t)}));n(E,(function(e,t){if(Et(t)){M[e.id1].du&&r.push(e.id1);M[e.id2].du&&r.push(e.id2)}}))}for(var i=0;i<r.length;i++){var o=M[r[i]];$(r[i],o.x+e,o.y+t)}}function zt(e){var t,r=P(e);if(r.length>0){for(var i={},o={},a=0;a<r.length;a++){t=r[a];E[t]&&(i[t]=E[t]);M[t]&&(o[t]=!0)}n(E,(function(e,t){(o[e.id1]||o[e.id2])&&(i[t]=e)}));n(i,(function(e,t){wt(t,!0);xn(t);G(t);delete E[t]}));n(o,(function(e,t){wt(t,!0);G(t);delete M[t]}));at();fe();Nt(i);D()}}function Vt(){for(var e=Zt(),t=0;t<e.length;t++){var n=E[e[t]];if(n){M[n.id1].du&&e.push(n.id1);M[n.id2].du&&e.push(n.id2)}}return e}function Wt(e){var n=cv(t,r);n.privateSetProperties(M,e);return n}function Xt(e){var t=z(e,{all:!1,self:!0,combos:"all"});return W().connections(t)}function Ut(e,t){var n=[],r={};if(te(e)){var i=Wt(e).findAdjacency;n=Xt();for(var o=0;o<n.length;o++){var a=E[n[o][0]];i({all:!0,combos:"all"},a.id1,a.id2)&&(r[o]=!0)}}t(n,r)}function Nt(e){t.privateFire("redraw",{all:!0});Ut(e,tn);Mn(q(e),!1,void 0,!1)}function jt(e,t){var n;Ut(e,(function(e,r){n=nn(e,r,t)}));return n}function Kt(e,t){var n=[];function r(e,t){n.push({id:e.id,off:t})}Mn(q(e),t,r,!1);return n}function Qt(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=E[r];i&&(t[r]=i)}return t}function Jt(e){Nt(Qt(e))}function _t(e,t){var n=Qt(e),r=jt(n,t),i=Kt(n,t);if(i.length>0){var o=ie(i);r=r.filter((function(e){return void 0===o[e.id]})).concat(i)}for(var a=[],u=0;u<r.length;u++){var s=r[u];E[s.id].off!==s.off&&a.push(s)}return a}function qt(){t.privateFire("redraw",{all:!0});tn(Xt({self:!1,combos:"toplevel"}))}function $t(e,t,r,i,o){var a=i||function(e){return e};function u(e){var t=1e6,n=V(e.off)?e.off:t,r=a(e);r.id1>r.id2&&(n=l(-n));return n}function s(e,t){return u(E[e])-u(E[t])}function l(e){return 0===e?0:e}n(t||e,(function(t,n){var i=e[+n];r||(i=i.filter((function(e){return!E[e].gh})));if(i.length>0){i.sort(s);for(var u=a(E[i[0]]),f=u.id1===u.id2,c=i.length,d=f?20:40,h=f?0:-.5*d*(c-1),v=0;v<c;v++){var g=E[i[v]],p=a(g),m=h+v*d;m=p.id1<=p.id2?m:-m;o(g,l(m))}}}))}function en(e,t){e.off=t;G(e.id)}function tn(e,t){$t(e,t,!0,null,en)}function nn(e,t,n){var r=[];function i(e,t){r.push({id:e.id,off:t})}$t(e,t,n,null,i);return r}function rn(){for(var e=Xt(),t={},n=0;n<e.length;n++){var r=!1,i=e[n];if(i.length>1){for(var o=0;o<i.length;o++){var a=E[i[o]];a&&(r=r||V(a.off))}r||(t[n]=!0)}}tn(e,t)}function on(e,t,n){var r=Q(t);return uy(e,E[r],n,r)}function an(e,t,n,r,i,o,a){var u=Q(n),s=_e(u),l="node"===(null==s?void 0:s.type)?s:null,f="link"===(null==s?void 0:s.type)?s:null,c=Lm(e,n,s,i,r.button,!!a);if("map"===c)return sy(e,n,r,It);if(l&&"resize"===c){return Sm(e,Im(i),r)}if(f){if("create-link"===c)return uy(e,f,r,u);if("link"===c)return ly(e,X,t,f,r,u)}In.clearExtraItemsInTransientLayer();if("pan"===c)return Vm(e,r,It);if("node"===c){ct();return Ym(e,r,o)}return"marquee"===c?zm(e,r):null}function un(e,t,n){var r=_e(e);if(!r||r.hi)return null;var i=r._edit,o=n.getAnchorPosition(e,0);if(!i||i.hib)return null;var a=i.x1+o.x,u=i.y1+o.y,s=i.x2+o.x,l=i.y2+o.y;return{x1:t.x(a),y1:t.y(u),x2:t.x(s),y2:t.y(l),fs:t.worldToViewDistance(i.fs)}}function sn(e,t,n,r){return T.extractStructure(i,e,M,E,W,t.fixed,n,r,void 0,t.overrides)}function ln(e){e.straighten&&qt()}function fn(t,n,r,i,o,a){var u=Th(M,r,e.privateGetMaxLabelLength(),i);T.layout(t,n,W,u,o,a)}function cn(n,i,o,a,u,s,l){var f=Th(M,a,e.privateGetMaxLabelLength(),u);T.arrange(n,t,r,i,o,s,f,l)}function dn(e){n(M,(function(t,n){e[n]&&$(n,e[n].x,e[n].y)}))}function hn(e){n(E,(function(t,n){e[n]&&In.setLinkOffset(n,e[n].off)}))}function vn(e,t,r){var i=t,o=[];n(M,(function(t,n){e[n]&&o.push({id:n,from:{x:t.x,y:t.y},to:{x:e[n].x,y:e[n].y}})}));var a=o.length;return Ar((function(e){i-=e;for(var n=r(Math.max(0,(t-i)/t)),u=0;u<a;u++){var s=o[u],l=s.from,f=s.to,c=l.x+n*(f.x-l.x),d=l.y+n*(f.y-l.y);$(s.id,c,d)}return i>0}),{positions:!0})}function gn(e){var t=E[e];return t&&!t._combo}function pn(e,t){var n={};e.forEach((function(e){gn(e)&&(n[e]=!d.has(e))}));d.forEach((function(e){void 0===n[e]&&xn(e)}));var r=[];e.forEach((function(e){if(n[e]){var t=_e(e);if(null!==t){d.add(e);r.push(t);G(e)}}}));t&&Mn(r,void 0,void 0,!0);D()}function mn(e){return!!d.size&&d.has(e)}function bn(){var e=[];d.forEach((function(t){e.push(t)}));return e}function xn(e){G(e);d.delete(e);Et(e)&&!qe(e,!1)&&wt(e,!0)}function An(){d.forEach((function(e){G(e);Et(e)&&!qe(e,!1)&&wt(e,!0)}));d.clear()}function wn(e,t,n){e.forEach((function(e){var r=je(e.id1),i=je(e.id2);if(null!==r&&null!==i&&r!==i){var o=r.id>i.id?r.id+i.id:i.id+r.id;void 0===t[o]&&(t[o]=[]);t[o].push(e.id);n[e.id]={id1:r.id,id2:i.id}}}))}function Mn(e,t,n,r){var i,o=void 0===n?en:n,a={},u={};wn(In.getRevealedLinks().map(_e).filter((function(e){return!e.hi})),a,u);function s(e){return void 0!==u[e.id]?u[e.id]:e}function l(e,t){if(u[e]){var n=void 0,r=u[e],i=Qe(r.id1,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0;i=Qe(r.id2,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0}return!1}if(e){var f=[],c={};e.forEach((function(e){if("node"===e.type){var t=je(e.id);t&&(c[t.id]=!0)}else f.push(e)}));var d={};wn(f,d,{});i={};var h=!1;Object.keys(a).forEach((function(e,t){if(void 0!==d[e]||l(a[e][0],c)){i[t]=!0;h=!0}}));if(!h)return}if(r){var v=o;o=function(e,t){_e(e.id1).parentId!==_e(e.id2).parentId&&v(e,t)}}$t(q(a),i,!!t,s,o)}var En=function(){return{add:At,remove:wt,clear:It,set:xt,getSelections:Ft,forEach:v.forEach.bind(v),has:v.has.bind(v),hasChanged:function(e){return!(0===e.size&&0===v.size)&&!l(e,v)}}},In={addItemsToTransfer:St,allParentsOpen:qe,allParentsVisible:et,animated:mt,applyRevealedLinkOffsets:Mn,applyUpdatedOffsets:hn,applyVertices:dn,arrange:cn,bothEndsForeground:me,bothEndsShown:ve,clearExtraItemsInTransientLayer:Rt,contains:pt,createDragger:an,defaultValueFor:he,destroy:O,doSelection:Zt,drawInTransientLayer:Tt,each:Be,ensureObject:Y.ensureObject,ensureTypesInArray:Y.ensureTypesInArray,extractStructure:sn,firstVisibleItemInAncestry:je,generate:gt,findAllComboChildren:ne,getAlwaysRedraw:yt,getAncestryIds:Qe,getByID:_e,getItem:Ke,getParentItems:Je,getRawItems:de,getRevealedLinks:bn,getShownNodes:lt,getShownLinks:ft,ghost:Ie,graph:W,hasSelection:Mt,hidden:Se,hide:ke,isItemShown:Gt,isRevealedLink:mn,isSelected:Et,isTransferring:Lt,labelPosition:un,layout:fn,load:ue,makeNodePositionAnimator:vn,merge:Ne,moveAllNodesBy:J,moveAllNodesTo:_,moveNode:$,moveSelection:Yt,neighbourLinkIds:ge,privateGetLinksBetween:pe,privateSelection:Pt,removeFromTransientLayer:Bt,removeItem:zt,removeItemsFromTransfer:kt,resetAllConnectionOffsets:qt,resetConnectionOffsets:Nt,resurrect:Ee,reveal:pn,selectAll:Dt,selection:En,selectionPlusDummyNodes:Vt,serialize:Ye,setAllDirty:U,setDirty:G,setItem:Oe,setLastHoverId:Fe,setLinkOffset:oe,setOptions:De,setProperties:Xe,setSelection:xt,show:Ce,showFullLabelOnHover:Ze,showHideBendLinks:Jt,showHideGetLinksToBend:_t,createNewLinkEndDragger:on,topParentId:tt,type:Ge,unsafeApplyChanges:We,updateLinkStyles:ln,validateCombos:Ve};return In}var py={backColour:!0,selectionColour:!0,selectionFontColour:!0,controlColour:!0};function my(e,r,i,o,a,s,l,f,c,d){var h,v,g,m,y,b,x=c,w=null,M=f,E=null,I=!1,C=!1,k={arrows:"normal",backColour:void 0,backgroundAlpha:.2,bands:ie(),combos:fe(),controlColour:Ht.midgrey,controlTheme:"light",defaultStyles:void 0,drag:ee(),dragPan:!0,fontFamily:"sans-serif",gradient:void 0,handMode:!1,hover:150,iconFontFamily:"sans-serif",imageAlignment:{},labelOffset:0,linkEnds:{spacing:"tight",avoidLabels:!0},_linkSelection:!0,linkStyle:le(),logo:void 0,marqueeLinkSelection:"centre",maxItemZoom:void 0,minZoom:.05,navigation:$(),overview:re(),_rendering:ce(),selectedLink:void 0,selectedNode:void 0,selectionColour:void 0,selectionFontColour:void 0,selfLinks:!1,_showShadowCanvas:!1,zoom:{adaptiveStyling:!0},truncateLabels:void 0,watermark:{fb:!0},gestures:!0};m=s.resetControlColour(k.controlColour);var L={arrows:!0,combos:!0,fontFamily:!0,iconFontFamily:!0,imageAlignment:!0,labelOffset:!0,linkStyle:!0,linkEnds:!0,maxItemZoom:!0,selectedLink:!0,selectedNode:!0,selectionColour:!0,selectionFontColour:!0,truncateLabels:!0,_rendering:!0},R={backColour:!0,controlColour:!0,controlTheme:!0,navigation:!0,logo:!0,overview:!0,watermark:!0,fontFamily:!0},B=Bo();e.__w=B;var G=1,D=function(){var e,t={},n={};if(k.defaultStyles){k.defaultStyles.comboLinks&&(t=k.defaultStyles.comboLinks);k.defaultStyles.openCombos&&(n=k.defaultStyles.openCombos);e=k.defaultStyles.comboGlyph}return{comboLinks:t,openCombos:n,comboGlyph:e}},F=function(){return k.combos.shape},Z=om(e,a,r,i,D,M,F);function Y(e){y=e}function V(e){if(void 0!==e&&e!==At){At=e;e&&at(Mt())}return At}function W(){return v}function X(){if(v)return v.webglCanvas?v.webglCanvas:v.canvas}function U(e){v=e}function K(e){x=e}function H(e){h=e}function Q(e){E=uo(e,v,x,l);B.setShadowColourMap(E.getShadowColourMap());M.setAllDirty()}function J(t){w=t;v&&v.webgl&&l.shutdownAndReset();M=w.model;Z=om(e,a,r,i,D,M,F);M.setOptions(k,!ve())}function _(e,t,n){void 0===e&&(e=o);void 0===t&&(t=k);void 0===n&&(n=!0);var r=t.watermark,i=t.navigation,a=t.overview,u=t.logo,s=t.bands,l=t.fontFamily,f=t.controlTheme,c=t.backColour;e.setup(m);r&&e.addTextWatermark(r,l);(null==i?void 0:i.shown)&&e.addNavigation(xn,x,i,f);a&&e.addOverview(xn,M,x,Ue,a,f,c);(null==u?void 0:u.u)&&e.addLogo(u);s&&e.addBanding(s,l);n&&$e({drawOnly:!0})}function q(){return{p:"ne",u:void 0,x:0,y:0}}function $(){return{shown:!0,p:"nw",x:0,y:0}}function ee(){return{links:!1,panAtBoundary:!0}}function re(){return{icon:!0,p:"se",shown:!1,size:100}}function ie(){return{bands:[],bottom:!1,top:!0}}function oe(){return{fb:!1,fc:"lightgrey",x:0,w:100}}function ue(){return{maxLength:30,showOnHover:!0}}function le(){return{glyphs:"horizontal",transition:.75,inline:!1,path:"direct"}}function fe(){return{shape:"circle"}}function ce(){return{showTextAtlas:!1,showFontIconAtlas:!1,showImageAtlas:!1,canvasSkipItemsOutOfView:!0,disableFloatTexture:!1}}function de(e,t,r){void 0===r&&(r=!ve());if(e){var i=!1,o=!1,l=!1,f=u(e),c=S;n(f,(function(e,t){var r;if(!T(k[t],e)){if(py[t]&&!N(e)&&!an(e))return;var u=null===(r=k[t])||void 0===r?void 0:r.path;k[t]=e;/fontfamily/i.test(t)&&(k[t]=_n(e));if("logo"===t){if("string"==typeof e){k[t]=q();k[t].u=e}e||(k[t]=q())}if("navigation"===t)if(e)c(e)?k[t]=z(e,$()):k[t]=$();else{k[t]=$();k[t].shown=!1}if("overview"===t)if(e)if(c(e)){(g=dr({},e)).backColour=an(g.backColour)?g.backColour:void 0;g.borderColour=an(g.borderColour)?g.borderColour:void 0;if(null!==g.size&&A(g.size)&&g.size>=0){var f=1,h=Math.min(x.width(),x.height())-f;g.size=Math.max(0,Math.min(h,g.size))}else g.size=void 0;k[t]=z(g,re())}else k[t]=re();else{k[t]=re();k[t].icon=!1}if("watermark"===t&&c(e)){var g;(g=e).fc&&(k[t].fc=g.fc&&an(g.fc)?g.fc:void 0);g.fbc&&(k[t].fbc=g.fbc&&an(g.fbc)?g.fbc:void 0)}if("bands"===t)if(e)if(S(e)){k[t]=z(e,ie());if(k[t].bands){k[t].bands=P(k[t].bands);for(var p=k[t].bands.length,y=0;y<p;y++)k[t].bands[y]=z(k[t].bands[y],oe())}}else k[t]=ie();else k[t]=ie();if("combos"===t)if(S(e)){k[t]=z(e,fe());var b=k[t].shape;b&&-1!==["circle","rectangle"].indexOf(b)||(k[t].shape=fe().shape)}else k[t]=fe();"truncateLabels"===t&&(e?S(e)?k[t]=z(e,ue()):k[t]=ue():k[t]=void 0);"selectedNode"!==t&&"selectedLink"!==t||!c(k[t])||M.ensureObject(k[t]);if("_showShadowCanvas"===t&&I!==k._showShadowCanvas){I=k._showShadowCanvas;E.debugCanvas(I?v:null)}"imageAlignment"===t&&d.updateAlignmentRecords(e);"controlColour"===t&&(m=e?s.resetControlColour(e,"dark"===k.controlTheme):s.resetControlColour(null));if("controlTheme"===t){"light"!==e&&"dark"!==e&&(k.controlTheme="light");m=s.resetControlColour(k.controlColour,"dark"===e)}if("linkStyle"===t)if(e&&S(e)){k[t]=z(e,le());var w=k[t],C=w.transition,B=w.path;(!A(C)||C<0||C>1)&&(k[t].transition=le().transition);B&&-1!==["direct","horizontal","vertical"].indexOf(B)||(k[t].path=le().path);k[t].path!==u&&(l=!0)}else k[t]=le();"defaultStyles"===t&&n(e,(function(e,n){if(-1!==["openCombos","comboLinks","comboGlyph"].indexOf(n)){if("comboGlyph"!==n||null!==k[t][n]){k[t][n]=c(e)?e:void 0;k[t][n]&&M.ensureObject(k[t][n])}}else k[t][n]=void 0}));"handMode"===t&&ve()&&a.internalUse.setHandMode(k.handMode);"drag"===t&&(e?S(e)&&(k[t]=z(e,ee())):k[t]=ee());"_rendering"===t&&e&&S(e)&&(k[t]=z(e,ce()));L[t]&&(o=!0);R[t]&&(i=!0)}}));M.setOptions(k,r);x.setMaxItemZoom(k.maxItemZoom);x.setMinZoom(k.minZoom);if(o){M.setAllDirty();$e({all:!0})}i&&_();l&&M.resetAllConnectionOffsets();ve()&&!Pt()&&a.internalUse.enableDragging(k.handMode);$e({drawOnly:!0});s.invokeWhenImagesHaveLoaded(t)}return u(k,!0)}function he(){M&&M.resetAllConnectionOffsets()}function ve(){return null!==a&&a.api.isShown()}function ge(){return null!=a?a:void 0}function pe(){return o.getWatermarkSize(v)}function me(e,t){var n=u(e);xn.combo.internalUse.preLoadUp(n,(function(e){M.load(n);xn.combo.internalUse.postLoadUp(n,e,(function(){n.viewSettings&&xn.setViewSettings(n.viewSettings,!1);!a||n.map&&n.map.keepSameMode?O(t):a.internalUse.loadUp(n.map,t)}))}))}function ye(t,n){i.trigger("prechange","merge");r.fire("prechange",{type:"merge"});var o=u(t),s=xn.combo.internalUse.preMerge(o,n),l=s.itemsToMerge;ve()&&(l=a.internalUse.preMerge(l));M.merge(l);e.privateSetNonImageProperties(s.propertiesToSet)}function be(e){e.combos=xn.combo.internalUse.serialize();e.reveal=xn.combo.api.reveal()}function xe(e){t(xn.isMapMode()?a.api.leafletMap().getContainer():v.webglCanvas||v.canvas,e,_e)}function Ae(){C=!0;xn.setContainer(null);B.destroy();s.destroy();B=null;Xt&&clearTimeout(Xt);v.webgl&&l.destroy()}function we(t){var n=e.privateGetItem(t.id);if(!n||n.type===t.type){var r=xn.combo.internalUse.preMerge([t]),i=r.itemsToMerge,o=i.shift();o&&ve()&&a.internalUse.preSetItem(o);M.merge(i);o&&M.setItem(o);e.privateSetNonImageProperties(r.propertiesToSet)}}function Me(e){xn.combo.internalUse.preDelete(e)}function Ee(e,t,n,o){if(!n){i.trigger("prechange","properties");r.fire("prechange",{type:"properties"})}M.setProperties(e,t,o,!1,!0,a)}function Ie(e,t,n,r){at(x.fromSettingsDirect(e,t,n,r))}function Ce(e){return!(!hy[e]||!Oe[e])}function Se(e,t){n(t,(function(n,r){var i=e[r];if(S(i)&&S(n))Se(i,n);else if(Ce(r))if(Array.isArray(i))for(var o=Math.max(n.length,i.length),a=0;a<o;a++){var u=n[a],s=i[a];if(an(u)||!u){t[r][a]=ln(u||s);e[r][a]=ln(s||u)}}else if(an(n)){i=an(i)?i:n;e[r]=ln(i);t[r]=ln(n)}}))}function ke(e,t){for(var n=0;n<t.length;n++)Se(e[n],t[n])}function Le(e,t,n){if("number"==typeof e)return e+n*(t-e);if(Array.isArray(e)){var r=void 0,i=t;if(Math.abs(e[0]-i[0])>.5){r=e[0]<i[0]?Le(1+e[0],i[0],n):Le(e[0],1+i[0],n);r-=Math.floor(r)}else r=Le(e[0],i[0],n);return fn([r,Le(e[1],i[1],n),Le(e[2],i[2],n),Le(e[3],i[3],n)])}return t}function Re(e,t,r){var i,o,a={};n(e,(function(n,u){if(u in t)switch(u){case"c":var s=n,l=t.c;a[u]=l.map((function(e,t){return Le(s[t],e,r)}));break;case"v":a.v=[];if(e.v){var f=Math.max(e.v.length,t.v.length);for(i=0,o=f;i<o;i++)a.v[i]=Le(e.v[i]||0,t.v[i]||0,r)}else for(i=0,o=t.v.length;i<o;i++)a.v[i]=0;break;default:a[u]=Le(e[u],t[u],r)}else a[u]=n}));return a}function Te(e,t,r){var i={};n(e,(function(n,o){i[o]=o in t?Oe[o]?Le(e[o],t[o],r):t[o]:n}));return i}function Be(e,t,n){if(!S(t))return!1;var r=M.getByID(n);return null!==r&&S(r[e])}var Oe=ne(Ru.concat(["b","b1","b2","bw","c","c2","donut","e","fbc","fc","fi","fs","h","n","oc","off","r","w","x","y","_combo","t1","t2","comboScale","v"])),Ge={t1:!0,t2:!0},De={};Ru.concat(["fi","oc","_combo","t1","t2"]).forEach((function(e){De[e]=Te}));De.donut=Re;var Fe=fy;function Ze(e,t,o,s,l,f){if(!s){i.trigger("prechange","properties");r.fire("prechange",{type:"properties"})}var c=u(e);ve()&&a.internalUse.convertPos(c);for(var d=[],h=[],v={},g=[],p=!1,m={},y=function(e){var t=c[e],r=null,i=null;n(t,(function(e,n){if(!Oe[n]||Ge[n]&&!Be(n,e,t.id))"id"!==n&&((r=r||{id:t.id})[n]=e);else if(j(e))(r=r||{id:t.id})[n]=e;else{v[n]=!0;(i=i||{id:t.id})[n]=e}Fe[n]?m.positions=!0:"id"!==n&&(m.all=!0)}));r&&h.push(r);i&&d.push(i)},b=0;b<c.length;b++)y(b);Object.keys(v).forEach((function(e){var t={fn:De[e]||Le,prop:e};g.push(t);"x"!==e&&"y"!==e&&(p=!0)}));function x(e){n(e,(function(t,n){void 0===t&&(e[n]=M.defaultValueFor(n))}))}function A(e){e.forEach((function(e){var t=M.getByID(e.id);if(t){x(e);k.push(e);var n=w(e,t);S.push(n)}}))}function w(e,t){var r={};n(e,(function(e,n){"id"!==n&&("oc"===n&&t.oc?r[n]=se(u(M.defaultValueFor(n,e)),u(t[n])):r[n]=u(t[n]||M.defaultValueFor(n,e)))}));return r}var E=t.time,I=_u;"cubic"===t.easing&&(I=qu);var C=E,S=[],k=[];M.setProperties(h,!1,m,!1,!0);var L=Ar((function(e,t){if(t){M.ensureTypesInArray(d,!0);A(d);ke(S,k)}else C-=e;for(var n=0!==E?I(Math.max(0,Math.min(1,(E-C)/E))):1,i=C>0,a=[],u=0,s=k.length;u<s;u++){var c=k[u],h=S[u],v={id:c.id};t&&(v._noHalos=!1);for(var m=0,y=g.length;m<y;m++){var b=g[m],x=b.prop;void 0!==c[x]&&(v[x]=b.fn(h[x],c[x],n))}a.push(v)}M.unsafeApplyChanges(a,p,l);f&&r.fire("view-change");i||O(o);return i}),m);at(L,t.queue)}function Pe(e,t,n,r,i,o){xn.setProperties(e,!1,!0,{});xn.animateProperties(t,{time:r,queue:!1,easing:"linear"},(function(){if(i>1)Pe(e,t,n,r,i-1,o);else{xn.setProperties(n,!1,!0,{});O(o)}}),!0)}function Ye(e,t,n){function r(e,t,n,r){var i={id:t};i[n]=r;e.push(i)}for(var i=P(e),o=[],a=[],u=[],s={},l=0;l<i.length;l++){var f=i[l],c=M.firstVisibleItemInAncestry(f);if(c&&!s[c.id]){s[f=c.id]=!0;var d="link"===c.type,h=-1,v=void 0;do{v="_ha"+ ++h}while(h<5&&c[v]);if(h<5){var g=ln(t.c),p=fn([g[0],g[1],g[2],.001]);r(o,f,v,{r:d?void 0:Math.max(28-t.w/2,0),w:0,c:t.c});r(a,f,v,{r:d?void 0:t.r,w:d?t.lw:t.w,c:p});r(u,f,v,null)}}}o.length>0?Pe(o,a,u,t.time,t.repeat,n):O(n)}var ze=null,Ve=!1;function We(e){ze=e;Ve=!1;Pt()&&Kt()}function Xe(){return ze}var Ue,Ne,je=function(e){};function Ke(e){je=e}function He(e){je&&je(e||"auto")}function Qe(e){Ue=e}function Je(e){e&&(Ne=e);return Ne}var _e=function(){};function qe(e){_e=e}function $e(e){r.privateFire("redraw",e||{all:!0})}var et=wr($e),tt=null;function nt(e){tt=e;Ve=!1}function rt(){return tt}var it=wr($e);function ot(e){var t=ze,n=et.animate(e,M);t&&t.rebuild&&r.privateFire("redraw",t.rebuild);var i=it.animate(e);return n||i}var at=et.push,ut=it.push;function st(e){if("number"==typeof e){G=e;$e()}return G}var lt,ft=Mr(et,st),ct=null;function dt(e,t){ct=Ue(e,t,!0);lt=ct.getContext("2d");return ct}var ht=.5;function vt(e){return 1-e}function gt(e){return e}function pt(e,t,n,r){var i=n;return Ar((function(o){i-=o;var a=Math.max(0,Math.min(1,(n-i)/n));ht=t(a);var u=i>0;if(!u){M.resurrect(e);ht=.5;O(r)}return u}),{all:!0})}function mt(e,t,n){var r=t.time;if(0===e.length)O(n);else{ht=1;M.ghost(e);var i,o=M.showHideGetLinksToBend(e,!1);if(o.length>0){r*=2/3;i=function(){xn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},n,!0)}}else i=n;var a=pt(e,vt,r,(function(){M.hide(e);O(i)}));at(a,!0)}}function yt(e,t,n){var r=t.time;function i(){var t=pt(e,gt,r,n);at(t,!0)}if(0===e.length)O(n);else{ht=0;M.ghost(e);var o=M.showHideGetLinksToBend(e,!0);if(o.length>0){r*=2/3;xn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},i,!0)}else i()}}function bt(e,t,n){$e({all:!0})
;if(t.animate)mt(e,t,n);else{M.hide(e);M.showHideBendLinks(e);$e({all:!0});O(n)}}function xt(e,t,n,r){$e({all:!0});M.show(e,t);if(n.animate)yt(e,n,r);else{M.showHideBendLinks(e);$e({all:!0});O(r)}}var At=!1,wt=3;function Mt(){var e=1200,t=0;return Ar((function(n){t+=n;wt=Math.floor(8*(1-t%e/e));return At}))}function Et(){if(At&&x){B.setLayer(So.WAIT);var e=x.scale(x.width()/2),t=x.scale(x.height()/2),n=x.scale(30);B.rect(0,0,x.width(),x.height(),void 0,0,"rgba(255, 255, 255, 0.5)",!0,null,-1,void 0);for(var r=0;r<8;r++){var i=r*(Math.PI/4),o=e+n*Math.cos(i),a=t+n*Math.sin(i),u=.2+(r+wt)%8/8*.8;B.circle(o,a,x.scale(10),Ht.white,-1,"rgba(145, 146, 149, "+u+")",!0,null,-1,void 0,!1)}}}function It(e,t){var n,r,i=G,o=k.backColour,u=k.gradient,s="white";if(t){n=x.scale(x.width());r=x.scale(x.height());if(ve()){i=1;s=a.internalUse.getDefaultBackgroundColour()}}o?Hn(e,o,i,n,r,t):u?Qn(e,u.stops,i,n,r,t):Hn(e,s,i,n,r,t);xn.isMapMode()&&!t&&a.internalUse.setBackgroundColour(o,u)}function Ct(e,t,n){B.resetExtras();var r=M.generate(B,v,x,t,!n.all&&!!n.positions);B.startGeneratingForExtras();St(e);o.generate(B,v,x,ze,e);Et();return r}function St(e){if(!e&&ze&&ze.generate){var t=B.getLayerPath();B.setLayerPath(null);B.setLayer(So.DRAGGERS);ze.generate(B);B.setLayerPath(t)}}function kt(e,t){M.setDirty(e);Ct(!1,!0,{});return M.labelPosition(e,t,B)}function Lt(e,t){It(v,!1);if(l){l.setAlpha(ht,k.backgroundAlpha);if(s.hasUpdatedImages()){e.all=!0;l.updateTextures(k._rendering.showImageAtlas)}l.build(B,e,k);if(t&&t.getPixels)return l.getPixels(x,h,k,!!y,B.getAnchorBuffer());l.draw(x,h,k,!!y,B.getAnchorBuffer(),e)}}function Rt(e){ro(v);It(v,e);var t=!!y||void 0;ao(B,v,lt,x,k,!1,!1,o.drawOverviewContent,e,k.backgroundAlpha,ht,t,s);s.hasUpdatedImages()&&s.imagesUpdated()}function Tt(e,t){if(s.isReady()){Ct(e,!1,t)&&(t.all=!0);M.getAlwaysRedraw()&&$e({drawOnly:!0});if(y){ro(y);ao(B,y,lt,x,k,!1,!1,o.drawOverviewContent,!1,k.backgroundAlpha,ht,!1,s)}v.webgl?Lt(t):Rt(e)}}function Bt(){return!!y}function Ot(){return null==y?void 0:y.canvas}function Gt(){if(v.webgl)return Lt({all:!0},{getPixels:!0});throw new Error("Not in WebGL mode")}function Dt(){E.dirty()}function Ft(e,t){return E.test(e,t,B)}var Zt=!1;function Pt(e,t){if(void 0!==e&&!!e!==Zt){Zt=!Zt;a&&a.internalUse.lock(Zt);if(e){V((t||{}).wait);Kt()}else V(!1);$e()}return Zt}function Yt(){s.hasPendingImages()&&$e()}function zt(e){var t;if(g&&w){e&&ze&&ze.afterDraw&&(t=ze.afterDraw(Ft));void 0===t&&(t=Ft(g.x,g.y));g.id=t;Bm(g,w);g=null}}function Vt(e){if(k.truncateLabels&&k.truncateLabels.showOnHover){M.showFullLabelOnHover(e);$e()}}var Wt,Xt=null;function Ut(e){var t,n=e.x,o=e.y,a=e.id,u=(null===(t=e.subItem)||void 0===t?void 0:t.subId)||null,s=a;s&&u&&(s+=u);return function(){if(!ze&&(null===a||a&&M.getByID(a))&&s!==Wt){Wt=s;Vt(a);M.setLastHoverId(a);i.trigger("hover",a,n,o,u);r.fire("hover",e)}}}function Nt(e){Xt&&clearTimeout(Xt);Xt=p(Ut(e),k.hover)}function jt(e,t,n){if(M&&w){var r=n.dragging.startX,i=n.dragging.startY;We(M.createNewLinkEndDragger(w,e,n,t));if(ze&&e){var o=ze.getCursor(r,i);je(o)}}}function Kt(e){var t=null!=ze?ze:tt;if(t&&!Ve){Ve=!0;var n=!!e,i=t.getLastProps();if(ze){var o=ze.getDragIds?ze.getDragIds():[],a=$m(i,w,{dragIds:hr(o),type:ze.type});n&&a.preventDefault();r.fire("drag-end",a);n=n||a.defaultPrevented}ze=null;t.endDrag(n,!!tt);tt=null;$e();je("auto");$e({drawOnly:!0})}}function Qt(e,t,n,r,i){at(x.panBy(e,t,n,!1,r,i));$e({drawOnly:!0})}function Jt(e,t,n,r){if(ve())a.internalUse.pan(e,t,n,r);else{at(x.pan(e,t,n,r));$e({drawOnly:!0})}}function _t(e,t,n){if(ve())a.internalUse.zoom("in",e,t,void 0,void 0,n);else{at(x.zoomIn(e,t,n));$e({drawOnly:!0})}}function qt(e,t,n){if(ve())a.internalUse.zoom("out",e,t,void 0,void 0,n);else{at(x.zoomOut(e,t,n));$e({drawOnly:!0})}}function $t(e,t,n,r){if(ve())a.internalUse.setZoom(e,t,n,r);else{at(x.setZoom(e,t,n,r));$e({drawOnly:!0})}}function en(){M.generate(B,v,x);return B.itemExtents(null,v)}function tn(e){return function(t,n,r,i,o){if(s.isReady()&&M){var u=r;u=N(u)||0===u.length?void 0:P(u);if(ve())a.internalUse.zoom(e,t,n,u,void 0,i);else{at(x[e](M,B,v,t,n,u,i,o)||null);$e()}}}}function nn(e,t,n,r){if(s.isReady()&&M)if(ve())a.internalUse.zoom("fitToExtents",e,t,[],n,r);else{at(x.fitWorldExtents(n,e,!0,!1,!0,t,r));$e()}}function rn(e,t){var n=z(t,{fixed:[],overrides:null==b?void 0:b.vertices});return M.extractStructure(v,n,e,F())}function on(e,t){var n=e;return Ar((function(e){var r=(n-=e)<0;r&&O(t);return!r}))}function un(e,t,n){if(t&&n){var r=Math.max(0,n.time||700),i="linear"===n.easing?_u:qu,o=t.extents;M.updateLinkStyles(n);t.updatedEdges&&M.applyUpdatedOffsets(t.updatedEdges);var a=t.extents;if(Array.isArray(n.fit)){var u={};n.fit.forEach((function(e){var n=e;if(!t.vertices[n]){var r=M.firstVisibleItemInAncestry(n);r&&t.vertices&&(n=r.id)}t.vertices[n]&&(u[n]=t.vertices[n])}));te(u)&&(a=vh(u))}var s=M.makeNodePositionAnimator(t.vertices,r,i),l=x.fitWorldExtents(a,!0,!0,!0,!0,r,e,i);if(n.animate){ut(s);n.fit?ut(l):o&&ut(on(r,e))}else{M.applyVertices(t.vertices);$e();o&&(n.fit?x.fitWorldExtents(a,!1,!0,!0,!0,0,e):e())}}else e()}var sn=!1;function cn(e){return function(t,n){sn=!1;b=t;var r=function(){b===t&&(b=void 0);O(e)};p((function(){C||un(r,t,n)}))}}function dn(e,t,n){if(M){sn=!0;var r=t||{},i=rn(e,r);M.layout(e,i,v,F(),r,cn(n))}}function hn(){return sn}function vn(e,t,n,r){if(M){var i=rn(e);M.arrange(e,t,i,v,F(),n,cn(r))}}function gn(e,t,n){function r(e){M.updateLinkStyles(t.layout);e&&M.applyUpdatedOffsets(e)}function i(e){if(t.layout.fit){var n=x.fitWorldExtents(e,t.animate,!0,!0,!0,t.time);at(n)}}xn.combo.internalUse.arrangeAndLayout(e,t,r,i,n)}function pn(e){return B.itemExtents(e,v)}function mn(e){g=e}function yn(){return B}function bn(){return k}var xn={afterDraw:Yt,animate:ot,animateBackgroundOpacity:ft,animateProperties:Ze,appendCombos:be,arrange:vn,arrangeAndLayout:gn,backgroundOpacity:st,cancelAnimation:et.cancel,cancelLayoutAnimation:it.cancel,combo:Z,updateCursor:He,deferHover:Nt,destroy:Ae,draw:Tt,drawBackground:It,drawoffscreen:Dt,fitToModel:tn("fitToModel"),fitToSelection:tn("fitToSelection"),fitExtents:nn,fitModelHeight:tn("fitModelHeight"),getActiveDragger:Xe,getCanvasContext:W,getChartCanvas:X,getInternalChartOptions:bn,getMapOverlayElement:Ot,getMapApi:ge,getWebGLPixels:Gt,getWidgets:yn,handlePointerMove:zt,hide:bt,hittest:Ft,imageGenFn:Je,inMapMode:ve,initOverlays:_,itemExtents:pn,isLayingOut:hn,isMapMode:Bt,labelPosition:kt,layout:dn,load:me,lock:Pt,makeBackgroundCanvas:dt,merge:ye,modelExtents:en,options:de,pan:Jt,panBy:Qt,ping:Ye,pushAnimation:at,removeItem:Me,render:$e,resetConnectionOffsets:he,setActiveDragger:We,setCanvasContext:U,setContainer:xe,setCreateCanvasFn:Qe,setCursorFn:Ke,setFakeDragger:nt,getFakeDragger:rt,setItem:we,setServices:J,setOverlayContext:Y,setOverviewView:H,setPointerMoved:mn,setProperties:Ee,setShadowCanvas:Q,setStartGameLoopFn:qe,setView:K,setViewSettings:Ie,setZoom:$t,show:xt,createNewLinkEndDragger:jt,stopDrag:Kt,wait:V,watermarkSize:pe,zoomIn:_t,zoomOut:qt};return xn}function yy(e,t,n){var r=null,i=null,o=null,a=null;t.privateOn("redraw",(function(){r=null;i=null}));function s(e,t,s){if(!e.type||!e.type.match(/^(node|link|all)$/))throw new TypeError("options type property should be either 'node', 'link' or 'all'");if(!e.items||!e.items.match(/^(underlying|toplevel|all)$/))throw new TypeError("options items property should be either 'underlying', 'toplevel' or 'all'");if(!r){i=n.privateGetRawItems();o=i;if(t)a=i;else{r=u(i,"d");a=r}}if(E(s))for(var l=0;l<o.length;l++){var f=o[l];h(e.type,f)&&v(e.items,f)&&s(a[l])}}function l(t,r,i){var o="underlying"===r.items,a=g(t,"hi","shown","hidden",r.type,r.hideSingletons,o),s=a.shown.nodes.concat(a.shown.links),l=a.hidden.nodes.concat(a.hidden.links),f=e.combo.internalUse.filter(s,l,a,r);s=f.toShow;function c(){O(i,u({shown:a.shown,hidden:a.hidden,combos:a.combos},!0))}if((l=f.toHide).length>0)if(s.length>0){r.time/=2;n.privateHideWithoutCombos(l,r,(function(){n.privateShowWithoutCombos(s,!1,r,c)}))}else n.privateHideWithoutCombos(l,r,c);else s.length>0?n.privateShowWithoutCombos(s,!1,r,c):c()}function f(t,r,i){var o="link"===r.type,a="underlying"===r.items,s=g(t,"bg","foreground","background",r.type,o,a),l=s.foreground.nodes.concat(s.foreground.links),f=s.background.nodes.concat(s.background.links),c=e.combo.internalUse.foreground(l,f,s,r),d=c.toHide.map((function(e){return{id:e,bg:!0}})),h=c.toShow.map((function(e){return{id:e,bg:!1}}));n.setProperties(d.concat(h));O(i,u({foreground:s.foreground,background:s.background},!0))}function c(e,t){t.forEach((function(t){if(e[t.id]){e[t.id1]=!0;e[t.id2]=!0}}))}function d(e,t){t.forEach((function(t){e[t.id]=!(!e[t.id1]||!e[t.id2])}))}function h(e,t){return"all"===e||e===t.type}function v(e,t){var n;switch(e){case"toplevel":n=!t.parentId;break;case"all":n=!0;break;case"underlying":default:n=!t._combo}return n}function g(e,t,n,r,i,o,a){var u={},l={all:{}};l[n]={nodes:[],links:[]};l[r]={nodes:[],links:[]};l.all[n]={nodes:[],links:[]};l.all[r]={nodes:[],links:[]};var f=h();v(f);g(f);p(f);m(f);y(f);f.all.forEach((function(e){var i="node"===e.type?"nodes":"links",o=u[e.id]?n:r;!u[e.id]==!e[t]&&l[o][i].push(e.id);l.all[o][i].push(e.id)}));return l;function h(){var e={all:[],nodes:[],links:[]};s({type:"all",items:a?"underlying":"toplevel"},!1,(function(t){e.all.push(t);"node"===t.type?e.nodes.push(t):e.links.push(t)}));return e}function v(t){("node"===i?t.nodes:"link"===i?t.links:t.all).forEach((function(t){e(t)&&(u[t.id]=!0)}))}function g(e){"link"===i&&(o?c(u,e.links):e.nodes.forEach((function(e){u[e.id]=!0})))}function p(e){"node"===i&&d(u,e.links)}function m(e){"all"===i&&"bg"!==t&&e.links.forEach((function(e){u[e.id]=!(!u[e.id1]||!u[e.id2]||!u[e.id])}))}function y(e){if("link"!==i&&o){var t={};e.links.forEach((function(e){t[e.id1]=t[e.id1]||u[e.id]&&u[e.id2];t[e.id2]=t[e.id2]||u[e.id]&&u[e.id1]}));e.nodes.forEach((function(e){u[e.id]=u[e.id]&&t[e.id]}))}}}return{each:s,filter:l,foreground:f}}function by(){var e,t,n;function r(r,i){void 0===i&&(i=!1);var o=i?Ht.darkmodedefault:Ht.ci,a=un(o);e=gn(a[0],a[1],a[2]);n=i;var u=un(r||o);return mn((t=gn(u[0],u[1],u[2]))[0],t[1],e[2])}function i(r){var i=.02,o=document.createElement("canvas");o.width=r.width;o.height=r.height;var a=o.getContext("2d");a.clearRect(0,0,r.width,r.height);a.drawImage(r.im,0,0,r.width,r.height);for(var u=a.getImageData(0,0,r.width,r.height),s=u.data,l=0;l<s.length;l+=4){var f=gn(s[l],s[l+1],s[l+2]);if(Math.abs(f[0]-e[0])<i){var c=n?e[2]:f[2],d=mn(t[0],t[1],c);u.data[l]=d[0];u.data[l+1]=d[1];u.data[l+2]=d[2]}}a.putImageData(u,0,0);return o}return{colouriseImage:i,setColour:r}}function xy(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");i.id="webglDebug"+r+"Canvas"+t;i.width=e;i.height=e;var a=document.getElementById(i.id);n?a?a.parentNode.replaceChild(i,a):document.getElementsByTagName("body")[0].appendChild(i):a&&document.getElementsByTagName("body")[0].removeChild(a);return o}var Ay=512,wy=4,My=264,Ey=8,Iy="Image";function Cy(e){return{alphaChannel:!0,img:e,rebuild:!1,size:0}}function Sy(e,t){for(var n=[],r=4,i=4,o=4,a=0,u=e.getMissingImage(),s=Ry(e),l=ky(s),f=1/l,c=xy(l,0,t,Iy),d=[],h=0,v=s.length;h<v;h++){var g=s[h];if(g.isMissing)d.push(g);else{var p=g.width/g.imageRatio,m=g.height/g.imageRatio;if(r+p+Ey>l){r=0;i+=a+Ey;a=0}if(i+m>l){o++;i=Ey;n.push(Cy(c.canvas));c=xy(l,o,t,Iy)}g.u1=r*f;g.v1=i*f;g.u2=(r+p)*f;g.v2=(i+m)*f;if(g.isEmoji){g.v2=i*f;g.v1=(i+m)*f}g.maxDimension=g.nonSquare;g.textureBank=o;g.colourComponentTexture=-1;if(g.nonSquare){var y=g.v2-g.v1,b=g.u2-g.u1;if("width"===g.nonSquare){var x=(b-b*(y/b))/2;g.cu1=g.u1+x;g.cv1=g.v1;g.cu2=g.u2-x;g.cv2=g.v2}else{var A=(y-y*(b/y))/2;g.cu1=g.u1;g.cv1=g.v1+A;g.cu2=g.u2;g.cv2=g.v2-A}}else{g.cu1=g.u1;g.cv1=g.v1;g.cu2=g.u2;g.cv2=g.v2}c.drawImage(g.hasControlColour?g.co:g.im,r,i,p,m);m>a&&(a=m);r+=p+Ey}}d.forEach((function(e){e.u1=u.u1;e.v1=u.v1;e.u2=u.u2;e.v2=u.v2;e.cu1=u.cu1;e.cv1=u.cv1;e.cu2=u.cu2;e.cv2=u.cv2;e.textureBank=u.textureBank}));n.push(Cy(c.canvas));o++;for(;o<7;){var w=xy(1,o++,!1,Iy);n.push(Cy(w.canvas))}return n}function ky(e){for(var t=1,n=Ey,r=Ey,i=0,o=1024,a=0,u=e.length;a<u;a++){var s=e[a],l=s.width/s.imageRatio,f=s.height/s.imageRatio;if(n+l+Ey>o){n=0;r+=i+Ey;i=0}if(r+f>o){t++;r=Ey}f>i&&(i=f);n+=l+Ey}return t<wy?1024:t<=4*(wy-1)?2048:4096}function Ly(e,t){var n=1,r=!1;if(e>My){t>0?e>Ay&&(n=e/Ay):n=e/My;r=!0}return{imageRatio:n,largeImage:r}}function Ry(e){var t=[],n=2;e.forEach((function(e){if(e.isLoaded){var r=e.width>e.height?"width":"height";if(e.src&&e.src.indexOf(".svg")>-1){var i=0|Math.max(e.width,e.height);if(i){var o=256/i;e.width=Math.round(e.width*o);e.height=Math.round(e.height*o)}else{e.width=256;e.height=256}}var a=Ly(e.height,n);a.largeImage&&n>0&&n--;e.size=e[r]/a.imageRatio;e.imageRatio=a.imageRatio;e.nonSquare=e.width!==e.height&&r;t.push(e)}}));return t.sort((function(e,t){return e.size-t.size}))}function Ty(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=128;t.height=128;n.fillStyle="black";n.font="105px sans-serif";var r=n.measureText(e).width,i=r*(128/105);t.width=Math.max(1,i);n.font="105px sans-serif";n.fillText(e,(t.width-r)/2,96);return t}function By(){var e=0,t=new Map;function n(n){if(n&&E(n)){var r={id:e++,fn:n};t.set(r.id,r)}}function r(){if(t.size>0){var e=[];t.forEach((function(t){e.push(t)}));e.forEach((function(e){t.delete(e.id)}));e.forEach((function(e){e.fn()}))}}function i(){t.clear()}return{destroy:i,push:n,runAll:r}}var Oy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACwklEQVR4Ae2aA8xkQRCEz7Zt27Zt20ZwZny2bdu2bdu2uVdnb/6ufZqX6eQLd7qmKtvP/nTp0qVLly5d3mvh3dzgI/AIqWmQfnTwRKi9Ffg3MoTBRAB3QHgDtGcJdV+CxEb/C0KAc0QI43zULUhotnfSKHwEOUm9IOC0UG8vCEjpmTgKx0FgQqurUOctSCVQsHQUugh14oGXQo2eTj4rvAQJBBpLhf2PEv8yy0dhtR97lxX2fQ8y8WasHYXqfuh7Wdizj0oXSLdBOC89ewv7nQHBOAP2jcLo//RKDt4KT7G57TPPj8JHkP0fvTYJ+wxX+V7hGAj8S49awvWXQShnBMCPQsdva8OC28K1RZxjnh+FFyAeGC5cN9FNt80HwAfB7296PYuoNgoEZR3mmB8FgtnqP0HiuQci85tSfxRqiPRdNgpL1X+YyvMYxKT0XTIKjXhx9UdhvRveKQQAO8kAurghgE7AQ/IGpFfZfNpvJjw+cBaEUtF8UHDUoNPgVBUD6As8BlJXtfP/B4MDeAaSqGA+NLgIPCZwCAR1egDjBYYYhjnZfCnC0AtiTQEnmo9EPNcbAhoSAVwEIZ0WwAKhicMgyLe169QehYV36xBXeKl/WR8fPCfeLeRygvnY4LHP1/gL77YlrxKD22neP9jAvMY28Kapv23+iQPYB5DNS7/k4DXxajyLHeajgIfEuzz6sxgvHAQBrA5ghnCT10EYP/QNBA4RIbS00nwRYoOVBP0zEPcSD0FkK8wHBxeEm9tA6EwlQp5gun/iC453IBWhE5c4IH4E2cw0nwS8FW5qqA96A4h/wQEQwKwAlhOvs8L5oBcBPCZCaGCG+aLERpoboNuZ0L0BQhhpPhA4QVymBjLooHudCKG7kQG0IjZQxUD9RuQjtKhGiIcHD4Ti+4B/AwMICE4SIYz5b09dunTp0qVL1ydOC8gcEyAGqgAAAABJRU5ErkJggg==";function Gy(e,t,n){var r=By(),i=e||Xy,o=i();o.src=Oy;var a=Dy("",o);a.isLoaded=!0;var u=new Map,s=new Set,l=!1,f=!1,c=by(),d=!0;function h(e){var t=e.im;s.add(e.src);e.isLoaded=!0;e.width=t.width;e.height=t.height;if(e.isHiRes){t.width/=2;t.height/=2}e.hasControlColour&&(e.co=c.colouriseImage(e));e.hasCutout&&(e.ci=Wy(e))}function v(e,t){if(e.isCors)P(t,e);else{e.isCors=!0;var n=i();n.crossOrigin="anonymous";n.onload=g(e);n.onerror=p(e);e.im=n;V(e)}}function g(e){return function(){if(k(e.src)){var t=z(e.im);t?v(e,t):h(e)}Z()}}function p(e){return function(t){if(e.isHiRes){e.isHiRes=!1;V(e)}else P(t,e);Z()}}function m(e,n,r){l=!0;var o=i(),a=Dy(e,o,n&&(t||Fy()),r);u.set(e,a);o.onload=g(a);o.onerror=p(a);a.isSVG?y(a):V(a);return a}function y(e){if("undefined"==typeof window||window.isJSDOM)V(e);else{var t="image/svg+xml",r=new XMLHttpRequest;r.open("GET",""+(n||"")+e.src);r.responseType="document";r.overrideMimeType(t);r.onload=function(){if(r.readyState===r.DONE&&200===r.status&&r.response){e.rawSvg=r.response.children[0];var n=new Blob([e.rawSvg.outerHTML],{type:t}),i=URL.createObjectURL(n);e.im.onerror=function(){V(e)};e.im.src=i}else V(e)};r.onerror=function(){V(e)};r.send()}}function b(e){var t=S(e);t.isLoaded&&!t.ci&&(t.ci=Wy(t));t.hasCutout=!0;return t}function x(e){var t=u.get(e);if(!t){var n=Ty(e);t=Dy(e,n,!1,!1);u.set(e,t);t.isLoaded=!0;t.width=n.width;t.height=n.height;t.isEmoji=!0;s.add(e)}return t}function A(e){var t=u.get(e),n=u.delete(e);if(n&&t.isLoaded){f=!0;l=!0}return n}function w(){return!(!s.size&&!f)}function M(){R((function(e){s.add(e.src)}))}function E(e,t){void 0===t&&(t=!1);var n=c.setColour(e,t);R((function(e){if(e.isLoaded&&e.hasControlColour){e.co=c.colouriseImage(e);s.add(e.src)}}));return n}function I(e,t){var n=S(e,t,!0);if(n.isLoaded&&!n.hasControlColour){n.co=c.colouriseImage(n);s.add(n.src)}n.hasControlColour=!0;return n}function C(){s.clear();f=!1}function S(e,t,n){return u.get(e)||m(e,!!t,!!n)}function k(e){return u.has(e)}function L(){if(l){var e=0;u.forEach((function(t){t.isLoaded&&e++}));l=e!==u.size}return l}function R(e){u.forEach(e);e(a)}function T(){try{}catch(e){}return d}function B(e){L()?setTimeout((function(){B(e)}),100):O(e)}function G(){return a}function D(e){L()?r.push(e):O(e)}function F(){u.clear();r.destroy()}function Z(){L()||r.runAll()}function P(e,t){s.add(t.src);t.im=o;t.ci=o;t.co=o;t.isMissing=!0;t.isLoaded=!0;t.hasControlColour=!1;t.error=e;l=!0}var Y=null;function z(e){var t=Vy(e);if(t)return t;try{null===Y&&(Y=document.createElement("canvas").getContext("2d"));Y.drawImage(e,0,0,1,1);Y.getImageData(0,0,1,1)}catch(e){Y=null;return e}return null}function V(e){var t="",r=e.src;-1===r.indexOf("data:")&&(t+=n||"");t+=e.isHiRes?Zy(r):r;e.im.src=t}function W(e,t,n){if(Py(e))return e;var r=S(e);if(!r.isLoaded)return null;var i=t||r.im.width,o=n||r.im.height,a=i+"x"+o;if(r.uri[a])return r.uri[a];var u=Yy(r.im,i,o);u&&(r.uri[a]=u);return u}function X(){return{getHTMLElement:function(e,t){var n=S(e);if(!n.isLoaded)return null;switch(t){case"co":return I(e).co;case"ci":return b(e).ci;default:return n.im}},getDataUri:W,getSVG:function(e){var t=S(e);return t.rawSvg?t.rawSvg:null},getMissingImage:G}}return{createImageLookup:X,delete:A,destroy:F,forEach:R,get:S,getControlColourImage:I,getCutoutImage:b,getEmojiImage:x,getMissingImage:G,has:k,hasPendingImages:L,hasUpdatedImages:w,imagesUpdated:C,invokeWhenImagesHaveLoaded:D,isReady:T,resetControlColour:E,resetUpdatedImages:M,waitForImages:B}}function Dy(e,t,n,r){return{src:e,im:t,co:null,ci:null,width:64,height:64,imageRatio:1,isLoaded:!1,hasControlColour:!1,hasCutout:!1,isCors:!1,isHiRes:!!n,isMissing:!1,isAsset:!!r,isEmoji:!1,isSVG:"svg"===(zy(e)||"").slice(0,3),uri:{}}}function Fy(){return window.devicePixelRatio>=1.5}function Zy(e){var t=e.length-4;return e.substr(0,t)+"@2x.png"}function Py(e){return"data:image/"===(e||"").slice(0,11)}function Yy(e,t,n){var r=document.createElement("canvas");r.width=t;r.height=n;var i=r.getContext("2d");if(i){i.drawImage(e,0,0,t,n);return r.toDataURL()}return null}function zy(e){var t=/^data:image\/([^,]*),.*/,n=/.*\.([0-9a-zA-Z]+)$/,r=e.match(t);return r||(r=e.match(n))?r[1].toLowerCase():""}function Vy(e){var t=void 0!==e.naturalWidth&&0===e.naturalWidth;!Py(e.src)&&I("svg",e.src)&&(t=t&&0===e.width);return t?new Error("Invalid Image"):null}function Wy(e){var t=e.im,n=Math.min(t.width,t.height),r=n<t.height?Math.floor((t.height-n)/2):0,i=n<t.width?Math.floor((t.width-n)/2):0,o=Math.floor(n/2),a=document.createElement("canvas");a.width=n;a.height=n;var u=a.getContext("2d");u.save();u.beginPath();u.arc(o,o,o,0,2*Math.PI,!1);u.clip();u.drawImage(t,i,r,n,n,0,0,n,n);u.restore();return a}function Xy(){return document.createElement("img")}function Uy(e){return"IMG"===e.tagName}function Ny(e){return"CANVAS"===e.tagName}function jy(e,t,n,r,i){var o={minX:0,minY:0,tiles:new Map},a=e.getPane("mapPane"),u=Jy(a.style.transform,{width:0,height:0,x:0,y:0,scale:1});Hy(a,u,r,o);Qy(e,u,r,o,t,n);r.waitForImages((function(){i(o)}))}function Ky(e,t,n,r,i,o){var a=t(n.width,n.height),u=a.getContext("2d"),s=Gy();i(u,!0);jy(e,r,!0,s,(function(e){e.tiles.forEach((function(e,t){var i=t;if(Uy(t)){var o=s.get(t.src);i=o.isMissing?null:o.im}else i===r&&(i=n);i&&u.drawImage(i,Math.floor(e.x),Math.floor(e.y),e.width*e.scale,e.height*e.scale)}));var t;try{t=a.toDataURL()}catch(e){throw new Error("[toDataURL] Error exporting chart."+e)}finally{O(o,t)}}))}function Hy(e,t,n,r){var i=[];_y(e,"leaflet-tile-container",(function(e){var n=Jy(e.style.transform,t),r=parseInt(e.parentElement.style.zIndex,10)||0;_y(e,"leaflet-tile",(function(e){i.push({tile:e,zIndex:r,containerOffset:n})}))}));i.sort((function(e,t){return e.zIndex-t.zIndex}));i.forEach((function(e,t){var i=e.tile,o=Jy(i.style.transform,e.containerOffset);n.get(i.src);if(0===t){r.minX=o.x;r.minY=o.y}else{r.minX=Math.min(r.minX,o.x);r.minY=Math.min(r.minY,o.y)}r.tiles.set(i,dr(dr({},o),{width:i.width,height:i.height}))}))}function Qy(e,t,n,r,i,o){var a=e.getPane("overlayPane"),u=[];_y(a,null,(function(e){u.push(e)}));u.sort((function(e,t){return(0|+e.style.zIndex)-(0|+t.style.zIndex)}));u.forEach((function(e){var a=e===i,u=Jy(e.style.transform,t);if(Uy(e)){n.get(e.src);r.tiles.set(e,dr(dr({},u),{width:e.width,height:e.height,scale:e.width/e.naturalWidth}))}else if(Ny(e)){if(!o&&a)return;e.style.width&&a&&(u.scale=qy(e.style.width)[0]/e.width);r.tiles.set(e,dr(dr({},u),{width:e.width,height:e.height}))}}))}function Jy(e,t){var n=le({},t),r=e.split(/translate(3d)?\(|\);?/);if(r[2]&&r[2].length){var i=qy(r[2]);n.x+=i[0]||0;n.y+=i[1]||0}return n}function _y(e,t,n){for(var r=t?e.getElementsByClassName(t):e.children,i=0;i<r.length;i++)n(r[i],i)}function qy(e){return e.match(/[-\d]+/g).map(Number)}function $y(e){"pan"!==e.type&&"slider"!==e.type&&"marquee"!==e.type&&"link"!==e.type&&"map"!==e.type&&e.preventDefault()}function eb(e){e.preventDefault()}var tb=!1;function nb(e,t,n,r,i,o){var a=t.controller.lock,u=!1,s=!0,l=!0;if(r){if(!e._leafletEventHandlers){w();A();e._leafletEventHandlers=M();n.on(e._leafletEventHandlers)}}else{n.off(e._leafletEventHandlers);e._leafletEventHandlers=null;w();A()}function f(e){if(s&&!a()){l=bm(e,t);e.id&&e.pointerEvent.preventDefault()}}function c(e){s&&!a()&&l&&Om(e,t)}function d(e){s&&!a()&&Gm(e,t)}function h(e){l=!0;if(s&&!a()){xm(e,t);if(n.doubleClickZoom.enabled()||tb)if(!s||e.id&&"_"===e.id.charAt(0)&&"__dragger"!==e.id){n.doubleClickZoom.disable();tb=!0}else{n.doubleClickZoom.enable();tb=!1}}}function v(e){s&&!a()&&Um(e,t)}function g(e){s&&!a()&&oy(e,t)}function p(e){s&&!a()&&jm(e,t)}function m(e){Tm(e,t)}function y(e){if(s&&!a()){e.isGlobalEvent&&n.getContainer().dispatchEvent(new PointerEvent("pointerup",e.pointerEvent));wm(e,t)}}function b(e){s&&!a()&&(e.keyCode<37||e.keyCode>40)&&Hm(e,t)}function x(e){s&&!a()&&(e.keyCode<37||e.keyCode>40)&&Qm(e,t)}function A(){var e=o();if(e)if(r){e.on("pointerdown",h);e.on("pointermove",m);e.on("pointerup",y);e.on("contextmenu",f);e.on("click",c);e.on("doubleclick",d);e.on("dragstart",v);e.on("dragmove",g);e.on("dragend",p);e.on("keydown",b);e.on("keyup",x);e.on("wheel",(function(e){Km(e,t)}));e.on("pointercancel",(function(){t.controller.stopDrag(!1)}))}else e.off()}function w(){var t=r?e.privateOn:e.privateOff;t("double-click",eb);t("drag-start",$y)}function M(){return{contextmenu:function(){},move:function(){u||i()},zoomstart:function(){s=!1;u=!0},zoomend:function(){s=!0;u=!1}}}}function rb(e,t,n){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.off(t,r);n.apply(void 0,i)}e.on(t,r)}var ib=new Map;ib.set(0,-1);ib.set(1,0);ib.set(4,1);ib.set(2,2);ib.set(8,3);ib.set(16,4);ib.set(32,5);var ob=5,ab=9,ub=500;function sb(e,t){return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform?t:e}function lb(e){e.preventDefault()}function fb(){return{centreX:0,centreY:0,translateX:0,translateY:0,pinchLength:0,scale:1,dx:0,dy:0}}var cb=function(){function e(e,t){this.pointerEvents=["pointerdown","pointerup","pointermove","pointercancel","pointerout","pointerleave","pointerenter"];this.elementEventHandlers=new Map;this.globalEventHandlers=new Map;this.lastClickId=void 0;this.gestureStarted=!1;this.activePointers=new Map;this.element=e;this.hitTest=t;this.events=new Bh;this.gestureState=fb();this.setup()}e.prototype.onKeyEvent=function(e){var t=e.keyCode,n=e.altKey,r=e.metaKey,i=e.shiftKey,o=e.ctrlKey;this.events.fire(e.type,{keyboardEvent:e,keyCode:t,modifierKeys:{alt:n,meta:r,shift:i,ctrl:o,consistentCtrl:sb(o,r)}})};e.prototype.addEventListener=function(e,t,n){this.element.addEventListener(e,t,n);this.elementEventHandlers.set(e,t)};e.prototype.addGlobalEventListener=function(e,t,n){document.addEventListener(e,t,n);this.globalEventHandlers.set(e,t)};e.prototype.setup=function(){var e=this,t=this.element;t.style.touchAction="none";t.style.webkitTapHighlightColor="rgba(0,0,0,0)";this.pointerEvents.forEach((function(t){e.addEventListener(t,e.onPointerEvent.bind(e))}));this.addEventListener("contextmenu",lb);this.addEventListener("dblclick",lb);this.addEventListener("keydown",this.onKeyEvent.bind(this));this.addEventListener("keyup",this.onKeyEvent.bind(this));this.addEventListener("MSHoldVisual",lb);this.addGlobalEventListener("pointerup",this.onGlobalPointerEvent.bind(this));this.addGlobalEventListener("pointermove",this.onGlobalPointerEvent.bind(this));this.addEventListener("wheel",this.onWheelEvent.bind(this),{passive:!1})};e.prototype.onGlobalPointerEvent=function(e){var t=e,n=t.pointerId,r=t.type,i=this.activePointers.size,o=this.activePointers.get(n);if(o){var a=o.pointerEvent===e,u=!o.down&&("pointermove"===r||"pointerup"===r);if(a||u)return;db(o,t,this.element,!0);var s=this.removePointerIfNeeded(o);s||this.startDraggingIfNeeded(o);var l=this.calculateGesture(this.activePointers,i),f=this.getTouches(),c=dr(dr({},o),{gesture:l,pointers:f});this.events.fire(r,c);if(l&&this.activePointers.size>=2&&i!==this.activePointers.size){i>=2&&this.events.fire("gestureend",c);this.events.fire("gesturestart",c);this.gestureStarted=!0}else l&&this.activePointers.size>=2&&this.events.fire("gesturechange",c);s&&o.dragging.started&&this.handleDragEnd(c,i)}};e.prototype.onPointerEvent=function(e){var t=e.pointerId,n=e.type,r=this.activePointers.size;"pointerdown"!==n&&e.preventDefault();var i=this.activePointers.get(t),o="pointerdown"===n;i&&!o?db(i,e,this.element,!1):i=hb(e,this.element,!1);this.addPointerIfNeeded(i);i.id=this.hitTest(i);i.validDownEvent&&o&&(i.lastDownId=i.id);var a=this.removePointerIfNeeded(i);a||this.startDraggingIfNeeded(i);var u=this.calculateGesture(this.activePointers,r),s=dr(dr({},i),{pointers:this.getTouches(),gesture:u});u&&this.handleGestures(u,s,r);this.firePointerEvent(s);a&&i.dragging.started&&this.handleDragEnd(s,r)};e.prototype.handleDragEnd=function(e,t){this.events.fire("dragend",e);this.activePointers.size<2&&t>1&&this.events.fire("gestureend",e)};e.prototype.firePointerEvent=function(e){"pointerdown"===e.pointerEvent.type?this.doPointerDown(e):"pointerup"===e.pointerEvent.type?this.doPointerUp(e):this.events.fire(e.pointerEvent.type,e)};e.prototype.handleGestures=function(e,t,n){var r=this.activePointers.size;if(e&&r>=2&&n!==r){n>1&&this.events.fire("gestureend",t);this.events.fire("gesturestart",t);this.gestureStarted=!0}else e&&r>1&&this.events.fire("gesturechange",t)};e.prototype.onWheelEvent=function(e){var t,n=e.deltaX,r=e.deltaY,i=e.deltaMode,o=e.metaKey,a=e.altKey,u=e.shiftKey,s=e.ctrlKey,l=e.offsetX,f=e.offsetY,c=e.button,d=Math.abs(r);this.normaliseWheelDelta=0;if(d>0){(100===d||120===d||i>0)&&(this.normaliseWheelDelta=60);var h=r>0?1:-1;t=this.normaliseWheelDelta>0?this.normaliseWheelDelta*h:Math.min(100,d)*h}else t=0;if(Math.abs(t)>0||Math.abs(n)>0){var v={button:c,deltaX:n,deltaY:t,deltaMode:i,modifierKeys:{alt:a,meta:o,shift:u,ctrl:s,consistentCtrl:sb(s,o)},isNormalised:this.normaliseWheelDelta>0,x:l,y:f,wheelEvent:e};this.events.fire("wheel",v)}};e.prototype.addPointerIfNeeded=function(e){var t=e.pointerEvent.type,n=e.pointerType,r=e.pointerId,i=this.activePointers;"touch"===n?i.forEach((function(e,t){"touch"!==e.pointerType&&i.delete(t)})):i.forEach((function(e,t){e.pointerId!==r&&i.delete(t)}));"pointerdown"!==t&&"pointerenter"!==t||i.set(r,e)};e.prototype.removePointerIfNeeded=function(e){var t=e.pointerId,n=e.pointerEvent.type;return("pointerup"===n||"pointercancel"===n)&&this.activePointers.delete(t)};e.prototype.startDraggingIfNeeded=function(e){var t=e.validDownEvent,n=e.dragging,r=e.x,i=e.y,o=n.startX,a=n.startY;if(t)if(n.started)this.events.fire("dragmove",dr(dr({},e),{pointers:this.getTouches()}));else{var u="mouse"===e.pointerType?ob:ab;n.started=de(r-o,i-a)>u;if(n.started){clearTimeout(this.contextMenuTimer);this.events.fire("dragstart",dr(dr({},e),{pointers:this.getTouches(),id:e.lastDownId||null}))}}};e.prototype.getTouches=function(){var e=[];this.activePointers.forEach((function(t){return e.push({id:t.pointerId,x:t.x,y:t.y,pointerType:t.pointerType})}));return e};e.prototype.calculateGesture=function(e,t){var n;if(e.size>1){var r=void 0;if(t!==e.size){this.gestureState=fb();this.extractGestureState(this.gestureState);r=this.gestureState}else{r=fb();this.extractGestureState(r)}var i=this.gestureState,o=r.centreX,a=r.centreY,u=Math.round(o-i.centreX-i.translateX),s=Math.round(a-i.centreY-i.translateY);i.translateX+=u;i.translateY+=s;n={dx:u,dy:s,centreX:o,centreY:a,scale:r.pinchLength/i.pinchLength,translateX:i.translateX,translateY:i.translateY,pinchLength:r.pinchLength};i.scale=n.scale}return n};e.prototype.extractGestureState=function(e){var t=[];this.activePointers.forEach((function(e){t.push(e)}));if(t.length>1){var n=t[0],r=t[1];e.centreX=(n.x+r.x)/2;e.centreY=(n.y+r.y)/2;e.pinchLength=Math.max(1,ce(n.x,n.y,r.x,r.y))}};e.prototype.on=function(e,t){this.events.on(e,t)};e.prototype.off=function(e,t){this.events.off(e,t)};e.prototype.destroy=function(){var e=this;this.elementEventHandlers.forEach((function(t,n){e.element.removeEventListener(n,t)}));this.globalEventHandlers.forEach((function(e,t){document.removeEventListener(t,e)}))};e.prototype.fireContextMenuOnLongTouch=function(e){var t=this;clearTimeout(this.contextMenuTimer);this.contextMenuTimer=window.setTimeout((function(){
t.events.fire("contextmenu",e)}),1e3)};e.prototype.fireContextMenuForMouse=function(e){var t=e.button,n=e.modifierKeys.ctrl,r="MacIntel"===navigator.platform&&n&&0===t;(2===t||r)&&this.events.fire("contextmenu",e)};e.prototype.doPointerDown=function(e){var t=e.validDownEvent,n=e.pointerType,r=e.button,i=e.timestamp;if(t){this.events.fire("pointerdown",e);"mouse"===n?this.fireContextMenuForMouse(e):this.fireContextMenuOnLongTouch(e);this.prepareForDoubleClick(i,r)}};e.prototype.prepareForDoubleClick=function(e,t){var n=this.doubleClickState;if(!n||e-n.firstEventTime>ub||n.button!==t){this.doubleClickState={firstEventTime:e,lastEventTime:e,button:t};this.lastClickId=void 0}else n.lastEventTime=e};e.prototype.doPointerUp=function(e){var t=e.id,n=this.doubleClickState;clearTimeout(this.contextMenuTimer);this.events.fire("pointerup",e);if(e.lastDownId!==t||this.gestureStarted){this.doubleClickState=void 0;this.lastClickId=void 0}else{this.events.fire("click",e);if(n){var r=n.lastEventTime,i=n.firstEventTime;if(i&&this.lastClickId===t){r-i<ub&&this.events.fire("doubleclick",e);this.doubleClickState=void 0;this.lastClickId=void 0}else void 0!==this.lastClickId&&(n.firstEventTime=n.lastEventTime)}this.lastClickId=t}0===this.activePointers.size&&(this.gestureStarted=!1)};return e}();function db(e,t,n,r){var i=t.metaKey,o=t.shiftKey,a=t.ctrlKey,u=t.type,s=t.button,l=t.altKey,f=gb(n,t),c=f.x,d=f.y;e.isGlobalEvent=r;e.pointerEvent=t;var h="pointerdown"===u;if("pointerup"!==u){s>=0&&(e.button=vb(t));e.down=e.button>-1;e.validDownEvent=(e.validDownEvent||h)&&e.down}else e.down=!1;e.modifierKeys={alt:l,meta:i,shift:o,ctrl:a,consistentCtrl:sb(a,i)};e.x=c;e.y=d;e.timestamp=t.timeStamp;var v=e.dragging;if(e.validDownEvent&&void 0===v.startX){v.startX=c;v.startY=d}}function hb(e,t,n){var r=e.isPrimary,i=e.metaKey,o=e.shiftKey,a=e.ctrlKey,u=e.pointerType,s=e.pointerId,l=e.type,f=e.altKey,c=e.timeStamp,d=gb(t,e),h=d.x,v=d.y,g=vb(e),p="pointerdown"===l;return{button:g,id:null,pointerEvent:e,down:g>-1,dragging:{started:!1,startX:h,startY:v},isPrimary:r,modifierKeys:{alt:f,meta:i,shift:o,ctrl:a,consistentCtrl:sb(a,i)},pointerType:u,pointerId:s,timestamp:c,x:h,y:v,isGlobalEvent:n,pointers:[],validDownEvent:p}}function vb(e){var t,n=e.buttons;e.button>=0&&n<=0&&(n=1);return null!==(t=ib.get(n))&&void 0!==t?t:-1}function gb(e,t){var n=e.getBoundingClientRect();return{x:Math.round(t.clientX-n.left),y:Math.round(t.clientY-n.top)}}function pb(e,t,r,i,o,a){var s,l,f,c,d,h,v,g,p,m,y,b,x,w,M,E,I,C=!1,S=!1,k=.75,R=1.25,T=4,G=15,D={},F={watermark:!1,overview:!1,gestures:!1,handMode:!0},Z=u(a),Y=["doubleClickZoom","dragging","keyboard","scrollWheelZoom","touchZoom"],z=!1;N()&&(L.Map.prototype._panInsideMaxBounds=function(){if(!this._enforcingBounds){var e=void 0;I&&(e={animate:!1});this.panInsideBounds(this.options.maxBounds,e)}});function V(){return c}function X(){if(!v){v=e.privateCanvasApi.privateGetElement();w=re(v)}}function U(){var e="1.3.4",t="1.3.4",n=L.version.split("-")[0].split("+")[0];if(Me(n,e)<0)throw new Error("Cannot use an older version of Leaflet than "+e);if(!z&&Me(n,t)>0){console.warn("You are using an unsupported version of Leaflet - please use "+t+" instead.");z=!0}}function N(){return"object"==typeof L&&L&&"Map"in L&&"version"in L}function j(){if(s){var t=e.lock()||!E;g.style.touchAction=t?"none":""}}function K(e){if(e!==E){E=e;j()}}function H(){return E}function Q(e){s=e;i.setLeafletMap(s)}function J(t){s&&nb(e,d,s,t,ee,V)}function _(e){if(s){var t=e?"disable":"enable",n=e||!H()?"disable":"enable";Y.forEach((function(e){"dragging"===e?s.dragging[n]():s[e][t]()}));J(!e);j()}}function $(){var e=s.containerPointToLayerPoint([0,0]),t=new L.Point(Math.round(e.x),Math.round(e.y));L.DomUtil.setPosition(v,t);M.offsetX(-t.x);M.offsetY(-t.y)}function ee(){$();Be({drawOnly:!0})}function te(t){e.setProperties(fe(),!1,t)}function ne(){return new(L.Layer.extend({initialize:function(e,t){L.Util.setOptions(this,t)},setOptions:function(e){L.Util.setOptions(this,e);return this.redraw()},redraw:function(){this._forceRedraw();return this},onAdd:function(){this.getPane().appendChild(v);s.on("zoomend",this._onZoomEnd,this);s.on("moveend",this._onMoveEnd,this);s.options.zoomAnimation&&s.on("zoomanim",this._animateZoom,this);s.on("zoom",this._zoom,this);c=new cb(g,(function(e){return"pointer-move"===e.pointerEvent.type?null:l.hittest(e.x,e.y)}));J(!0);var e=s.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(v,e)},onRemove:function(){s.off("zoomend",this._onZoomEnd,this);s.off("moveend",this._onMoveEnd,this);c.destroy();J(!1);s.options.zoomAnimation&&s.off("zoomanim",this._animateZoom,this);s.on("zoom",this._zoom,this)},addTo:function(){s.addLayer(this);return this},_onZoomEnd:function(){$();this._forceRedraw({all:!0})},_onMoveEnd:function(){r.trigger("viewchange");t.fire("view-change");this._forceRedraw()},_forceRedraw:function(e){s&&te((function(){Be(e)}))},_animateZoom:function(e){var t=s.getZoomScale(e.zoom),n=s._getCenterOffset(e.center)._multiplyBy(-t).subtract(s._getMapPanePos());L.DomUtil.setTransform(v,n,t)},_zoom:function(e){e.pinch&&te()}}))}function re(e){if(!e)return-1;for(var t=0,n=e;n=n.previousSibling;)++t;return t}function ie(){return o.anyOpenCombos()?a.time*(2/3):a.time}function oe(){var e=i.getZoom();e=Math.min(G,Math.max(T,e));return k+(R-k)*(e-T)/(G-T)}function ue(t){if(a.animate){var n=ie(),r={time:a.time*(1/3),adapt:"none"},i=e.viewOptions();e.combo().close(o.getOpenCombos(),r,(function(){var r=oe();i.zoom===r?e.animateProperties(fe(),{time:n},t):e.viewOptions({zoom:r},{animate:!1},(function(){var o=fe();e.viewOptions(i,{animate:!1},(function(){var i=2;function a(){0==--i&&O(t)}var u={animate:!0,time:n};e.viewOptions({zoom:r},u,a);e.animateProperties(o,u,a)}))}))}))}else e.combo().close(o.getOpenCombos(),{animate:!1},(function(){e.viewOptions({zoom:oe()},{animate:!1},(function(){te(t)}))}))}function fe(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){if(we(e)){var n=dr(dr({},ze(e)),{id:e.id});t.push(n)}}));return t}function ce(n){if(e.privateIsLayingOut())O(n);else{if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot enter map mode while the chart is not on the page.");U();X();if(s||S)O(n);else{E=!0;S=!0;var i=e.lock();e.lock(!0);r.trigger("map","showstart");t.fire("map",{type:"showstart"});Oe();Ge();o.recordState();var u=o.getHiddenOnMapIds();e.hide(u,{time:a.time,animate:a.animate},(function(){ve(null,(function(){ue((function(){Se(a.animate,(function(){de(i,n)}))}))}))}))}}}function de(n,i){C=!0;S=!1;r.trigger("map","showend");t.fire("map",{type:"showend"});n||e.lock(!1);if(h){Te(h[0],h[1]);e.zoom("fit");h=null}B(i)}function he(e,t){return L.Browser.ie3d?"translate("+Math.round(e)+"px,"+Math.round(t)+"px)":"translate3d("+Math.round(e)+"px,"+Math.round(t)+"px, 0px)"}function ve(e,t){v=ge();function n(e,t){e._leaflet_pos=t;e.style.transform=he(t.x,t.y)}L.Draggable.include({_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e);n(this._element,this._newPos);this.fire("drag",e)}});var r=le({boxZoom:!1,zoomAnimationThreshold:20,zoomControl:!1,preferCanvas:!0},a.leaflet);Q(new L.Map(g,r));ye();_(!0);e?i.centerView(e):i.fitMapToBounds(null,!1);pe(t)}function ge(){b=v.style.position;x=v.style.top;v.style.position="absolute";v.style.zIndex="1000";v.classList.add("leaflet-zoom-animated");v.style.transformOrigin="50% 50%";(g=document.createElement("div")).style.width=v.clientWidth+"px";g.style.height=v.clientHeight+"px";g.style.position="relative";g.style.top=v.style.top;g.style.left=v.style.left;(y=v.parentNode).insertBefore(g,v);v.style.pointerEvents="none";return v}function pe(e){var t,n={};function r(){ne().addTo(s);O(e)}if("string"==typeof a.tiles)t=a.tiles;else if(a.tiles){t=a.tiles&&a.tiles.url||Z.tiles.url;n=L.Util.extend(n,a.tiles)}if(t){rb(f=new L.TileLayer(t,n),"loading",r);s.addLayer(f)}else r()}function me(e){if(s){s.removeLayer(f);pe(e)}else O(e)}function ye(){p=document.createElement("canvas");l.setOverlayContext(p.getContext("2d"));var e=s.getSize();p.width=e.x;p.height=e.y;p.style.margin="0";p.style.pointerEvents="none";gr(p,p.getContext("2d"),!1,!1);var t=L.Control.extend({options:{position:"topleft"},onAdd:function(){return p}});m=new t;s.addControl(m)}function be(n,i){o.clearState();S=!1;n.lockChart||e.lock(!1);if(n.triggerEvent){r.trigger("map","hideend");t.fire("map",{type:"hideend"})}B(i)}function xe(n){if(s&&!S){if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot exit map mode while the chart is not on the page.");var u=e.lock(),l=ie();S=!0;e.lock(!0);r.trigger("map","hidestart");t.fire("map",{type:"hidestart"});i.fitMapToBounds(null,a.animate,d)}else O(n);function f(){var t=o.getHiddenOnMapIds();e.show(t,!1,{animate:t.length>0,time:a.time},(function(){be({lockChart:u,triggerEvent:!0},n)}))}function c(t,n,r,i){e.viewOptions(t,{animate:!1},(function(){e.hide(o.getHiddenOnMapIds(),{animate:!1},(function(){e.setProperties(n,!1,(function(){e.viewOptions(r,{animate:!0,time:l});e.animateProperties(i,{time:l},(function(){e.combo().open(o.getOpenCombos(),{time:a.time*(1/3),adapt:"none"},f)}))}))}))}))}function d(){var t,r;Ee({restorePositions:!0,animate:a.animate},(function(){if(a.animate){t=e.viewOptions();r=Re()}Ie((function(){var i=Re();De();e.show(o.getHiddenOnMapIds(),!1,{animate:!1},(function(){e.zoom("fit",{animate:!1},(function(){if(a.animate){var s=e.viewOptions();e.combo().close(o.getOpenCombos(),{animate:!1,adapt:"none"},(function(){c(t,r,s,i)}))}else be({lockChart:u,triggerEvent:!0},n)}))}))}))}))}}function Ae(e){v.style.top=g.offsetTop+"px";var t=w>0?y.childNodes[w+1]:y.firstChild;y.insertBefore(v,t);v.style.transform="";v.style.transformOrigin="";e&&te();Be({positions:!0})}function Ee(e,t){l.setOverlayContext(null);Ae(e.restorePositions);s.removeControl(m);ke(e.animate,(function(){g.parentNode&&g.parentNode.removeChild(g);v.style.pointerEvents="auto";v.style.position=b;v.style.top=x;s.remove();Q(null);O(t)}))}function Ie(t){C=!1;e.combo().open(o.getOpenCombos(),{animate:!1,adapt:"none"},(function(){var n=o.getPositions();if("restore"===a.transition&&n){var r=q(n).filter((function(t){return!e.combo().find(t.id)}));e.setProperties(r,!1,t)}else{var i=e.privateValidateLayoutOptions({animate:!1});e.allowDraw(!1);l.layout("standard",i,(function(){e.allowDraw(!0);O(t)}))}}))}function Ce(t,n,r){if(t)e.privateAnimateBackgroundOpacity(n,{time:a.time},r);else{e.privateSetBackgroundOpacity(n);O(r)}}function Se(e,t){Ce(e,0,t)}function ke(e,t){Ce(e,1,t)}function Le(t){e.privateEach({type:"node",items:"toplevel"},(function(e){e.hi||t({id:e.id,x:e.x,y:e.y})}))}function Re(){var e=[];Le((function(t){e.push(t)}));return e}function Te(e,t){if(C){g.style.height=t+"px";g.style.width=e+"px";var n=p.getContext("2d");p.width=e;p.height=t;gr(p,n,!1,!1);I=!0;s.invalidateSize(!1);I=!1}else h=[e,t]}function Be(e){var n=null!=e?e:{positions:!0};t.privateFire("forceRedraw",n)}function Oe(){var t=e.options();D={};n(F,(function(e,n){D[n]=t[n]}))}function Ge(e){var t;"direct"!==(null===(t=l.options(e?D:F,void 0,!!e).linkStyle)||void 0===t?void 0:t.path)&&l.resetConnectionOffsets()}function De(){Ge(!0);D={}}function Fe(t,n){var r=e.lock();X();C=!0;Oe();ve(t,(function(){Ge();$();te((function(){Se(!1,(function(){r||_(!1);O(n)}))}))}))}function Ze(t){var n=e.lock();X();C=!1;Ee({restorePositions:!1,animate:!1},(function(){De();be({lockChart:n,triggerEvent:!1},t)}))}function Pe(){return!!s}function Ye(e){s.dragging.enabled()!==e&&(e?s.dragging.enable():s.dragging.disable())}function ze(e){var t=s.latLngToContainerPoint([e.pos.lat,e.pos.lng]);return M.worldCoordinates(t.x,t.y)}function Ve(t){var n,r,i,a=P(t);for(r=0;r<a.length;r++)if(W(n=a[r],"pos"))if(n.pos&&A(n.pos.lat)&&A(n.pos.lng)){o.setHiddenOnMap(n.id,!1);i=ze({pos:se(e.getItem(n.id).pos,n.pos)});n.x=i.x;n.y=i.y}else{o.setHiddenOnMap(n.id,!0);n.hi=!0}}return{changeTilesLayer:me,convertPos:Ve,enableDragging:Ye,getLeafletMap:function(){return s},getMapContainer:function(){return g},showMap:ce,hideMap:xe,isLeafletLoaded:N,isMapLoaded:Pe,isShown:function(){return C},isTransitioning:function(){return S},latLngToWorldCoordinates:ze,lockEvents:_,restoreMapMode:Fe,restoreNetworkMode:Ze,setDependencies:function(e){l=(d=e).controller},setHandMode:K,setSize:Te,setView:function(e){M=e},updateNodePositions:te}}function yb(e){var t,n,r;function i(){a();e.privateEach({type:"node",items:"all"},(function(e){var t=e.id;e._combo&&e._combo.open&&n.push(t);e.parentId||l(e)}));e.privateEach({type:"link",items:"toplevel"},(function(e){e.hi||!t[e.id1]&&!t[e.id2]||(t[e.id]=!0)}))}function o(e){t=u(e.hiddenOnMap)||{};n=u(e.openCombos)||[];r=u(e.positions)||{}}function a(){t={};n=[];r={}}function s(){return{hiddenOnMap:u(t),openCombos:u(n),positions:u(r)}}function l(e){var n=e.id;delete r[n];delete t[n];we(e)?r[n]={id:n,x:e.x||0,y:e.y||0}:e.hi||(t[n]=!0)}function f(n){if("link"===n.type&&!n.hi){var r=e.getItem(n.id1),i=e.getItem(n.id2);r&&i&&we(r)&&we(i)||(t[n.id]=!0)}}a();return{anyOpenCombos:function(){return n&&n.length>0},clearState:a,getPositions:function(){return r},getOpenCombos:function(){return n},getHiddenOnMapIds:function(){return Object.keys(t)},isHiddenOnMap:function(e){return t[e]},setHiddenOnMap:function(e,n){t[e]=n},deserialize:o,serialize:s,recordLinkState:f,recordNodeState:l,recordState:i}}function bb(e,t){var n=null;function r(e){n=e}function i(e,t,r,i){b(i);n.setZoom(e,{animate:t})}function o(){return n.getZoom()}function a(e){if(e.length){var t=L.latLngBounds(e),n=t.getNorth(),r=t.getSouth(),i=t.getWest(),o=t.getEast();if(n===r&&i===o){var a=.01;t=L.latLngBounds([[n-a,i-a],[n+a,i+a]])}return t}}function u(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){we(e)&&!e.hi&&t.push(L.latLng(e.pos.lat,e.pos.lng))}));return t}function s(e,t){if(o()!==t)return!0;var r=n._limitCenter(e,t,n.options.maxBounds),i=n._getCenterOffset(r).floor();return!(!i.x&&!i.y)}function l(e){var r=L.point([2*(t.padding||0),2*(t.padding||0)]),i=n.getBoundsZoom(e,!1,r);if(o()!==i)return!0;var a=n.project(e.getSouthWest(),i),u=n.project(e.getNorthEast(),i);return s(n.unproject(a.add(u).divideBy(2),i),i)}function f(e,r,i){var f=a(e||u());if(f)if(void 0===o()||l(f)){b(i);n.fitBounds(f,{animate:!!r,padding:[t.padding||0,t.padding||0]})}else O(i);else{var c=L.latLng(0,0),d=2;if(s(c,d)){b(i);n.setView(c,d,{animate:!!r})}else O(i)}}function c(t,r,i){var o=e.viewCoordinates(t.x1,t.y1),a=e.viewCoordinates(t.x2,t.y2);return f([n.containerPointToLatLng([o.x,o.y]),n.containerPointToLatLng([a.x,a.y])],!!r,i)}function d(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];N(r)||!we(r)||r.hi||t.push(L.latLng(r.pos.lat,r.pos.lng))}return t}function h(t,n,r){var i=d(e.getItem(t));i.length?f(i,!!n,r):O(r)}function v(){return n.getMaxZoom()}function g(){return n.getMinZoom()}function p(){return Math.min(1,(v()-g())/10)}function m(t,r,i,a,s,l){var d={animate:!!r,duration:A(i)?i/1e3:.25};switch(t){case"in":b(l);n.zoomIn(p(),d);break;case"out":b(l);n.zoomOut(p(),d);break;case"fitToExtents":c(s,r,l);break;case"fit":case"fitToModel":a?h(a,r,l):f(u(),!!r,l);break;case"selection":case"fitToSelection":h(e.selection(),r,l);break;case"height":case"fitModelHeight":var g=-1/0,m=-1/0,y=1/0,x=1/0,w=function(e){var t=e;if(null!==t&&we(t)&&!t.hi){if(t.pos.lat>g){g=t.pos.lat;m=t.pos.lng}if(t.pos.lat<y){y=t.pos.lat;x=t.pos.lng}}};a?e.privateGetItem(a).forEach(w):e.privateEach({type:"node",items:"toplevel"},w);isFinite(g)&&isFinite(m)&&isFinite(y)&&isFinite(x)?f([[g,m],[y,x]],!!r,l):E(l)&&O(l)}return o()/v()}function y(e,t){n.panBy(e,t)}function b(e){E(e)&&rb(n,"moveend",(function(t){e()}))}function x(t,r,i,o){var u=null,s=100,l={animate:!!r,duration:A(i)?i/1e3:.25};b(o);if("selection"===t){var f=[],c=e.getItem(e.selection());if(c.length){for(var d=void 0,h=0;h<c.length;h++)if("node"===(d=c[h]).type){var v=d;we(v)&&!v.hi&&f.push(L.latLng(v.pos.lat,v.pos.lng))}n.panInsideBounds(a(f),l)}}else{switch(t){case"up":u=[0,-s];break;case"down":u=[0,s];break;case"left":u=[-s,0];break;case"right":u=[s,0]}u&&n.panBy(u,l)}}function w(e){n.setView([e.lat,e.lng],e.zoom,{reset:!0})}return{fitMapToBounds:f,getMaxZoom:v,getMinZoom:g,getZoom:o,pan:x,panBy:y,setLeafletMap:r,centerView:w,setZoom:i,zoom:m}}function xb(e,t,r){var i={animate:!0,time:800,tiles:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',subdomains:"abcd",minZoom:0,maxZoom:20},transition:"restore",padding:5},o="#ddd",a=bb(e,i),s=yb(e),l=pb(e,t,r,a,s,i),f=l.isLeafletLoaded();function c(){throw new Error("Leaflet was not found. Make sure you include leaflet.js and leaflet.css in your web page.")}function d(e){return f?e:c}function h(){return o}function v(e,t){var n=l.getMapContainer();e?n.style.background=e:t?Jn(n,t.stops,1):n.style.background=o}function g(e,t){var n=l.getLeafletMap().latLngToContainerPoint([e,t]);return{x:n.x,y:n.y}}function p(e,t){var n=l.getLeafletMap().containerPointToLatLng([e,t]);return{lat:n.lat,lng:n.lng}}function m(e,t){if(e){n(e,(function(e,t){switch(t){case"padding":case"time":A(e)&&(i[t]=e);break;default:i[t]=e}}));"tiles"in e&&l?l.changeTilesLayer(t):O(t)}return u(i)}function y(){if(!f)return null;var e=l.getLeafletMap(),t={show:l.isShown()};if(t.show){var n=e.getCenter();t.lat=n.lat;t.lng=n.lng;t.zoom=e.getZoom();t.bounds=e.getBounds().toBBoxString();var r=s.serialize();t.hiddenOnMap=r.hiddenOnMap;t.openCombos=r.openCombos;t.restoreXY=r.positions}return t}function b(e,t,n,r,i){return Ky(l.getLeafletMap(),e,t,n,r,i)}function x(e,t){s.deserialize({hiddenOnMap:e.hiddenOnMap,openCombos:e.openCombos,positions:e.restoreXY});if(l.isShown()){a.centerView(e);l.updateNodePositions(t)}else l.restoreMapMode(e,t)}function w(e){l.isShown()?l.restoreNetworkMode(e):O(e)}function M(e,t){if(f){var n=e||{};n.show?x(n,t):w(t)}else O(t)}function E(e){if("node"===e.type){s.recordNodeState(e);if(we(e)){var t=l.latLngToWorldCoordinates(e);e.x=t.x;e.y=t.y}else e.hi||(e.hi=!0)}}function I(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if("node"===i.type){var o=e.getItem(i.id);if(o){var a=s.getPositions(),u={};s.isHiddenOnMap(i.id)?u.hi=!1:"hi"in o&&(u.hi=o.hi);if(a[i.id]){u.x=a[i.id].x;u.y=a[i.id].y}o.pos&&(u.pos=o.pos);i=se(u,i)}E(i)}"link"===i.type&&s.recordLinkState(i);n.push(i)}return n}return{api:{show:d(l.showMap),hide:d(l.hideMap),viewCoordinates:d(g),mapCoordinates:d(p),isShown:function(){return l&&l.isShown()},leafletMap:l.getLeafletMap,options:d(m)},internalUse:{convertPos:l.convertPos,enableDragging:l.enableDragging,getDefaultBackgroundColour:h,getMapContainer:l.getMapContainer,getMaxZoom:a.getMaxZoom,getMinZoom:a.getMinZoom,getZoom:a.getZoom,isMapLoaded:l.isMapLoaded,isTransitioning:l.isTransitioning,loadUp:M,lock:l.lockEvents,pan:a.pan,panBy:a.panBy,preMerge:I,preSetItem:E,serialize:y,setBackgroundColour:v,setDependencies:l.setDependencies,setHandMode:l.setHandMode,setSize:l.setSize,setView:l.setView,setZoom:a.setZoom,toDataURL:b,zoom:a.zoom}}}function Ab(e,t,n,r,i,o){var a=0,u=0,s=0,l=0,f=0,c=e||0,d=t||0,h=i||1;function v(e){e&&(h=e);return h}function g(e){return h*e}function p(){return{width:c,height:d,zoom:s,offsetX:l,offsetY:f}}function m(e,t,n,r){return Ie(s,_(e.zoom),e.offsetX-l,e.offsetY-f,t,n,r)}function y(e,t,i){if(t){var o=Ab(e.width,e.height,n,r);o.setZoom(e.zoom,!1);o.offsetX=e.offsetX;o.offsetY=e.offsetY;return fe({x1:o.viewToWorldX(0),y1:o.viewToWorldY(0),x2:o.viewToWorldX(o.width()),y2:o.viewToWorldY(o.height())},null,!1,!1,!1,!1,0)}q(e.zoom,!1,void 0,void 0,!0);l=e.offsetX;f=e.offsetY;if(i){l=c/2-(M(e.width/2)-a)*s;f=d/2-(E(e.height/2)-u)*s}n&&n.fire("view-change");r&&r.trigger("viewchange");return null}function b(e){e&&(c=e);return c}function x(e){e&&(d=e);return d}function A(e){return((e-a)*s+l)*h}function w(e){return((e-u)*s+f)*h}function M(e){return(e/h-l)/s+a}function E(e){return(e/h-f)/s+u}function I(e){return-1===e?-1:e*s*h}function C(e){return-1===e?-1:I(e)+7}function S(e){return e/(s*h)}function k(e){return e&&e*s*h}var L=1.4,R=4,T=.05,B=T,G=.001,D=1,F=200,Z=1/0,P=100;function Y(){return!(!o||!o.internalUse.isMapLoaded())}function z(e){R=e}function W(){return R}function X(){return B}function U(e,t){void 0===t&&(t=!1);B=t&&e||Math.min(D,Math.max(G,e||T));s<B&&Ie(s,B,l,f,!1)}function N(e){Z=e||1/0}function j(){return Z}function K(e,t,n){return ge(Q(),h*c/2,h*d/2,e,t,n)}function H(e,t,n){return ge(J(),h*c/2,h*d/2,e,t,n)}function Q(){return _(s*L)}function J(){return _(s/L)}function _(e){return Math.min(R,Math.max(e,B))}function q(e,t,n,r,i){void 0===i&&(i=!1);return ge(_(e),h*c/2,h*d/2,t,n,r,i)}function $(){return s>Z?Z/s:1}var ee,te,ne,ie,oe=1e3/60*4;function ue(e,t,n,r){return ge(_(s*(1+e/300)),t,n,r,oe)}function se(e){return e?{x1:A(e.x1),y1:w(e.y1),x2:A(e.x2),y2:w(e.y2)}:null}function le(e,t,n,r,i,o,a,u){if(!e){O(a);return null}return fe(se(e),null,t,n,r,i,o,!1,a,void 0,u)}function fe(e,t,n,r,i,o,v,g,p,m,y){var b;if((e.y2-e.y1)/(e.x2-e.x1)>d/c){b=s*(d-(o?d/8:0))/(e.y2-e.y1)}else{b=s*(c-(o?c/8:0))/(e.x2-e.x1)}b*=h;r&&(b=_(b));i&&b>1&&(b=1);m&&(b=s);var x=(e.x1+e.x2)/2,A=(e.y1+e.y2)/2,w=t?(t.x1+t.x2)/2:M(x),I=t?(t.y1+t.y2)/2:E(A);return Ie(s,b,c/2-(w-a)*b-l,d/2-(I-u)*b-f,n,v,p,g,y)}function ce(e,t,n,r,i,o,a,u,s){t.generate(n,r,Te,!0,!1);var l=n.itemExtents(e,r);if(l){var f=se(l);if(s){var c=void 0;c=e?f.x1+(f.x2-f.x1)/2:b()/2;f.x1=c;f.x2=c}return fe(f,l,i,!0,!0,!0,o,!1,a,u)}O(a);return null}function de(e,t,n,r,i,o,a,u){return ce(e.privateSelection(),e,t,n,r,i,a,u)}function he(e,t,n,r,i,o,a,u){return o?ce(re(o),e,t,n,r,i,a,u):ce(null,e,t,n,r,i,a)}function ve(e,t,n,r,i,o,a,u){return o?ce(re(o),e,t,n,r,i,a,u,!0):ce(null,e,t,n,r,i,a,!1,!0)}function ge(e,t,n,r,i,o,c){void 0===c&&(c=!1);var d=_(e),v=M(t),g=E(n);return Ie(s,d,t/h-(v-a)*d-l,n/h-(g-u)*d-f,r,i,o,c)}function pe(e){a=421;u=298;if(e)Ie(s,1,421-l,298-f,!0);else{l=421;f=298;s=1}}function me(){return s}function ye(){return Y()?o.internalUse.getZoom():s}function be(){var e=c/2;return-(1-Ae()/e)+(e-a)/e*s}function xe(){var e=d/2;return 1-we()/e-(e-u)/e*s}function Ae(e){V(e)&&(l=e);return l}function we(e){V(e)&&(f=e);return f}function Me(e,t,n,r){var i=0,o=0;switch(e){case"up":o=1;break;case"down":o=-1;break;case"left":i=1;break;case"right":i=-1}return Ee(i*=P,o*=P,t,!1,n,r)}function Ee(e,t,n,r,i,o){return Ie(s,s,e,t,n,i,o,r)}function Ie(e,t,i,o,a,u,c,d,h){var v=i||0,g=o||0;if(a)return Ce(e,t,v,g,u,c,h);l+=v;f+=g;s=t;if(r&&!d){r.trigger("viewchange");n&&n.fire("view-change")}O(c);return null}function Ce(e,t,i,o,a,u,c){void 0===c&&(c=$u);var d=a||F,h=d,v=l,g=f;return Ar((function(a){h-=a;var p=c(Math.max(0,Math.min(1,(d-h)/d)));l=v+p*i;f=g+p*o;s=_(e+p*(t-e));var m=h>0;n&&n.fire("view-change");if(!m){r&&r.trigger("viewchange");O(u)}return m}),{drawOnly:!0})}function Se(e){var t=Y(),i=t?-3:.1;return Ar((function(a){var u=0===te&&0===ne;if(t)o.internalUse.panBy([te*i,ne*i],{animate:!1});else{l+=a*i*te;f+=a*i*ne}ee=!u;e&&e(ie);if(!u){r&&r.trigger("viewchange");n&&n.fire("view-change")}return!u}),{positions:!0})}function ke(){te=0;ne=0}function Le(e,t,n){var r=e.x,i=e.y,o=g(50);te=0;ne=0;ie=e;r<o&&(te=1);r>g(c)-o&&(te=-1);i<o&&(ne=1);i>g(d)-o&&(ne=-1);if(t.direction){t.direction.horizontalMovement||(te=0);t.direction.verticalMovement||(ne=0)}if((0!==te||0!==ne)&&!ee){ee=!0;return Se(n)}return null}function Re(e,t){var n=Te.scale(e),r=Te.scale(t);return{x:Te.viewToWorldX(n),y:Te.viewToWorldY(r)}}pe();var Te={cancelScroll:ke,fitExtents:fe,fitModelHeight:ve,fitToModel:he,fitToSelection:de,fitWorldExtents:le,fromOldSettings:y,fromSettingsDirect:m,getMaxItemZoom:j,setMaxZoom:z,getMaxZoom:W,getMinZoom:X,getUnzoom:$,getZoomScale:me,height:x,maybeScroll:Le,offsetX:Ae,offsetXtoWebglPanX:be,offsetY:we,offsetYtoWebglPanY:xe,pan:Me,panBy:Ee,reset:pe,scale:g,scaleFactor:v,setMaxItemZoom:N,setMinZoom:U,settings:p,setZoom:q,sw:C,viewToWorldDistance:S,viewToWorldX:M,viewToWorldY:E,w:I,wheelToPosition:ue,width:b,worldExtentsToView:se,worldToViewDistance:k,worldToViewX:A,worldToViewY:w,x:A,y:w,worldCoordinates:Re,zoom:ye,zoomIn:K,zoomOut:H,zoomToPosition:ge};return Te}var wb=80,Mb=20;function Eb(e,t,n,r,i){void 0===i&&(i=1);var o,a={},u={},s=[],l={},f=21,c=12;function d(){return null!==n&&n.api.isShown()}function h(){return null!==n&&n.internalUse.isMapLoaded()}var v,g,p,y,b,x,A=Ht.white,w=Ht.lightgrey,M=Ht.darkmodegrey;function E(e){k();v=Jt(e[0],e[1],e[2],1)}function I(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e&&l[e]&&l[e].apply(l,hr([e,t,n],r))}function C(e,t){return e in a?a[e](t):null}function S(e){return o[e]||null}function k(){a={};o={};u={};s=[];l={}}function L(e){return e&&e in u?u[e]:"auto"}function R(e,t,n,r,i){e.setLayerPath(null);for(var o=0;o<s.length;o++)s[o].generate(e,t,n,r,i)}function T(e){for(var t=0;t<s.length;t++){var n=s[t];if(n.watermarkSize)return n.watermarkSize(e)}return null}function B(e){var t=15,n="_logo",i=e.u,o=r.get(i,Fy(),!0),a={generate:function(r,a,u){r.setLayer(So.OVERLAYS);var s=o.im.width,l=o.im.height,f=e.p||"ne",c=("w"===f.charAt(1)?t:u.width()-(s+t))+(e.x||0),d=("n"===f.charAt(0)?t:u.height()-(l+t))+(e.y||0);r.image(u.scale(c),u.scale(d),u.scale(c+s),u.scale(d+l),i,n,-1,null,0,!0)}};s.push(a)}function O(e,t,n,r){var i={generate:function(i,o,a){i.setLayer(So.UNDERLAYS);var u=-1===r.indexOf("leaflet-left")?a.width()-t:0,s=-1===r.indexOf("leaflet-top")?a.height()-n:0;e&&i.image(u,s,u+t,s+n,e.src,null,-1,null,0,!1)}};s.push(i)}function G(e,t){var n,o=z(e,{fs:wb,fc:Ht.lightgrey,ff:t}),a=o.u,u=o.t,l=o.fs,f=o.fc,c=o.fb,d=o.fbc,h=o.a,v=o.ff,g=l*i;a&&(n=r.get(a,!1,!0));var p={watermarkSize:function(e){var t,r;if(n){var i=n.im;t=i.width;r=i.height}else if(u){t=or(e,u,g,c,v).width;r=g}return t?{width:t+10,height:r+10}:null},generate:function(e,t,r){var i,o;e.setLayer(So.UNDERLAYS);if(n){var s=n.im;i=r.scale((r.width()-s.width)/2);o=r.scale((r.height()-s.height)/2);e.image(i,o,i+r.scale(s.width),o+r.scale(s.height),a,null,-1,null,0,!1)}else if(u){var l=r.scale(g),p=or(t,u,g,c,v).width;i=r.scale((r.width()-p)/2);o=r.scale((r.height()+g)/2);var m=-3.5,y=Math.floor(l/8);"top"===h&&(o=l+y);"bottom"===h&&(o=r.scale(r.height())+1);d&&e.rect(i-m,o-l-y,i+p+m+y,o,d,-1,d,!0,null,-1);e.text(r.scale(r.width()/2),o-l/2,u,f,l,!!c,null,-1,v,!0,p,!1,!1,i+m,o-l,i+p+m,o)}}};s.push(p)}function D(e,t,n,r,i,o,a){e.rect(t.scale(n),t.scale(r),t.scale(i),t.scale(o),Ht.transparent,-1,Ht.transparent,!0,a,-1)}function F(e,t){return Mm[""+e+("dark"===t?"DM.png":".png")]}function Z(e,i,v,g){var p=F("Nav-Control-Head",g),m=F("Nav-Control-Zoom",g),y=F("Nav-Control-Short-Zoom",g),b=F("Slider",g),x=F("Hand",g),A=F("Arrow",g);r.getControlColourImage(p,!1);var w=r.getControlColourImage(m,!1),M=r.getControlColourImage(y,!1);r.get(b,!1,!0);r.get(x,!1,!0);r.get(A,!1,!0);var E=7,I=17,C=62,S=z()?145:247,k=v.p||"nw",L=("w"===k.charAt(1)?E:i.width()-(E+C))+(v.x||0),R=("n"===k.charAt(0)?I:i.height()-(I+S))+(v.y||0),T=L+21,B=R+118,O=R+215;l._zoomIn=function(){e.zoomIn(!0)};l._zoomOut=function(){e.zoomOut(!0)};l._panLeft=function(){e.pan("left",!0)};l._panRight=function(){e.pan("right",!0)};l._panUp=function(){e.pan("up",!0)};l._panDown=function(){e.pan("down",!0)};l._fitToWindow=function(){e.fitToModel(!0)};l._toggleMode=function(){var t=e.options();t.handMode=!t.handMode;e.options(t)};function G(){return!!e.options().handMode}l._scale=function(e,t,n){Z(n,!0)};function Z(t,n){var r=Y(t-c/2);e.setZoom(r,n)}u._zoomIn="pointer";u._zoomOut="pointer";u._panLeft="pointer";u._panRight="pointer";u._panUp="pointer";u._panDown="pointer";u._fitToWindow="pointer";u._toggleMode="pointer";u._scale="pointer";u._slider='grab, url("'+Mm["openhand.png"]+'"), pointer';a._slider=function(r){var a="slider",u=!1;o._slider="slider";var s=r,l=d()?i.zoom():i.settings();if(z())return null;if(t.trigger("dragstart","slider"))return null;d()&&n.internalUse.enableDragging(!1);return{type:a,rebuild:{drawOnly:!0},getCursor:function(){return"move"},setLastProps:function(e){s=e},getLastProps:function(){return s},dragMove:function(e){s=e;e.dragging.started&&Z(e.y,!1)},endDrag:function(r){if(!u){u=!0;(t.trigger("dragend","slider")||r)&&(d()&&"number"==typeof l?e.setZoom(l,!1):"number"!=typeof l&&i.fromSettingsDirect(l,!1));d()&&n.internalUse.enableDragging(!!e.options().handMode);t.trigger("dragcomplete","slider")}}}};function P(e){var t,r,o;if(h()){t=n.internalUse.getMinZoom();r=Math.max(n.internalUse.getMaxZoom(),t+1);o=e}else{t=Math.log(i.getMinZoom());r=Math.log(i.getMaxZoom());o=Math.log(e)}var a=(o-t)/(r-t);return Math.floor(B+(1-a)*(O-B))}function Y(e){var t,r=1-(e-B)/(O-B);if(d()){var o=n.internalUse;t=(o.getMaxZoom()-o.getMinZoom())*r+o.getMinZoom()}else t=Math.exp(r*(Math.log(i.getMaxZoom())-Math.log(i.getMinZoom()))+Math.log(i.getMinZoom()));return t}function z(){return i.height()<300}var V={generate:function(e,t,n,r,i){if(!i){e.setLayer(So.OVERLAYS);e.image(n.scale(L+5),n.scale(R+6),n.scale(L+57),n.scale(R+58),p,null,-1,"co",0,!0);var o=16,a=100;z()?e.image(n.scale(L+o),n.scale(R+a),n.scale(L+o+M.im.width/2),n.scale(R+a+M.im.height/2),y,null,-1,"co",0,!0):e.image(n.scale(L+o),n.scale(R+a),n.scale(L+o+w.im.width/2),n.scale(R+a+w.im.height/2),m,null,-1,"co",0,!0);var u=L+19,s=R+64,l=n.scale(u),d=n.scale(s),h=n.scale(u+28),v=n.scale(s+32),g=G()?x:A;e.image(l,d,h,v,g,null,-1,null,0,!0);e.setLayer(So.OVERLAYSSHADOW);e.image(l,d,h,v,g,"_toggleMode",-1,null,0,!1);var E=5,I=23,C=39,S=57,k=105,B=z()?124:222,O=18,F=3,Z=68,Y=22;D(e,n,L+I,R+k,L+C,R+k+O,"_zoomIn");D(e,n,L+I,R+B,L+C,R+B+O,"_zoomOut");D(e,n,L+E,R+I,L+I,R+C,"_panLeft");D(e,n,L+C,R+I,L+S,R+C,"_panRight");D(e,n,L+I,R+E,L+C,R+I,"_panUp");D(e,n,L+I,R+C,L+C,R+S,"_panDown");D(e,n,L+I,R+I,L+C,R+C,"_fitToWindow");z()||D(e,n,L+I,R+k+O,L+C,R+B,"_scale");D(e,n,L+I-F,R+Z,L+C+F,R+Z+Y,"_toggleMode");if(!z()){
var V=P(n.zoom()),W=n.scale(T),X=n.scale(V),U=n.scale(T+f),N=n.scale(V+c),j=4;e.image(W-j,X-j,U+j,N+j,b,"_slider",-1,null,0,!1);e.setLayer(So.OVERLAYS);e.image(W,X,U,N,b,null,-1,null,0,!0)}}}};s.push(V)}var P={ne:"sw",nw:"se",se:"nw",sw:"ne"};function Y(n,i,f,c,d,h,E){var I=d.p&&P[d.p]?d.p:"se",C=F("Arrow-"+P[I],h),S=F("Arrow-"+I,h);d.size=d.size||100;g=d.size;y=!!d.shown;b="n"===I.charAt(0);x="w"===I.charAt(1);var k=(p=c(g,g)).getContext("2d"),L=!1,R=!1,T=Date.now(),B=Ab(g,g,e,t);l._overviewIcon=function(){d.shown=!d.shown;y=d.shown;t.trigger("overview",y?"open":"close");e.privateFire("redraw",{drawOnly:!0})};u._overviewIcon="pointer";function O(e){var t={x1:f.viewToWorldX(f.scale(-e)),x2:f.viewToWorldX(f.scale(f.width()+e)),y1:f.viewToWorldY(f.scale(-e)),y2:f.viewToWorldY(f.scale(f.height()+e))};return{x1:B.worldToViewX(t.x1),x2:B.worldToViewX(t.x2),y1:B.worldToViewY(t.y1),y2:B.worldToViewY(t.y2)}}var G,D,Z=null,Y=!1,z=0,V=0,W=0,X=0,U=2;u._overviewBox='url("'+Mm["openhand.png"]+'"), pointer';function N(){W+=G.x;X+=G.y;e.privateFire("redraw")}function j(){D=m(N,50)}function K(){if(D){clearInterval(D);D=null}}a._overviewBox=function(e){var r=!1,i="overview";o._overviewBox="overview";if(t.trigger("dragstart",i))return null;var a=e;Y=e.dragging.started;var u=2;z=0;V=0;W=0;X=0;var s=-Z.x1+u,l=g-Z.x2-u,c=-Z.y1+u,d=g-Z.y2-u;return{type:i,rebuild:{drawOnly:!0},setLastProps:function(e){a=e},getLastProps:function(){return a},getCursor:function(){return"move"},dragMove:function(e){a=e;if(e.dragging.started){K();z=e.x-e.dragging.startX;V=e.y-e.dragging.startY;G={x:0,y:0};var t=!1;if(z<s){z=s;G.x=U;t=!0}if(z>l){z=l;G.x=-U;t=!0}if(V<c){V=c;G.y=U;t=!0}if(V>d){V=d;G.y=-U;t=!0}t&&j()}},endDrag:function(e){if(!r){r=!0;Y=!1;K();if(!(t.trigger("dragend","overview")||e)){var i=-(z-W)*(f.zoom()/B.zoom()),o=-(V-X)*(f.zoom()/B.zoom());n.panBy(i,o,!0)}t.trigger("dragcomplete","overview")}}}};function H(e){var t=Math.max(e.width(),e.height())/2;B.reset(!1);var n=O(t);B.fitExtents(n,null,!1,!1,void 0,void 0,void 0,!0);var r=e.getMaxItemZoom();r!==1/0&&B.setMaxItemZoom(r/8);Y&&B.panBy(W,X,!1,!0)}function Q(e,t){return{x1:e.scale(x?-1:e.width()-t),y1:e.scale(b?-1:e.height()-t),x2:e.scale(x?t:e.width()+1),y2:e.scale(b?t:e.height()+1)}}var J={generate:function(t,o,a,u,s){if(!s){var l=Math.max(1,a.scale(1));if(y){var f=Q(a,g),c=d.borderColour||w;(q=d.backColour)||(q="dark"===h&&E?E:A);t.setLayer(So.OVERLAYSSHADOW);t.rect(f.x1,f.y1,f.x2,f.y2,q,-1,q,!0,"_overviewBorder1",-1);t.rect(f.x1,f.y1,f.x2,f.y2,c,l,q,!1,"_overviewBorder2",-1);t.setLayer(So.OVERVIEW);t.rect(f.x1,f.y1,f.x2,f.y2,c,l,q,!1,null,-1);if(i){var p=Date.now();if(L&&!Y&&p<T+1e3&&R)e.privateFire("redraw");else{T=Date.now();L=!0;if(o.webgl){H(a);n.setOverviewView(B)}else{k.clearRect(0,0,g,g);var m=yn(q,1/sn(q));k.fillStyle=m;k.fillRect(0,0,g,g);H(a);ao(t,k,null,B,n.options(),!1,!0,null,!1,0,0,void 0,r)}R=Date.now()-T>30}Z||(Z=O(0));var I=Y?z:0,G=Y?V:0,D=Y?"_overviewBoxDragging":"_overviewBox",F=a.scale(x?Z.x1+I:a.width()-g+Z.x1+I),P=a.scale(b?Z.y1+G:a.height()-g+Z.y1+G),W=a.scale(x?Z.x2+I:a.width()-g+Z.x2+I),X=a.scale(b?Z.y2+G:a.height()-g+Z.y2+G),U=Math.max(1,a.scale(2)),N=d.borderColour||v||w,j=yn(N,.5);t.setLayer(So.OVERVIEWSHADOW);t.rect(F,P,W,X,N,U,j,!Y,D,-1);t.setLayer(So.OVERVIEW);t.rect(F,P,W,X,N,U,j,!Y,D,-1)}}var K=y?S:C,J=r.get(K,!1,!0).im;if(d.icon){var _=J.width/2,q=(c="dark"===h?M:w,"dark"===h?Ht.darkmodeblue:Ht.white),$=Q(a,_);t.setLayer(So.OVERVIEW);t.rect($.x1,$.y1,$.x2,$.y2,c,l,q,!0,"_overviewIconRect",-1);t.image(a.scale(x?0:a.width()-_),a.scale(b?0:a.height()-_),a.scale(x?_:a.width()),a.scale(b?_:a.height()),K,"_overviewIcon",-1,"co",0,!0);r.getControlColourImage(K);t.setLayer(So.OVERVIEWSHADOW);var ee=2*_;t.rect(a.scale(x?-1:a.width()-ee),a.scale(b?-1:a.height()-ee),a.scale(x?ee:a.width()+1),a.scale(b?ee:a.height()+1),w,-1,A,!0,"_overviewIcon",-1)}}}};s.push(J)}function V(e,t,n){var r=42*i,o={generate:function(i,o,a){i.setLayer(So.OVERLAYS_REQUIRED);var u=or(o,e,r).width,s=a.scale((a.width()-u)/2),l=a.scale((a.height()+r)/2);i.text(s+2,l+2-a.scale(r)/2,e,n,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s+2,l+2-a.scale(r),s+2+u,l+2);i.text(s,l-a.scale(r)/2,e,t,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s,l-a.scale(r),s+u,l)}};s.push(o)}function W(e,t){if(y&&p){var n=t.scale(g);e.drawImage(p,0,0,n,n,t.scale(x?0:t.width()-g),t.scale(b?0:t.height()-g),n,n)}}function X(e,t){var n=6,r=3,o=3,a=6,u={generate:function(u,s,l){var f=se({top:!0},e);if(f&&f.bands){var c=void 0,d=void 0,h=void 0,v=void 0,g=void 0,p=void 0,m=void 0;u.setLayer(So.BANDS);var y=1/0;for(c=0;c<f.bands.length;c++)if((g=f.bands[c]).t){d=l.worldToViewDistance(g.w/2);h=g.ff||t;p=.75*(v=(g.fs||Mb)*i);(m=or(s,g.t,v,g.fb,h).width/2)+p>d&&(v=Math.floor(v*d/(m+p)));v<y&&(y=v)}y!==1/0&&(p=.75*y);for(c=0;c<f.bands.length;c++){g=f.bands[c];var b=l.x(g.x),x=l.x(g.x-g.w/2),A=l.x(g.x+g.w/2),w=l.scale(-1),M=l.scale(l.height()+1);d=l.worldToViewDistance(g.w/2);var E=g.c||"#f7f7f7";u.rect(x,w,A,M,"white",-1,E,!0,"",-1);if(g.t&&y>3){u.setLayer(So.BANDLABELS);h=g.ff||t;m=or(s,g.t,y,g.fb,h).width/2;var I=g.fc||Ht.lightgrey,C=l.scale(y),S=(A-x)/2-m;if(f.top){var k=n+C;u.rect(x,w,A,k+r,"white",-1,E,!0,"",-1,void 0);u.text(b,k-C/2,g.t,I,C,g.fb,"",-1,h,!0,2*m,!1,!1,x+S,w+2*r,A+S,k+2*r,void 0,void 0,void 0)}if(f.bottom){var L=l.height()-o,R=L-(C+a);u.rect(x,R,A,M,"white",-1,E,!0,"",-1,void 0);u.text(b,L-C/2,g.t,I,C,g.fb,"",-1,h,!0,2*m,!1,!1,x+S,R+2*r,A+S,R+2*r+v,void 0,void 0,void 0)}u.setLayer(So.BANDS)}}}}};s.push(u)}return{addBanding:X,addLogo:B,addMapAttribution:O,addNavigation:Z,addOverview:Y,addTextWatermark:G,chooseDefaultDragger:S,createDragger:C,doclick:I,drawOverviewContent:W,generate:R,getCursor:L,getWatermarkSize:T,remove:V,reset:k,setup:E}}var Ib,Cb={CANVAS:"Unable to export, failed to create canvas",SVG:"Unable to export, failed to create export SVG",FAILED:"Unable to export",FAILED_WITH_ERROR:function(e){return"Unable to export: "+e.name+" - "+e.message}},Sb={NOT_EMBEDDED:"Font specified but not embedded in exported file",ERR_LOADING:"Error loading font",FORMAT:"Fonts to embed should be supplied in .woff or .ttf format",BOLD_WEIGHT:"Bold weight font not supplied: bold formatting will not be applied in export"},kb="data:application/font-",Lb="charset=utf-8;base64,",Rb=new RegExp("^"+kb+"([^;]*);"),Tb=["woff","ttf"];function Bb(e,t,n,r){e.push({type:"font",fontFamily:n,msg:t,src:null==r?void 0:r.src,weight:null==r?void 0:r.weight})}function Ob(e,t,n){Object.keys(t).forEach((function(t){Bb(e,Sb.NOT_EMBEDDED,t)}));n&&Object.keys(n).forEach((function(t){Bb(e,Sb.BOLD_WEIGHT,t)}))}function Gb(e,t,n,r){-1===Tb.indexOf(n)&&Bb(r,Sb.FORMAT,t,e)}function Db(e,t,r,i,o){var a=0;function u(e,n){var i,u="bold"===e.weight?n+"-bold":n,s=e.src,l=s.match(Rb);if(l){i=l[1];Gb(e,n,i,t);if(o){o(u,e,i);return}}else{i=s.slice((Math.max(0,s.lastIndexOf("."))||1/0)+1);Gb(e,n,i,t)}var f=new XMLHttpRequest;f.open("GET",s);f.responseType="arraybuffer";f.onload=function(){f.readyState===f.DONE&&200===f.status?r(u,f.response,i):Bb(t,Sb.ERR_LOADING,n,e);--a};f.onerror=function(){Bb(t,Sb.ERR_LOADING,n,e);--a};++a;f.send()}var s=function(){a>0?setTimeout(s,100):i()};n(e,(function(e,t){var n=xe(t).toLowerCase();e.forEach((function(e){u(e,n)}))}));s()}function Fb(e){return function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{t=e.apply(void 0,n)}catch(e){throw new Error(e.message?Cb.FAILED_WITH_ERROR(e):Cb.FAILED)}return t}}function Zb(e,t,n,r,i){var o=function(r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}},a=o(i),u=o(r),s=i-r<=Math.PI?"0":"1";return"M "+a.x+" "+a.y+" A "+n+" "+n+" 0 "+s+" 0 "+u.x+" "+u.y}function Pb(e,t){e.beginPath();t.segments.forEach((function(t){switch(t.type){case en.MoveTo:e.moveTo(t.value[0],t.value[1]);break;case en.LineTo:e.lineTo(t.value[0],t.value[1])}}));t.closed&&e.closePath();var n=t.stroke,r=n.width,i=n.colour,o=n.opacity;e.strokeStyle=yn(i,o);e.lineWidth=r;t.fill&&(e.fillStyle=yn(t.fill.colour,t.fill.opacity));e.stroke();t.fill&&e.fill()}var Yb=((Ib={})[qt.arc]=Dr,Ib[qt.bezier]=jr,Ib[qt.circle]=Zr,Ib[qt.rect]=Vr,Ib[qt.line]=Yr,Ib[qt.triangle]=Nr,Ib[qt.text]=Xr,Ib[qt.image]=Pr,Ib[$t.smootharea]=Pb,Ib);function zb(e,t){return Vb(e.toDataURL(t),t)}function Vb(e,t){for(var n=atob(e.split(",")[1]),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([i],{type:t})}function Wb(e,t){var n;return{pluginType:"export-image",name:e,load:function(r,i,o){n=i;r.width*r.height>100*Math.pow(2,20)&&n.push({type:"size",msg:"Exported image exceeds 100 megapixels and could fail to export successfully due to browser memory limitations."});var a=oo(r.width,r.height),u=oo(r.width,r.height),s=a;if(!s||!u)throw new Error(Cb.CANVAS);o({drawPrimitive:function(e){(0,Yb[e.type])(s,e,t)},drawToBackground:function(){s=u},drawToForeground:function(){s=a},commitBackground:function(){var e=null==u?void 0:u.canvas;if(!a||!e)throw new Error(Cb.FAILED);a.globalAlpha=r.backgroundAlpha;a.drawImage(e,0,0,e.width,e.height);a.globalAlpha=1;u=oo(r.width,r.height)},finish:function(t){if(!a)throw new Error(Cb.FAILED);var r=a.canvas;if(!r)throw new Error(Cb.FAILED);var i="image/"+e,o=function(e){if(!e)throw new Error(Cb.FAILED);t({url:window.URL.createObjectURL(e),warnings:n})};if(void 0!==r.toBlob)r.toBlob(o,i);else{o(zb(r,i))}}})}}}var Xb="http://www.w3.org/2000/svg",Ub={arial:!0,"'courier new'":!0,georgia:!0,tahoma:!0,"'times new roman'":!0,"'trebuchet ms'":!0,verdana:!0,cursive:!0,emoji:!0,fangsong:!0,fantasy:!0,math:!0,monospace:!0,"sans-serif":!0,serif:!0,courier:!0,helvetica:!0,times:!0},Nb={otf:"opentype",ttf:"truetype"};function jb(e){for(var t=new Uint8Array(e),n=t.byteLength,r="",i=0;i<n;i++)r+=String.fromCharCode(t[i]);return window.btoa(r)}function Kb(e,t){var r=document.createElementNS(Xb,e);n(t,(function(e,t){r.setAttribute(t,e)}));return r}function Hb(e){var t,r,i,o,u,s,l;function f(){var e=Kb("clipPath",{id:"cut-out-clip-path",clipPathUnits:"objectBoundingBox"}),t=Kb("ellipse",{cx:"0.5",cy:"0.5",rx:"0.5",ry:"0.5"});e.appendChild(t);return e}function c(e,t){var n=document.createElementNS(Xb,"style"),r=Nb[t.format]||t.format;n.setAttribute("type","text/css");n.textContent+="\n    @font-face {\n      font-family: "+e+';\n      src: url("'+t.src+'") format("'+r+'");\n    }';s.appendChild(n)}function d(e,t){Db(e,u,(function(e,t,n){var i=jb(t);r[e]={src:""+kb+n+";"+Lb+i,format:n};"-bold"!==e.slice(-5)||r[e.slice(0,-5)]||(r[e.slice(0,-5)]=r[e])}),t,(function(e,t,n){r[e]={src:t.src,format:n}}))}function h(e){var t="gradient"+l++,n=Kb("linearGradient",{id:t,gradientUnits:"userSpaceOnUse",x1:""+e.direction.start.x,y1:""+e.direction.start.y,x2:""+e.direction.end.x,y2:""+e.direction.end.y});e.stops.sort((function(e,t){return e.offset-t.offset})).forEach((function(e){var t=Kb("stop",{offset:""+e.offset,"stop-color":e.colour,"stop-opacity":""+e.opacity});n.appendChild(t)}));s.appendChild(n);return t}function v(e){var t=e.angle,n=e.origin,r=a(t);return"translate("+n.x+" "+n.y+") rotate("+r+")"}function g(e,t,n,r){void 0===r&&(r=0);var i={};if("gradient"===e.type){var o=h(e);i.stroke="url(#"+o+")"}else{i.stroke=e.colour;i["stroke-opacity"]=""+e.opacity}i["stroke-width"]=""+t;if(n){i["stroke-dasharray"]=n.dash+" "+n.gap;i["stroke-dashoffset"]=""+((n.dashOffset||0)+r);n.dash<1&&(i["stroke-linecap"]="round")}return i}function p(e,t){var n=t.x,r=t.y,i=t.r,o=t.segments,a=t.dashing,u=t.strokeWidth;o.forEach((function(t){var o=t.startAngle,s=t.endAngle,l=t.strokeStyle,f=t.offset,c=Kb("path",dr({d:Zb(n,r,i,o,s),fill:"none"},g(l,u,a,f)));e.appendChild(c)}))}function m(e,t){var n=t.start,r=t.end,i=t.strokeStyle,o=t.strokeWidth,a=t.dashing,u=t.offset,s=Kb("path",dr({d:"M "+n.x+" "+n.y+" L "+r.x+" "+r.y,fill:"none"},g(i,o,a,u)));e.appendChild(s)}function y(e,t){var n=t.segments,r=t.strokeWidth,i=t.dashing;n.forEach((function(t){var o=t.xs,a=t.ys,u=t.strokeStyle,s=t.offset,l=Kb("path",dr({d:"M "+o[0]+" "+a[0]+" C "+o[1]+" "+a[1]+" "+o[2]+" "+a[2]+" "+o[3]+" "+a[3],fill:"none"},g(u||n[0].strokeStyle,r,i,s)));e.appendChild(l)}))}function b(e){return e?{fill:e.colour,"fill-opacity":""+e.opacity}:{fill:"none"}}function x(e,t){if(e&&e.width>0){var n={stroke:e.colour,"stroke-opacity":""+e.opacity,"stroke-width":""+e.width};t&&(n["stroke-dasharray"]=t.dash+" "+t.gap);return n}return{stroke:"none"}}function A(e,t){var n=t.x,r=t.y,i=t.r,o=t.fill,a=t.stroke,u=t.dashing,s=Kb("circle",dr(dr({cx:""+n,cy:""+r,r:""+i},b(o)),x(a,u)));e.appendChild(s)}function w(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.fill,u=t.stroke,s=t.cornerRadius,l=t.rotation,f=Kb("g",{}),c=s?{rx:""+s,ry:""+s}:{};l&&(c.transform=v(l));var d=i-n,g=o-r,p="gradient"===(null==a?void 0:a.type)?{fill:"url(#"+h(a)+")"}:b(a),m=Kb("rect",dr(dr(dr({x:""+n,y:""+r,width:""+d,height:""+g},c),p),x(u)));f.appendChild(m);e.appendChild(f)}function M(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.x3,u=t.y3,s=t.fill,l=t.stroke,f=t.rotation,c=dr(dr({},b(s)),x(l));f&&(c.transform=v(f));c.points=n+", "+r+" "+i+", "+o+" "+a+", "+u;e.appendChild(Kb("polygon",c))}function E(e){var t=e.rotation,n=e.x1,r=e.y1,i={x:""+n,y:""+r,width:""+(e.x2-n),height:""+(e.y2-r),opacity:""+e.alpha};t&&(i.transform=v(t));return i}function I(e){return Kb("image",dr({href:Oy,preserveAspectRatio:"none"},E(e)))}function C(t,r){var i=document.createElementNS(Xb,"g");t.appendChild(i);var o=r.specifier,a=r.src,u=r.x1,s=r.y1,l=r.x2,f=r.y2;"ci"===o&&i.setAttribute("clip-path","url(#cut-out-clip-path)");var c="url"===a.type?e.getSVG(a.url):null;if(c){var d=c.cloneNode(!0);if(!d.getAttribute("viewBox")){var h=d.getAttribute("width"),v=d.getAttribute("height");h&&v&&d.setAttribute("viewBox","0 0 "+parseInt(h)+" "+parseInt(v))}n(E(r),(function(e,t){d.setAttribute(t,e)}));i.appendChild(d)}else{var g=Math.min(l-u,f-s),p=g<64?128/g:2,m=(h=(l-u)*p,v=(f-s)*p,void 0);if(m="url"===a.type?e.getDataUri(a.url,h,v):Yy(a.el,h,v)){var y=Kb("image",dr({href:m,preserveAspectRatio:"none"},E(r)));i.appendChild(y)}else i.appendChild(I(r))}}function S(e){var t=e.size,n=e.colour,r=e.fontFamily,i=e.text,o=e.x,a=e.y,u=e.rotation,s=xe(r).toLowerCase(),l=1.5,f=t*l,c=Math.max(2*f,128),d=c/l,h=c/2,v=document.createElement("canvas");v.width=c;v.height=c;var g=v.getContext("2d");if(!g)return null;g.fillStyle=n.colour;g.textAlign="center";g.textBaseline="middle";g.font=d+"px "+s;g.fillText(i,h,h);var p=k(o-f/2,a-f/2,u);return Kb("image",dr(dr({href:v.toDataURL()},p),{width:""+f,height:""+f,opacity:""+n.opacity}))}function k(e,t,n){var r={x:""+e,y:""+t};n&&(r.transform=v(n));return r}function L(e,t){var n=t.text,a=t.x,u=t.y,s=t.rotation,l=t.size,f=t.colour,c=t.fontFamily,d=t.isBold,h=t.textAlign,v=!0,g=xe(c).toLowerCase();if(d&&r[g+"-bold"]){o[g+="-bold"];v=!1}else if(r[g])o[g]=!0;else if(!Ub[g]){i[g]=!0;if(t.isFontIcon){var p=S(t);if(p){e.appendChild(p);return}}}var m=dr({"font-family":g+("sans-serif"===g?"":", sans-serif"),"font-size":l+"px",fill:f.colour,"fill-opacity":""+f.opacity,"dominant-baseline":"central","text-anchor":"center"===h?"middle":"start"},k(a,u,s));d&&v&&(m["font-weight"]="bold");var y=Kb("text",m);y.textContent=Oe(n);e.appendChild(y)}function R(e,t){return Kb("svg",{width:""+e,height:""+t,viewBox:"0 0 "+e+" "+t})}var T=((t={})[qt.arc]=p,t[qt.bezier]=y,t[qt.circle]=A,t[qt.rect]=w,t[qt.line]=m,t[qt.triangle]=M,t[qt.text]=L,t[qt.image]=C,t[$t.smootharea]=function(e,t){},t);return{pluginType:"export-image",name:"svg",load:function(t,n,a){var h=t.width,v=t.height,g=t.fonts,p=R(h,v),m=document.createElementNS(Xb,"g"),y=p;if(!y)throw new Error(Cb.SVG);r={};i={};o={};u=n;s=document.createElementNS(Xb,"defs");p.appendChild(s);s.appendChild(f());l=0;var b={drawPrimitive:function(t){(0,T[t.type])(y,t,e)},drawToBackground:function(){y=m},drawToForeground:function(){y=p},commitBackground:function(){if(!m||!p)throw new Error(Cb.FAILED);m.setAttribute("opacity",""+t.backgroundAlpha);p.appendChild(m);m=document.createElementNS(Xb,"g")},finish:function(e){if(!p)throw new Error(Cb.FAILED);Object.keys(o).forEach((function(e){c(e,r[e])}));var t=(new XMLSerializer).serializeToString(p),n=new Blob([t],{type:"image/svg+xml"});Ob(u,i);if(!n)throw new Error(Cb.FAILED);e({url:URL.createObjectURL(n),warnings:u})}};g?d(g,(function(){a(b)})):a(b)}}}var Qb={courier:{regular:"Courier",bold:"Courier-Bold",asciiOnly:!0},"courier-oblique":{regular:"Courier-Oblique",bold:"Courier-BoldOblique",asciiOnly:!0},helvetica:{regular:"Helvetica",bold:"Helvetica-Bold",asciiOnly:!0},"helvetica-oblique":{regular:"Helvetica-Oblique",bold:"Helvetica-BoldOblique",asciiOnly:!0},"times-roman":{regular:"Times-Roman",bold:"Times-Bold",asciiOnly:!0},"times-italic":{regular:"Times-Italic",bold:"Times-BoldItalic",asciiOnly:!0},symbol:{regular:"Symbol",bold:"Symbol",asciiOnly:!0},zapfdingbats:{regular:"ZapfDingbats",bold:"ZapfDingbats",asciiOnly:!0},"courier-bold":{regular:"Courier-Bold",bold:"Courier-Bold",asciiOnly:!0},"courier-boldoblique":{regular:"Courier-BoldOblique",bold:"Courier-BoldOblique",asciiOnly:!0},"helvetica-bold":{regular:"Helvetica-Bold",bold:"Helvetica-Bold",asciiOnly:!0},"helvetica-boldoblique":{regular:"Helvetica-BoldOblique",bold:"Helvetica-BoldOblique",asciiOnly:!0},"times-bold":{regular:"Times-Bold",bold:"Times-Bold",asciiOnly:!0},"times-bolditalic":{regular:"Times-BoldItalic",bold:"Times-BoldItalic",asciiOnly:!0}},Jb={monospace:"courier","sans-serif":"helvetica",serif:"times-roman","system-ui":"helvetica","ui-monospaced":"courier","ui-serif":"times-roman"};function _b(e){var t,n,r,i,o,a,u,s;function l(e,n,r){var u="sans-serif",s=u+"-bold";Db(n,a,(function(e,n){t[e]=n;"-bold"!==e.slice(-5)||t[e.slice(0,-5)]||(t[e.slice(0,-5)]=n)}),(function(){if(t[u]){e.registerFont(u,t[u]);i[u]=!0;var n=u;if(t[s]){e.registerFont(s,t[s]);i[s];n=s}o={regular:u,bold:n,asciiOnly:!1}}else o=Qb.helvetica;r()}))}var f,c=!1;function d(e){var t=e,n=t.doc,r=t.heading;if("undefined"==typeof PDFDocument||"object"!=typeof PDFDocument.prototype)throw new Error("PDFKit was not found. To export to PDF make sure pdfkit.standalone.js is included in your webpage");if(n instanceof PDFDocument){s=n;c=!0;try{s.save()}catch(e){throw new Error("Unable to use the supplied PDF doc. Ensure a valid PDFKit doc has been provided.")}f={font:s._font.name,fontSize:s._fontSize}}else{if("function"!=typeof blobStream)throw new Error("blobStream was not found. To export to PDF make sure blob-stream.js is included in your webpage");try{s=new PDFDocument(n)}catch(e){throw new Error("Unable to create PDF doc. Ensure valid PDFKit options have been provided.")}if(!s)throw new Error("No PDF doc created.")}var i=s.page.margins,o=i.left,a=i.right,u=i.top,l=i.bottom;if(!(A(o)&&A(a)&&A(u)&&A(l)))throw new Error('Invalid or missing margin value. Ensure a valid "margin" value or "margins" object has been specified for the PDF document.');var d=s.y,h=s.page.width-s.x-a;if(r&&!c){s.fontSize(s.page.height/30);d+=s.heightOfString(r,{width:h})+s.currentLineHeight(!0)}var v=s.page.height-d-l;if(h<=0||v<=0)throw new Error("No space available on page for exported image.");return{availablePage:{width:h,height:v}}}function h(d,h,p){t={};i={};n={};r={};a=h;(u="function"==typeof SVGtoPDF)||a.push({type:"dependency",name:"svg-to-pdfkit",msg:"SVG-to-PDFKit not found: any SVGs in the chart will be rendered as PNGs in the export."});var m,y,b,x,A=d.width,w=d.height,M=d.heading,E=d.fonts,I=0;if(c){y=s.x;b=s.y}else{m=s.pipe(blobStream());var C=s.page,S=C.margins,k=S.left,L=S.right,R=C.width-k-L;I=(R-A)/2;M&&s.fontSize(s.page.height/30).text(M,{width:R,align:"center"}).moveDown()}s.translate(s.x+I,s.y);s.rect(0,0,A,w).clip();var T={drawPrimitive:function(t){var n=O[t.type];s.save();n(s,t,e);s.restore()},drawToBackground:function(){x&&g(s,x,!1);x=v(s,A,w)},commitBackground:function(){if(x){g(s,x,!0,d.backgroundAlpha);x=void 0}},drawToForeground:function(){if(x){g(s,x,!1);x=void 0}s.fillOpacity(1)},finish:function(e){if(x){g(s,x,!1);x=void 0}Ob(a,n,r);if(c){s.restore();s.font(f.font);s.fontSize(f.fontSize);s.x=y;s.y=b+w;e({warnings:a})}else{s.end();m.on("finish",(function(){e({url:m.toBlobURL("application/pdf"),warnings:a})}))}}};if(E)l(s,E,(function(){p(T)}));else{o=Qb.helvetica;p(T)}}function v(e,t,n){var r={name:"G"+(e._groupCount=(e._groupCount||0)+1),resources:e.ref({}),xobj:e.ref({Subtype:"Form",BBox:[0,0,t,n],Group:{S:"Transparency",I:!0}}),savedMatrix:e._ctm,savedPage:e.page};e._ctm=[1,0,0,1,0,0];e.page={width:e.page.width,height:e.page.height,write:function(e){r.xobj.write(e)},fonts:e.page.fonts,xobjects:e.page.xobjects,ext_gstates:e.page.ext_gstates,patterns:e.page.patterns};return r}function g(e,t,n,r){void 0===r&&(r=1);Object.keys(e.page.fonts).length&&(t.resources.data.Font=e.page.fonts);Object.keys(e.page.xobjects).length&&(t.resources.data.XObject=e.page.xobjects);Object.keys(e.page.ext_gstates).length&&(t.resources.data.ExtGState=e.page.ext_gstates);Object.keys(e.page.patterns).length&&(t.resources.data.Pattern=e.page.patterns);t.resources.end();t.xobj.end();e._ctm=t.savedMatrix;e.page=t.savedPage;if(n){e.fillOpacity(r);e.page.xobjects[t.name]=t.xobj;e.addContent("/"+t.name+" Do")}}function p(e,t){var n=e.linearGradient(t.direction.start.x,t.direction.start.y,t.direction.end.x,t.direction.end.y);t.stops.sort((function(e,t){return e.offset-t.offset})).forEach((function(e){n.stop(e.offset,"#"+dn(e.colour),e.opacity)}));return n}function m(e,t,n,r,i){void 0===i&&(i=0);"gradient"===t.type?e.strokeColor(p(e,t)):e.strokeColor("#"+dn(t.colour),t.opacity);e.lineWidth(n).lineCap("butt");if(r){e.dash(r.dash,{space:r.gap,phase:(r.dashOffset||0)+i});r.dash<1&&e.lineCap("round")}else e.undash()}function y(e,t){if(t){e.fillColor("#"+dn(t.colour),t.opacity);return!0}return!1}function b(e,t,n){if(t&&t.width>0){e.strokeColor("#"+dn(t.colour),t.opacity).lineWidth(t.width).lineCap("butt");n?e.dash(n.dash,{space:n.gap}):e.undash();return!0}return!1}function x(e,t,n){t&&n?e.fillAndStroke():t?e.fill():n&&e.stroke()}function w(e,t){var n=t.x,r=t.y,i=t.r,o=t.segments,a=t.dashing,u=t.strokeWidth;o.forEach((function(t){var o=t.startAngle,s=t.endAngle,l=t.strokeStyle,f=t.offset;m(e,l,u,a,f);e.path(Zb(n,r,i,o,s)).stroke()}))}function M(e,t){var n=t.segments,r=t.strokeWidth,i=t.dashing;n.forEach((function(t){var o=t.xs,a=t.ys,u=t.strokeStyle,s=t.offset;m(e,u||n[0].strokeStyle,r,i,s);var l=["M",o[0],a[0],"C",o[1],a[1],o[2],a[2],o[3],a[3]].join(" ");e.path(l).stroke()}))}function E(e,t){var n=t.x,r=t.y,i=t.r,o=t.fill,a=t.stroke,u=t.dashing;e.circle(n,r,i);x(e,y(e,o),b(e,a,u))}function I(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.fill,u=t.stroke,s=t.cornerRadius,l=t.rotation,f=i-n,c=o-r;l&&e.translate(l.origin.x,l.origin.y).rotate(180*l.angle/Math.PI);s?e.roundedRect(n,r,f,c,s):e.rect(n,r,f,c);var d=!1;if("gradient"===(null==a?void 0:a.type)){e.fillColor(p(e,a));d=!0}else d=y(e,a);x(e,d,b(e,u))}function C(e,t){var n=t.start,r=t.end;m(e,t.strokeStyle,t.strokeWidth,t.dashing,t.offset);var i=["M",n.x,n.y,"L",r.x,r.y].join(" ");e.path(i).stroke()}function S(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.x3,u=t.y3,s=t.fill,l=t.stroke,f=t.rotation;f&&e.translate(f.origin.x,f.origin.y).rotate(180*f.angle/Math.PI);e.polygon([n,r],[i,o],[a,u]);x(e,y(e,s),b(e,l))}function k(e,t,n,r,i,o,a){var u=t.x,s=t.y,l=t.colour,f=t.fontFamily,c=t.text,d=document.createElement("canvas");d.width=r;d.height=r;var h=d.getContext("2d");if(h){h.fillStyle=l.colour;h.textAlign="center";h.textBaseline=i;h.font=n+"px '"+f+"'";h.fillText(c,.5*r,r*o);e.image(d.toDataURL(),u-a/2,s-a/2,{fit:[a,a],align:"center",valign:"center"})}}function L(e,t){var n=1.5,r=t.size*n,i=Math.max(2*r,128);k(e,t,i/n,i,"middle",.5,r)}function R(e,t){var n=1.25*t.size,r=Math.max(n,128);k(e,t,84*r/128,r,"alphabetic",.75,n)}function T(e,a){var u=a.text,s=a.x,l=a.y,f=a.rotation,c=a.size,d=a.colour,h=a.fontFamily,v=a.isBold,g=a.textAlign,p=a.isFontIcon;f&&e.translate(f.origin.x,f.origin.y).rotate(180*f.angle/Math.PI);var m=xe(h).toLowerCase();v&&(t[m+"-bold"]?m+="-bold":t[m]&&(r[m]=!0));var y=!1;if(t[m]){if(!i[m]){e.registerFont(m,t[m]);i[m]=!0}e.font(m)}else{if(p){n[m]=!0;L(e,a);return}var b=Qb[m]||Qb[Jb[m]];if(!b){n[m]=!0;b=o}e.font(v?b.bold:b.regular);y=b.asciiOnly}e.fontSize(c).fillColor("#"+dn(d.colour),d.opacity);if(p||y&&!Re(u)){var x="center"===g?s-e.widthOfString(u)/2:s;e.text(u,x,l,{lineBreak:!1,baseline:"middle"})}else{var A="",w=0,M=ct(Be(Te(u)),u,!1).result.map((function(e){return e.text})),E=M.reduce((function(t,n){return Re(n)?t+c:t+e.widthOfString(n)}),0),I="center"===g?s-E/2:s;M.forEach((function(t){if(Re(t)){if(y){e.text(A,I,l,{lineBreak:!1,baseline:"middle"});A="";I+=w;w=0}R(e,z({text:t,x:I+=c/2},a));I+=c/2}else if(y){A+=t;w+=e.widthOfString(t)}else{e.text(t,I,l,{lineBreak:!1,baseline:"middle"});I+=e.widthOfString(t)}}));y&&A.length>0&&e.text(A,I,l,{lineBreak:!1,baseline:"middle"})}}function B(t,n){var r=n.src,i=n.x1,o=n.y1,s=n.x2,l=n.y2,f=n.specifier,c=s-i,d=l-o;"ci"===f&&t.ellipse((i+s)/2,(o+l)/2,c/2,d/2).clip();function h(n){var a,u=Math.min(c,d),s=u<64?128/u:2,l=c*s,h=d*s;if("url"===r.type)if("png"===n||"jpeg"===n)a=e.getDataUri(r.url,l,h);else{var v=e.getHTMLElement(r.url,f);v&&(a=Yy(v,l,h))}else a=Yy(r.el,l,h);t.image(a||e.getMissingImage().src,i,o,{width:c,height:d})}var v="url"===r.type?zy(r.url):"";if(u&&"url"===r.type&&"svg"===v.slice(0,3)){var g=e.getSVG(r.url);if(g){var p=g.cloneNode(!0);try{SVGtoPDF(t,p,i,o,{width:c,height:d,preserveAspectRatio:"none"})}catch(e){a.push({type:"image",src:r.url,msg:"Unable to embed image as SVG: embedded as PNG instead."});h(v)}return}}h(v)}var O={arc:w,bezier:M,circle:E,rectangle:I,line:C,triangle:S,text:T,image:B,smootharea:function(){}};return{pluginType:"export-image",name:"pdf",load:Fb(h),initialize:Fb(d)}}function qb(){return{pluginType:"export-image",name:"test",load:function(e,t,r){var i=e.backgroundAlpha,o=[],a=[];e.fonts&&n(e.fonts,(function(e,t){e.forEach((function(e){o.push(dr({type:"font",fontFamily:t},e))}))}));var u=o;if(!u||!a)throw new Error(Cb.FAILED);r({drawPrimitive:function(e){u.push(e)},drawToBackground:function(){u=a},drawToForeground:function(){u=o},commitBackground:function(){o.push.apply(o,hr([{type:"background-start",backgroundAlpha:i}],a,[{type:"background-end"}]))},finish:function(e){var n=new Blob([JSON.stringify(o)],{type:"application/json"});e({url:URL.createObjectURL(n),warnings:t})}})}}}function $b(e,t){return e.initialize&&e.initialize(t)}function ex(e,t,n,r){"export-image"===e.pluginType&&e.name&&"function"==typeof e.load&&e.load(dr({},t),n,r)}function tx(e,t,n){var r,i,o,a,u=e.controller,s=u.modelExtents,l=u.isMapMode,f=e.getView(),c=t.extents,d=n&&n.availablePage,h=[],v=null,g=1;"chart"!==c||l()||(v=s())||h.push({type:"size",msg:"Cannot use chart extents of empty chart: exporting view instead"});if(v){var p=f.worldExtentsToView(v),m=p.x1,y=p.x2,b=p.y1,x=p.y2,w=Math.min(y-m,x-b)/8;r=y-m+w;i=x-b+w;o=(m+y)/2;a=(b+x)/2}else{o=(r=f.width())/2;a=(i=f.height())/2}if(!l()){var M=t.fitTo,E=0,I=0;if("page"===M&&d){E=d.width;I=d.height}else if(M&&"page"!==M){E=A(M.width)&&M.width||0;I=A(M.height)&&M.height||0}if(E>0&&I>0){var C=E/I;r/i>C?i=r/C:r=i*C;g=Math.min(E/r,I/i)}else E>0?g=E/r:I>0&&(g=I/i)}var S=Math.max(1/r,1/i);if(S>g){g=S;h.push({type:"size",msg:"One or both dimensions are less than 1px: image will be scaled up."})}var k=!1;if(d){var L=Math.min(d.width/r,d.height/i);if(L<g){g=L;k=!0;h.push({type:"size",msg:"Exported image is larger than available page space: image will be scaled to fit the page."})}}var R=Ab(r,i),T=f.settings().zoom*g;if(T<R.getMinZoom()){R.setMinZoom(T,!0);if(T<.001){var B=Math.round(r*g*1e3)/1e3,O=Math.round(i*g*1e3)/1e3;h.push({type:"size",msg:"Export dimensions ("+B+"px X "+O+"px) below recommended values for current chart size and zoom level. "+(k?"Try increasing available page space or page size.":"Try supplying larger height and/or width dimensions in the fitTo export option.")})}}R.setMaxZoom(1/0);R.fromSettingsDirect(f.settings(),!1);var G=f.worldCoordinates(o,a),D=G.x,F=G.y;R.width(r*g);R.height(i*g);R.setZoom(T,!1);var Z=R.worldToViewX(D),P=R.worldToViewY(F),Y=R.width()/2,z=R.height()/2;R.panBy(-(Z-Y),-(P-z),!1,!0);return{scale:g,exportView:R,sizeWarnings:h}}function nx(e,t,n,r,i){var o=t.settings().zoom/e.settings().zoom,a={x:0-r.minX,y:0-r.minY,sx:r.minX*o,sy:r.minY*o};r.tiles.forEach((function(e,t){var r;if(Uy(t)){var u=n.get(t.src);if(u.isMissing)return;r=u.im}else{if(!Ny(t))return;r=t}var s=(e.x-a.x)*o-a.sx,l=(e.y-a.y)*o-a.sy,f=s+e.width*o,c=l+e.height*o;i.drawPrimitive({type:qt.image,src:{type:"html",el:r},specifier:null,x1:s,y1:l,x2:f,y2:c,alpha:1})}))}function rx(e,t,n,r,i){var o=document.createElement("canvas");o.width=e;o.height=t;var a=o.getContext("2d"),u=[];if(a){var s=i.backgroundColor||"rgba(255, 255, 255, 0.7)",l=i.color||"rgb(51, 51, 51)",f=i.fontFamily.split(",")[0].replace(/"/g,"")||"Helvetica",c=Number(i.fontSize.replace("px","")),d=Number(i.paddingLeft.replace("px","")),h=Number(i.paddingRight.replace("px","")),v=Number(i.lineHeight.replace("px","")),g=or(a,n,c,!1,f).width,p=g+h+d;p>e?sr(n,u,p=e,g,a,c,f):u.push(n);a.fillStyle=s;a.fillRect(0,0,e,t);a.fillStyle=l;a.textAlign="left";a.textBaseline="middle";a.font=c+"px '"+f+"'";u.forEach((function(e,t){a.fillText(e,d,v*(.5+t))}));return r.get(o.toDataURL(),!1,!0)}}function ix(e){return e.stops.sort((function(e,t){return e.r-t.r})).map((function(e){return dr({offset:e.r},En(e.c))}))}function ox(e,t,n){var r,i,o=[];(null===(r=n.gradient)||void 0===r?void 0:r.stops)&&(o=ix(n.gradient));o.length>1&&!n.backColour?e.drawPrimitive({type:qt.rect,x1:0,y1:0,x2:t.width,y2:t.height,stroke:void 0,fill:{type:"gradient",direction:{start:{x:0,y:0},end:{x:0,y:t.height}},stops:o}}):e.drawPrimitive({type:qt.rect,x1:0,y1:0,x2:t.width,y2:t.height,stroke:void 0,fill:dr({type:"solid"},En(null!==(i=n.backColour)&&void 0!==i?i:"white"))})}function ax(e,t,n,r,i){var o,a=Bo(((o={})[So.UNDERLAYS]={isContentLayer:!0,hideFromExport:!1,useView:!1},o)),u=Eb(Gh,Sr,null,r,i),s=Number(t.width.replace("px","")),l=Number(t.height.replace("px","")),f=rx(s,l,e,r,t)
;u.addMapAttribution(f,s*i,l*i,n);return{widgets:a,overlays:u}}function ux(e,t,n){var r,i=t.bands,o=t.watermark,a=t.fontFamily,u=Bo(((r={})[So.UNDERLAYS]={isContentLayer:!0,hideFromExport:!1,useView:!1},r[So.BANDS]={isContentLayer:!0,hideFromExport:!1,useView:!1},r)),s=Eb(Gh,Sr,null,e,n);(null==i?void 0:i.bands)&&s.addBanding(i,a);o&&s.addTextWatermark(o,a);return{widgets:u,overlays:s}}function sx(e,t,n,r){var i,o=Bo(((i={})[So.BANDLABELS]={isContentLayer:!0,hideFromExport:!1,useView:!1},i[So.OVERLAYS_REQUIRED]={shadowType:-1,useView:!1,alwaysUpdate:!0,isContentLayer:!0,hideFromExport:!1},i)),a=Eb(Gh,Sr,null,e,n),s={},l=t.bands;(null==l?void 0:l.bands)&&(s.bands=u(l));r(a,s,!1);return{widgets:o,overlays:a}}function lx(e,t,n,r,i){var o=document.createElement("canvas").getContext("2d");t.startGeneratingForExtras();n.generate(t,o,i,null,!0);to(t,i,r,!1,!1,r.backgroundAlpha,r.ghostAlpha,!0,void 0,e)}function fx(e,t){if(/^(pdf|svg|test)$/.test(t.type)){var n=t.fonts;if(n&&S(n)){var r={};Object.keys(n).forEach((function(e){var t=P(n[e]);r[e]=[];t.forEach((function(t){"string"==typeof t.src&&r[e].push(t)}))}));e.fonts=r}e.noAdaptive=!0}"pdf"===t.type&&(e.heading=t.heading)}function cx(e,t,n,r,i,o,a,u){var s=Fb(to),l=Fb(lx);s(e,n,r,!1,!1,r.backgroundAlpha,r.ghostAlpha,!0,void 0,i,o,a);l(i,t.widgets,t.overlays,r,n);i.finish(u)}function dx(e){var t=e.controller,n=t.getWidgets,r=t.getInternalChartOptions,i=t.getChartCanvas,o=t.isMapMode,a=t.getMapApi,u=t.initOverlays,s=e.imageManager,l=s.createImageLookup(),f=new Map;f.set("png",Wb("png",l));f.set("jpeg",Wb("jpeg",l));f.set("test",qb());f.set("svg",Hb(l));f.set("pdf",_b(l));return{exportImage:function(t,l){var c=e.getView(),d=t.type,h=f.get(d);if(!h)throw new Error("Export format '"+d+"' not supported");var v=Gy(),g=$b(h,t),p=tx(e,t,g),m=p.scale,y=p.exportView,b=p.sizeWarnings,x=r(),A=n(),w={width:y.width(),height:y.height(),backgroundAlpha:x.backgroundAlpha};fx(w,t);ex(h,w,b,(function(e){var t,n;ox(e,w,x);var r=Math.max(m,Math.min(y.width()/c.width(),y.height()/c.height())),f=sx(s,x,r,u),d=function(){cx(A,f,y,x,e,m,w.noAdaptive,l)};if(o()){var h=i(),g=null===(t=a())||void 0===t?void 0:t.api.leafletMap();if(!h||!g)throw new Error("Unable to Export");var p=null===(n=g.attributionControl)||void 0===n?void 0:n._container;jy(g,h,!1,v,(function(t){var n;nx(c,y,v,t,e);if(null==p?void 0:p.textContent){var i=window.getComputedStyle(p),o=Array.from((null===(n=p.parentElement)||void 0===n?void 0:n.classList)||[]),a=ax(p.textContent,i,o,s,r),u=a.widgets,l=a.overlays;s.waitForImages((function(){lx(e,u,l,x,y);d()}))}else d()}))}else{var b=ux(s,x,r),M=b.widgets,E=b.overlays;lx(e,M,E,x,y);d()}}))}}}var hx={MIN:-50,MAX:50};function vx(e){return S(e)}function gx(){var e=new Map;function t(){e.clear()}function n(t){return e.get(t)}function r(e){var t=1,n=0,r=0;"e"in e&&A(e.e)&&e.e>0&&(t=e.e);"dx"in e&&A(e.dx)&&(n=Ie(e.dx,hx.MIN,hx.MAX));"dy"in e&&A(e.dy)&&(r=Ie(e.dy,hx.MIN,hx.MAX));return{e:t,dx:n,dy:r}}function i(t){vx(t)&&Object.keys(t).forEach((function(n){var i=t[n];if(vx(i)){var o=r(i),a=parseInt(n,10);if(A(a)){var u=String.fromCharCode(a);e.set(u,o)}else e.set(n,o);t[n]=o}}))}return{clear:t,getImage:n,updateAlignmentRecords:i}}function px(){throw new Error("Chart has been destroyed")}function mx(e,t,r,i,o){var a=Oh(),s=Cr(),l=r.privateGetElement(),f=gx(),c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]};function d(e,t){var n=M.hittest(e,t);if(n){var r=J(n),i=de(n);return{id:Q(n),subItem:r?ym(i,r):{}}}}function h(e,t){var n;if(!t)throw new Error("[export] callback is required");var r,i=e;i.type=null===(n=i.type)||void 0===n?void 0:n.toLowerCase();if(i.doc){r="pdf"===i.type&&i.doc;delete i.doc}var o=z(i,{type:"png",extents:"view"});r&&(o.doc=r);g.update();k.exportImage(o,t)}var v={animateProperties:Ne,arrange:kt,bind:s.bind,clear:ne,combo:H,contains:ct,createLink:Gt,destroy:Ve,each:tt,expand:Ot,export:h,filter:nt,foreground:it,getItem:_e,getItemInfoAt:d,graph:V,hide:ot,labelPosition:ft,layout:Et,load:$,lock:bt,map:W,merge:ie,off:a.off,on:a.on,options:mt,pan:At,ping:Je,removeItem:$e,selection:Rt,serialize:ht,setContainer:We,setItem:qe,setProperties:Xe,show:st,toDataURL:q,unbind:s.unbind,viewCoordinates:gt,viewOptions:pt,worldCoordinates:vt,zoom:xt},g=dr(dr({_leafletEventHandlers:null,applyRevealedLinkOffsets:xe,cancelAnimation:Mt,privateCanvasApi:r,chartType:ee,displayOptions:mt,getExtents:T,getLastError:wt,ggwp:j,hidden:ut,interactionOptions:mt,privateAddItemsToTransfer:Te,privateAllParentsOpen:ke,privateAnimateBackgroundOpacity:He,privateAnimateProperties:je,privateBothEndsForeground:Ie,privateBothEndsShown:Ee,privateEach:Me,privateFirstVisibleItemInAncestry:Se,privateGetAncestryIds:Le,privateGetCanvas:pe,privateGetGenerator:me,privateGetItem:de,privateGetLinksBetween:Ze,privateGetMapContainer:Y,privateGetMaxLabelLength:yt,privateGetParentItems:Ce,privateGetRawItems:ge,privateGetTopItemId:ve,privateGraph:Fe,privateHideWithoutCombos:at,privateInit:B,privateIsLayingOut:c,privateItemIsShown:he,privateMapSetSize:F,privateMerge:we,privateNeighbourLinkIds:Ge,privateRedrawItem:ye,privateRemoveItem:De,privateRemoveItemsFromTransfer:Be,privateReveal:ce,privateSetAllDirty:Re,privateSetAllItemsInComboDirty:be,privateSetBackgroundOpacity:Qe,privateSetNonImageProperties:Oe,privateSetRemoveComponentReference:Ye,privateSetSize:G,privateShowWithoutCombos:lt,privateTopParentId:Ae,privateUseAutoSizing:D,privateValidateLayoutOptions:St,validateCombos:Pe,allowDraw:c,redraw:c,update:c,privateOn:a.privateOn,privateOff:a.privateOff,privateFire:a.privateFire},v),s),p=dr({},v),m=xb(g,a,s),y=Ab(100,100,a,s,1,m),b=rs(g,o,f),x=gy(g,a,s,b,t),w=Eb(a,s,m,t),M=my(g,a,s,w,m,t,i,x,y,f),I=yy(M,a,g),C={model:x,controller:M,overlays:w,getView:function(){return y},events:a,legacyEvents:s,imageManager:t};M.setServices(C);m.internalUse.setDependencies(C);var S,k=dx(C),L=new cb(l,(function(e){return"pointermove"===e.pointerEvent.type?null:M.hittest(e.x,e.y)}));ny(L,C);var R=function(){};function T(e){return M.itemExtents(re(e))}function B(e,t,n,r,i,o,a){S=r;M.setCursorFn(i);M.setCreateCanvasFn(r);M.imageGenFn(o);M.setStartGameLoopFn(a);G(e,t,n,!1)}function G(e,t,n,r){var i=S(t,n,!1);M.makeBackgroundCanvas(t,n);var o=y;y=Ab(t,n,a,s,1,m);M.setView(y);M.setCanvasContext(e);M.setShadowCanvas(i.getContext("2d"));Rn();if(o){o.cancelScroll();y.setMinZoom(o.getMinZoom());y.setMaxItemZoom(o.getMaxItemZoom());y.fromOldSettings(o.settings(),!1,r)}m.internalUse.setView(y);M.initOverlays()}function D(){return!g.map().isShown()}function F(e,t){m.internalUse.setSize(e,t)}function Y(){return m.internalUse.getMapContainer()}g.privateIsLayingOut=M.isLayingOut;function V(){return x.graph()}function W(){return m.api}function X(){return m&&m.api.isShown()}function U(){return m&&m.internalUse.isTransitioning()}function j(){return M.getWebGLPixels()}function H(){return M.combo.api}function _(e){return z(!0===e?{animate:!0}:e,{animate:!1,time:1e3})}function q(e,n,r,i){var o,a,u;if(!i)throw new Error("[toDataURL] callback is required");if(M.isMapMode()){o=y.width();a=y.height()}else{o=Math.floor(e);a=Math.floor(n)}var s=y.settings();o=o>0?o:s.width;a=a>0?a:s.height;var l=z(r,{fit:"exact",watermark:!0,gradient:!0,logo:!0});X()&&(l.fit="exact");if("oneToOne"===l.fit){(u=M.modelExtents())||(u={x1:0,y1:0,x2:100,y2:100});var c=10;u.x1-=c;u.y1-=c;u.x2+=c;u.y2+=c;var d=M.watermarkSize();if(d&&l.watermark){var h=(d.width-(u.x2-u.x1))/2;if(h>0){u.x1-=h;u.x2+=h}var v=(d.height-(u.y2-u.y1))/2;if(v>0){u.y1-=v;u.y2+=v}}o=u.x2-u.x1;a=u.y2-u.y1;l.noScale=!0}function p(e){o=Math.floor(o/e);a=Math.floor(a/e)}var b=o*a/16e6;if(b>1){p(Math.sqrt(b))}var A=8e3,w=o/A;w>1&&p(w);var E=a/A;E>1&&p(E);var I=S(o,a,!0),C=l.noScale?1:o/y.width(),k=Oh(),L=Cr(),R=Ab(Math.floor(o/C),Math.floor(a/C),k,L,C,m),T=Eb(k,L,null,t),B=my(g,k,L,T,null,t,null,x,R,f),G={model:x,controller:B,getView:function(){return R},events:k,legacyEvents:L,overlays:T,imageManager:t};B.setCreateCanvasFn(S);B.setServices(G);B.setView(R);B.setCanvasContext(I.getContext("2d"));B.setShadowCanvas(null);B.imageGenFn(M.imageGenFn());D();function D(){var e=M.options();e.overview={shown:!1};l.watermark||(e.watermark=void 0);l.gradient||(e.gradient=void 0);l.logo||(e.logo=void 0);B.options(e);B.backgroundOpacity(M.backgroundOpacity());var n=B.makeBackgroundCanvas(o,a),r=[];if(!l.selection){r=x.doSelection();x.doSelection([])}switch(l.fit){case"chart":B.fitToModel(!1);break;case"view":R.fromOldSettings(y.settings(),!0,!1);break;case"exact":R.fromOldSettings(y.settings(),!1,!1);break;case"oneToOne":R.fitWorldExtents(u,!1,!1,!1,!1,0)}R.scaleFactor(C);B.initOverlays();B.draw(!0,{all:!0});t.waitForImages((function(){B.draw(!0,{all:!0});var e;try{e=I.toDataURL()}catch(e){throw new Error("[toDataURL] There is a problem exporting the chart."+e)}finally{if("rtl"===I.dir){var t=document.getElementsByTagName("body")[0];t.removeChild(I);t.removeChild(n)}}l.selection||x.doSelection(r);x.setAllDirty();if(X()){var o=M.getChartCanvas();m.internalUse.toDataURL(S,I,o,M.drawBackground,i)}else O(i,e)}))}}function $(e,n){switch(e&&e.type){case"LinkChart":if(m&&m.internalUse.isTransitioning())throw new Error("Cannot load chart during map show or hide operation");x=gy(g,a,s,b,t);C.model=x;M.setServices(C);M.load(e,(function(){M.initOverlays();t.invokeWhenImagesHaveLoaded(n)}));break;default:throw new Error("Unknown chart type passed to load")}}function ee(){return x.type()}function ne(){s.trigger("prechange","delete");a.fire("prechange",{type:"delete"});M.load({type:"LinkChart",items:[],map:{keepSameMode:!0}},(function(){M.render()}))}function ie(e,n){oe(e,{updateGlyph:!0});M.render();t.invokeWhenImagesHaveLoaded(n)}function oe(e,t){if(N(e))throw new Error("Null or undefined object passed to merge");var n=Z(e);M.merge(n,t)}function le(e,t){var n=x.getByID(e);return!n||!t&&n.parentId?null:n}function fe(e,t){return x?Array.isArray(e)?e.map((function(e){return le(e,t)})):le(e,t):null}function ce(e){var t=e;if(t){t=P(t);var n=g.privateGetItem(t).filter((function(e){return e&&"link"===e.type&&!e._combo}));x.reveal(ue(n),!0);a.privateFire("redraw",{all:!0})}return x.getRevealedLinks()}function de(e){return fe(e,!0)}function he(e){return!!x&&x.isItemShown(e)}function ve(e){return x.topParentId(e)}function ge(){return x?x.getRawItems():[]}function pe(){return M.getCanvasContext()}function me(){return b}function ye(e){x&&x.setDirty(e)}function be(e){g.privateGetItem(e).forEach((function(e){if(e){g.privateRedrawItem(e.id);if(e._combo){g.privateSetAllItemsInComboDirty(e._combo.linkIds);e._combo.nodeIds&&g.privateSetAllItemsInComboDirty(e._combo.nodeIds)}}}))}function xe(e){x&&x.applyRevealedLinkOffsets(e)}function Ae(e){return x?x.topParentId(e):e}function we(e){var t=e;m&&m.api.isShown()&&(t=m.internalUse.preMerge(t));x.merge(t);M.render()}function Me(e,t){var n=z(e,{type:"all",items:"underlying"});return I.each(n,!0,t)}function Ee(e){return x.bothEndsShown(e)}function Ie(e){return x.bothEndsForeground(e)}function Ce(e){return x.getParentItems(e)}function Se(e){return x?x.firstVisibleItemInAncestry(e):null}function ke(e,t){void 0===t&&(t=!1);return null!==x&&x.allParentsOpen(e,t)}function Le(e){return x.getAncestryIds(e,!1)}function Re(){M.render();x.setAllDirty()}function Te(e){x.addItemsToTransfer(e)}function Be(e){x.removeItemsFromTransfer(e)}function Oe(e,t){void 0===t&&(t=!1);var n={};x.setProperties(e,!1,n,t);M.render(n)}function Ge(e){return x.neighbourLinkIds(e)}function De(e){x.removeItem(e);M.render()}function Fe(){return x.graph()}function Ze(e,t){return x.privateGetLinksBetween(e,t)}function Pe(){x.validateCombos()}function Ye(e){R=e}function ze(e){Object.keys(e).forEach((function(t){e[t]=px}))}function Ve(){g.setContainer(null);if(M.isMapMode()){m.api.leafletMap().remove();M.setOverlayContext(null)}L.destroy();M.destroy();dt();cr(r.id());R();An();ar();Rn();o.destroy();x.destroy();ze(p.map());ze(p.combo());ze(p);f.clear();M=null;y=null;b=null;x=null;w=null;s=null;a=null;M=null;I=null;g=null}function We(e){var t=br(e);r.privateSetContainer(t);M.setContainer(t)}function Xe(e,n,r){void 0===n&&(n=!1);if(e){var i={};M.setProperties(e,n,!1,i);M.render(i)}t.invokeWhenImagesHaveLoaded(r)}function Ue(e,t,n,r,i,o){var a=z(t,{time:1e3,easing:"linear",queue:!0});(a.time<0||!A(a.time))&&(a.time=0);var u=P(e);M.animateProperties(u,a,n,r,i,o)}function Ne(e,t,n){Ue(e,t,n)}function je(e,t,n,r,i){Ue(e,t,n,!0,r,i)}function Ke(e){return"number"==typeof e?Math.min(Math.max(0,e),1):e?1:0}function He(e,t,n){var r=z(t,{time:500});M.animateBackgroundOpacity(Ke(e),r.time,n)}function Qe(e){M.backgroundOpacity(Ke(e))}function Je(e,t,n){var r=z(t,{c:"#909090",w:20,r:80,time:800,repeat:1,lw:40});M.ping(e,r,n)}function _e(e){return Array.isArray(e)?e.map(x.getItem):x?x.getItem(e):null}function qe(e,n){if(e){s.trigger("prechange","properties");a.fire("prechange",{type:"properties"});M.setItem(e);M.render();t.invokeWhenImagesHaveLoaded(n)}}function $e(e){s.trigger("prechange","delete");a.fire("prechange",{type:"delete"});M.removeItem(e);M.render()}function et(e){e&&"boolean"==typeof e.combos&&!e.items&&(e.items=e.combos?"underlying":"toplevel")}function tt(e,t){var n=z(e,{type:"all",items:"underlying"});return I.each(n,!1,t)}function nt(e,t,n){var r=rt(t);I.filter(e,r,n)}function rt(e){et(e);var t=z(e,{type:"all",items:"underlying",animate:!0,time:1e3,updateGlyph:!0});return z(t,{hideSingletons:"link"===t.type})}function it(e,t,n){et(t);var r=z(t,{type:"node",items:"underlying",foregroundOpenCombos:!0});I.foreground(e,r,n)}function ot(e,t,n){if(N(e)||""===e)O(n);else{s.trigger("prechange","hide");a.fire("prechange",{type:"hide"});var r=P(e),i=_(t);i=z(i,{updateGlyph:!0});var o=M.combo.internalUse.hide(r,i);M.hide(o,i,n)}}function at(e,t,n){s.trigger("prechange","hide");a.fire("prechange",{type:"hide"});var r=P(e),i=_(t);M.hide(r,i,n)}function ut(){return x.hidden()}function st(e,t,n,r){if(N(e)||""===e)O(r);else{s.trigger("prechange","show");a.fire("prechange",{type:"show"});var i=P(e),o=_(n);o=z(o,{updateGlyph:!0});var u=M.combo.internalUse.show(i);M.show(u,!!t,o,r);var l=[];u.forEach((function(e){var t=g.privateGetItem(e);if("node"===t.type){t._combo&&l.push(t.id);t.parentId&&l.push(t.parentId)}return!1}));M.combo.internalUse.ensureMinimumOpenComboSize(l)}}function lt(e,t,n,r){s.trigger("prechange","show");a.fire("prechange",{type:"show"});var i=P(e),o=_(n);M.show(i,t,o,r)}function ft(e){return x?M.labelPosition(e,y):null}function ct(e){return x?x.contains(e):[]}function ht(){var e=x.serialize();M.appendCombos(e);var t=m.internalUse.serialize();t&&(e.map=t);e.viewSettings=y.settings();return e}function vt(e,t){var n=y.worldCoordinates(e,t),r=n.x,i=n.y;return{x:Math.floor(r),y:Math.floor(i)}}function gt(e,t){return{x:y.worldToViewX(e),y:y.worldToViewY(t)}}function pt(e,t,n){if(!e)return y.settings();var r=_(t),i=z(e,{offsetX:0,offsetY:0,zoom:1});M.setViewSettings(i,r.animate,r.time,(function(){M.render({drawOnly:!0});O(n)}))}function mt(e,t){return M.options(e,t)}function yt(){return Ou(mt().truncateLabels)}function bt(e,t){return M.lock(e,t)}function xt(e,t,n){var r=_(t);switch(e){case"in":M.zoomIn(r.animate,r.time,n);break;case"out":M.zoomOut(r.animate,r.time,n);break;case"one":M.setZoom(1,r.animate,r.time,n);break;case"fit":r.extents?M.fitExtents(r.animate,r.time,r.extents,n):M.fitToModel(r.animate,r.time,r.ids,n);break;case"selection":M.fitToSelection(r.animate,r.time,void 0,n);break;case"height":M.fitModelHeight(r.animate,r.time,r.ids,n)}}function At(e,t,n){var r=_(t);"selection"!==e||X()?M.pan(e,r.animate,r.time,n):M.fitToSelection(r.animate,r.time,void 0,n,!0)}function wt(){return s.getErrors()}function Mt(){M.cancelAnimation()}function Et(e,t,n){if(X()||U())O(n);else{var r=St(t);M.layout(e||"standard",r,n)}}function It(){var e=g.viewOptions();return e.height>0?e.width/e.height:1}function Ct(e){return N(e.tightness)?5:+e.tightness}function St(e){var t=e||{};t.tightness=Ct(t);return z(t,{fit:!0,animate:!0,expanding:!1,tidy:!0,ratio:It(),pinToFirstFixed:!0,tightness:5,straighten:!0,absoluteFixed:!1})}function kt(e,t,n,r){var i=Lt(n);M.arrange(e||"grid",t,i,r)}function Lt(e){var t=e||{};t.tightness=Ct(t);return z(t,{fit:!1,animate:!0,tidy:!1,ratio:It(),tightness:5})}function Rt(e){var t=N(e)?e:P(e),n=x?x.doSelection(t):[];t&&M.render();return n}function Tt(e){return!0!==e.hi}function Bt(e,t,r,i,o){var a=o.layout.fix,s=!o.filter||o.filter.updateGlyph,l=u(e);function f(e,t){g.privateEach({type:"link",items:"toplevel"},(function(n){if(!e[n.id1]||!e[n.id2]){var r=e[n.id1]||e[n.id2],i=e[n.id1]?n.id2:n.id1;if(r&&i){t[i]||(t[i]={x:0,y:0,_counter:0,id:i});t[i].x+=r.x;t[i].y+=r.y;t[i]._counter++}}}));var r=0;n(t,(function(t){if(!e[t.id]){t.x/=t._counter;t.y/=t._counter;e[t.id]=t;r++}}));return r}function c(e,t){if(!X()){for(var r,i={},o=[];0!==r;)r=f(t,i);e.forEach((function(e){var t=e;if("node"===t.type&&!i[t.id]){t.x=A[t.id].x;t.y=A[t.id].y}}));n(i,(function(e){o.push(e)}));g.setProperties(o)}}function d(){var e=[],t=[],n={};x.each({type:"all"},(function(r){"node"===r.type?e.push(r):"link"===r.type&&t.push(r);n[r.id]=r}));return{nodes:e,links:t,allItems:n}}function h(e){if("adaptive"!==a)return null;var t=qd(e.nodes.filter(Tt),e.links.filter(Tt));return{parts:jf.connectedComponents(t.staticGraph),labels:t.vertexMap}}function v(e){var t={dict:{},touched:{}},n="adjacent"===a||"nonadjacent"===a||"adaptive"===a;l.forEach((function(r){var i=r;t.dict[i.id]=i;if(n&&"link"===i.type){var o=g.privateTopParentId(i.id);if(!e[o]){var a=g.privateTopParentId(i.id1);a&&e[a]&&(t.touched[a]=!0);var u=g.privateTopParentId(i.id2);u&&e[u]&&(t.touched[u]=!0)}}}));return t}function p(){var e=0;g.privateEach({items:"toplevel"},(function(){e++}));return e}function m(e,t){switch(a){case"all":return e;case"adjacent":return Object.keys(t);case"adaptive":case"nonadjacent":return e.filter((function(e){return!t[e]}));case"none":default:return[]}}function y(){var e={open:[],closed:[]};l.forEach((function(t){var n=t;"node"===n.type&&n.parentId&&(g.combo().isOpen(n.parentId)?e.open.push(n.parentId):e.closed.push(n.parentId))}));return e}function b(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r];if(!N(i)&&!n[i.id]){n[i.id]=!0;A[i.id]={x:i.x,y:i.y};delete i.x;delete i.y;t.push(i)}}return t}var A={};l=b(l);var w=y(),M=d(),E=h(M),I=p();oe(l,{updateGlyph:s});var C=h(d()),S=v(M.allItems),k=S.dict;E&&C&&wc.adaptiveExpand.findAdaptiveGroups(E,C).forEach((function(e){S.touched[e]=!0}));var L=m(M.nodes.map((function(e){return e.id})),S.touched);t(k,(function(){c(l,M.allItems);r(M.allItems,(function(){i(w,p()!==I,L)}))}))}function Ot(e,t,n){var r=t;function i(e){function t(t,n){function r(e){var n=e;return t[n.id]?x.filter.filterFn(n):!n.hi}if(x.filter&&te(t)){var i=u(x.filter);i.animate=e;return g.filter(r,i,n)}return n()}return t}function o(e,t,n){var r=x.arrange;r.animate=t;g.combo().arrange(e,r,n)}function l(e){x.layout.fixed=e;g.layout(x.layout.name,x.layout,n)}function f(e,t){x.layout.fixed=t;M.arrangeAndLayout(e,x,n)}function c(e,t,r){var i=!1;if(x.animate)for(var a=0;a<e.open.length;a++)if(g.privateItemIsShown(e.open[a])){i=!0;break}var u=e.open.concat(e.closed);t?i?f(u,r):o(u,!1,(function(){l(r)})):o(u,i,n)}function d(e,t){var n;if(e.filter&&E(e.filter.filterFn)){var r=e.filter.filterFn;(n=rt(e.filter)).time=Math.floor(t.time/5);n.filterFn=r;return n}}function h(e){var t=e.arrange;t.animate=e.animate;t.time=e.time;t.easing=e.layout.easing;e.filter&&(t.updateGlyph=e.filter.updateGlyph);return z(t,{resize:!0,updateGlyph:!0})}var v=["adaptive","nonadjacent","adjacent","none","all"],p=["adaptive","rectangle","circle","none"];function m(e){return v.indexOf(e)>=0?e:v[0]}function y(e){return p.indexOf(e)>=0?e:p[0]}function b(e){e.layout.animate=e.animate;e.layout.time=e.time;var t=e;e.layout=z(e.layout,{fit:t.fit,straighten:t.straighten,tidy:t.tidy,tightness:t.tightness});var n=z(e.layout,{absoluteFixed:!1,consistent:!0,easing:"cubic",expanding:!0,fit:!1,fix:"adaptive",name:"standard",packing:"adaptive",pinToFirstFixed:!0,tidy:!0});n.fix=m(n.fix);"adaptive"!==n.fix&&(n.absoluteFixed=!0);if("organic"===n.name&&"adaptive"===n.fix){n.mode="adaptive";n.fix="none"}N(e.layout.packing)?!1===n.tidy&&(n.packing="none"):n.packing=y(n.packing);return St(n)}var x=z(r=r||{},{animate:!0,time:1e3,layout:{},arrange:{}});x.filter=d(r,x);x.filter&&(x.time-=x.filter.time);x.layout=b(x);x.arrange=h(x);s.trigger("prechange","expand");a.fire("prechange",{type:"expand"});Bt(P(Z(e)),i(!1),i(x.animate),c,x)}function Gt(e,t,n,r){var i=g.getItem(e);if(g.getItem(t))throw new Error("LinkId ("+t+") already exists and must be unique");if(e&&i&&"node"===i.type&&t){var o=Q(t),u=z(n,{style:{}});a.privateOn("drag-end",v);var s="dummyEnd"+Math.floor(1e7*Math.random()),l={type:"node",du:!0,id:s,x:i.x,y:i.y},f=y.worldToViewX(i.x),c=y.worldToViewY(i.y),d=se(u.style,{id:o,id1:e,id2:s,type:"link",_du:!0});g.merge([l,d],(function(){}));var h={x:f,y:c,dragging:{startX:f,startY:c,started:!0}};M.createNewLinkEndDragger(o,s+K()+"id2",h)}function v(e){var t=e.type,n=e.id;if("create-link"===t){g.removeItem(s);a.privateOff("drag-end",v);O(r,n===o?null:n)}}}function Dt(e,t,n){if(e){M.draw(t,n);M.drawoffscreen();Ft(n)}M.handlePointerMove(e);e&&M.afterDraw()}function Ft(e){e.all=!1;e.positions=!1}var Zt=xr(Dt,M.animate,M.getCanvasContext);se(g,Zt);a.privateOn("redraw",Zt.redraw);return{public:p,internal:{api:g}}}
var yx="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSBmbG9hdCBhX3N0YXJ0QW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfZW5kQW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXI7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXIyO2F0dHJpYnV0ZSB2ZWMzIGFfaGl0VGVzdENvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9saW5lVHlwZTthdHRyaWJ1dGUgdmVjMyBhX2NvcmU7dW5pZm9ybSBmbG9hdCB1X2hpdFRlc3Q7dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWM0IHZfbGluZURhdGE7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2Zsb2F0IGE9My4xNDE1OTI2NTM1OTtpbnQgYj0yO2ludCBjPTM7aW50IGQ9NDtpbnQgZT01O2Zsb2F0IGY9MTUuMDtjb25zdCBmbG9hdCBnPTQuMDtjb25zdCBmbG9hdCBoPWctMC41O2Zsb2F0IGk9MC4wMDAxO2ludCBqKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgayhmbG9hdCBsLGZsb2F0IG0sZmxvYXQgbil7ZmxvYXQgbz1tYXgobi1sLDAuMCk7ZmxvYXQgcD1tYXgoaSxtLWwpO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCxrKDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSxrKDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LGsoMC4wMSwwLjA4LHVfem9vbSkpO312ZWMyIHIodmVjMiBzLGZsb2F0IHQsZmxvYXQgdSxmbG9hdCB2LGZsb2F0IHcpe3JldHVybiB2ZWMyKHMueCsodCpjb3ModSt2KncpKSxzLnkrKHQqc2luKHUrdip3KSkpO31mbG9hdCB4KGZsb2F0IHksZmxvYXQgeil7ZmxvYXQgQT15LzIuMDtmbG9hdCBCPWZsb29yKCgoeitBKS8oeStBKSkrMC41KTtpZigoQip5KT56KXtCPTEuMDt9cmV0dXJuIEI7fXZlYzIgQyh2ZWMyIEQsdmVjMiBFLHZlYzIgRixpbnQgRyl7dmVjMiBIO3ZlYzIgSTtpZihHPT0wKXtIPUQ7ST0oRStGKS8yLjA7fWVsc2UgaWYoRz09MSl7SD1FO0k9KEQrRikvMi4wO31lbHNlIGlmKEc9PTIpe0g9RjtJPShFK0QpLzIuMDt9dmVjMiBKPW5vcm1hbGl6ZShILUkpO0grPUovdV96b29tO3JldHVybiBIO312b2lkIG1haW4oKXt2ZWM0IEs9YV9jb2xvdXIvMjU1LjA7dmVjNCBMPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBNPTEuMC91X3pvb207aW50IE49aihhX2xpbmVUeXBlKTtib29sIE89Tj09Yjtib29sIFA9Tj09Yztib29sIFE9Tj09ZDtib29sIFI9Tj49ZTt2ZWMyIEg7aWYoUil7aW50IEc9aihhX2xpbmVUeXBlKS1lO3ZlYzIgRD1hX3Bvc2l0aW9uO3ZlYzIgRT12ZWMyKGFfcmFkaXVzLGFfc3RhcnRBbmdsZSk7dmVjMiBGPXZlYzIoYV9lbmRBbmdsZSxhX3dpZHRoKTtmbG9hdCBTPWRpc3RhbmNlKEUsRik7ZmxvYXQgVD1TL3Vfem9vbTtmbG9hdCBVPTEuMC9UO0g9QyhELEUsRixHKTt2X2JhcnljZW50cmljPXZlYzQoYV9jb3JlLnh5eixVKTt2X2NvcmU9dmVjNCgxLjApO3ZfbGluZURhdGE9dmVjNCgwLjAsMC4wLDAuMCxhX2xpbmVUeXBlKTt9ZWxzZXt2ZWMyIHM9YV9wb3NpdGlvbjtmbG9hdCB0PWFfcmFkaXVzO2Zsb2F0IFY9YV9zdGFydEFuZ2xlO2Zsb2F0IFc9YV9lbmRBbmdsZTtmbG9hdCBYO2Zsb2F0IFk7ZmxvYXQgTT0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtNPTcuMC91X3pvb207fWJvb2wgWj1qKHNpZ24oYV9jb3JlLnIpKT09MTtmbG9hdCB3PWFicyhhX2NvcmUuciktMS4wO2Zsb2F0IHY9KGFfZW5kQW5nbGUtYV9zdGFydEFuZ2xlKS9nO2Zsb2F0IGJhPTEuMC91X3Jlc29sdXRpb24uejtpZihQKXtiYT1tYXgoYmEsc3RlcCgyLjUsYV9saW5lVHlwZSkqMi4wKTt9ZmxvYXQgYmI9bWF4KGFfd2lkdGgqdV96b29tLGJhKS91X3pvb207ZmxvYXQgYmM9bWF4KHEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsYV93aWR0aCp1X3pvb20pKTtpZih1X2FkYXB0aXZlU3R5bGluZyl7Sy5hKj1iYztMLmEqPWJjO31mbG9hdCBiZD1iYitNO2Zsb2F0IGJlPWJkLzIuMDtmbG9hdCBiZj1iYi8yLjA7aWYodzxnKXtZPTEuMDt9ZWxzZXtZPS0xLjA7fWZsb2F0IGJnPWFfcmFkaXVzKihXLVYpO3ZlYzIgYmg9cihzLG1heCh0K2JmLDAuMCksYV9zdGFydEFuZ2xlLHYsdysoWS8yLjApKTtmbG9hdCBiaT12LzIuMDtmbG9hdCBiaj1sZW5ndGgoYmgtcyk7ZmxvYXQgYms9YmovY29zKGJpKTtmbG9hdCBibD1zbW9vdGhzdGVwKDQwMDAuMCwyMDAwMC4wLHQpKjMuMDtpZihaKXtYPWJrK00rYmw7fWVsc2V7YmwqPTIuMDtYPXQtYmUtYmw7fXZfbGluZURhdGE9dmVjNCgwLjAsYmIsYmcsLWFfbGluZVR5cGUpO1g9bWF4KFgsMC4wKTtmbG9hdCBibT0oMS4wL2JnKS91X3pvb207ZmxvYXQgYm49YmcqdV96b29tO2Zsb2F0IGJvPShXLVYpL2JuO2Zsb2F0IGJwPVY7ZmxvYXQgYnE9Ym87YnAtPSgxLjAtc3RlcCgwLjUsdykpKmJxO2JwKz1zdGVwKGgsdykqYnE7SD1yKHMsWCxicCx2LHcpO2lmKFApe2Zsb2F0IGJyPWJuLzQuMDtmbG9hdCBicz1iZy8oYmIqMi4wKTtmbG9hdCBidD1taW4oYnIsYnMpO3ZfY29yZT12ZWM0KGJwLGNlaWwoYnQpLGJtLGFfcmFkaXVzKTt2X2Rhc2hpbmc9dmVjMyhiYixiYiwwLjUpO31lbHNlIGlmKE8pe2Zsb2F0IHk9bWF4KDIuMC91X3pvb20sYmIqMi4wKTtmbG9hdCBidT14KHksYmcpO2Zsb2F0IEE9KGJnLXkqYnUpLyhidS0xLjApO2Zsb2F0IGJ2PUEqYnUvKGJnK0EpO3ZfY29yZT12ZWM0KGJwLGJ1LWJ2LGJtLGFfcmFkaXVzKTtmbG9hdCBidz0oeS8oeStBKSkvMi4wO3ZfZGFzaGluZz12ZWMzKHksQSxidyk7fWVsc2UgaWYoUSl7ZmxvYXQgYng9YV9jb3JlLnk7ZmxvYXQgYnk9ZipieDtmbG9hdCBiej1tYXgoMzAuMCxiYiozLjApO2Zsb2F0IGJBPWJ6O2J5PW1pbihiQSoxNi4wLGFicyhieSkpKnNpZ24oYngpO2Zsb2F0IGJCPTEwMDAuMCpiQS9ieTtmbG9hdCBiQz1tb2QodV90aW1lL2JCLDEuMCk7ZmxvYXQgYkQ9YnovYV9yYWRpdXM7ZmxvYXQgYkU9YkQqKDIuMC8zLjApO2Zsb2F0IGJGPWJDKmJEO3ZfY29yZT12ZWM0KGJwLHcvZyxibSxhX3JhZGl1cyk7dl9kYXNoaW5nPXZlYzMoYkQsMC4wLGJGKTt9ZWxzZXt2X2NvcmU9dmVjNChicCx3L2csYm0sYV9yYWRpdXMpO312X3Bvc2l0aW9uPXZlYzQoSCxzKTt9dmVjMiBiRz1IL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1LO3ZfY29sb3VyMj1MO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",bx="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcDA7YXR0cmlidXRlIHZlYzIgYV9wMTthdHRyaWJ1dGUgdmVjMiBhX3AyO2F0dHJpYnV0ZSB2ZWMyIGFfcDM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfZmxvd1ZlbG9jaXR5O2F0dHJpYnV0ZSB2ZWM0IGFfY29sb3VyO2F0dHJpYnV0ZSB2ZWM0IGFfY29sb3VyMjthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfbGluZVR5cGU7YXR0cmlidXRlIHZlYzQgYV9jb3JlO3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV90aW1lO3VuaWZvcm0gYm9vbCB1X2FkYXB0aXZlU3R5bGluZzt2YXJ5aW5nIHZlYzQgdl9jb2xvdXI7dmFyeWluZyB2ZWM0IHZfY29sb3VyMjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWM0IHZfYmFyeWNlbnRyaWM7dmFyeWluZyB2ZWM0IHZfcG9zaXRpb247dmFyeWluZyB2ZWMzIHZfZGFzaGluZztpbnQgYT0yO2ludCBiPTM7aW50IGM9NDtpbnQgZD01O2NvbnN0IGludCBlPTUwO2Zsb2F0IGY9MC4wMDAxO2Zsb2F0IGc9MTUuMDtpbnQgaChmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGkoZmxvYXQgaixmbG9hdCBrLGZsb2F0IGwpe2Zsb2F0IG09bWF4KGwtaiwwLjApO2Zsb2F0IG49bWF4KGYsay1qKTtyZXR1cm4gbWluKDEuMCxtL24pO31mbG9hdCBvKCl7aWYodV96b29tPjAuMTUpe3JldHVybiBtaXgoMC43NSwxLjAsaSgwLjE1LDAuMix1X3pvb20pKTt9aWYodV96b29tPjAuMDgpe3JldHVybiBtaXgoMC40LDAuNzUsaSgwLjA4LDAuMTUsdV96b29tKSk7fXJldHVybiBtaXgoMC4yLDAuNCxpKDAuMDEsMC4wOCx1X3pvb20pKTt9dmVjMiBwKGZsb2F0IHEpe2Zsb2F0IHI9MS4wLXE7cmV0dXJuIChwb3cociwzLjApKmFfcDApKygzLjAqcG93KHIsMi4wKSpxKmFfcDEpKygzLjAqcipwb3cocSwyLjApKmFfcDIpKyhwb3cocSwzLjApKmFfcDMpO312ZWMyIHMoZmxvYXQgcSl7dmVjMiB0PSgtMy4wKnBvdygoMS4wLXEpLDIuMCkqYV9wMCkrKDMuMCooMS4wLSgzLjAqcSkpKigxLjAtcSkqYV9wMSkrKDMuMCpxKigyLjAtKDMuMCpxKSkqYV9wMikrKDMuMCpwb3cocSwyLjApKmFfcDMpO3ZlYzIgdT1ub3JtYWxpemUodCk7cmV0dXJuIHZlYzIoLXUueSx1LngpO31mbG9hdCB2KGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT13LzIuMDtmbG9hdCB6PWZsb29yKCgoeCt5KS8odyt5KSkrMC41KTtpZigoeip3KT54KXt6PTEuMDt9cmV0dXJuIHo7fXZlYzIgQSh2ZWMyIEIsdmVjMiBDLHZlYzIgRCxpbnQgRSl7dmVjMiBGO3ZlYzIgRztpZihFPT0wKXtGPUI7Rz0oQytEKS8yLjA7fWVsc2UgaWYoRT09MSl7Rj1DO0c9KEIrRCkvMi4wO31lbHNlIGlmKEU9PTIpe0Y9RDtHPShDK0IpLzIuMDt9dmVjMiBIPW5vcm1hbGl6ZShGLUcpO0YrPUgvdV96b29tO3JldHVybiBGO312b2lkIG1haW4oKXt2ZWM0IEk9YV9jb2xvdXIvMjU1LjA7dmVjNCBKPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBLPTEuMC91X3pvb207aW50IEw9aChhX2xpbmVUeXBlKTtib29sIE09TD09YTtib29sIE49TD09Yjtib29sIE89TD09Yztib29sIFA9TD09ZDt2ZWMyIEY7aWYoUCl7aW50IEU9aChhX2NvcmUudyk7dmVjMiBCPWFfcDA7dmVjMiBDPWFfcDE7dmVjMiBEPWFfcDI7ZmxvYXQgUT1kaXN0YW5jZShDLEQpO2Zsb2F0IFI9US91X3pvb207ZmxvYXQgUz0xLjAvUjtGPUEoQixDLEQsRSk7dl9iYXJ5Y2VudHJpYz12ZWM0KGFfY29yZS54eXosUyk7dl9jb3JlPXZlYzQoMS4wKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV9saW5lVHlwZSk7fWVsc2V7dmVjMiBUPWFfcDA7dmVjMiBVPWFfcDE7dmVjMiBWPWFfcDI7dmVjMiBXPWFfcDM7ZmxvYXQgSz0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtLPTcuMC91X3pvb207fWZsb2F0IFg9Zmxvb3IoYV9jb3JlLngqMC41KTtmbG9hdCBZPTEuMC0oMi4wKihtb2QoYV9jb3JlLngsMi4wKSkpO2Zsb2F0IFo9YWJzKGFfY29yZS55KTtpbnQgYmE9aChaKTtib29sIGJiPXNpZ24oYV9jb3JlLnkpPT0tMS4wO2Zsb2F0IGJjPSgoKGFfY29yZS56KzEyOC4wKSoyNTYuMCkrYV9jb3JlLncrMTI4LjApLzY1NTM1LjA7ZmxvYXQgYmQ9MS4wL3VfcmVzb2x1dGlvbi56O2lmKE4pe2JkPW1heChiZCxzdGVwKDIuNSxhX2xpbmVUeXBlKSoyLjApO31mbG9hdCBiZT1tYXgoYV93aWR0aCp1X3pvb20sYmQpL3Vfem9vbTtmbG9hdCBiZj1tYXgobygpLHNtb290aHN0ZXAoMC4wLDEuMCxhX3dpZHRoKnVfem9vbSkpO2lmKHVfYWRhcHRpdmVTdHlsaW5nKXtJLmEqPWJmO0ouYSo9YmY7fWZsb2F0IGJnPWJlK0s7ZmxvYXQgYmg9YmcvMi4wO2Zsb2F0IGJpPWJlLzIuMDtmbG9hdCBiaj0wLjA7ZmxvYXQgYms9MC4wO3ZlYzIgYmw9dmVjMigwLjApO3ZlYzIgYm09VDtpZighYmImJlg9PTAuMCl7Rj1UO2JsPXMoMC4wKTtGKz12ZWMyKC1ibC55LGJsLngpL3Vfem9vbTt9Zm9yKGludCBibj0xO2JuPD1lO2JuKyspe2lmKGJuPmJhKXticmVhazt9ZmxvYXQgdD1mbG9hdChibikvWjt2ZWMyIGJvPXAodCk7YmorPWRpc3RhbmNlKGJtLGJvKTtpZihibj09aW50KFgpKXtGPWJvO2JsPXModCk7Yms9Ymo7fWJtPWJvO31pZihiYiYmaW50KFgpPT1iYSl7Ris9dmVjMihibC55LC1ibC54KS91X3pvb207fWZsb2F0IGJwPWJqL2JjO2lmKGJiKXtiaz0oKCgxLjAtYmMpKmJwKStiayk7fWJrLz1icDt2ZWMyIGJxPWJsKihiZy8yLjApKlk7Rj1GK2JxO2lmKGludChZKT09MSl7dl9saW5lRGF0YT12ZWM0KC1iZyxiZSxicCxhX2xpbmVUeXBlKTt9ZWxzZXt2X2xpbmVEYXRhPXZlYzQoYmcsYmUsYnAsYV9saW5lVHlwZSk7fWZsb2F0IGJyPSgxLjAvYnApL3Vfem9vbTtmbG9hdCBicz1icCp1X3pvb207aWYoTil7ZmxvYXQgYnQ9YnMvNC4wO2Zsb2F0IGJ1PWJwLyhiZSoyLjApO2Zsb2F0IGJ2PW1pbihidCxidSk7dl9jb3JlPXZlYzQoYmssY2VpbChidiksYnIsMC4wKTt2X2Rhc2hpbmc9dmVjMyhiZSxiZSwwLjUpO31lbHNlIGlmKE0pe2Zsb2F0IHc9bWF4KDIuMC91X3pvb20sYmUqMi4wKTtmbG9hdCBidz12KHcsYnApO2Zsb2F0IHk9KGJwLXcqYncpLyhidy0xLjApO2Zsb2F0IGJ4PXkqYncvKGJwK3kpO3ZfY29yZT12ZWM0KGJrLGJ3LWJ4LGJyLDApO2Zsb2F0IGJ5PSh3Lyh3K3kpKS8yLjA7dl9kYXNoaW5nPXZlYzModyx5LGJ5KTt9ZWxzZSBpZihPKXtmbG9hdCBiej1hX2Zsb3dWZWxvY2l0eTtmbG9hdCBiQT1nKmJ6O2Zsb2F0IGJCPW1heCgzMC4wLGJlKjMuMCk7ZmxvYXQgYkM9YkI7YkE9bWluKGJDKjE2LjAsYWJzKGJBKSkqc2lnbihieik7ZmxvYXQgYkQ9MTAwMC4wKmJDL2JBO2Zsb2F0IGJFPW1vZCh1X3RpbWUvYkQsMS4wKTtmbG9hdCBiRj1iRSpiQjt2X2NvcmU9dmVjNChiayxYL1osYnIsMC4wKTt2X2Rhc2hpbmc9dmVjMyhiQiwwLjAsYkYpO31lbHNle3ZfY29yZT12ZWM0KGJrLFgvWixiciwwLjApO319dmVjMiBiRz1GL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1JO3ZfY29sb3VyMj1KO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",xx="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV9ncmFkaWVudFN0YXJ0RnJhY3Rpb247dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7aW50IGQ9NTtmbG9hdCBlPTMuMTQxNTkyNjUzNTk7ZmxvYXQgZj0wLjcwNzEwNjc4MTE4NjU0NzU3O2Zsb2F0IGcoZmxvYXQgaCxmbG9hdCBpKXtmbG9hdCBqPWxlbmd0aCh2ZWMyKGRGZHgoaSksZEZkeShpKSkpKmY7cmV0dXJuIHNtb290aHN0ZXAoaC1qLGgraixpKTt9ZmxvYXQgaz0wLjAwMDE7ZmxvYXQgbChmbG9hdCBtLGZsb2F0IG4sZmxvYXQgaSl7ZmxvYXQgbz1tYXgoaS1tLDAuMCk7ZmxvYXQgcD1tYXgoayxuLW0pO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEodmVjMyByKXt2ZWMzIHM9ZndpZHRoKHIpO3ZlYzMgdD1zbW9vdGhzdGVwKHZlYzMoMC4wKSxzKjIuMCxyKTtyZXR1cm4gbWluKG1pbih0LngsdC55KSx0LnopO31pbnQgdShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fXZlYzQgdihmbG9hdCB3KXtmbG9hdCB4PWwodV9ncmFkaWVudFN0YXJ0RnJhY3Rpb24sMS4wLXVfZ3JhZGllbnRTdGFydEZyYWN0aW9uLHcpO3ZlYzMgeT1taXgodl9jb2xvdXIucmdiLHZfY29sb3VyMi5yZ2IseCk7ZmxvYXQgej1taXgodl9jb2xvdXIuYSx2X2NvbG91cjIuYSx4KTtyZXR1cm4gdmVjNCh5Knoseik7fXZlYzQgQSh2ZWM0IHksZmxvYXQgQixmbG9hdCBDKXtmbG9hdCBoPShDLzIuMCkqdV96b29tO2Zsb2F0IEQ9YWJzKEIpKnVfem9vbTt5Kj0xLjAtc21vb3Roc3RlcChoLWYsaCtmLEQpO3JldHVybiB5O31mbG9hdCBFKGZsb2F0IEQsZmxvYXQgRixmbG9hdCBHKXtyZXR1cm4gKEQvRikqRzt9dmVjNCBIKGJvb2wgSSxib29sIEosYm9vbCBLLGJvb2wgTCl7ZmxvYXQgQj12X2xpbmVEYXRhLngvMi4wO2Zsb2F0IEM9dl9saW5lRGF0YS55O2Zsb2F0IE09dl9jb3JlLng7dmVjNCBOPXYoTSk7ZmxvYXQgTz12X2NvcmUuejtmbG9hdCBQPXZfbGluZURhdGEuejtpZihMKXtmbG9hdCBRPXZfZGFzaGluZy54O2Zsb2F0IFI9USooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBUPU0qUDtmbG9hdCBVPW1vZChULShQLzIuMCktKFEvMi4wKSxRKTtmbG9hdCBWPW1vZChTLVUsUSk7ZmxvYXQgVz1kaXN0YW5jZShWLFEvMi4wKTtOKj0xLjAtZyhSLzIuMCxXKTtOPUEoTixCLEMpO04qPWcoTyx2X2NvcmUueCk7Tio9MS4wLWcoMS4wLU8sdl9jb3JlLngpO31lbHNlIGlmKEkpe2Zsb2F0IFg9dl9jb3JlLnk7ZmxvYXQgWT1DLzIuMDtmbG9hdCBaPXZfZGFzaGluZy54O2Zsb2F0IGJhPXZfZGFzaGluZy56O2Zsb2F0IGJiPU0qWDt2ZWMyIGJjPXZlYzIoTSpQLEIpO2Zsb2F0IGJkPWZyYWN0KGJiKS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJmPWJiLWJkK2JlO3ZlYzIgYmc9dmVjMigoYmYvWCkqUCwwLjApO2Zsb2F0IGJoPVk7aWYoSil7YmMueT0wLjA7Ymg9Wi8yLjA7Tj1BKE4sQixDKTt9ZmxvYXQgVz1kaXN0YW5jZShiYyxiZyk7Tio9MS4wLWcoYmgsVyk7fWVsc2V7Tj1BKE4sQixDKTtOKj1nKE8sdl9jb3JlLngpO04qPTEuMC1nKDEuMC1PLHZfY29yZS54KTt9cmV0dXJuIE47fXZlYzQgYmkoYm9vbCBJLGJvb2wgSixib29sIEssYm9vbCBMKXtmbG9hdCBDPXZfbGluZURhdGEueTtmbG9hdCBPPXZfY29yZS56O2Zsb2F0IFA9dl9saW5lRGF0YS56O2Zsb2F0IFk9Qy8yLjA7ZmxvYXQgYmo9dl9jb3JlLmE7ZmxvYXQgYms9UC9iajt2ZWMyIEQ9dl9wb3NpdGlvbi54eTt2ZWMyIGJsPXZfcG9zaXRpb24uenc7ZmxvYXQgYm09ZGlzdGFuY2UoRCxibCk7ZmxvYXQgYm49YXRhbihELnktYmwueSxELngtYmwueCk7aWYoYm48dl9jb3JlLngpe2JuKz0yLjAqZTt9ZmxvYXQgYm89dl9jb3JlLng7ZmxvYXQgYnA9KGJuLWJvKS8oYmspO3ZlYzQgTj12KGJwKTtpZihMKXtmbG9hdCBicT12X2Rhc2hpbmcueDtmbG9hdCBicj1icSooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBicz1icCpiaztmbG9hdCBidD1tb2QoYnMtKGJrLzIuMCktKGJxLzIuMCksYnEpO2Zsb2F0IGJ1PW1vZChTLWJ0LGJxKTtmbG9hdCBXPWRpc3RhbmNlKGJ1LGJxLzIuMCk7ZmxvYXQgYnY9dl9jb3JlLnk7Tio9MS4wLWcoYnIvMi4wLFcpO04qPWcoYmosYm0rWSk7Tio9MS4wLWcoYmorWSxibSk7Tio9ZyhPLGJ2KTtOKj0xLjAtZygxLjAtTyxidik7fWVsc2UgaWYoSSl7ZmxvYXQgWj12X2Rhc2hpbmcueDtmbG9hdCBiYT12X2Rhc2hpbmcuejtmbG9hdCBYPXZfY29yZS55O2Zsb2F0IGJ3PWJwKlg7dmVjMiBieD1EO2Zsb2F0IGJkPWZyYWN0KGJ3KS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJnPWJ3LWJkK2JlO2Zsb2F0IGJ5PUUoYmcsWCxiaykrYm87aWYoSyl7dmVjMiBiZz12ZWMyKGJsLngrKGJqKmNvcyhieSkpLGJsLnkrKGJqKnNpbihieSkpKTtmbG9hdCBXPWRpc3RhbmNlKGJ4LGJnKTtmbG9hdCBiej1ZO04qPTEuMC1nKGJ6LFcpO31lbHNle2Zsb2F0IGJBPWRpc3RhbmNlKGJuLGJ5KTtmbG9hdCBiej1FKFovMi4wLFAsYmspO04qPTEuMC1nKGJ6LGJBKTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO319ZWxzZXtmbG9hdCBidj12X2NvcmUueTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO04qPWcoTyxidik7Tio9MS4wLWcoMS4wLU8sYnYpO31yZXR1cm4gTjt9dm9pZCBtYWluKCl7aW50IGJCPWludCh1X3NoYWRvd1R5cGUpO2Zsb2F0IGJDPWFicyh2X2xpbmVEYXRhLncpO2ludCBiRD11KGJDKTtib29sIGJFPXNpZ24odl9saW5lRGF0YS53KTwwLjA7Ym9vbCBJPWJDPjEuNTtib29sIEo9YkQ9PWE7Ym9vbCBLPWJEPT1iO2Jvb2wgTD1iRD09Yztib29sIGJGPWJEPj1kO2Jvb2wgYkc9YkI9PS0xO2Jvb2wgYkg9YkI9PTE7aWYodV9oaXRUZXN0PjAuNSl7aWYoYkcpe2Rpc2NhcmQ7fWVsc2V7ZmxvYXQgYkk9bGVuZ3RoKHN0ZXAoMS4wLHZfaGl0VGVzdENvbG91cikpO2dsX0ZyYWdDb2xvcj12ZWM0KHZfaGl0VGVzdENvbG91ci8yNTUuMCxiSSk7fX1lbHNlIGlmKGJIKXtkaXNjYXJkO31lbHNle3ZlYzQgTjtpZihiRil7Tj12ZWM0KHZfY29sb3VyLnJnYip2X2NvbG91ci5hLHZfY29sb3VyLmEpO04qPWcodl9iYXJ5Y2VudHJpYy5hLHEodl9iYXJ5Y2VudHJpYy5yZ2IpKTt9ZWxzZXtpZihiRSl7Tj1iaShJLEosSyxMKTt9ZWxzZXtOPUgoSSxKLEssTCk7fX1nbF9GcmFnQ29sb3I9Tjt9fQ==",Ax="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24xO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24yO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24zO2F0dHJpYnV0ZSB2ZWM0IGFfdmVydGV4SW5mbzthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjI7YXR0cmlidXRlIHZlYzMgYV9oaXRUZXN0Q29sb3VyO2F0dHJpYnV0ZSBmbG9hdCBhX2xpbmVUeXBlO3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9saW5lRGF0YTt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2ludCBhPTI7aW50IGI9MztpbnQgYz00O2ludCBkPTU7ZmxvYXQgZT0wLjAwMDE7ZmxvYXQgZj0xNS4wO2ludCBnKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgaChmbG9hdCBpLGZsb2F0IGope2Zsb2F0IGs9aS8yLjA7ZmxvYXQgbD1mbG9vcigoKGoraykvKGkraykpKzAuNSk7aWYoKGwqaSk+ail7bD0xLjA7fXJldHVybiBsO312ZWMyIG0odmVjMiBuLHZlYzIgbyx2ZWMyIHAsaW50IHEpe3ZlYzIgcjt2ZWMyIHM7aWYocT09MCl7cj1uO3M9KG8rcCkvMi4wO31lbHNlIGlmKHE9PTEpe3I9bztzPShuK3ApLzIuMDt9ZWxzZSBpZihxPT0yKXtyPXA7cz0obytuKS8yLjA7fXZlYzIgdD1ub3JtYWxpemUoci1zKTtyKz10L3Vfem9vbTtyZXR1cm4gcjt9ZmxvYXQgdShmbG9hdCB2LGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT1tYXgoeC12LDAuMCk7ZmxvYXQgej1tYXgoZSx3LXYpO3JldHVybiBtaW4oMS4wLHkveik7fWZsb2F0IEEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCx1KDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSx1KDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LHUoMC4wMSwwLjA4LHVfem9vbSkpO312b2lkIG1haW4oKXtmbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejt2ZWM0IEM9YV9jb2xvdXIvMjU1LjA7dmVjNCBEPWFfY29sb3VyMi8yNTUuMDtpbnQgRT1nKGFfbGluZVR5cGUpO2Jvb2wgRj1FPT1hO2Jvb2wgRz1FPT1iO2Jvb2wgSD1FPT1jO2Jvb2wgST1FPT1kO3ZlYzIgcjtmbG9hdCBKO2Zsb2F0IEs7aWYoSSl7aW50IHE9aW50KGFfdmVydGV4SW5mby53KTt2ZWMyIG49YV9wb3NpdGlvbjE7dmVjMiBvPWFfcG9zaXRpb24yO3ZlYzIgcD1hX3Bvc2l0aW9uMztmbG9hdCBMPWRpc3RhbmNlKG8scCk7ZmxvYXQgTT1ML3Vfem9vbTtmbG9hdCBLPTEuMC9NO3I9bShuLG8scCxxKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV9saW5lVHlwZSk7dl9iYXJ5Y2VudHJpYz12ZWM0KGFfdmVydGV4SW5mby54eXosSyk7fWVsc2V7ZmxvYXQgTj0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtOPTcuMC91X3pvb207fWZsb2F0IEI9MS4wL3VfcmVzb2x1dGlvbi56O2lmKEcpe0I9bWF4KEIsc3RlcCgyLjUsYV9saW5lVHlwZSkqMi4wKTt9dmVjMiBPPW5vcm1hbGl6ZShhX3Bvc2l0aW9uMi1hX3Bvc2l0aW9uMSk7dmVjMiBQPU8vdV96b29tO2Zsb2F0IFE9YV92ZXJ0ZXhJbmZvLnktMS4wO2Zsb2F0IFI9YV92ZXJ0ZXhJbmZvLngrYV92ZXJ0ZXhJbmZvLno7dmVjMiBTPWFfcG9zaXRpb24yLWFfcG9zaXRpb24xO3ZlYzIgVD1ub3JtYWxpemUodmVjMigtUy55LFMueCkpO2lmKGludChhX3ZlcnRleEluZm8ueCk9PTApe3I9YV9wb3NpdGlvbjEtUDt9ZWxzZXtyPWFfcG9zaXRpb24yK1A7fWZsb2F0IFU9YV9wb3NpdGlvbjMueDtmbG9hdCBWPW1heChBKCksc21vb3Roc3RlcCgwLjAsMS4wLFUqdV96b29tKSk7aWYoaW50KHVfdmlld0luZGVwZW5kZW50KT09MCl7VT1tYXgoKFUpKnVfem9vbSxCKS91X3pvb207fWZsb2F0IFc9VStOO3ZlYzIgWD1UKihXLzIuMCkqUTtyPXIrWDtmbG9hdCBZPWRpc3RhbmNlKGFfcG9zaXRpb24xLGFfcG9zaXRpb24yKTtmbG9hdCBaPVkqdV96b29tO2Zsb2F0IGJhPSgxLjAvWSkvdV96b29tO2lmKEcpe2Zsb2F0IGJiPVovNC4wO2Zsb2F0IGJjPVkvKFUqMi4wKTtmbG9hdCBiZD1taW4oYmIsYmMpO3ZfY29yZT12ZWM0KFIsY2VpbChiZCksYmEsMC4wKTt2X2Rhc2hpbmc9dmVjMyhVLFUsMC41KTt9ZWxzZSBpZihGKXtmbG9hdCBpPW1heCgyLjAvdV96b29tLFUqMi4wKTtmbG9hdCBiZT1oKGksWSk7ZmxvYXQgaz0oWS1pKmJlKS8oYmUtMS4wKTtmbG9hdCBiZj1rKmJlLyhZK2spO3ZfY29yZT12ZWM0KFIsYmUtYmYsYmEsMC4wKTtmbG9hdCBiZz0oaS8oaStrKSkvMi4wO3ZfZGFzaGluZz12ZWMzKGksayxiZyk7fWVsc2UgaWYoSCl7ZmxvYXQgYmg9YV9wb3NpdGlvbjMueTtmbG9hdCBiaT1mKmJoO2Zsb2F0IGJqPW1heCgzMC4wLFUqMy4wKTtmbG9hdCBiaz1iajtiaT1taW4oYmsqMTYuMCxhYnMoYmkpKSpzaWduKGJoKTtmbG9hdCBibD0xMDAwLjAqYmsvYmk7ZmxvYXQgYm09bW9kKHVfdGltZS9ibCwxLjApO2Zsb2F0IGJuPWJtKmJqO3ZfZGFzaGluZz12ZWMzKGJqLDAuMCxibik7dl9jb3JlPXZlYzQoUiwwLjAsYmEsMC4wKTt9ZWxzZXt2X2NvcmU9dmVjNChSLDAuMCxiYSwwLjApO31pZihpbnQoUSk9PTEpe3ZfbGluZURhdGE9dmVjNCgtVyxVLFksYV9saW5lVHlwZSk7fWVsc2V7dl9saW5lRGF0YT12ZWM0KFcsVSxZLGFfbGluZVR5cGUpO31pZih1X2FkYXB0aXZlU3R5bGluZyl7Qy5hKj1WO0QuYSo9Vjt9fXZlYzIgYm89ci91X3Jlc29sdXRpb24ueHk7dmVjMiBicD1ibyoyLjA7dmVjMiBicT1icC0xLjA7dl9jb2xvdXI9Qzt2X2NvbG91cjI9RDt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO2dsX1Bvc2l0aW9uPXVfdHJhbnNmb3JtKnZlYzQoYnEqdmVjMigxLC0xKSwwLDEpO30=",wx="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2VbN107dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3ZhcnlpbmcgdmVjNCB2X3RleENvb3JkO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjMiB2X3RleHR1cmVCYW5rO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtjb25zdCBmbG9hdCBhPTMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtmbG9hdCBiKGZsb2F0IGMsZmxvYXQgZCl7ZmxvYXQgZT1sZW5ndGgodmVjMihkRmR4KGQpLGRGZHkoZCkpKSowLjcwNzEwNjc4MTE4NjU0NzU3O3JldHVybiBzbW9vdGhzdGVwKGMtZSxjK2UsZCk7fWludCBmKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgZyhmbG9hdCBoKXtmbG9hdCBpPXVfcmVzb2x1dGlvbi56KnVfem9vbTtmbG9hdCBqPTEuMC1zdGVwKDEuMCxoKmkpO2Zsb2F0IGs9MS4wL2k7cmV0dXJuIG1heChoLGoqayk7fWZsb2F0IGwoZmxvYXQgbSl7ZmxvYXQgaT11X3Jlc29sdXRpb24ueip1X3pvb207ZmxvYXQgaD0wLjA7aWYodl9ib3JkZXJXaWR0aCE9MC4wKXtoPW1heCgxLjAsYWJzKHZfYm9yZGVyV2lkdGgpKmkpO31mbG9hdCBuPTAuMDtmbG9hdCBvPXZfZG9udXRTZWdtZW50Lng7aWYobz4wLjApe24rPW1heCgxLjAsbyppKTt9ZmxvYXQgcD12X2RvbnV0U2VnbWVudC55O2lmKHA+MC4wKXtpZihzdGVwKDUuMCxtKT09MS4wKXtuKz1tYXgoMS4wLHAqaSk7fWg9MC4wO31mbG9hdCBxPWFicyh2X3NoYXBlU2l6ZS56KSppO2Zsb2F0IHI9dl9zaGFwZVNpemUudyppO2Zsb2F0IHM9YWJzKDAuNS0odl90ZXhDb29yZC54L3ZfdGV4Q29vcmQueikpKnE7ZmxvYXQgdD1hYnMoMC41LSh2X3RleENvb3JkLnkvdl90ZXhDb29yZC53KSkqcjtmbG9hdCB1PTAuNSpxO2Zsb2F0IHY9MC41KnI7ZmxvYXQgdz0xLjA7aWYoaD4wLjApe2Zsb2F0IHg9bitoO2Zsb2F0IHk9c3RlcCh1LXgscyk7ZmxvYXQgej1zdGVwKHYteCx0KTt3PW1heCh5LHopO31mbG9hdCBBPTAuMDtpZihuPjAuMCl7ZmxvYXQgQj1zdGVwKHUtbixzKTtmbG9hdCBDPXN0ZXAodi1uLHQpO0E9bWF4KEIsQyk7fXJldHVybiB3KigxLjAtQSk7fWZsb2F0IEQoZmxvYXQgRSx2ZWM0IEYpe2Zsb2F0IEc7aW50IEg9ZihFKTtpZihIPT0wKXtHPUYucjt9ZWxzZSBpZihIPT0xKXtHPUYuZzt9ZWxzZXtHPUYuYjt9cmV0dXJuIEc7fXZlYzQgSShmbG9hdCBKLHZlYzQgSyxmbG9hdCBMKXtmbG9hdCBNPShLLnIrSy5iK0suZykvMy4wO2Zsb2F0IE49c3RlcCgxLjAsTSkqTDtmbG9hdCBPPU4qKHN0ZXAoMC4yNSxKKSptaW4oTSwwLjI1KSk7dmVjNCBQPXZlYzQoKEsucmdiK08pKksuYSxLLmEpO3JldHVybiBKKlA7fWZsb2F0IFEodmVjMiBSLGZsb2F0IFMsZmxvYXQgVCxmbG9hdCBoLGZsb2F0IFUpe1U9bWF4KDAuMCxVLWgpO2Zsb2F0IHU9Uy8yLjA7ZmxvYXQgdj1ULzIuMDtmbG9hdCBhPXUtVS1oO2Zsb2F0IGI9di1VLWg7ZmxvYXQgeD1SLngtdTtmbG9hdCB5PVIueS12O2Zsb2F0IFY9cG93KG1heChhYnMoeCktYSwwLjApLDIuMCk7ZmxvYXQgVz1wb3cobWF4KGFicyh5KS1iLDAuMCksMi4wKTtyZXR1cm4gVitXO31mbG9hdCBYKGZsb2F0IFkpe3JldHVybiAoZGlzdGFuY2Uodl90ZXhDb29yZC56dyx2ZWMyKDAuNSkpKlkpKnVfem9vbTt9dmVjNCBaKHZlYzQgUCxmbG9hdCBVKXtmbG9hdCBiYT1wb3coVSwyLjApO2Zsb2F0IGJiPVEodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LDAuMCxVKTtpZihhYnModl9ib3JkZXJXaWR0aCk+MC4wKXtQKj0xLjAtYihiYSxiYik7YmI9USh2X3RleENvb3JkLnh5LHZfdGV4Q29vcmQueix2X3RleENvb3JkLncsdl9ib3JkZXJXaWR0aCxVKTtmbG9hdCBiYz1tYXgoMC4wLFUtdl9ib3JkZXJXaWR0aCk7ZmxvYXQgYmQ9cG93KGJjLDIuMCk7UCo9YihiZCxiYik7fWVsc2V7UCo9MS4wLWIoYmEsYmIpO31yZXR1cm4gUDt9dmVjNCBiZSh2ZWM0IGJmLHZlYzQgYmcsZmxvYXQgTCl7ZmxvYXQgSj1EKHZfdGV4dHVyZUJhbmsueSxiZik7cmV0dXJuIEkoSixiZyxMKTt9ZmxvYXQgYmgoZmxvYXQgbSl7cmV0dXJuIG1heCgwLjIsc21vb3Roc3RlcCgwLjAsNS4wLG0pKTt9dm9pZCBtYWluKCl7ZmxvYXQgcT1hYnModl9zaGFwZVNpemUueik7ZmxvYXQgcj12X3NoYXBlU2l6ZS53O2Zsb2F0IGJpPWFicyh2X3NoYXBlU2l6ZS54KTtmbG9hdCBiaj12X3NoYXBlU2l6ZS55O2Zsb2F0IGJrPW1pbihiaSxiaik7ZmxvYXQgbT0oKGJrLzIuMCkqdV96b29tKS0wLjU7ZmxvYXQgaD1hYnModl9ib3JkZXJXaWR0aCk7dmVjNCBQO2ludCBibD1mKHVfc2hhZG93VHlwZSk7Ym9vbCBibT1mKHZfc2hhcGVTaXplLngpPjA7Ym9vbCBibj1mKHZfc2hhcGVTaXplLngpPDA7Ym9vbCBibz1mKHZfYm9yZGVyV2lkdGgpPDA7Ym9vbCBicD1ibD09MTtib29sIGJxPWYodV9oaXRUZXN0KT09MTt2ZWMyIGJyPXZfdGV4Q29vcmQuenc7ZmxvYXQgYnM9dl9kb251dFNlZ21lbnQueDtmbG9hdCBidD12X2RvbnV0U2VnbWVudC55O2Zsb2F0IFU9bWF4KC12X2RvbnV0U2VnbWVudC54LDAuMCk7aW50IEU9Zih2X3RleHR1cmVCYW5rLngpO2Jvb2wgYnU9Ym4mJih2X2JvcmRlcldpZHRoIT0wLjB8fHZfZG9udXRTZWdtZW50Lng+MC4wfHx2X2RvbnV0U2VnbWVudC55PjAuMCk7Ym9vbCBidj1FPT0tMztib29sIGJ3PWJtJiYoYnMhPTAuMHx8YnQhPTAuMCk7ZmxvYXQgYng7aWYoYnd8fGJvKXtpZihicz5hKXticy09Mi4wKmE7fWlmKGJ0PmEpe2J0LT0yLjAqYTt9ZmxvYXQgeD1ici54LTAuNTtmbG9hdCB5PWJyLnktMC41O2J4PWF0YW4oeSx4KTt9aWYoYnEpe2lmKGJsPT0tMSl7ZGlzY2FyZDt9ZWxzZXtmbG9hdCBieT1sZW5ndGgoc3RlcCgxLjAsdl9oaXRUZXN0Q29sb3VyKSk7UD12ZWM0KHZfaGl0VGVzdENvbG91ci8yNTUuMCxieSk7aWYoYm0pe2Zsb2F0IGJ6PVgocSk7UCo9MS4wLXN0ZXAobSxieik7aWYoaD4wLjApe2Zsb2F0IGJBPWgqdV96b29tO1AqPXN0ZXAobS1iQSxieik7fWlmKGJ3KXtpZihicz49YnQpe1AqPXN0ZXAoYnMsYngpKygxLjAtc3RlcChidCxieCkpO31lbHNle1AqPXN0ZXAoYnMsYngpO1AqPTEuMC1zdGVwKGJ0LGJ4KTt9fX1lbHNlIGlmKFU+MC4wKXtmbG9hdCBiQj1wb3coVSwyLjApO2Zsb2F0IGJDPVEodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LDAuMCxVKTtQKj0xLjAtc3RlcChiQixiQyk7fWVsc2UgaWYoYnUpe1AqPWwobSk7fX19ZWxzZSBpZihicCl7ZGlzY2FyZDt9ZWxzZXtQPXZfY29sb3VyLzI1NS4wO2Zsb2F0IGJEPVAuYTtpZihFPj0wKXt2ZWM0IEY7ZmxvYXQgYkU9LTIuMC8zLjA7ZmxvYXQgYkY9LTAuODtpZihFPT0wKXtGPXRleHR1cmUyRCh1X2ltYWdlWzBdLHZfdGV4Q29vcmQueHksYkYpO1A9YmUoRixQLDEuMCk7fWVsc2UgaWYoRT09MSl7Rj10ZXh0dXJlMkQodV9pbWFnZVsxXSx2X3RleENvb3JkLnh5LGJGKTtQPWJlKEYsUCwxLjApO31lbHNlIGlmKEU9PTIpe0Y9dGV4dHVyZTJEKHVfaW1hZ2VbMl0sdl90ZXhDb29yZC54eSxiRik7UD1iZShGLFAsMS4wKTt9ZWxzZSBpZihFPT0zKXtGPXRleHR1cmUyRCh1X2ltYWdlWzNdLHZfdGV4Q29vcmQueHksYkUpO1A9YmUoRixQLDAuMCk7fWVsc2UgaWYoRT09NCl7UD10ZXh0dXJlMkQodV9pbWFnZVs0XSx2X3RleENvb3JkLnh5LGJFKSpiRDt9ZWxzZSBpZihFPT01KXtQPXRleHR1cmUyRCh1X2ltYWdlWzVdLHZfdGV4Q29vcmQueHksYkUpKmJEO31lbHNlIGlmKEU9PTYpe1A9dGV4dHVyZTJEKHVfaW1hZ2VbNl0sdl90ZXhDb29yZC54eSxiRSkqYkQ7fX1lbHNle2Zsb2F0IGJEPVAuYTtQPXZlYzQoUC5yZ2IqYkQsYkQpO31pZihibSl7ZmxvYXQgYno9WChxKTtQKj0xLjAtYihtLGJ6KTtpZihoPjAuMCl7ZmxvYXQgYkE9bWF4KDEuMCxoKnVfem9vbSk7UCo9YihtLWJBLGJ6KTtQKj1iaChtKTt9aWYoYncpe2Zsb2F0IGJHPXZfcGl4ZWwqMS41O2Zsb2F0IGJIPWJzLWJHO2Zsb2F0IGJJPWJzK2JHO2Zsb2F0IGJKPWJ0LWJHO2Zsb2F0IGJLPWJ0K2JHO2lmKGJzPj1idCl7UCo9c21vb3Roc3RlcChiSCxiSSxieCkrKDEuMC1zbW9vdGhzdGVwKGJKLGJLLGJ4KSk7fWVsc2V7UCo9c21vb3Roc3RlcChiSCxiSSxieCk7UCo9MS4wLXNtb290aHN0ZXAoYkosYkssYngpO319ZWxzZSBpZihibyl7ZmxvYXQgYkw9aCoyLjA7ZmxvYXQgYk09YkwvMi4wO2Zsb2F0IGJOPTIuMCooYSooYmkvMi4wKSk7ZmxvYXQgYk89YngvKDIuMCphKTtmbG9hdCBiUD1mbG9vcigoYk4rYk0pLyhiTCtiTSktMS4wKTtmbG9hdCBiUT1zaW4oKChiTypiUCkpKigyLjAqYSkpO1AqPWIoLTAuNSxiUSk7fX1lbHNlIGlmKFU+MC4wKXtQPVooUCxVKTt9ZWxzZSBpZihidSl7UCo9bChtKTtpZih2X2JvcmRlcldpZHRoPjAuMCl7Ym9vbCBiUj1mKHZfZG9udXRTZWdtZW50LnkpPT0tMTtpZighYlIpe1AqPWJoKG0pO31pZihidil7ZmxvYXQgYk09ZyhoKTtmbG9hdCBiTD1iTSoyLjA7ZmxvYXQgYlA9Zmxvb3IoKHZfdGV4Q29vcmQueitiTSkvKGJMK2JNKSkrMC41O2Zsb2F0IGJRPXNpbigoKCh2X3RleENvb3JkLngvdl90ZXhDb29yZC56KSpiUCkpKigyLjAqYSkpO1AqPXN0ZXAoLTAuNDksYlEpO2JQPWZsb29yKCh2X3RleENvb3JkLncrYk0pLyhiTCtiTSkpKzAuNTtiUT1zaW4oKCgodl90ZXhDb29yZC55L3ZfdGV4Q29vcmQudykqYlApKSooMi4wKmEpKTtQKj1iKC0wLjQ5LGJRKTt9fX19Z2xfRnJhZ0NvbG9yPVA7fQ==",Mx="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzQgYV90ZXhDb29yZDthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfdmVydGV4SW5kZXg7YXR0cmlidXRlIHZlYzIgYV90ZXh0dXJlQmFuazthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9jaXJjbGVSYWRpdXM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfc3RhcnRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9lbmRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9hbmNob3I7dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHNhbXBsZXIyRCB1X2FuY2hvclRleHR1cmU7dW5pZm9ybSBmbG9hdCB1X2FuY2hvclRleHR1cmVTaXplO3VuaWZvcm0gYm9vbCB1X3VzZUFuY2hvcjt1bmlmb3JtIGJvb2wgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyB2ZWM0IHZfdGV4Q29vcmQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUJhbms7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtpbnQgYShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGIoZmxvYXQgYyl7dmVjMiBkPXZlYzIobW9kKGMsdV9hbmNob3JUZXh0dXJlU2l6ZSksZmxvb3IoYy91X2FuY2hvclRleHR1cmVTaXplKSk7ZCs9MC41O3ZlYzIgZT12ZWMyKGQvdV9hbmNob3JUZXh0dXJlU2l6ZSk7cmV0dXJuIHRleHR1cmUyRCh1X2FuY2hvclRleHR1cmUsZSkucjt9dmVjMiBmKGZsb2F0IGMpe3JldHVybiB2ZWMyKGIoYyksYihjKzEuMCkpO312ZWMyIGcodmVjMiBhKXtyZXR1cm4gZmxvb3IoYSswLjUpO312ZWMyIGgodmVjMiBpKXt2ZWMyIGo9aS91X3Jlc29sdXRpb24ueHk7dmVjMiBrPWoqMi4wO3JldHVybiBrLTEuMDt9dmVjMiBsKHZlYzIgaSl7aSs9MS4wO2kvPTIuMDtyZXR1cm4gaSp1X3Jlc29sdXRpb24ueHk7fXZlYzIgbSh2ZWMyIG4pe2Zsb2F0IG89bGVuZ3RoKG4qdV96b29tKTt2ZWMyIHA9bm9ybWFsaXplKG4pO3JldHVybiBwKihtYXgoMC4wLDIuMC1vKS91X3pvb20pO31mbG9hdCBtKGZsb2F0IHEpe2Zsb2F0IG89bGVuZ3RoKHEqdV96b29tKTtyZXR1cm4gbWF4KHEsKDIuMC1vKS91X3pvb20pO31mbG9hdCByKGZsb2F0IHEpe2Zsb2F0IG89cSp1X3pvb207cmV0dXJuIHNtb290aHN0ZXAoMi4wLDMuMCxvKTt9dmVjMiBzKGludCB0LGZsb2F0IHEpe3ZlYzIgcDtpZih0PT0wKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsLTEuMCkpO31lbHNlIGlmKHQ9PTEpe3A9bm9ybWFsaXplKHZlYzIoMS4wLC0xLjApKTt9ZWxzZSBpZih0PT0yKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsMS4wKSk7fWVsc2UgaWYodD09Myl7cD1ub3JtYWxpemUodmVjMigxLjAsMS4wKSk7fXJldHVybiBwKmxlbmd0aCh2ZWMyKHEpKTt9dm9pZCBtYWluKCl7dmVjNCB1PWFfY29sb3VyO2Jvb2wgdj1hKHVfaGl0VGVzdCk9PTE7Ym9vbCB3PWFfY2lyY2xlUmFkaXVzPjAuMDtmbG9hdCB4PWFfY2lyY2xlUmFkaXVzO2ludCB5PWEoYV90ZXh0dXJlQmFuay54KTtib29sIHo9YShhX2NpcmNsZVJhZGl1cyk9PS0xO2Zsb2F0IEE9MC4wO2Jvb2wgQj1mYWxzZTt2ZWMyIEM9YV9wb3NpdGlvbi54eTt2ZWMyIEQ9YV9wb3NpdGlvbjtmbG9hdCBFO2Zsb2F0IEY7ZmxvYXQgRztmbG9hdCBIO3ZlYzIgcDtpbnQgdD1hKGFfdmVydGV4SW5kZXgpO2lmKHcpe2lmKHVfYWRhcHRpdmVTdHlsaW5nJiYhdV92aWV3SW5kZXBlbmRlbnQpe3g9bSh4KTt9RT1hYnMoeCk7Rj1FO31lbHNle0U9YV90ZXhDb29yZC56LzIuMDtGPWFfdGV4Q29vcmQudy8yLjA7fUc9RSoyLjA7SD1IKjIuMDtmbG9hdCBJPTAuMDtpZih5PjMpe2lmKHVfYWRhcHRpdmVTdHlsaW5nJiYhdV92aWV3SW5kZXBlbmRlbnQpe0QrPW0oQyk7fUk9YV93aWR0aDtEKz1zKHQsSS91X3pvb20pO31lbHNlIGlmKCh5Pi0xJiZ5PDMpfHx5PT0tNCl7QT1hYnMoYV93aWR0aCk7Qj1hKEEpPjA7aWYodV9hZGFwdGl2ZVN0eWxpbmcpe3UuYSo9cihtaW4oRSxGKSk7fX1lbHNle2lmKHVfYWRhcHRpdmVTdHlsaW5nJiYhdV92aWV3SW5kZXBlbmRlbnQpe0QrPW0oQyk7fUE9YWJzKGFfd2lkdGgpO0I9YShBKT4wO31mbG9hdCBKPTAuMDtpZigheil7Sj1jZWlsKEEvMi4wKTt9aWYoQil7aWYodil7ZmxvYXQgSz0oNy4wL3Vfem9vbSk7QSs9SztKKz1jZWlsKEsvMi4wKTt9dmVjMiBMPXModCxKKTtEKz1MO0crPWFicyhMLngqMi4wKTtIKz1hYnMoTC55KjIuMCk7fWlmKHVfdXNlQW5jaG9yJiZhX2FuY2hvcj4tMC41KXtmbG9hdCBNPWIoYV9hbmNob3IrMi4wKTt2ZWMyIE49dmVjMihzaW4oLU0pLGNvcygtTSkpO3ZlYzIgTz12ZWMyKChELngqTi55KStELnkqTi54LChELnkqTi55KS1ELngqTi54KTtEPU8rZihhX2FuY2hvcik7fWlmKHYpe0QqPTEuMC1zdGVwKGFfaGl0VGVzdENvbG91ci54K2FfaGl0VGVzdENvbG91ci55K2FfaGl0VGVzdENvbG91ci56LDAuMCk7fWdsX1Bvc2l0aW9uPXVfdHJhbnNmb3JtKnZlYzQoaChEKSp2ZWMyKDEsLTEpLDAsMSk7aWYoIXcpe3ZlYzIgUD1nbF9Qb3NpdGlvbi54eTtQPWwoUCk7UD1nKFAqdV9yZXNvbHV0aW9uLnopL3VfcmVzb2x1dGlvbi56O2dsX1Bvc2l0aW9uLnh5PWgoUCk7fXZfdGV4Q29vcmQ9YV90ZXhDb29yZDt2X2NvbG91cj11O3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7dl90ZXh0dXJlQmFuaz1hX3RleHR1cmVCYW5rO2lmKHcpe2Zsb2F0IFE9KEEvMi4wKTtmbG9hdCBSPSh4K1EpKjIuMDt2X3NoYXBlU2l6ZT12ZWM0KFIsUixHLEcpO31lbHNle2Zsb2F0IFE9MC4wO2lmKCF6KXtRPShBLzIuMCk7fXZfc2hhcGVTaXplPXZlYzQoLWFfdGV4Q29vcmQuei1RLGFfdGV4Q29vcmQudytRLC1hX3RleENvb3JkLnotSixhX3RleENvb3JkLncrSik7fXZfYm9yZGVyV2lkdGg9QSpzaWduKGFfd2lkdGgpO3ZfcGl4ZWw9KDEuMC8oYV9jaXJjbGVSYWRpdXMqMi4wKSkvdV96b29tO3ZfZG9udXRTZWdtZW50PXZlYzIoYV9zdGFydEFuZ2xlLGFfZW5kQW5nbGUpO30=",Ex="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBmbG9hdCB1X2dsb2JhbEFscGhhO3VuaWZvcm0gdmVjNCB1X2JhY2tncm91bmRDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7dm9pZCBtYWluKCl7dmVjNCBhPXVfYmFja2dyb3VuZENvbG91ci8yNTUuMDthPXZlYzQoYS5yZ2IqYS5hLGEuYSk7Z2xfRnJhZ0NvbG9yPShhK3RleHR1cmUyRCh1X2ltYWdlLHZfdGV4Q29vcmQpKSp1X2dsb2JhbEFscGhhO30=",Ix="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDt2b2lkIG1haW4oKXtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zaXRpb24sMC4wLDEuMCk7dl90ZXhDb29yZD1hX3RleENvb3JkO30=",Cx={}
;Cx["line-arc-vertex"]=yx;Cx["line-bezier-vertex"]=bx;Cx["line-fragment"]=xx;Cx["line-vertex"]=Ax;Cx["triangle-fragment"]=wx;Cx["triangle-vertex"]=Mx;Cx["renderToTexture-fragment"]=Ex;Cx["renderToTexture-vertex"]=Ix;function Sx(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;i++){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}function kx(e){return Sx(document.createElement("canvas"),e)}function Lx(e,t,n){var r=Ox(e,[t,n]);r.vertexShader=t;r.fragmentShader=n;return r}function Rx(e,t){e.useProgram(t);e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null)}function Tx(){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=1;function n(n){t=n;e[0]*=n;e[4]*=n;e[8]*=1;e[1]*=n;e[5]*=n;e[9]*=1;e[2]*=n;e[6]*=n;e[10]*=1;e[3]*=n;e[7]*=n;e[11]*=1}function r(){return t}function i(t,n){e[12]+=e[0]*t+e[4]*n;e[13]+=e[1]*t+e[5]*n;e[14]+=e[2]*t+e[6]*n;e[15]+=e[3]*t+e[7]*n}function o(){return e}return{get:o,getZoomLevel:r,pan:i,zoom:n}}function Bx(e,t,n){var r=e.createShader(n),i=atob(Cx[t]);e.shaderSource(r,i);e.compileShader(r);if(!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);e.deleteShader(r);throw new Error("Error in shader: "+o)}return r}function Ox(e,t){for(var n=e.createProgram(),r=0;r<t.length;++r)e.attachShader(n,t[r]);e.linkProgram(n);if(!e.getProgramParameter(n,e.LINK_STATUS)){var i=e.getProgramInfoLog(n);e.deleteProgram(n);throw new Error("Error in program linking:"+i)}return n}var Gx="undefined"!=typeof window,Dx=!1,Fx=!1;function Zx(){Dx=!0}function Px(e,t){return e.some((function(e){return t.indexOf(e)>-1}))}function Yx(){if(Fx)return!Dx;if(Gx){var e="file:"!==document.location.protocol,t=["SwiftShader","Microsoft Basic Render Driver","VirtualBox","Parallels","VMware"],n=["VMware","VirtualBox"],r=["OES_standard_derivatives","OES_element_index_uint","ANGLE_instanced_arrays"],i=kx({failIfMajorPerformanceCaveat:!0}),o=void 0;if(e=e&&!!i){var a=i.getSupportedExtensions(),u={};for(o=0;o<a.length;o++)u[a[o]]=!0;for(o=0;e&&o<r.length;o++)e=e&&u[r[o]]}if(e){var s=i.getExtension("WEBGL_debug_renderer_info");if(s){var l=i.getParameter(s.UNMASKED_VENDOR_WEBGL),f=i.getParameter(s.UNMASKED_RENDERER_WEBGL);e=!(Px(n,l)||Px(t,f))}s=null}i=null;Dx=Dx||!e;Fx=!0;return e}return!Dx}var zx={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"],quarter:"Q",half:"H"},Vx=[31,28,31,30,31,30,31,31,30,31,30,31],Wx={milli:0,sec:1,min:2,hour:3,day:4,week:5,month:6,year:7};function Xx(e,t){return t?e-e%t:0}function Ux(e){if(e<Wx.milli||Wx.year<e)throw new Error("bad unit range")}function Nx(e,t){return 1===e&&jx(t)?29:Vx[e]}function jx(e){return 1===new Date(e,1,29).getMonth()}function Kx(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Hx(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function Qx(e,t,n){Ux(t);var r=new Date(e);t>Wx.milli&&r.setUTCMilliseconds(0);t>Wx.sec&&r.setUTCSeconds(0);t>Wx.min&&r.setUTCMinutes(0);t>Wx.hour&&r.setUTCHours(0);t>=Wx.month&&r.setUTCDate(1);t>=Wx.year&&r.setUTCMonth(0);switch(t){case Wx.milli:r.setUTCMilliseconds(Xx(r.getUTCMilliseconds(),n));break;case Wx.sec:r.setUTCSeconds(Xx(r.getUTCSeconds(),n));break;case Wx.min:r.setUTCMinutes(Xx(r.getUTCMinutes(),n));break;case Wx.hour:r.setUTCHours(Xx(r.getUTCHours(),n));break;case Wx.day:break;case Wx.week:var i=r.getUTCDay(),o=i>=1?i-1:6;r.setTime(r.getTime()-24*o*60*60*1e3);break;case Wx.month:r.setUTCMonth(Xx(r.getUTCMonth(),n));break;case Wx.year:r.setUTCFullYear(Xx(r.getUTCFullYear(),n))}return r.getTime()}function Jx(e,t,n){Ux(t);if(t<=Wx.week){var r=n;t>Wx.milli&&(r*=1e3);t>Wx.sec&&(r*=60);t>Wx.min&&(r*=60);t>Wx.hour&&(r*=24);t>Wx.day&&(r*=7);return e+r}var i=new Date(e);switch(t){case Wx.month:var o=i.getUTCMonth()+n,a=o%12,u=Math.floor(o/12);a<0&&(a+=12);var s=i.getUTCDate();s=Math.min(s,Nx(a,i.getUTCFullYear()+u));i.setUTCDate(s);i.setUTCMonth(a);0!==u&&i.setTime(Jx(i.getTime(),Wx.year,u));break;case Wx.year:if(1===i.getUTCMonth()&&29===i.getUTCDate()){jx(i.getUTCFullYear()+n)||i.setTime(Jx(i.getTime(),Wx.day,-1))}i.setUTCFullYear(i.getUTCFullYear()+n)}return i.getTime()}function _x(e){for(var t=""+e;t.length<2;)t="0"+t;return t}var qx=new RegExp("(f?f?f)|(s?s)|(m?m)|(h?h)|(H?H)|(t?t?t)|(d?d?d?d)|(M?M?M?M?M)|(Q?Q)|yyyy|yy","gm"),$x={f:function(e){return Math.floor(e.getUTCMilliseconds()/100)},ff:function(e){return _x(Math.floor(e.getUTCMilliseconds()/10))},fff:function(e){return _x(Math.floor(e.getUTCMilliseconds()))},s:function(e){return e.getUTCSeconds()},ss:function(e){return _x(e.getUTCSeconds())},m:function(e){return e.getUTCMinutes()},mm:function(e){return _x(e.getUTCMinutes())},h:function(e){return e.getUTCHours()%12||12},hh:function(e){return _x(e.getUTCHours()%12||12)},H:function(e){return e.getUTCHours()},HH:function(e){return _x(e.getUTCHours())},t:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)].charAt(0)},tt:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)]},ttt:function(e,t){var n=Math.floor(e.getUTCHours()/12);return t.ampm[n+2]||t.ampm[n]},d:function(e){return e.getUTCDate()},dd:function(e){return _x(e.getUTCDate())},ddd:function(e,t){return t.shortDays[e.getUTCDay()]},dddd:function(e,t){return t.longDays[e.getUTCDay()]},M:function(e){return e.getUTCMonth()+1},MM:function(e){return _x(e.getUTCMonth()+1)},MMM:function(e,t){return t.shortMonths[e.getUTCMonth()]},MMMM:function(e,t){return t.longMonths[e.getUTCMonth()]},MMMMM:function(e,t){return t.shortMonths[e.getUTCMonth()].substr(0,1)},Q:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/3)+1;return t.quarter+r},QQ:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/6)+1;return t.half+r},yyyy:function(e){return e.getUTCFullYear()},yy:function(e){return _x(e.getUTCFullYear()%100)}};function eA(e,t,n){var r="number"==typeof e?new Date(e):e;return t.replace(qx,(function(e){return $x[e](r,n||zx)}))}var tA="(?::)?",nA="(?:-|$)";new RegExp("^(\\d{4})"+nA+"(\\d{2})?"+nA+"(\\d{2})?"+"(?:T|$)"+"(\\d{2})?"+tA+"(\\d{2})?"+tA+"(\\d{2})?(?:Z)?(\\+|-)?(\\d{2})?"+tA+"(\\d{2})?");function rA(e){var t;e instanceof Date?t=Kx(e):"number"==typeof e&&(t=Math.round(e));return t}var iA=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],oA="rgba(32, 32, 200, 0.67)";function aA(e){for(var t=[],n=0;n<e.length;n++)t[n]=wn(e[n],.8);return t}function uA(){var e=Wx,t={fontFamily:"sans-serif",fontSize:12},r={colours:["backColour","fontColour","sliderColour","sliderLineColour"]};function i(e,t){return eA(e,t,p.options.locale)}function o(t,n){var r=new Date(Jx(t,e.year,n-1));return i(t,"yyyy - ")+i(r,"yyyy")}function a(e){return o(e,10)}function s(e){return o(e,50)}function l(e){return i(e,"yyyy")+"s"}function f(e){return i(e,"dmy"===p.options.locale.order?"d MMM yyyy":"MMM d, yyyy")}function c(e){return i(e,p.options.locale.h12?"h:mm tt":"HH:mm")}function d(e){return i(e,p.options.locale.h12?"h:mm:ss tt":"HH:mm:ss")}function h(e,t){if("histogram"===e){if("object"!=typeof t||!t)return!1;var n=t;if(n.colour&&("string"!=typeof n.colour||!an(n.colour)))return!1;if(n.highlightColour&&("string"!=typeof n.highlightColour||!an(n.highlightColour)))return!1}if("maxRange"===e&&"string"==typeof t)return"auto"===t;if("maxRange"===e||"minScale"===e){var i=["sec","min","hour","day","week","month","year"],o=t;return!!o.value&&"number"==typeof o.value&&!!o.units&&-1!==i.indexOf(o.units)}return _(r.colours,e)?"string"==typeof t&&an(t):"controlBarTheme"!==e||("light"===t||"dark"===t)}function v(e){if(S(e)){var t=e;"string"!=typeof t.groupBy&&null!==t.groupBy||(p.options.groups.groupBy=t.groupBy);null===t.categories?p.options.groups.categories=null:Array.isArray(t.categories)&&(t.categories.some((function(e){return!("string"==typeof e||"number"==typeof e)}))||(p.options.groups.categories=t.categories));if(Array.isArray(t.colours)&&t.colours.length){if(!t.colours.some((function(e){return!("string"==typeof e&&an(e))}))){p.options.groups.colours=t.colours;p.computedGroupColours=t.colours}}else if(null===t.colours){p.options.groups.colours=null;p.computedGroupColours=iA}Array.isArray(t.hiColours)&&t.hiColours.length?t.hiColours.some((function(e){return!("string"==typeof e&&an(e))}))||(p.options.groups.hiColours=t.hiColours):null===t.hiColours&&(p.options.groups.hiColours=null);p.computedGroupHiColours=p.options.groups.hiColours||aA(p.computedGroupColours)}}function g(e,n){"fontFamily"===e&&(p.options.fontFamily="string"==typeof n&&_n(n)||t.fontFamily);if("fontSize"===e){var r=+n;A(r)&&r>0&&(p.options.fontSize=r)}}var p={displayTime:function(e,t){return E(t)?t(e):i(e,t)},baseRangeLimits:{max:315576e7,min:3e3},options:{_area:{stdDev:7},area:{colour:oA},scale:{highlightColour:"#F2F2F2",showMajor:!0,showMinor:!0},backColour:"#FFFFFF",controlBarTheme:"light",fontColour:Ht.grey,fontFamily:t.fontFamily,fontSize:t.fontSize,groups:{groupBy:null,categories:null,colours:null,hiColours:null},showControlBar:!0,showPlay:!0,showExtend:!1,showFit:!0,sliderColour:"rgba(255, 255, 255, 0.6)",sliderLineColour:"#bbb",sliders:"fixed",maxRange:"auto",minRange:3e3,minScale:{units:"sec",value:1},_showShadowCanvas:!1,histogram:{colour:"#d0d0d0",highlightColour:"#a9a9a9",markColour:"#ea7378",markHiColour:"#e03038"},heightChange:{animate:!0,time:200},locale:z(zx,{order:"mdy",h12:!0}),playSpeed:60,type:"histogram"},getOptions:function(){return u(p.options,!0)},setOptions:function(e){if(S(e)){n(e,(function(e,n){if(W(p.options,n)){var r=n;if(r in t)g(r,e);else if("groups"===r)v(e);else{var i=e;S(p.options[r])&&(i=z(e,p.options[r]));h(r,i)&&(p.options[r]=i)}}}))}},hoverTime:50,defaultAnimationTime:200,sliderReleaseTime:200,doubleClickZoomTime:500,doubleClickZoomTimeFree:250,playingExtend:!1,defaultPlaySpeed:60,bars:{defaultFontSize:t.fontSize,major:{height:19,textbase:3,tickHeight:10},minor:{height:17,textbase:0,tickHeight:8}},grip:{lines:2,space:4,length:14,margin:2},controlbar:{height:30,space:4,colour:"#ddd"},fixedSideFactor:.5,freeSideFactor:.2,histogram:{dy:2,topdy:16,bardx:1,minwidth:11},computedGroupColours:iA,computedGroupHiColours:aA(iA),selection:{maxNumber:3,reducingFactor:3/4,dotsize:3.5},rates:[{max:6,major:{units:e.sec,by:2,f:f},minor:{units:e.sec,by:1,f:d}},{max:15,major:{units:e.sec,by:5,f:f},minor:{units:e.sec,by:1,f:d}},{max:24,major:{units:e.sec,by:10,f:f},minor:{units:e.sec,by:2,f:d}},{max:60,major:{units:e.sec,by:15,f:f},minor:{units:e.sec,by:5,f:d}},{max:120,major:{units:e.sec,by:30,f:f},minor:{units:e.sec,by:10,f:d}},{max:360,major:{units:e.min,by:1,f:f},minor:{units:e.sec,by:30,f:d}},{max:1e3,major:{units:e.min,by:5,f:f},minor:{units:e.min,by:1,f:c}},{max:5e3,major:{units:e.min,by:15,f:f},minor:{units:e.min,by:5,f:c}},{max:15e3,major:{units:e.hour,by:1,f:f},minor:{units:e.min,by:15,f:c}},{max:6e4,major:{units:e.hour,by:6,f:f},minor:{units:e.hour,by:1,f:c}},{max:12e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:2,f:c}},{max:18e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:3,f:c}},{max:36e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:6,f:c}},{max:72e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:12,f:"ttt"}},{max:5e6,major:{units:e.week,by:1,f:function(t){var n,r,o=new Date(t),a=new Date(Jx(t,e.day,6)),u="dmy"===p.options.locale.order;if(o.getUTCFullYear()===a.getUTCFullYear())if(o.getUTCMonth()===a.getUTCMonth()){n=u?"d - ":"MMM d - ";r=u?"d MMM yyyy":"d, yyyy"}else{n=u?"d MMM - ":"MMM d - ";r=u?"d MMM yyyy":"MMM d, yyyy"}else{n=u?"d MMM yyyy - ":"MMM d, yyyy - ";r=u?"d MMM yyyy":"MMM d, yyyy"}return i(o,n)+i(a,r)}},minor:{units:e.day,by:1,f:"d"}},{max:15e6,major:{units:e.month,by:1,f:"MMMM yyyy"},minor:{units:e.week,by:1,f:function(t){var n=Jx(t,e.day,6);return i(t,"d - ")+i(n,"d")}}},{max:3e7,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMM"}},{max:75e6,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMM"}},{max:1e8,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:2e8,major:{units:e.month,by:6,f:"QQ  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:36e7,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:3,f:"Q"}},{max:6e8,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:6,f:"QQ"}},{max:15e8,major:{units:e.year,by:10,f:a},minor:{units:e.year,by:1,f:"'yy"}},{max:25e8,major:{units:e.year,by:10,f:a},minor:{units:e.year,by:2,f:"'yy"}},{max:35e8,major:{units:e.year,by:10,f:a},minor:{units:e.year,by:5,f:"'yy"}},{max:115e8,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:10,f:"'yy"}},{max:2e10,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:25,f:"'yy"}},{max:35e9,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:25,f:"'yy"}},{max:8e10,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:50,f:"'yy"}},{max:16e10,major:{units:e.year,by:200,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:4e11,major:{units:e.year,by:500,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:1/0,major:{units:e.year,by:500,f:""},minor:{units:e.year,by:100,f:""}}]};return p}function sA(e,t,n){var r=[];e((function(e){if(e.startTotals.length){var i=e.startTotals[n]-e.endTotals[t];r.push(i)}}));return r}function lA(e,t,n,r,i,o){e((function(e,a){if(e){var u=e.startTotals[i]-e.endTotals[r];t.selvalues[a][n]=u;u>t.maxselvalue&&!o&&(t.maxselvalue=u)}}))}function fA(e,t,n,r,i,o,a,u){var s,l,f=n.histogram,c=Qx(t.t1,f.units,f.by),d=r(c),h=0;e.bars=[];e.maxvalue=0;e.maxselvalue=0;a((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));do{l=c>t.t2;var v=i(c),g=c,p=sA(o,d,s=r(c=Jx(c,f.units,f.by))),m=p.reduce((function(e,t){return e+t}),0);m>e.maxvalue&&!l&&(e.maxvalue=m);var y=cA(u,g,c);lA(a,e,h,d,s,l);e.bars.push({x:v,mark:y,groupValues:p,value:m});h++;d=s}while(!l);e.count=h-1}function cA(e,t,n){return e.some((function(e){if(S(e)){var r=e;if(!N(r.dt1)&&!N(r.dt2)){var i=rA(r.dt1),o=rA(r.dt2);if(i<n&&o>t)return!0}}else{var a=rA(e);if(a>=t&&a<n)return!0}return!1}))}function dA(e,t,n,r,i,o){var a,u,s,l,f,c=[],d=e*t,h=Jx(r.t1,Wx.milli,-d),v=Jx(r.t2,Wx.milli,d),g=h,p=i(g);function m(e){s+=e.startTotals[u]-e.endTotals[u];l+=e.startTotals[u]-e.startTotals[p];f+=e.endTotals[u]-e.endTotals[p]}do{a=g>v;g=Jx(g,Wx.milli,e/n);u=i(g);s=0;l=0;f=0;o(m);c.push({t:g,startValue:l,endValue:f,solidValue:s});p=u}while(!a);return c}var hA=8,vA=null,gA=null,pA=null;function mA(e,t,n){for(var r=[],i=0;i<2*n;i++){var o=(i-n)*e/hA;r.push(Math.exp(-o*o/t))}return r}function yA(e,t,n,r,i,o,a,u){var s,l=1,f=n.timeRate*l,c=t.t1,d=0,h=0,v=e.options._area.stdDev,g=Math.ceil(4*v),p=g*hA,m=dA(f,g,hA,t,r,o);if(v!==gA||f!==vA){var y=n.timeRate*v*2*(n.timeRate*v);pA=mA(f,y,p);vA=f;gA=v}do{s=c>t.t2;var b=i(c);c=Jx(c,Wx.milli,f);for(var x=0,A=p+d*hA,w=Math.max(0,A-p),M=Math.min(m.length,A+p),E=w;E<M;E++){var I=m[E],C=void 0;C=E<=A?I.endValue:I.startValue;x+=pA[E-A+p]*C}x+=m[A].solidValue;x>h&&!s&&(h=x);a(d,b,x);d++}while(!s);u(d-1,h)}function bA(e,t,n,r,i,o,a,u){function s(t,n,r){e.bars.push({x:n,value:r})}function l(t,n){e.count=t;e.maxvalue=n}u((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));e.bars=[];yA(t,n,r,i,o,a,s,l);function f(t){return function(n,r,i){e.selvalues[t][n]=i}}function c(t){return function(t,n){n>e.maxselvalue&&(e.maxselvalue=n)}}e.maxselvalue=0;u((function(e,a){e&&yA(t,n,r,i,o,(function(t){return t(e)}),f(a),c(a))}))}function xA(e){return e.t<=e.other}function AA(e){return e.t>=e.other}var wA=/^_tbLine(.)/;function MA(e){return e&&wA.test(e)?"_tbLine":e}function EA(e){return(0===e.indexOf("_tb")?e.substr(3):e).toLowerCase()}function IA(){return{startTotals:[0],endTotals:[0]}}function CA(e,t,r){var i,o,a=0,s=0,l=r.rates,f=[],c={named:new Map,other:IA()},d=[],h={t1:0,t2:0},v={t1:0,t2:0},g={},p={t1:0,t2:0},m=[],y=[],b=null,x=[1,1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6];function w(){e.privateFire("redraw")}function M(e,t,n,r){h.t1=e;h.t2=t;v.t1=n;v.t2=r;if(i){o=R(v);w()}le=!0;ce=!0}function E(e,t){return x[e.units]*e.by/t>=r.histogram.minwidth}function I(){return r.options.fontSize/r.bars.defaultFontSize}function C(e){for(var t=I(),n=0;l[n].max<e*t&&n<l.length;)n++;return n}function k(e,t){for(var n=Wx[e],r=0;r<l.length;r++){var i=l[r].minor;if(i.units>n||i.units===n&&i.by>=t)return r>0?r-1:r}return l.length-2}function L(){var e=0;if(O()){var t=T(r.options.minScale);e=k(t.units,t.value)}return e}function R(e){for(var t=(e.t2-e.t1)/(i.x2-i.x1),n=C(t),r=L(),o=l[n=n<=r?r+1:n].major,a=l[n].minor;n>0&&E(l[n-1].minor,t)&&n-1>r;)n--;return{histogram:l[n].minor,major:o,minor:a,timeRate:t}}function T(e){return{units:W(Wx,e.units)?e.units:Wx.sec,value:A(e.value)?Math.round(Math.abs(e.value)):1}}function B(e){return{units:W(Wx,e.units)?e.units:Wx.sec,value:A(e.value)?Math.round(Math.abs(e.value)):r.baseRangeLimits.max}}function O(){return!!r.options.minScale}function G(){return"auto"!==r.options.maxRange}function D(e){return r.options.sliders===e}function F(){var e,t=L(),n=l[t].max;if(D("fixed"))e=a/(1+r.freeSideFactor);else if(D("free")){n=1;var i=l[t+1].minor;e=x[i.units]*i.by}else e=a;return Math.round(n*e)}function Z(){b=null;for(var e=0;e<m.length;e++){y[e]=null;m[e]=null}y.length=0;m.length=0}function Y(e){d=[];for(var t,n=0;n<e.length;n++){var r=e[n];if(S(r)){var i="dt1"in r,o="dt2"in r;if(!i&&!o)throw new Error("mark: TimePeriod object must have a dt1 or dt2 property.");t=r;var a=i?ke(t.dt1):-1/0;if((o?ke(t.dt2):1/0)<a)throw new Error("mark: TimePeriod dt2 time must be after dt1 time.")}else t=r;d.push(u(t))}}function z(e){b=e;var t,n;for(t=0;t<e.length;t++){var i=e[t].index||0;if(i<r.selection.maxNumber&&e[t].id){var o=P(e[t].id);if(o.length){m[i]=ne(o);y[i]={startTotals:[],endTotals:[]};var a=0,u=0;for(n=0;n<f.length;n++){var s=f[n];y[i].startTotals[n]=a;y[i].endTotals[n]=u;if(s.id in m[i]){xA(s)&&(a+=s.v);AA(s)&&(u+=s.v)}}y[i].startTotals[n]=a;y[i].endTotals[n]=u;V(i,e[t].c)}else if(!o.length&&y[i]){y[i]=null;m[i]=null}}}}function V(e,t){var n={colour0:"rgb(114, 179, 0)",colour1:"rgb(255, 153, 0)",colour2:"rgb(178, 38, 9)"}["colour"+e];t&&an(t)&&(n=t);r.selection["colour"+e]=n}function X(e){for(var t=0,n=f.length;t<n;){var r=Math.floor((t+n)/2),i=f[r].t;i!==e||xA(f[r])||i--;i<e?t=r+1:n=r}return t}function U(e){return i.x1+(e-v.t1)/ye()}function j(e){return v.t1+(e-i.x1)*ye()}function K(e){return e>=i.bars.major.y1?"major":e>=i.bars.minor.y1?"minor":"histogram"}function H(e,t,n){var r,i=n||K(t),o=j(e);ie(i,(function(e,t){if(t>o){r={t1:e,t2:t,bar:i};return!0}return!1}));return r}function Q(e,t){var r,i,o=X(e),a=X(t),u={},s={};for(r=0;r<o;r++)(i=f[r]).t!==i.other&&(s[i.id]=(s[i.id]||0)+(i.t<i.other?1:-1));n(s,(function(e,t){e>0&&(u[t]=!0)}));for(r=o;r<a;r++)u[f[r].id]=!0;return Object.keys(u)}function J(){var e=r.options.groups;return!(!e.groupBy||!e.categories)}function _(e,t,n,r){for(var i=X(e),o=X(t),a=i;a<o;a++){var u=f[a];if(n?xA(u):AA(u)){var s=u.id;g[s]=(g[s]||0)+r}}}function q(){var e=h.t1,t=h.t2,n=p.t1,r=p.t2;e<n?_(e,n,!1,1):e>n&&_(n,e,!1,-1);t>r?_(r,t,!0,1):t<r&&_(t,r,!0,-1);p.t1=e;p.t2=t}function $(){var e=te(),t=e?2*(e.t2-e.t1):r.baseRangeLimits.max,n=r.baseRangeLimits.min;O()?n=F():r.options.minRange&&(n=Math.max(n,r.options.minRange));if(G()){var i=B(r.options.maxRange),o=Wx[i.units];t=i.value*x[o]}else t=Math.max(t,Math.floor(4*n));return{max:t,min:n=Math.min(n,Math.floor(t/4))}}function ee(){var e=0,t=a,n=r.options.showControlBar?r.controlbar.height:0,o=I(),u=r.options.scale.showMinor?r.bars.minor.height*o:0,l=r.options.scale.showMajor?r.bars.major.height*o:0,f=s-n,c=f-l,d=c-u,h=d-r.histogram.dy,v=h-r.histogram.topdy,g=v*r.selection.reducingFactor;i={bars:{major:{y1:c,y2:f},minor:{y1:d,y2:c}},histogram:{ybase:h,maxbarh:v,maxselh:g},x1:e,y1:d,x2:t,y2:f,width:a,height:s}}function te(){if(f.length>0){for(var e=0;f[e].t===-1/0;)e++;for(var t=f[e].t,n=f.length-1;f[n].t===1/0;)n--;return{t1:t,t2:f[n].t+1}}}function ie(e,t){var n,r=o[e],i=Qx(v.t1,r.units,r.by),a=!1;do{a=t(i,n=Jx(i,r.units,r.by),U(i),U(n),r.f);i=n}while(!a&&i<=v.t2)}var oe,ue={count:0,bars:[],hasSel:[],selvalues:[],maxvalue:0,maxselvalue:0},le=!0,fe={bars:[],count:0,hasSel:[],maxselvalue:0,maxvalue:0,selvalues:[]},ce=!0;function de(){if(le){fA(ue,v,o,X,U,rt,it,d);le=!1}return ue}function he(){if(ce){bA(fe,r,v,o,X,U,rt,it);ce=!1}return fe}function ve(){return i}function ge(){return h}function me(){return v}function ye(){return o.timeRate}function be(e){var t=h.t1,n=h.t2,r="back"===e?-1:1,i=Wx.month;if(t===Qx(t,i,1)&&n===Qx(n,i,1)){var o=new Date(t),a=new Date(n),u=12*(a.getUTCFullYear()-o.getUTCFullYear())+(a.getUTCMonth()-o.getUTCMonth());t=Jx(t,i,r*u);n=Jx(n,i,r*u)}else{var s=r*(n-t);t+=s;n+=s}return{t1:t,t2:n}}function xe(){return f}function Ae(n){var i=te();if(i&&h.t1>=i.t1&&n<=i.t1&&!r.playingExtend){t.trigger("start","data");e.fire("start",{type:"data"})}}function we(n){var r=te();if(r&&h.t2<=r.t2&&n>=r.t2){t.trigger("end","data");e.fire("end",{type:"data"})}}function Me(e,t){"t1"===e?Ae(t):we(t);h[e]=t}function Ee(e){var t,n;if("t1"===e){t=v.t1;n=h.t2}else{t=h.t1;n=v.t2}if(D("fixed")){var r=n-t,i=Math.floor(.1*r);t+=i;n-=i}var o=$();if("t1"===e){t=Math.max(t,h.t2-o.max);n=Math.min(n,h.t2-o.min)}else{t=Math.max(t,h.t1+o.min);n=Math.min(n,h.t1+o.max)}var a=te();a&&("t1"===e?n=Math.min(n,a.t2):t=Math.max(t,a.t1));return{min:t,max:n}}function Ie(){return f.length>0}function Ce(e,t,n){var r,i=e,o=t,a=te(),u=n?(i+o)/2:(h.t1+h.t2)/2,s=$(),l=o-i;if(l>s.max){i=Math.ceil(u-s.max/2);o=Math.floor(u+s.max/2)}else if(l<s.min){i=Math.floor(u-s.min/2);o=Math.ceil(u+s.min/2)}if(a)if(o<a.t1){i+=r=a.t1-o;o+=r}else if(i>a.t2){i-=r=i-a.t2;o-=r}return{t1:i,t2:o}}function Se(e,t){return e>=i.x1&&e<=i.x2&&t>=0&&t<=i.y2}function ke(e){var t=rA(e);if(!A(t))throw new Error("load: invalid date in dt property. Value was: "+e);return t}function Le(e){for(var t=[],n=P(e),r=0;r<n.length;r++){var i=n[r];if("object"==typeof i&&i){var o=i;if(o.id&&o.dt)for(var a=""+o.id,u=P(o.dt),s=void 0===o.v?void 0:P(o.v),l=S(o.d)?{d:o.d}:{},f=0;f<u.length;f++){var c=u[f],d=s&&s[f]||1;if(!A(d))throw new Error("load: invalid value in v property - must be numeric. Value was: "+d);if("object"!=typeof c||c instanceof Date){var h=ke(c);t.push(se({id:a,t:h,v:d,other:h},l))}else{var v=null!==c&&"dt1"in c,g=null!==c&&"dt2"in c;if(!c||!v&&!g)throw new Error("load: TimePeriod object must have a dt1 or dt2 property. Id was: "+a);var p=c,m=v?ke(p.dt1):-1/0,y=g?ke(p.dt2):1/0;if(y<m)throw new Error("load: TimePeriod dt2 time must be after dt1 time. Id was: "+a);t.push(se({id:a,t:m,v:d,other:y},l));y!==m&&t.push(se({id:a,t:y,v:d,other:m},l))}}}}return t.sort(De)}function Re(e,t,n,r,i){e.startTotals[t+1]=e.startTotals[t]+(n?i:0);e.endTotals[t+1]=e.endTotals[t]+(r?i:0)}function Te(e,t){var n=r.options.groups.categories,i=!1,o=xA(e),a=AA(e);if(J())for(var u=0;u<n.length;u++){var s=n[u],l=r.options.groups.groupBy,f=!(!e.d||e.d[l]!==s);i=i||f;Re(c.named.get(s),t,o,a,f?e.v:0)}Re(c.other,t,o,a,i?0:e.v)}function Be(e){var t=xA(e),n=AA(e),r=0;t&&e.t<h.t2&&(r=1);n&&e.t<h.t1&&(r-=1);0!==r&&(g[e.id]=(g[e.id]||0)+r)}function Oe(){b&&z(b);g={};c.named=new Map;c.other=IA();J()&&r.options.groups.categories.forEach((function(e){c.named.set(e,IA())}));for(var e=0;e<f.length;e++){var t=f[e];Be(t);Te(t,e)}p.t1=h.t1;p.t2=h.t2;var n=Ce(p.t1,p.t2,!0);w();return n}function Ge(e,t){return e===t?0:e===1/0||t===-1/0?1:e===-1/0||t===1/0?-1:e-t}function De(e,t){var n=e.t===t.t?Ge(e.other,t.other):Ge(e.t,t.t);0===n&&(n=e.id===t.id?e.v-t.v:e.id>t.id?1:-1);return n}function Fe(e){var t=(e||{}).items;f=Le(t);Z();d=[];return Oe()}function Ze(e,t){for(var n=[],r=0,i=0;r<e.length&&i<t.length;){var o=De(e[r],t[i]);if(0===o){n.push(e[r]);r++;i++}else if(o<0){n.push(e[r]);r++}else{n.push(t[i]);i++}}for(;r<e.length;){n.push(e[r]);r++}for(;i<t.length;){n.push(t[i]);i++}return n}function Pe(e){var t=Le(e);if(t.length>0){f=0===f.length?t:t[0].t>f[f.length-1].t?f.concat(t):t[t.length-1].t<f[0].t?t.concat(f):Ze(f,t);Oe()}}function Ye(e){var t=re(e);f=f.filter((function(e){return!t.has(e.id)}));Oe()}function ze(e,t){var n=h.t1,r=h.t2;Ne(n+(t?0:e),r+e);return n!==h.t1||r!==h.t2}function Ve(e){var t=N(e)?e:P(e);if(t){t.length?Y(t):d=[];le=!0;w()}return d}function We(e){var t=N(e)?e:P(e);t&&(t.length?z(t):Z());ce=!0;le=!0;w();for(var n=[],r=0;r<m.length;r++){var i=m[r];n[r]=i?Object.keys(i):null}return n}function Xe(e,t){var n=(e.t2-e.t1)*t;return{t1:e.t1-n,t2:e.t2+n}}function Ue(e,t){var n;if(D("none"))n=e;else if(D("free")){var i=te();if(i){var o=$();if(i.t2-i.t1<o.min){i.t1=Math.floor(i.t1-o.min/2);i.t2=Math.ceil(i.t2+o.min/2)}t&&(i=qe(i));n=Xe(i,r.freeSideFactor)}else n=v}else n=Xe(e,r.fixedSideFactor);return n}function Ne(n,i,o){var a=Ce(n,i,o);if(te()&&h.t1&&h.t2){var u=Ce(n+1,i+1),s=Ce(n-1,i-1);Ae(n);if(a.t1<h.t1&&s.t1===a.t1&&!r.playingExtend){t.trigger("start","range");e.fire("start",{type:"range"})}we(i);if(a.t2>h.t2&&u.t2===a.t2&&!r.playingExtend){t.trigger("end","range");e.fire("end",{type:"range"})}}var l=Ue(a,!0);M(a.t1,a.t2,l.t1,l.t2)}function je(){Ne(h.t1,h.t2);$e("range")}function Ke(e,t){M(h.t1,h.t2,e,t)}function He(){r.controlbar.colour="dark"===r.options.controlBarTheme?"#2d383f":"#ddd"}function Qe(){je();ee();He();Oe()}function Je(e,t){a=e;s=t;ee()}function _e(e){var t=R(Ue(e,!1)).histogram,n=Qx(e.t1,t.units,t.by),r=Qx(e.t2,t.units,t.by);r!==e.t2&&(r=Jx(r,t.units,t.by));return{t1:n,t2:r}}function qe(e){var t,n=e;do{var r=_e(n);t=r.t1!==n.t1||r.t2!==n.t2;n=r}while(t);return n}var $e=pe((function(n){var r=ge();if(!oe||oe.t1!==r.t1||oe.t2!==r.t2){t.trigger("change");e.fire("change",{type:n});oe={t1:r.t1,t2:r.t2}}}),250);function et(){p.t1===h.t1&&p.t2===h.t2||q();return g}function tt(e){var t,n,r=P(e),i=1/0,o=-1/0,a={};for(t=0;t<r.length;t++)a[r[t]]=!0;for(t=0;t<f.length;t++)if(a[(n=f[t]).id]){n.t<i&&(i=n.t);n.t>o&&(o=n.t)}if(i!==1/0)return{t1:i,t2:o}}function nt(e,t){if(N(e)||N(t))throw new Error("getIds error: both dt1 and dt2 dates must be passed.");return Q(rA(e),rA(t))}function rt(e){J()&&c.named.forEach(e);e(c.other)}function it(e){for(var t=0;t<r.selection.maxNumber;t++){e(y[t],t)}}return{dataRange:te,eachTick:ie,findRange:H,fitHistogramBarsExactly:qe,fontSizeFactor:I,forEachSelection:it,forEachGroup:rt,getBounds:ve,getClickedBar:K,getHistogram:de,getIdcounts:et,getIds:nt,getInnerRange:ge,getOuterRange:me,getRangeForIds:tt,getSideLimits:Ee,getSmoothArea:he,getTimeRate:ye,hasItems:Ie,inMainBarOrHistogram:Se,limitInnerRange:Ce,load:Fe,mark:Ve,merge:Pe,nextPage:be,offsetRanges:ze,privateGetItems:xe,removeItem:Ye,selection:We,setInner:Ne,setInnerRangeSide:Me,setOuter:Ke,setSize:Je,triggerTimeBarChanged:$e,ttox:U,updateOptions:Qe,xtot:j}}function SA(e,t){function n(n,r,i,o,a,u){var s=t(u,$t.smootharea);s.lineWidth=o;if(r!==s.lineColour){s.lineColour=r;s.webglLineColour=xn(r)}if(i!==s.fillColour){s.fillColour=i;s.webglFillColour=xn(i)}var l={closed:a,segments:n};s.custom=l;e(s)}return n}var kA={TIMEBAR:{alwaysUpdate:!0,isContentLayer:!0}},LA={TIMEBAR:"TIMEBAR",OVERLAYS:"OVERLAYS"};function RA(){var e;function t(t,n){e=SA(t,n)}var n=Eo(kA,void 0,t);function r(){n.setup();n.createLayer("TIMEBAR",null);n.createLayer("OVERLAYS",null)}r();return dr(dr({},n),{hasPath:n.hasLayerPathAt,removeAllItems:r,setShadowColourMap:function(e){n.setShadowColourMap(e);r()},smoothArea:e})}function TA(e,t,n,r,i,o){for(var a=n.histogram.bardx,u=o(t.maxvalue)||1,s=r.histogram.ybase,l=r.histogram.maxbarh,f=function(r){var o=t.bars[r],f=o.x+a,c=t.bars[r+1].x-a,d=o.value;if(d>0){var h=o.groupValues.map((function(e){return e/d})),v=Math.max(1,Math.min(l,Math.floor(l*d/u))),g=s-v,p=i.x>=f&&i.x<=c&&i.y>=g&&i.y<=s,m=void 0;if(o.mark){m=p?n.options.histogram.markHiColour:n.options.histogram.markColour;e.rect(f,g,c,s,Ht.white,-1,m,!0,"_tbBar",-1)}else for(var y=void 0,b=s,x=0;x<h.length;x++)if(h[x]>0){m=x===h.length-1?p?n.options.histogram.highlightColour:n.options.histogram.colour:p?n.computedGroupHiColours[x%n.computedGroupHiColours.length]:n.computedGroupColours[x%n.computedGroupColours.length];y=b-v*h[x];e.rect(f,Math.round(y),c,Math.round(b),Ht.white,-1,m,!0,"_tbBar",-1);b=y}}},c=0;c<t.count;c++)f(c)}var BA,OA=K();function GA(e,t,n,r,i,o,a){if(t.hasSel[i])for(var u=a(t.maxselvalue)||1,s=t.selvalues[i],l="_tbLine"+i,f=n.selection["colour"+i],c=(t.bars[1].x-t.bars[0].x)/2,d=0;d<t.count;d++){var h=s[d],v=s[d+1],g=t.bars[d].x+c,p=t.bars[d+1].x+c,m=r.histogram.maxselh,y=r.histogram.ybase,b=y-Math.floor(m*h/u),x=y-Math.floor(m*v/u);e.line(g,b,p,x,f,void 0,2,l);var A=l+OA+d,w=o===A?f:n.options.backColour;e.circle(g,b,n.selection.dotsize,f,2,w,!0,A,-1,void 0,!0)}}function DA(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&GA(e,t,n,r,u,o,a);null!==i&&GA(e,t,n,r,i,o,a)}function FA(e,t,n,r,i,o){var a=o(t.maxvalue)||1,u=r.histogram.ybase,s=r.histogram.maxbarh,l=[];l.push({type:en.MoveTo,value:[r.x2,u]});l.push({type:en.LineTo,value:[r.x1,u]});for(var f=0;f<t.count;f++){var c=t.bars[f],d=c.value,h=u-Math.max(1,s*d/a);l.push({type:en.LineTo,value:[c.x,h]})}l.push({type:en.LineTo,value:[r.x2,u]});e.smoothArea(l,n.options.area.colour,Mn(n.options.area.colour,.3),1.3,!0,"_tbBar")}function ZA(e,t,n,r,i,o,a){if(t.hasSel[i]){var u=a(t.maxselvalue)||1,s=t.selvalues[i],l="_tbLine"+i,f=n.selection["colour"+i],c=r.histogram.ybase,d=r.histogram.maxselh,h=[];h.push({type:en.MoveTo,value:[r.x1,c]});for(var v=0;v<t.count;v++){var g=t.bars[v],p=s[v],m=c-Math.max(1,d*p/u);h.push({type:en.LineTo,value:[g.x,m]})}h.push({type:en.LineTo,value:[r.x2,c]});e.smoothArea(h,f,void 0,2.5,!1,l)}}function PA(e,t,n,r,i,o,a){
for(var u=0;u<n.selection.maxNumber;u++)u!==i&&ZA(e,t,n,r,u,o,a);null!==i&&ZA(e,t,n,r,i,o,a)}function YA(e){function t(t,n,r,i,o,a,u){var s=n.getBounds();i.setLayer(LA.TIMEBAR);function l(){var e;-1!==a.x&&(e=n.findRange(a.x,a.y));if(e&&"histogram"!==e.bar){var t=Math.max(n.ttox(e.t1),s.x1),r=Math.min(n.ttox(e.t2),s.x2),u="minor"===e.bar?2:1;t<r&&i.rect(t,s.bars[e.bar].y1-u,r,s.bars[e.bar].y2+1,void 0,-1,o.options.scale.highlightColour,!0,null,-1)}}function f(e){var t="minor"===e,a=t&&!o.options.scale.showMinor||!t&&!o.options.scale.showMajor,u=s.bars[e].y2,l=o.options.fontFamily,f=o.options.fontSize,c=n.fontSizeFactor(),d=o.bars[e].tickHeight*c;a&&(d=0);var h=t?s.bars[e].y1:s.bars[e].y2-d;n.eachTick(e,(function(t,n,a,v,g){if(a>=s.x1&&a<=s.x2){var p=Math.floor(1*c)+1;i.line(a,h,a,h+d,"#ddd",void 0,p,null)}var m=o.displayTime(t,g),y=or(r,m,f,!1,l).width,b=Math.floor((v+a)/2-y/2);i.text(b,u-o.bars[e].textbase-f/2,m,o.options.fontColour,f,!1,null,-1,l,!1,0,!1,!1,0,0,0,0)}));if(!a){var v=Ht.transparent;i.rect(0,s.bars[e].y1,s.width,s.bars[e].y2,v,1,v,!0,t?"_tbMinor":"_tbMajor",-1)}}function c(){if(u){var e=u.match(t.selectionRegExp());if(e)return+e[1]}return null}function d(){var e=n.getInnerRange(),t=n.ttox(e.t1),r=n.ttox(e.t2);i.line(t,0,t,s.y2,o.options.sliderLineColour,void 0,2,"_tbSlider");i.line(r,0,r,s.y2,o.options.sliderLineColour,void 0,2,"_tbSlider");i.rect(s.x1,0,t,s.y2,o.options.sliderLineColour,-1,o.options.sliderColour,!0,"_tbSlider",-1);i.rect(r,0,s.width,s.y2,o.options.sliderLineColour,-1,o.options.sliderColour,!0,"_tbSlider",-1);for(var a=(s.y2-o.grip.length)/2,u=a+o.grip.length,l=t-o.grip.margin,f=r+o.grip.margin,c=4+2*o.grip.lines,d=0;d<o.grip.lines;d++){l-=o.grip.space;f+=o.grip.space;i.line(l,a,l,u,o.options.sliderLineColour,void 0,2,null);i.line(f,a,f,u,o.options.sliderLineColour,void 0,2,null)}i.rect(t-3*c,a-o.grip.length,t,u+o.grip.length,Ht.transparent,-1,Ht.transparent,!0,"_tbLeft",-1);i.rect(r+3*c,a-o.grip.length,r,u+o.grip.length,Ht.transparent,-1,Ht.transparent,!0,"_tbRight",-1)}function h(){var n=o.controlbar.height,r=s.height-n,a="dark"===o.options.controlBarTheme?"rgba(87, 109, 122, 0.7)":"rgba(255,255,255,0.7)";i.rect(0,r,s.width,s.height,o.controlbar.colour,-1,o.controlbar.colour,!0,"_tbcontrolbar",-1);i.line(0,r-.5,s.width,r-.5,"#ccc",void 0,1,"_tbcontrolbar");var l="";o.options.showPlay&&(l=t.isPlayingFixed()?"pause":"play");var f="";o.options.showExtend&&(f=t.isPlayingExtend()?"pause":"playextend");var c,d=[o.options.showFit?"fit":"","zoomout","zoomin",40,"prev",l,f,"next"],h=0,v="dark"===o.options.controlBarTheme?t.imageNamesDM():t.imageNames();function g(e){for(var t=0;t<d.length;t++){var n=d[t];n&&e(n,"number"==typeof n,t)}}function p(t,n,r){if(n)h+=t;else{var i=v[t],a=Mm[i],u=e.get(a).im;h+=u.width/2;r>0&&(h+=o.controlbar.space)}}function m(t,s){if(s)c+=t;else{var l=v[t],f=Mm[l],d=e.get(f).im,h=d.width/2,g=d.height/2,p=r+(n-g)/2,m="_tb"+t;if(u===m){var y=c+h/2,b=p+g/2;i.circle(y,b,h/2-2,a,0,a,!0,m,-1,void 0,!1)}i.image(c,p,c+h,p+g,f,m,-1,null,0,!0);c+=h+o.controlbar.space}}g(p);c=(s.width-h)/2;g(m)}function v(){i.rect(s.x1,0,s.x2,s.y1,Ht.midgrey,-1,o.options.backColour,!0,"_tbHisto",-1);i.rect(s.x1,s.y1,s.x2,s.y2,Ht.midgrey,-1,o.options.backColour,!0,"_tbMain",-1);(o.options.scale.showMajor||o.options.scale.showMinor)&&l();o.options.scale.showMajor&&f("major");o.options.scale.showMinor&&f("minor");if(n.hasItems()&&s.histogram.maxbarh>0)if("area"===o.options.type){var e=n.getSmoothArea();FA(i,e,o,s,a,t.animateBarHeight);PA(i,e,o,s,c(),u,t.animateSelHeight)}else{var r=n.getHistogram();TA(i,r,o,s,a,t.animateBarHeight);DA(i,r,o,s,c(),u,t.animateSelHeight)}"none"!==o.options.sliders&&d();o.options.showControlBar&&h()}s.x2>s.x1&&v()}return{generate:t}}function zA(e,t,n,r,i,o){for(var a="_tbBar"===n,u=0;e.bars[u+1].x<i&&u<e.count;)u++;var s,l,f=a?e.bars[u].value:e.selvalues[r][u],c=a?e.maxvalue:e.maxselvalue,d=(e.bars[u].x+e.bars[u+1].x)/2,h=t.histogram,v=h.ybase,g=a?h.maxbarh:h.maxselh,p=Math.floor(g*f/c);if(a&&!e.bars[u].mark){l=e.bars[u].groupValues;var m=v-o,y=0;s=-1;do{y+=l[++s]/f*p}while(y<m)}var b=v-p;a||(b-=5);return{x:d,y:b,v:f,groupIndex:s,groupValues:l}}function VA(e,t,n,r,i){for(var o=0;e.bars[o+1].x<r&&o<e.count;)o++;var a=e.bars[o].value,u=t.histogram;return{x:r,y:u.ybase-Math.floor(u.maxbarh*a/e.maxvalue),v:a,groupIndex:0,groupValues:[a]}}function WA(e,t){var n=t.events,r=t.legacyEvents,i=ow(e,(0,t.controller.getPointerEventInfo)(e)),o=i.type,a=i.index,u=i.value,s=i.tooltipX,l=i.tooltipY,f=i.rangeStart,c=i.rangeEnd,d=i.groupIndex,h=i.groupValues;r.trigger("contextmenu",o,a,u,s,l,f,c,d,h);n.fire("context-menu",i);return i.defaultPrevented}function XA(e,t){var n=e.pointerType,r=t.events,i=t.legacyEvents,o=ow(e,(0,t.controller.getPointerEventInfo)(e));r.fire("pointer-down",o);var a=o.type,u=o.index,s=o.value,l=o.tooltipX,f=o.tooltipY,c=o.rangeStart,d=o.rangeEnd,h=o.groupIndex,v=o.groupValues;2!==e.button&&i.trigger("mouse"===n?"click":"touchdown",a,u,s,l,f,c,d,h,v)}function UA(e,t){var n=t.events,r=t.model.inMainBarOrHistogram,i=t.controller,o=i.drawButtonHighlight,a=i.getPointerEventInfo,u=i.highlightAt,s=i.clearHighlight,l=i.getActiveDragger,f=i.setCursorByType,c=i.triggerHover,d=ow(e,a(e)),h=d.type,v=d.x,g=d.y;n.fire("pointer-move",d);if(e.isPrimary){r(v,g)?u(v,g):s();l()||f(h);o();c(e.id,d)}}function NA(e,t){var n=t.events,r=ow(e,(0,t.controller.getPointerEventInfo)(e));n.fire("pointer-up",r)}function jA(e,t){var n=t.events,r=t.controller,i=r.getPointerEventInfo,o=r.getActiveDragger,a=r.doClickAction;if(!o()||!e.dragging.started){var u=ow(e,i(e));n.fire("click",u);e.id&&!u.defaultPrevented&&e.isPrimary&&a(e.id)}}function KA(e,t){var n=t.events,r=t.legacyEvents,i=t.model,o=i.inMainBarOrHistogram,a=i.findRange,u=i.limitInnerRange,s=t.controller,l=s.getPointerEventInfo,f=s.getActiveDragger,c=s.getConfig,d=s.animateInnerTo;if(!f()||!e.dragging.started){var h=ow(e,l(e));n.fire("double-click",h);var v=h.type,g=h.x,p=h.y;if(!h.defaultPrevented&&!r.trigger("dblclick",v,g,p)&&o(g,p)){var m=a(g,p);m=u(m.t1,m.t2,!0);var y=c(),b="free"===y.options.sliders?y.doubleClickZoomTimeFree:y.doubleClickZoomTime;d(m.t1,m.t2,{time:b})}}}function HA(e,t){(0,t.controller.createDragger)(e)}function QA(e,t){(0,t.controller.stopDrag)()}function JA(e,t){var n=t.events,r=(0,t.controller.getActiveDragger)();if(r){r.dragMove(e);n.privateFire("redraw")}}function _A(e,t){var n,r=t.events,i=t.controller,o=t.legacyEvents,a=t.model,u=e.x,s=e.y,l=e.deltaX,f=e.deltaY,c=e.deltaMode,d=e.modifierKeys,h=!1,v={deltaX:l,deltaY:f,x:u,y:s,deltaMode:c,modifierKeys:d,get defaultPrevented(){return h},preventDefault:function(){h=!0}};Math.abs(f)>0&&(n=o.trigger("mousewheel",-f,u,s));r.fire("wheel",v);if(!v.defaultPrevented&&!n){e.wheelEvent.preventDefault();var g=void 0;g="free"===i.getConfig().options.sliders?i.midSlidersTime():a.xtot(u);a.inMainBarOrHistogram(u,s)&&0!==Math.abs(f)&&i.zoomOnTimeSlot(-f,g,.65,{animate:!0})}}function qA(e,t){var n=e.modifierKeys,r=n.consistentCtrl,i=n.shift,o=e.keyCode,a=t.events,u=t.controller,s=u.isPlaying,l=u.getConfig,f=u.play,c=u.pause,d=aw(e);a.fire("key-down",d);if(!d.defaultPrevented&&!r&&!i&&32===o){var h=l();if(!N(h.playingExtend)){var v={extend:h.options.showExtend&&!h.options.showPlay};s()?c():f(v)}}}function $A(e,t){var n=t.events,r=aw(e);n.fire("key-up",r)}function ew(e){return e[0].x>e[1].x?{xmin:e[1].x,xmax:e[0].x}:{xmin:e[0].x,xmax:e[1].x}}function tw(e,t){var n=t.model,r=t.controller.getConfig,i=ew(e.pointers),o=n.xtot(i.xmin),a=n.xtot(i.xmax),u=a-o,s=n.getInnerRange(),l=n.ttox(s.t1),f=n.ttox(s.t2);return{change:function(e){var t=ew(e.pointers);if("free"===r().options.sliders){var s=l+(t.xmin-i.xmin),c=f+(t.xmax-i.xmax);n.setInner(n.xtot(s),n.xtot(c),!0)}else if(t.xmax!==t.xmin){var d=u/(t.xmax-t.xmin),h=Math.floor(o-d*(t.xmin-l)),v=Math.floor(a+d*(f-t.xmax));n.setInner(h,v,!0);n.triggerTimeBarChanged("range")}}}}function nw(e,t){t.controller.stopDrag();BA=tw(e,t)}function rw(e){BA&&BA.change(e)}function iw(){BA=null}function ow(e,t){var n=e.button,r=e.pointerType,i=e.modifierKeys,o=e.pointerId,a=e.x,u=e.y,s=!1;return dr({button:n,pointerType:r,pointerId:o,x:a,y:u,modifierKeys:i,get defaultPrevented(){return s},preventDefault:function(){s=!0}},t)}function aw(e){var t=e.keyCode,n=e.modifierKeys,r=!1;return{keyCode:t,modifierKeys:n,get defaultPrevented(){return r},preventDefault:function(){r=!0}}}function uw(e,t){var n=t.controller.stopDrag,r=!0;e.on("pointerdown",(function(e){r=!0;XA(e,t)}));e.on("contextmenu",(function(e){r=WA(e,t)}));e.on("pointerup",(function(e){NA(e,t)}));e.on("pointermove",(function(e){UA(e,t)}));e.on("pointercancel",(function(){n()}));e.on("click",(function(e){r&&jA(e,t)}));e.on("doubleclick",(function(e){KA(e,t)}));e.on("dragstart",(function(e){e.isPrimary&&HA(e,t)}));e.on("dragmove",(function(e){e.isPrimary&&JA(e,t)}));e.on("dragend",(function(e){e.isPrimary&&QA(e,t)}));e.on("wheel",(function(e){_A(e,t)}));e.on("keydown",(function(e){qA(e,t)}));e.on("keyup",(function(e){$A(e,t)}));e.on("gesturestart",(function(e){nw(e,t)}));e.on("gesturechange",rw);e.on("gestureend",iw)}function sw(e,r,i,o,a,u){var s,l,f,c,d,h,v=wr(D),g=function(){},p=!1,m=!1,y=!1;var b,x,A={x:-1,y:-1},w=null,M=null;function E(e,t){return!e||!t||(e.t1!==t.t1||e.t2!==t.t2)}function I(t,n){var i=n.type,o=n.index,a=n.value,u=n.tooltipX,s=n.tooltipY,l=n.rangeStart,f=n.rangeEnd,c=n.groupIndex,d=n.groupValues,h=E(M,S.lastRange),v=t!==S.lastId;if(v||h||!v&&(null!=c?c:null)!==S.lastGroupIndex){r.trigger("hover",i,o,a,u,s,l,f,c,d);e.fire("hover",n)}S.lastId=t;S.lastRange=M;S.lastGroupIndex=null!=c?c:null}var C=pe(I,a.hoverTime),S={lastId:null,lastRange:null,lastGroupIndex:null},L={_tbfit:1,_tbzoomout:1,_tbzoomin:1,_tbprev:1,_tbpause:1,_tbplay:1,_tbplayextend:1,_tbnext:1},R=fe(),T=fe(),B={smootharea:Pb};function D(){e.privateFire("redraw")}function F(e,t,n){s=RA();d=e;l=t;f=n;i.setSize(t,n);var r=c(l,f,!0);b=uo(r.getContext("2d"),e,null,null);s.setShadowColourMap(b.getShadowColourMap());s.setShadowCustomCanvasPrimitives(B)}function Z(){n(ce,(function(e){u.get(Mm[e],!1,!0)}));n(de,(function(e){u.get(Mm[e],!1,!0)}));D()}function P(){var e='url("'+Mm["openhand.png"]+'"), pointer';Re.left=e;Re.right=e;n(L,(function(e,t){var n=t.replace("_tb","");Re[n]="pointer"}))}function Y(){return d}function V(e,t,n,r,o,a,u){c=r;g=o;h=u;P();F(e,t,n);i.setInner(Kx(new Date(2011,4,6)),Kx(new Date));Z()}function W(e,t,n){Rn();var r=ne();F(e,t,n);ne(r.dt1,r.dt2,{animate:!1,quiet:!0})}function X(){U(null);s.destroy();u.destroy();s=null;d=null}function U(e){t(d.canvas,e,h)}function j(){return ce}function K(){return de}function H(){return p}function Q(){return p&&!a.playingExtend}function J(){return p&&!!a.playingExtend}function _(){return wA}function q(e){if(e)if(u.hasPendingImages())D();else{s.resetExtras();o.generate(He,i,d,s,a,A,x);ro(d);ao(s,d,void 0,null,{},!1,!1,null,!1,0,0,void 0,u,B);b.dirty()}}function $(e){var t=i.getInnerRange();be(t.t1,t.t2,{quiet:!0},e)}function ee(e,t){i.load(e);return $(t)}function te(e,t){i.merge(e);return $(t)}function ne(e,t,n,r){function o(e){return k(e)||G(e)}if(0===arguments.length){var a=i.getInnerRange();return{dt1:Hx(a.t1),dt2:Hx(a.t2)}}if(N(e)||N(t))throw new Error("range error: both dt1 and dt2 dates must be passed.");if(!o(e)||!o(t))throw new Error("range error: both dt1 and dt2 must be dates, timestamps or ranges.");var u=z(n,{animate:!0}),s=rA(e),l=rA(t),f=i.limitInnerRange(s,l,!0);be(f.t1,f.t2,u,r)}function re(e){i.removeItem(e);$()}function ie(t){var n=t||{},i=n.extend?"extend":"normal";r.trigger("play",i);e.fire("play",{type:i});ge(n)}function oe(e,t,n){var r=z(t,{animate:!0}),i=e||"forward";if("forward"!==i&&"back"!==i)throw new Error("Timebar.pan: Invalid direction option ("+i+") passed.");ke(i,r,n)}function ue(e,t,n){switch(e){case"in":Ze(t,n);break;case"out":Pe(t,n);break;case"fit":Ge(t,n)}}function se(){p=!1;a.playingExtend=!1;r.trigger("pause");e.fire("pause")}function le(e,t){if(e){a.setOptions(e);i.updateOptions();"object"==typeof e&&e&&"_showShadowCanvas"in e&&b.debugCanvas(e._showShadowCanvas?d:null);D()}O(t);return a.getOptions()}function fe(){var e=null,t=Mr(v,(function(t){if(0===arguments.length)return e;e=t}));return function(n){a.options.heightChange.animate&&null!==e?t(n,a.options.heightChange.time):e=n;return e}}var ce={play:"TBPlay.png",pause:"TBPause.png",next:"TBNext.png",prev:"TBPrev.png",fit:"TBFit.png",playextend:"TBPlayExtend.png",zoomin:"TBZoomIn.png",zoomout:"TBZoomOut.png"},de={play:"TBPlayDM.png",pause:"TBPauseDM.png",next:"TBNextDM.png",prev:"TBPrevDM.png",fit:"TBFitDM.png",playextend:"TBPlayExtendDM.png",zoomin:"TBZoomInDM.png",zoomout:"TBZoomOutDM.png"};function he(e,t){return b.test(e,t,s)}function ve(e){var t=e.id,n=e.x,r=e.y;x=t;if(Ae(n,r)){M=i.findRange(n,r);if("area"===a.options.type&&"histogram"===M.bar){M.t1=i.xtot(n);M.t2=i.xtot(n+1)}}var o,u,s,l,f,c,d=n,h=r,v=null,g=M&&"histogram"===M.bar;if(Ae(n,r)){o=Hx(M.t1);u=Hx(M.t2);v=g?null:"scale"}if(we()){v="area"===a.options.type?"area":"bar";if("_tbBar"!==x){v="selection";s=+x.match(wA)[1];if(!g){o=Hx((M=i.findRange(n,r,"histogram")).t1);u=Hx(M.t2)}}var p=void 0;d=(p="area"===a.options.type?VA(i.getSmoothArea(),i.getBounds(),x,n,r):zA(i.getHistogram(),i.getBounds(),x,s,n,r)).x;h=p.y;l=p.v;if("area"===a.options.type){f=void 0;c=void 0}else{f=p.groupIndex;c=p.groupValues}}!v&&x&&(v=EA(x));return{type:v,index:s,value:l,tooltipX:d,tooltipY:h,rangeStart:o,rangeEnd:u,groupIndex:f,groupValues:c}}function ge(t){a.playingExtend=!!t.extend;if(!p){p=!0;v.push(Ar((function(t){var n=i.offsetRanges(Math.floor(i.getTimeRate()*(a.options.playSpeed||a.defaultPlaySpeed)*(t/1e3)),!!a.playingExtend);if(!p||!n){p=!1;a.playingExtend=!1;if(!n){r.trigger("pause");e.fire("pause")}return!1}i.triggerTimeBarChanged("range");return!0})))}}function me(e,t,n,r,o,u){var s=e.t1,l=e.t2,f=n-s,c=r-l,d=o||{},h=d.time||a.defaultAnimationTime,g=h;v.push(Ar((function(e){var n=1-(g=Math.max(0,g-e))/h;t(s+f*n,l+c*n);if(g<=0){d.quiet||i.triggerTimeBarChanged("range");O(u)}return g>0})))}function ye(e,t,n,r){var o=i.limitInnerRange(e,t);me(i.getInnerRange(),i.setInner,o.t1,o.t2,n,r)}function be(e,t,n,r){if(n.animate)ye(e,t,n,r);else{i.setInner(e,t);n.quiet||i.triggerTimeBarChanged("range");O(r)}}function xe(e,t,n,r){me(i.getOuterRange(),i.setOuter,e,t,n,r)}function Ae(e,t){return i.inMainBarOrHistogram(e,t)||!!x&&wA.test(x)}function we(){return"_tbBar"===x||!!x&&wA.test(x)}function Me(e,t){return Math.min(t.max,Math.max(t.min,e))}function Ee(e){return function(t){var n=t.x,r=i.getInnerRange()[e],o=n-i.ttox(r),u=t;return{type:"slider",getCursor:function(){return"ew-resize"},setLastProps:function(e){u=e},getLastProps:function(){return u},dragMove:function(t){u=t;var n=i.getSideLimits(e);i.setInnerRangeSide(e,Me(i.xtot(t.x-o),n));i.triggerTimeBarChanged("range");g("ew-resize")},endDrag:function(t){t&&i.setInnerRangeSide(e,r);if("fixed"===a.options.sliders){var n=i.getInnerRange(),o=(n.t2-n.t1)*a.fixedSideFactor;xe(n.t1-o,n.t2+o,{time:a.sliderReleaseTime})}}}}}function Ie(e,t){if(A.x!==e||A.y!==t){A.x=e;A.y=t;D()}}function Ce(){Ie(-1,-1)}function Se(){(x&&x in L||S.lastId&&S.lastId in L)&&D()}function ke(e,t,n){var r=i.nextPage(e);be(r.t1,r.t2,t,n)}function Le(e){var t=e.x,n=i.getInnerRange().t1,r=e;return{type:"scroll",getCursor:function(){return"move"},setLastProps:function(e){r=e},getLastProps:function(){return r},dragMove:function(e){r=e;var o=Math.floor((t-e.x)*i.getTimeRate());"free"===a.options.sliders&&(o*=-1);i.offsetRanges(o+(n-i.getInnerRange().t1));i.triggerTimeBarChanged("range")},endDrag:function(e){e&&i.offsetRanges(n-i.getInnerRange().t1)}}}var Re={},Te={_tbBar:Le,_tbSlider:Le,_tbHisto:Le,_tbLine:Le,_tbMain:Le,_tbMajor:Le,_tbMinor:Le,_tbLeft:Ee("t1"),_tbRight:Ee("t2")};function Be(){if(w){var t=w.getLastProps(),n=r.trigger("dragend",w.type,t.x,t.y),i=ow(t,ve(t));e.fire("drag-end",i);w.endDrag(n||i.defaultPrevented);r.trigger("dragcomplete",w.type,t.x,t.y);w=null;g("auto")}}function Oe(e,t,n,r,o){var a=z(r,{animate:!0,time:200}),u=n||.5,s=e>0?u:1/u,l=i.getInnerRange(),f=l.t1,c=l.t2,d=c-f,h=d*s,v=(t-l.t1)/(l.t2-l.t1);be(f=Math.floor(f-(h-d)*v),c=Math.floor(c+(h-d)*(1-v)),a,o)}function Ge(e,t){var n;(n=e&&e.id?i.getRangeForIds(e.id):i.dataRange())?ne((n=i.fitHistogramBarsExactly(n)).t1,n.t2,e,t):O(t)}function De(){var e=i.getInnerRange();return(e.t1+e.t2)/2}function Fe(e,t,n){Oe(e,De(),.5,t,n)}function Ze(e,t){Fe(1,e,t)}function Pe(e,t){Fe(-1,e,t)}function Ye(e){y=e}function ze(e){m=e}function Ve(e){if("_tbplay"===e){a.playingExtend=!1;ie()}else if("_tbplayextend"===e){a.playingExtend=!0;ie({extend:!0})}else if("_tbpause"===e)se();else if("_tbnext"!==e||m)if("_tbprev"!==e||m)if("_tbfit"===e)Ge();else if("_tbzoomin"!==e||y){if("_tbzoomout"===e&&!y){Ye(!0);"free"===a.options.sliders?Ze(void 0,(function(){Ye(!1)})):Pe(void 0,(function(){Ye(!1)}))}}else{Ye(!0);"free"===a.options.sliders?Pe(void 0,(function(){Ye(!1)})):Ze(void 0,(function(){Ye(!1)}))}else{ze(!0);oe("back",null,(function(){ze(!1)}))}else{ze(!0);oe("forward",null,(function(){ze(!1)}))}}function We(e){var t=e;return{type:null,getCursor:function(){return"auto"},setLastProps:function(e){t=e},getLastProps:function(){return t},dragMove:function(e){t=e},endDrag:function(){}}}function Xe(t){var n=t.id,i=t.x,o=t.y,a=MA(n);if(a&&Te[a]){var u="hand";/left|right/i.test(a)&&(u=EA(a));var s=r.trigger("dragstart",u,i,o),l=ow(t,ve(t));e.fire("drag-start",l);if(s||l.defaultPrevented)w=We(t);else{(w=Te[a](t)).type=u;g(w.getCursor(i,o))}}}function Ue(e){g(e&&Re[e]||"auto")}function Ne(){return w}function je(){return a}function Ke(){return s}var He={animate:v.animate,animateInnerTo:ye,animateBarHeight:R,animateSelHeight:T,createDragger:Xe,destroy:X,doClickAction:Ve,draw:q,getActiveDragger:Ne,getCanvas:Y,getConfig:je,getPointerEventInfo:ve,hittest:he,imageNames:j,imageNamesDM:K,isPlaying:H,isPlayingExtend:J,isPlayingFixed:Q,load:ee,merge:te,midSlidersTime:De,options:le,pan:oe,pause:se,play:ie,privateInit:V,privateSetSize:W,range:ne,removeItem:re,selectionRegExp:_,setContainer:U,setCursorByType:Ue,stopDrag:Be,triggerHover:C,zoom:ue,zoomOnTimeSlot:Oe,drawButtonHighlight:Se,highlightAt:Ie,clearHighlight:Ce,getWidgets:Ke};return He}function lw(){throw new Error("Time bar has been destroyed")}function fw(e,t,n){var r=Cr(),i=uA(),o=Oh(),a=CA(o,r,i),u=YA(t),s=sw(o,r,a,u,i,t),l=n.privateGetElement(),f=new cb(l,(function(e){return"pointer-move"===e.pointerEvent.type?null:s.hittest(e.x,e.y)}));uw(f,{model:a,controller:s,legacyEvents:r,events:o});function c(){return s.load({items:[]})}function d(e,t){return a.getIds(e,t)}function h(e,t){if("object"==typeof e&&e&&"items"in e){var n=e;if(n.items)return s.load(n,t)}throw Error("Unknown data format passed")}function v(e,t){return s.options(e,t)}function g(e,t,n){return s.pan(e,t,n)}function p(){return s.pause()}function m(e){return s.play(e)}function y(e,t,n,r){return 0!==arguments.length?s.range(e,t,n,r):s.range()}function b(e,t){var n=P(Z(e));return s.merge(n,t)}function x(e){s.removeItem(e)}function A(e){return a.selection(e)}function w(e){return a.mark(e)}function M(e,t,n){var r=z(t,{animate:!0,time:200});return s.zoom(e||"in",r,n)}function E(e){if(N(e))return!1;var t=""+(S(e)?e.id:e);return!!a.getIdcounts()[t]}function I(e){}function C(e){var t=br(e);s.setContainer(t)}var k=xr(s.draw,s.animate,s.getCanvas);o.privateOn("redraw",k.redraw);var L={bind:r.bind,clear:c,destroy:B,getIds:d,inRange:E,load:h,mark:w,merge:b,on:o.on,off:o.off,options:v,pan:g,pause:p,play:m,range:y,removeItem:x,selection:A,setContainer:C,unbind:r.unbind,zoom:M},R=dr(dr(dr({_getItems:a.privateGetItems,privateCanvasApi:n,privateInit:s.privateInit,privateSetRemoveComponentReference:I,privateSetSize:s.privateSetSize,privateOn:o.privateOn.bind(o),privateOff:o.privateOff.bind(o),privateFire:o.privateFire.bind(o),privateUseAutoSizing:function(){return!0},__getW:s.getWidgets.bind(s)},k),r),L),T=dr({},L);function B(){C(null);f.destroy();s.destroy();delete KeyLines.components[e];s=null;r=null;ee(T).forEach((function(e){T[e]=lw}))}return{public:T,internal:{api:R}}}var cw,dw,hw=128,vw=4096,gw=16,pw=hw,mw=.25,yw=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];function bw(){return gw+mw*pw}function xw(e,t,n){var r=e;cw=t;pw=hw;dw=bw();return ww(r,n)}function Aw(e,t,n){var r=xy(e,t,n,"text");r.fillStyle="black";r.fillRect(0,0,e,e);return r}function ww(e,t){var n=Object.keys(e),r=Mw(n),i={};return le(Iw(i,n,r,t),{getGlyphInfoForFont:function(e){return i[e]}})}function Mw(e){for(var t=0,n=document.createElement("canvas").getContext("2d"),r=0,i=e.length;r<i;r++){var o=cw.getNonEmojiGlyphs(),a=e[r];t+=Ew(n,o,a,!1);t+=Ew(n,o,a,!0)}for(var u=(pw+dw)*t/3,s=256;u/(s*s)>3;)s*=2;return s}function Ew(e,t,n,r){for(var i,o=0,a=r?"bold ":"",u=0,s=t.length;u<s;u++){var l=t[u];i=Ce(l)?Se(pw):pw;e.font=a+i+"px "+n;o+=e.measureText(l).width+gw}return o}function Iw(e,t,r,i){var o,a=r,u=[],s=function(){u=[];o={x:gw,y:dw,colourComponent:0,textureBank:0};for(var n=0,r=t.length;n<r;n++){e[t[n]]=e[t[n]]||{};kw(u,a,e,o,t[n],!1,i);kw(u,a,e,o,t[n],!0,i)}};F(s,(function(e){if(e){if((a*=2)>vw){pw/=2;dw=bw()}if(pw<32){console.log("Number of unique text characters exceeded, try reducing the number of fonts or use canvas mode");return}s()}}));n(e,(function(t,n){Sw(u,e,n,!1);Sw(u,e,n,!0)}));for(;o.textureBank<2;){o.textureBank++;var l=xy(1,o.textureBank,!1,"text");u[o.textureBank]={alphaChannel:!1,img:l.canvas,texture:void 0,rebuild:!1,size:0}}return{fontSize:pw,atlases:u,glyphInfo:e}}function Cw(e,t,n){var r=e[t].ctx;r.font=n;r.globalCompositeOperation="lighter";return r}function Sw(e,t,n,r){for(var i=t[n],o=r?"B":"",a=r?"bold ":"",u=cw.getNonEmojiGlyphs(),s=0;s<u.length;++s){var l=u[s],f=0,c=i[l+o];if(c){var d=void 0;if(Ce(l)){f=8;d=Se(pw)}else d=pw;var h=Cw(e,c.textureBank,a+d+"px "+n);h.fillStyle=yw[c.colourComponent];h.fillText(l,c.x,c.y+.75*pw-f)}}}function kw(e,t,n,r,i,o,a){var u,s=e[r.textureBank];if(s)u=s.ctx;else{s={alphaChannel:!1,img:(u=Aw(t,r.textureBank,a)).canvas,ctx:u,texture:void 0,rebuild:!1,size:0};e[r.textureBank]=s}var l=o?"B":"",f=o?"bold ":"";u.fillStyle="black";for(var c=cw.getNonEmojiGlyphs(),d=0;d<c.length;++d){var h=c[d],v=void 0;v=Ce(h)?Se(pw):pw;u.font=f+v+"px "+i;var g=u.measureText(h);if(r.x+g.width+gw>t){var p=r.y+pw+dw;if(p+pw>t){p=dw;if(r.colourComponent<2)r.colourComponent++;else{if(!(r.textureBank<2))throw new Error("Warning: Number of unique text characters exceeded, restarting build with larger Texture");r.colourComponent=0;r.textureBank++;(u=Aw(t,r.textureBank,a)).font=f+pw+"px "+i;e.push({alphaChannel:!1,img:u.canvas,ctx:u,texture:void 0,rebuild:!1,size:0})}u.fillStyle=yw[r.colourComponent]}r.x=gw;r.y=p}n[i][h+l]={text:h,x:r.x,y:r.y,u1:r.x/t,v1:(r.y+pw)/t,u2:(r.x+g.width)/t,v2:(r.y-pw*mw)/t,colourComponent:r.colourComponent,textureBank:r.textureBank,width:g.width};r.x+=g.width+gw}}var Lw=2048,Rw=256,Tw=Rw/2;function Bw(e,t,n){var r,i=Object.keys(e);if(i.length){var o=Ow(i.length),a=xy(o,0,n,"FontIcon");r=a.canvas;var u=Rw-2*4,s=Tw,l=0,f=1/o;a.fillStyle="rgb(0,0,0)";a.textAlign="center";var c=0,d=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];a.fillStyle="black";a.fillRect(0,0,o,o);a.fillStyle=d[0];a.globalCompositeOperation="lighter";for(var h=0,v=i.length;h<v;h++){var g=e[i[h]],p=or(a,g.t,u,!1,g.ff||t,!0),m=Math.max(p.width,p.height),y=0;if(m>u){y=(u-(m=u*(u/m)))/2}if(s+Rw>o+128){s=Tw;l+=Rw}if(l>=o){s=Tw;l=0;if(++c>2)throw Error("Maximum number of icons exceeded!");a.fillStyle=d[c]}g.textureBank=3;g.colourComponentTexture=c;g.u1=(s-u/2)*f;g.v1=l*f;g.u2=(s+u/2)*f;g.v2=(l+u)*f;a.textBaseline="top";a.font=m+"px "+xe(g.ff||t);a.fillText(g.t,s,l+y);s+=Rw}}else{(r=document.createElement("canvas")).id="webglFontIconDebugCanvas";r.width=1;r.height=1}return{alphaChannel:!1,img:r,texture:void 0,rebuild:!1,size:0}}function Ow(e){for(var t=512,n=12;t<Lw;){if(e<=n)return t;t*=2;n*=4}return Lw}var Gw=[0,0,0,0],Dw=[255,255,255,255],Fw=[145,146,149,255];function Zw(e,t,n){var r=e.itemPrimitives,i=n.all||t||r.dirty>0;r.dirty--;return i}var Pw={dashed:2,dotted:3,flow:4};function Yw(e){var t;return(null===(t=e.itemPrimitives)||void 0===t?void 0:t.isHitTested)&&e.webglShadowColour||Gw}var zw=6;function Vw(e,t,n){for(var r=t||Dw,i=e.colourData,o=e.colourIndex,a=0;a<zw;a++){i[o++]=r[0];i[o++]=r[1];i[o++]=r[2];i[o++]=r[3]*n}e.colourIndex=o}function Ww(e,t){var n=t||[0,0,0,0],r=e.shadowData,i=e.shadowIndex;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=0;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=3;e.shadowIndex=i}var Xw=new Float32Array(8);function Uw(e,t,n,r,i,o,a,u,s){var l,f=e.positionIndex,c=e.positionData;if(s&&a>-1){Qr(Xw,t,n,r,i,u,a);l=-1}else{Xw[0]=t;Xw[1]=n;Xw[2]=r;Xw[3]=n;Xw[4]=t;Xw[5]=i;Xw[6]=r;Xw[7]=i;l=u.positionIndex[a]}c[f++]=Xw[0];c[f++]=Xw[1];c[f++]=o;c[f++]=l;c[f++]=Xw[2];c[f++]=Xw[3];c[f++]=o;c[f++]=l;c[f++]=Xw[4];c[f++]=Xw[5];c[f++]=o;c[f++]=l;c[f++]=Xw[4];c[f++]=Xw[5];c[f++]=o;c[f++]=l;c[f++]=Xw[2];c[f++]=Xw[3];c[f++]=o;c[f++]=l;c[f++]=Xw[6];c[f++]=Xw[7];c[f++]=o;c[f++]=l;e.positionIndex=f}function Nw(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=e.textureData,g=e.textureIndex;v[g++]=t;v[g++]=n;v[g++]=o;v[g++]=a;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=i;v[g++]=u;v[g++]=s;v[g++]=l;v[g++]=f;v[g++]=c;v[g++]=d;v[g++]=h;e.textureIndex=g}function jw(e,t,n,r,i,o,a,u){var s=a||u.all;if(s){var l=Yw(e);Ww(r.triangleBuffers,l);Vw(r.triangleBuffers,n,o)}if(s||r.useAbsolutePosition){var f=e.x1,c=e.y1,d=e.x2,h=e.y2,v=0|(e.imageInflate||0);Uw(r.triangleBuffers,f,c,d,h,v,e.anchorIndex,i,r.useAbsolutePosition)}if(s){var g=void 0,p=void 0,m=void 0,y=void 0,b=0,x=t;if("ci"!==e.specifier||x.isMissing){p=t.u1;g=t.v1;y=t.u2;m=t.v2}else{b="width"===x.maxDimension?(e.y2-e.y1)/2:(e.x2-e.x1)/2;p=x.cu1;g=x.cv1;y=x.cu2;m=x.cv2}Nw(r.triangleBuffers,p,g,y,m,0,0,1,1,t.textureBank,t.colourComponentTexture,b,0,0)}}function Kw(e,t,n,r,i,o,a){if(e){"_background"===n.id&&(n.webglShadowColour=Gw);jw(n,a.get(n.url),Dw,t,n.itemPrimitives,r,i,o)}else t.triangleBuffers.skip()}function Hw(e,t,n,r,i,o,a){if(e){jw(n,a[n.text+(n.fontFamily||"")],n.webglFontColour,t,n.itemPrimitives,r,i,o)}else t.triangleBuffers.skip()}var Qw=[0,1,0,1],Jw=[0,0,2,2];function _w(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=f.elementData,g=f.elementIntegerData,p=f.elementDataIndex;if(d||h.all){var m=f.elementIndex,y=f.elementIndexIndex,b=f.elementMappingIndex;m[y]=b;m[y+1]=b+1;m[y+2]=b+2;m[y+3]=b+2;m[y+4]=b+1;m[y+5]=b+3}f.elementIndexIndex+=6;f.elementMappingIndex+=4;for(var x=0,A=0;A<4;A++){if(d||h.all||h.positions){v[p]=e;v[p+1]=t;v[p+2]=n;v[p+3]=r;v[p+4]=s}if(d||h.all){var w=null!=i?i:Fw,M=null!=o?o:w;v[p+5]=l;g[x=(p+6)*Float32Array.BYTES_PER_ELEMENT]=Qw[A];g[x+1]=Jw[A];g[x+2]=0;g[x+4]=w[0];g[x+5]=w[1];g[x+6]=w[2];g[x+7]=w[3]*c;g[x+8]=M[0];g[x+9]=M[1];g[x+10]=M[2];g[x+11]=M[3]*c;var E=a||[0,0,0];g[x+12]=E[0];g[x+13]=E[1];g[x+14]=E[2];g[x+15]=u}f.elementDataIndex+=10;p=f.elementDataIndex}}function qw(e,t,n,r,i,o){if(e){var a=Yw(n),u=Pw[n.lineStyle]||0;_w(n.x1,n.y1,n.x2,n.y2,n.webglColour,n.webglColour2||n.webglColour,a,u,n.width,n.flowVelocity,t.lineBuffers,r,i,o)}else t.lineBuffers.skip()}function $w(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g,p){var m=h||0,y=v||0,b=n,x=o;if(!r){b=0;x=0}if(d.all||c){Ww(s.triangleBuffers,i||Dw);Vw(s.triangleBuffers,r,f);Nw(s.triangleBuffers,a,u,a,u,0,0,1,1,-1,-1,b,m,y)}if(d.all||c||s.useAbsolutePosition){var A=void 0;A=g?-x:x;var w=2*b,M=e-b,E=t-b,I=M+w,C=E+w;Uw(s.triangleBuffers,M,E,I,C,A,p,l,s.useAbsolutePosition)}}function eM(e,t,n,r,i,o){if(n.isFilled)if(e){var a=Yw(n);$w(n.x,n.y,n.r,n.webglFillColour,a,0,.5,.5,t,n.itemPrimitives,r,i,o,null,null,!1,n.anchorIndex)}else t.triangleBuffers.skip();if(n.borderWidth>0)if(e){a=Yw(n);var u=Pw[n.borderStyle]||0;$w(n.x,n.y,n.r,n.webglBorderColour,a,n.borderWidth,.5,.5,t,n.itemPrimitives,r,i,o,null,null,u>1,n.anchorIndex)}else t.triangleBuffers.skip()}var tM=6,nM=4;function rM(e,t,n,r,i,o){for(var a=t.shadowIndex,u=0;u<nM;u++)for(var s=0;s<tM;s++){e[a++]=n;e[a++]=r;e[a++]=i;e[a++]=o}t.shadowIndex=a}function iM(e,t,n){for(var r=t.coreIndex,i=1;i<=nM;i++){e[r]=i;e[r+1]=n;e[r+3]=i+1;e[r+4]=n;e[r+6]=-i;e[r+7]=n;e[r+9]=-i;e[r+10]=n;e[r+12]=i+1;e[r+13]=n;e[r+15]=-(i+1);e[r+16]=n;r+=18}t.coreIndex=r}function oM(e,t,n,r,i,o,a,u){for(var s=n,l=r,f=t.positionIndex,c=0;c<nM;c++)for(var d=0;d<tM;d++){e[f++]=s;e[f++]=l;e[f++]=i;e[f++]=o;e[f++]=a;e[f++]=u}t.positionIndex=f}function aM(e,t,n,r,i){for(var o=t.colourIndex,a=null!=n?n:Fw,u=null!=r?r:a,s=0;s<nM;s++)for(var l=0;l<tM;l++){e[o++]=a[0];e[o++]=a[1];e[o++]=a[2];e[o++]=a[3]*i;e[o++]=u[0];e[o++]=u[1];e[o++]=u[2];e[o++]=u[3]*i}t.colourIndex=o}function uM(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,g){var p=l||[0,0,0,0];if(v||g.all){rM(e.shadowData,e,p[0],p[1],p[2],d);var m=u,y=s,b=c;if(i<0){m=s;y=u;b=-c}aM(e.colourData,e,m,y,h);iM(e.coreData,e,b);oM(e.positionData,e,t,n,r,o,a,f)}else g.positions&&oM(e.positionData,e,t,n,r,o,a,f)}function sM(e,t,n,r,i,o){var a=Yw(n);if(n.isDonut)e?$w(n.x,n.y,n.r,n.webglColour,a,n.width,.5,.5,t,n.itemPrimitives,r,i,o,n.startAngle,n.endAngle,!1,0):t.triangleBuffers.skip();else if(e){var u=Pw[n.lineStyle]||1;uM(t.arcBuffers,n.x,n.y,n.r,n.offset,n.startAngle,n.endAngle,n.webglColour,n.webglColour2||n.webglColour,a,n.width,n.flowVelocity,u,r,i,o)}else t.arcBuffers.skip()}var lM=65535,fM=Li;function cM(e,t,n){
for(var r,i,o=4===t.xs.length,a=t.xs,u=a[0],s=a[1],l=a[2],f=a[3],c=t.ys,d=c[0],h=c[1],v=c[2],g=c[3],p=0,m=o?fM:fM/2,y=o?lM:Math.round(t.joinFraction*lM),b=(y/256|0)-128,x=y%256-128,A=2*(fM+1),w=2*(m+1),M=e.elementData,E=e.elementIntegerData,I=e.elementDataIndex,C=0;C<A;C++){if(C===w){u=(r=t.xs)[3],s=r[4],l=r[5],f=r[6];d=(i=t.ys)[3],h=i[4],v=i[5],g=i[6];p=2*m;m-=fM;b=((y=lM-y)/256|0)-128;x=y%256-128}M[I++]=u;M[I++]=d;M[I++]=s;M[I++]=h;M[I++]=l;M[I++]=v;M[I++]=f;M[I++]=g;M[I++]=n;var S=++I*Float32Array.BYTES_PER_ELEMENT;E[S++]=C-p;E[S++]=m;E[S++]=b;E[S++]=x;I+=4}e.elementDataIndex+=28*(fM+1)}function dM(e,t,n,r,i,o,a,u,s){for(var l,f,c=e.elementIndex,d=e.elementIndexIndex,h=e.elementMappingIndex,v=0;v<fM;v++){c[d++]=h;c[d++]=h+2;c[d++]=h+1;c[d++]=h+1;c[d++]=h+2;c[d++]=h+3;h+=2}var g=n[0],p=n[1],m=n[2],y=n[3]*s,b=r[0],x=r[1],A=r[2],w=r[3]*s,M=i||[0,0,0],E=M[0],I=M[1],C=M[2],S=4===t.xs.length,k=t.xs,L=k[0],R=k[1],T=k[2],B=k[3],O=t.ys,G=O[0],D=O[1],F=O[2],Z=O[3],P=0,Y=S?fM:fM/2,z=S?lM:Math.round(t.joinFraction*lM),V=(z/256|0)-128,W=z%256-128,X=2*(fM+1),U=2*(Y+1),N=e.elementData,j=e.elementIntegerData,K=e.elementDataIndex,H=0;for(v=0;v<X;v++){if(v===U){L=(l=t.xs)[3],R=l[4],T=l[5],B=l[6];G=(f=t.ys)[3],D=f[4],F=f[5],Z=f[6];P=2*Y;Y-=fM;V=((z=lM-z)/256|0)-128;W=z%256-128}N[K++]=L;N[K++]=G;N[K++]=R;N[K++]=D;N[K++]=T;N[K++]=F;N[K++]=B;N[K++]=Z;N[K++]=o;N[K++]=a;H=K*Float32Array.BYTES_PER_ELEMENT;j[H++]=v-P;j[H++]=Y;j[H++]=V;j[H++]=W;j[H++]=g;j[H++]=p;j[H++]=m;j[H++]=y;j[H++]=b;j[H++]=x;j[H++]=A;j[H++]=w;j[H++]=E;j[H++]=I;j[H++]=C;j[H++]=u;K+=4}e.elementDataIndex+=28*(fM+1)}function hM(e,t,n,r,i,o){if(e&&n.bezier){var a=Pw[n.lineStyle]||1,u=Yw(n);i||o.all?dM(t.bezierBuffers,n.bezier,n.webglColour,n.webglColour2||n.webglColour,u,n.width,n.flowVelocity,a,r):o.positions&&cM(t.bezierBuffers,n.bezier,n.width);t.bezierBuffers.elementIndexIndex+=6*fM;t.bezierBuffers.elementMappingIndex+=2*(fM+1)}else t.bezierBuffers.skip()}function vM(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){var g=l||0,p=0,m=0;if(v){p=v[0]||0;m=v[1]||0}var y=t,b=n,x=r,A=i;if(!o){y=0;x=0;b=0;A=0}if(d||h.all){var w=Yw(e);Ww(a.triangleBuffers,w);Vw(a.triangleBuffers,o,s);Uw(a.triangleBuffers,y,b,x,A,g,e.anchorIndex,u,a.useAbsolutePosition);var M=x-y,E=A-b,I=!!e.isSelectionBorder;Nw(a.triangleBuffers,M,E,0,0,M,E,M,E,c,0,v?-1:-2,f>0?-f:p,I?-1:m)}else a.useAbsolutePosition&&Uw(a.triangleBuffers,y,b,x,A,g,e.anchorIndex,u,a.useAbsolutePosition)}function gM(e,t,n,r,i,o){var a,u=n.isFilled,s=n.borderWidth>0;if(e){var l=null!==(a=n.cornerRadius)&&void 0!==a?a:0;u&&vM(n,n.x1,n.y1,n.x2,n.y2,n.webglFillColour,t,n.itemPrimitives,r,0,l,-1,i,o,n.rectMargins);if(s){var f=(Pw[n.borderStyle]||0)>1?-3:-1;vM(n,n.x1,n.y1,n.x2,n.y2,n.webglBorderColour,t,n.itemPrimitives,r,n.borderWidth,l,f,i,o,n.rectMargins)}}else{u&&t.triangleBuffers.skip();s&&t.triangleBuffers.skip()}}var pM=.109375;function mM(e,t,n,r,i,o,a,u){Nw(e,t,n,r,i,o,o,o,o,u,a,0,0,0)}function yM(e,t,n,r,i,o,a,u,s){if(u.all||a||s){var l=pM,f=0,c=t.webglFontColour;c?t.fontSize!==In&&(l=Cn/r*(t.fontSize/Cn)):l=0;for(var d=t.wmargin,h=t.fontSize*(t.paddingFactor/2),v=t.x1,g=t.y1+t.yOffset+h,p=0,m=n.length;p<m;p++){var y=n[p],b=r*l;Ww(e,Gw);Vw(e,c,o);var x=y.width*l,A=0;y.textureBank<3&&(A=b*mw);Uw(e,v+f+d,g+b,v+(f+x)+d,g-A,0,t.anchorIndex,i,s);mM(e,y.u1,y.v1,y.u2,y.v2,b,y.colourComponent,y.textureBank);f+=x}}}function bM(e,t,n,r,i,o,a,u){if(n.back)if(e){var s=n.fontSize*n.paddingFactor;vM(n,n.x1,n.y1,n.x2,n.y2+s,n.webglBackColour,t,n.itemPrimitives,r,0,0,-4,i,o)}else t.triangleBuffers.skip();e?yM(t.triangleBuffers,n,a,u,n.itemPrimitives,r,i,o,t.useAbsolutePosition):t.triangleBuffers.skipMany(a.length)}var xM=5,AM=3;function wM(e,t,n,r,i){for(var o=t.shadowIndex,a=0;a<AM;a++){e[o++]=n;e[o++]=r;e[o++]=i;e[o++]=xM+a}t.shadowIndex=o}function MM(e,t){var n=t.coreIndex;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=1;t.coreIndex=n}function EM(e,t,n,r,i,o,a,u){var s=t.positionIndex;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;t.positionIndex=s}function IM(e,t,n,r,i,o,a){for(var u=t.colourIndex,s=0;s<AM;s++){e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a;e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a}t.colourIndex=u}function CM(e,t,n,r,i,o,a,u,s,l,f,c){var d=s||[0,0,0];if(f||c.all){wM(e.shadowData,e,d[0],d[1],d[2]);IM(e.colourData,e,u[0],u[1],u[2],u[3],l);MM(e.coreData,e)}(c.positions||f||c.all)&&EM(e.positionData,e,t,n,r,i,o,a)}function SM(e,t,n,r,i,o,a,u,s,l,f,c,d){var h,v,g,p=e.elementData,m=e.elementIntegerData;if(c||d.all){var y=e.elementIndex,b=e.elementIndexIndex,x=e.elementMappingIndex;y[b]=x;y[b+1]=x+1;y[b+2]=x+2;h=l||[0,0,0,0]}e.elementIndexIndex+=3;e.elementMappingIndex+=3;p[v=e.elementDataIndex]=n;p[v+1]=r;p[v+2]=i;p[v+3]=o;p[v+4]=a;p[v+5]=u;if(c||d.all){m[g=(v+t)*Float32Array.BYTES_PER_ELEMENT]=0;m[g+1]=1;m[g+2]=0;m[g+3]=0;m[g+4]=s[0];m[g+5]=s[1];m[g+6]=s[2];m[g+7]=s[3]*f;m[g+8]=s[0];m[g+9]=s[1];m[g+10]=s[2];m[g+11]=s[3]*f;m[g+12]=h[0];m[g+13]=h[1];m[g+14]=h[2];m[g+15]=xM}e.elementDataIndex+=t+4;p[v=e.elementDataIndex]=n;p[v+1]=r;p[v+2]=i;p[v+3]=o;p[v+4]=a;p[v+5]=u;if(c||d.all){m[g=(v+t)*Float32Array.BYTES_PER_ELEMENT]=1;m[g+1]=0;m[g+2]=0;m[g+3]=1;m[g+4]=s[0];m[g+5]=s[1];m[g+6]=s[2];m[g+7]=s[3]*f;m[g+8]=s[0];m[g+9]=s[1];m[g+10]=s[2];m[g+11]=s[3]*f;m[g+12]=h[0];m[g+13]=h[1];m[g+14]=h[2];m[g+15]=xM}e.elementDataIndex+=t+4;p[v=e.elementDataIndex]=n;p[v+1]=r;p[v+2]=i;p[v+3]=o;p[v+4]=a;p[v+5]=u;if(c||d.all){m[g=(v+t)*Float32Array.BYTES_PER_ELEMENT]=0;m[g+1]=0;m[g+2]=1;m[g+3]=2;m[g+4]=s[0];m[g+5]=s[1];m[g+6]=s[2];m[g+7]=s[3]*f;m[g+8]=s[0];m[g+9]=s[1];m[g+10]=s[2];m[g+11]=s[3]*f;m[g+12]=h[0];m[g+13]=h[1];m[g+14]=h[2];m[g+15]=xM}e.elementDataIndex+=t+4}function kM(e,t,n,r,i,o){var a=n.x1,u=n.y1,s=n.x2,l=n.y2,f=n.x3,c=n.y3,d=Yw(n);n.arrowhead===_t.Line?SM(t.lineBuffers,6,a,u,s,l,f,c,n.webglFillColour,d,r,i,o):n.arrowhead===_t.Arc?CM(t.arcBuffers,a,u,s,l,f,c,n.webglFillColour,d,r,i,o):n.arrowhead===_t.Bezier&&SM(t.bezierBuffers,10,a,u,s,l,f,c,n.webglFillColour,d,r,i,o)}var LM=3;function RM(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=t,g=n,p=r,m=i,y=o,b=a;if(!u){v=0;p=0;y=0;g=0;m=0;b=0}var x,A,w=f.positionIndex[e.anchorIndex],M=e.webglShadowColour||Dw;if(h.all||d){var E=u||Dw;for(A=0;A<LM;A++){var I=l.triangleBuffers.shadowData,C=l.triangleBuffers.shadowIndex;I[C++]=M[0];I[C++]=M[1];I[C++]=M[2];I[C++]=0;l.triangleBuffers.shadowIndex=C;var S=l.triangleBuffers.colourData,k=l.triangleBuffers.colourIndex;S[k++]=E[0];S[k++]=E[1];S[k++]=E[2];S[k++]=E[3]*c;l.triangleBuffers.colourIndex=k}}if(l.useAbsolutePosition&&e.anchorIndex>-1){var L=f.anchorBuffer.getData(),R=L[w],T=L[w+1],B=L[w+2];if(B){var O=Math.sin(-B),G=Math.cos(-B),D=v*G+g*O,F=g*G-v*O;v=D;g=F;F=m*G-p*O;p=D=p*G+m*O;m=F;F=b*G-y*O;y=D=y*G+b*O;b=F}v+=R;g+=T;p+=R;m+=T;y+=R;b+=T;w=-1}if(h.all||d||l.useAbsolutePosition){x=l.triangleBuffers.positionIndex;var Z=l.triangleBuffers.positionData;Z[x++]=v;Z[x++]=g;Z[x++]=0;Z[x++]=w;Z[x++]=p;Z[x++]=m;Z[x++]=0;Z[x++]=w;Z[x++]=y;Z[x++]=b;Z[x++]=0;Z[x++]=w;l.triangleBuffers.positionIndex=x}if(h.all||d){x=l.triangleBuffers.textureIndex;var P=l.triangleBuffers.textureData;P[x++]=0;P[x++]=1;P[x++]=0;P[x++]=0;P[x++]=s;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=1;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=s;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=1;P[x++]=0;P[x++]=s;P[x++]=0;P[x++]=0;P[x++]=0;P[x++]=0;l.triangleBuffers.textureIndex=x}}function TM(e,t,n,r,i,o){if(n.arrowhead)kM(e,t,n,r,i,o);else{n.isFilled&&RM(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.webglFillColour,-2,t,n.itemPrimitives,r,i,o);n.borderWidth>0&&RM(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.webglBorderColour,-2,t,n.itemPrimitives,r,i,o)}}var BM=4,OM=4,GM=9,DM=4;function FM(e){var t,n=e.gl,r=BM*Float32Array.BYTES_PER_ELEMENT,i=GM*Float32Array.BYTES_PER_ELEMENT,o=DM*Uint8Array.BYTES_PER_ELEMENT,a=OM*Uint8Array.BYTES_PER_ELEMENT;if(!n.triangleShader){var u=Bx(n,"triangle-vertex",n.VERTEX_SHADER),s=Bx(n,"triangle-fragment",n.FRAGMENT_SHADER);t=Lx(n,u,s);n.triangleShader={vertexShader:u,fragmentShader:s,program:t}}t=n.triangleShader.program;var l={transform:n.getUniformLocation(t,"u_transform"),textures:n.getUniformLocation(t,"u_image[0]"),resolution:n.getUniformLocation(t,"u_resolution"),hitTest:n.getUniformLocation(t,"u_hitTest"),shadowType:n.getUniformLocation(t,"u_shadowType"),zoom:n.getUniformLocation(t,"u_zoom"),anchorTexture:n.getUniformLocation(t,"u_anchorTexture"),anchorTextureSize:n.getUniformLocation(t,"u_anchorTextureSize"),useAnchor:n.getUniformLocation(t,"u_useAnchor"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")},f={position:n.getAttribLocation(t,"a_position"),anchor:n.getAttribLocation(t,"a_anchor"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),circleRadius:n.getAttribLocation(t,"a_circleRadius"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),textCoord:n.getAttribLocation(t,"a_texCoord"),vertexIndex:n.getAttribLocation(t,"a_vertexIndex"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),textureBank:n.getAttribLocation(t,"a_textureBank")};function c(e,r,i,o,a,u,s,l,f,c,d,y,A){n.useProgram(t);x(r,u,s,l,f,0|e.shadowType,c,d,e.useView,A);b(e);v(e);g(e);p(e);m(e,y);e.triangleBuffers.needsResize=!1;h(i,o,a,c);var w=3*e.triangleBuffers.numOfTriangles;w>0&&n.drawArrays(n.TRIANGLES,0,w)}function d(){Rx(n,t)}function h(e,t,n,r){var i,o;for(i=0,o=e.atlases.length;i<o;i++)y(e.atlases[i],i);t&&y(t,3);for(i=0,o=n.length;i<o;i++)y(n[i],i+4);y(r,7)}function v(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.shadowData));n.enableVertexAttribArray(f.shadowColour);n.enableVertexAttribArray(f.vertexIndex);n.vertexAttribPointer(f.shadowColour,3,n.UNSIGNED_BYTE,!1,a,0);n.vertexAttribPointer(f.vertexIndex,1,n.UNSIGNED_BYTE,!1,a,3)}function g(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.textureBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.textureData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.textureData));n.enableVertexAttribArray(f.textCoord);n.enableVertexAttribArray(f.textureBank);n.enableVertexAttribArray(f.circleRadius);n.enableVertexAttribArray(f.startAngle);n.enableVertexAttribArray(f.endAngle);n.vertexAttribPointer(f.textCoord,4,n.FLOAT,!1,i,0);n.vertexAttribPointer(f.textureBank,2,n.FLOAT,!1,i,16);n.vertexAttribPointer(f.circleRadius,1,n.FLOAT,!1,i,24);n.vertexAttribPointer(f.startAngle,1,n.FLOAT,!1,i,28);n.vertexAttribPointer(f.endAngle,1,n.FLOAT,!1,i,32)}function p(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.colourBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.colourData));n.enableVertexAttribArray(f.colour);n.vertexAttribPointer(f.colour,4,n.UNSIGNED_BYTE,!1,o,0)}function m(e,t){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.positionBuffer);(e.rebuildOptions.all||e.alwaysUpdate||e.rebuildOptions.positions&&t)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.positionData));n.enableVertexAttribArray(f.position);n.enableVertexAttribArray(f.width);n.enableVertexAttribArray(f.anchor);n.vertexAttribPointer(f.position,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(f.width,1,n.FLOAT,!1,r,8);n.vertexAttribPointer(f.anchor,1,n.FLOAT,!1,r,12)}function y(e,t){n.activeTexture(n["TEXTURE"+t]);if(!e.texture||e.rebuild){e.texture=n.createTexture();n.bindTexture(n.TEXTURE_2D,e.texture);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);if(e.data){n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e.size,e.size,0,n.LUMINANCE,n.FLOAT,e.data);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);e.data=void 0}else{var r=e.alphaChannel?n.RGBA:n.RGB;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);n.texImage2D(n.TEXTURE_2D,0,r,r,n.UNSIGNED_BYTE,e.img);n.generateMipmap(n.TEXTURE_2D);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);e.img=void 0}e.rebuild=!1}else n.bindTexture(n.TEXTURE_2D,e.texture)}function b(e){e.triangleBuffers.positionBuffer||(e.triangleBuffers.positionBuffer=n.createBuffer());e.triangleBuffers.textureBuffer||(e.triangleBuffers.textureBuffer=n.createBuffer());e.triangleBuffers.colourBuffer||(e.triangleBuffers.colourBuffer=n.createBuffer());e.triangleBuffers.shadowBuffer||(e.triangleBuffers.shadowBuffer=n.createBuffer())}function x(e,t,r,i,o,a,u,s,f,c){n.uniform3f(l.resolution,t,r,i);n.uniform1f(l.hitTest,o?1:0);n.uniform1iv(l.textures,[0,1,2,3,4,5,6]);n.uniformMatrix4fv(l.transform,!1,e.get());n.uniform1f(l.shadowType,a);n.uniform1f(l.zoom,e.getZoomLevel());n.uniform1f(l.viewIndependent,f?0:1);n.uniform1i(l.anchorTexture,7);n.uniform1f(l.anchorTextureSize,u.size);n.uniform1i(l.useAnchor,s?1:0);n.uniform1f(l.adaptiveStyling,c&&c.zoom&&c.zoom.adaptiveStyling?1:0)}return{drawItems:c,finish:d}}var ZM=10;function PM(e){var t,n=e,r=ZM*Float32Array.BYTES_PER_ELEMENT;if(!n.lineShader){var i=Bx(n,"line-vertex",n.VERTEX_SHADER),o=Bx(n,"line-fragment",n.FRAGMENT_SHADER);t=Lx(n,i,o);n.lineShader={vertexShader:i,fragmentShader:o,program:t}}t=n.lineShader.program;n.getExtension("OES_standard_derivatives");n.getExtension("OES_element_index_uint");var a={position1:n.getAttribLocation(t,"a_position1"),position2:n.getAttribLocation(t,"a_position2"),position3:n.getAttribLocation(t,"a_position3"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),vertexInfo:n.getAttribLocation(t,"a_vertexInfo"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),type:n.getAttribLocation(t,"a_lineType")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){Rx(n,t)}function l(e,r,i,o,a,u,s,l,p){n.useProgram(t);g();f(i,o,a,u,s,0|e.shadowType,e.useView,l,p);c(r);h(e,r);r.needsResize=!1;d(r);v(r);g()}function f(e,t,r,i,o,a,s,l,f){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.viewIndependent,s?0:1);n.uniform1f(u.adaptiveStyling,l&&l.zoom&&l.zoom.adaptiveStyling?1:0);var c=0;o||(c=(1-l.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,c);n.uniform1f(u.time,f)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.position1);n.enableVertexAttribArray(a.position2);n.enableVertexAttribArray(a.position3);n.enableVertexAttribArray(a.vertexInfo);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.type);n.vertexAttribPointer(a.position1,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.position2,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.position3,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.vertexInfo,4,n.UNSIGNED_BYTE,!1,r,24);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,28);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,32);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,36);n.vertexAttribPointer(a.type,1,n.UNSIGNED_BYTE,!1,r,39)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=6*e.numOfLines+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:l,finish:s}}var YM=6,zM=3,VM=4,WM=8,XM=YM*Float32Array.BYTES_PER_ELEMENT,UM=zM*Float32Array.BYTES_PER_ELEMENT,NM=VM*Uint8Array.BYTES_PER_ELEMENT,jM=WM*Uint8Array.BYTES_PER_ELEMENT;function KM(e){var t,n=e;if(!n.arcShader){var r=Bx(n,"line-arc-vertex",n.VERTEX_SHADER),i=Bx(n,"line-fragment",n.FRAGMENT_SHADER);t=Lx(n,r,i);n.arcShader={vertexShader:r,fragmentShader:i,program:t}}t=n.arcShader.program;var o={position:n.getAttribLocation(t,"a_position"),radius:n.getAttribLocation(t,"a_radius"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},a={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function u(){Rx(n,t)}function s(e,r,i,o,a,u,s,p){n.useProgram(t);l(r,i,o,a,u,0|e.shadowType,s,p);f(e);c(e);d(e);v(e);h(e);e.arcBuffers.needsResize=!1;e.arcBuffers.totalnumOfVertices>0&&n.drawArrays(n.TRIANGLES,0,e.arcBuffers.totalnumOfVertices);g()}function l(e,t,r,i,o,u,s,l){n.uniform3f(a.resolution,t,r,i);n.uniformMatrix4fv(a.transform,!1,e.get());n.uniform1f(a.hitTest,o?1:0);n.uniform1f(a.zoom,e.getZoomLevel());n.uniform1f(a.shadowType,u);n.uniform1f(a.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var f=0;o||(f=(1-s.linkStyle.transition)/2);n.uniform1f(a.gradientStartFraction,f);n.uniform1f(a.time,l)}function f(e){e.arcBuffers.positionBuffer||(e.arcBuffers.positionBuffer=n.createBuffer());e.arcBuffers.colourBuffer||(e.arcBuffers.colourBuffer=n.createBuffer());e.arcBuffers.shadowBuffer||(e.arcBuffers.shadowBuffer=n.createBuffer());e.arcBuffers.coreBuffer||(e.arcBuffers.coreBuffer=n.createBuffer())}function c(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.colourBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.colourData));n.enableVertexAttribArray(o.colour);n.enableVertexAttribArray(o.colour2);n.vertexAttribPointer(o.colour,4,n.UNSIGNED_BYTE,!1,jM,0);n.vertexAttribPointer(o.colour2,4,n.UNSIGNED_BYTE,!1,jM,4)}function d(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.shadowData));n.enableVertexAttribArray(o.shadowColour);n.enableVertexAttribArray(o.type);n.vertexAttribPointer(o.shadowColour,3,n.UNSIGNED_BYTE,!1,NM,0);n.vertexAttribPointer(o.type,1,n.UNSIGNED_BYTE,!1,NM,3)}function h(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.coreBuffer);(e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.coreData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.coreData));n.enableVertexAttribArray(o.core);n.vertexAttribPointer(o.core,3,n.FLOAT,!1,UM,0)}function v(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.positionBuffer);(e.rebuildOptions.positions||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.positionData));n.enableVertexAttribArray(o.position);n.enableVertexAttribArray(o.radius);n.enableVertexAttribArray(o.startAngle);n.enableVertexAttribArray(o.endAngle);n.enableVertexAttribArray(o.width);n.vertexAttribPointer(o.position,2,n.FLOAT,!1,XM,0);n.vertexAttribPointer(o.radius,1,n.FLOAT,!1,XM,8);n.vertexAttribPointer(o.startAngle,1,n.FLOAT,!1,XM,12);n.vertexAttribPointer(o.endAngle,1,n.FLOAT,!1,XM,16);n.vertexAttribPointer(o.width,1,n.FLOAT,!1,XM,20)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:s,finish:u}}var HM=14;function QM(e){var t,n=e,r=HM*Float32Array.BYTES_PER_ELEMENT;if(!n.bezierShader){var i=Bx(n,"line-bezier-vertex",n.VERTEX_SHADER),o=Bx(n,"line-fragment",n.FRAGMENT_SHADER);t=Lx(n,i,o);n.bezierShader={vertexShader:i,fragmentShader:o,program:t}}t=n.bezierShader.program;n.getExtension("OES_element_index_uint");var a={p0:n.getAttribLocation(t,"a_p0"),p1:n.getAttribLocation(t,"a_p1"),p2:n.getAttribLocation(t,"a_p2"),p3:n.getAttribLocation(t,"a_p3"),width:n.getAttribLocation(t,"a_width"),flowVelocity:n.getAttribLocation(t,"a_flowVelocity"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){Rx(n,t)}function l(e,r,i,o,a,u,s,l,p){n.useProgram(t);g();f(i,o,a,u,s,0|e.shadowType,l,p);c(r);h(e,r);r.needsResize=!1;d(r);v(r);g()}function f(e,t,r,i,o,a,s,l){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var f=0;o||(f=(1-s.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,f);n.uniform1f(u.time,l)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.p0);n.enableVertexAttribArray(a.p1);n.enableVertexAttribArray(a.p2);n.enableVertexAttribArray(a.p3);n.enableVertexAttribArray(a.width);n.enableVertexAttribArray(a.flowVelocity);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.core);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.type);n.vertexAttribPointer(a.p0,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.p1,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.p2,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.p3,2,n.FLOAT,!1,r,24);n.vertexAttribPointer(a.width,1,n.FLOAT,!1,r,32);n.vertexAttribPointer(a.flowVelocity,1,n.FLOAT,!1,r,36);n.vertexAttribPointer(a.core,4,n.BYTE,!1,r,40);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,44);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,48);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,52);n.vertexAttribPointer(a.type,1,n.UNSIGNED_BYTE,!1,r,55)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=e.totalnumOfVertices+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:l,finish:s}}var JM=4;function _M(e,t,n){var r,i,o,a={},u={},s="",l="",f={},c={textAtlas:!1,fontIcons:!1,imageAtlas:!1};function d(t,r){t.clearTextureAtlas(e.imageAtlases);e.imageAtlases=Sy(n,r)}function h(t,n,r,a){o=a.isFloatingPointSupported(r._rendering.disableFloatTexture);if(n.all){e.layersToDraw.length=0;i=fr(e.canvas);c.textAtlas=!1;c.fontIcons=!1;c.imageAtlas=!1}var u=r.linkStyle,s=!(!u||"along"!==u.glyphs);t.forEach((function(t){var i=O(e.allLayers,t,!!n.all);n.all&&e.layersToDraw.push(i);i.useAbsolutePosition=!o&&(n.all||n.positions||t.alwaysUpdate)||s&&i.id.indexOf("LINK")>-1;p(i,n,t.fbAlpha);if(m(n,t.alwaysUpdate)||i.useAbsolutePosition){var a=t.primitives,u=t.numOfPrimitives;v(r);g(r);if(n.all||t.alwaysUpdate){var l=i.lineBuffers,f=i.arcBuffers,d=i.triangleBuffers,h=i.bezierBuffers;y(l,f,h,d);for(var b=0;b<u;b++){B(t.primitives[b],l,f,h,d)}}if(!c.textAtlas&&!c.fontIcons&&!c.imageAtlas){C(i);w(a,u,i)}}}));M(a,r._rendering.showTextAtlas);E(a,r._rendering.showFontIconAtlas);I(a,r._rendering.showImageAtlas);if(c.textAtlas||c.fontIcons||c.imageAtlas){c.fontIcons=!1;c.textAtlas=!1;c.imageAtlas=!1;n.all=!0;h(t,n,r,a)}f={}}function v(e){N(e.fontFamily)&&(e.fontFamily="sans-serif");if(s!==e.fontFamily||null===s){s=e.fontFamily;c.textAtlas=!0}f[s]=!0;u[s]=!0}function g(e){if(e.iconFontFamily&&l!==e.iconFontFamily){l=e.iconFontFamily;c.fontIcons=!0}}function p(e,t,n){e.fbAlpha=n;e.rebuildOptions={all:t.all,positions:t.positions}}function m(e,t){return e.all||e.positions||t}function y(e,t,n,r){t.numOfTriangles=0;e.numOfLines=0;e.numOfArrowheads=0;r.numOfTriangles=0;n.numOfBeziers=0;n.numOfArrowheads=0}var b=((r={})[qt.arc]=sM,r[qt.bezier]=hM,r[qt.line]=qw,r[qt.image]=x,r[qt.triangle]=TM,r[qt.rect]=gM,r[qt.circle]=eM,r[qt.text]=A,r);function x(e,t,r,i,o,a){Kw(e,t,r,i,o,a,n)}function A(n,r,o,u,l,f){if(f.all||l||r.useAbsolutePosition)if(o.isFontIcon)Hw(n,r,o,u,l,f,a);else{bM(n,r,o,u,l,f,t.getGlyphsFromText(o.text,o.fontFamily,s,o.isBold,c,i,e.textAtlas),e.textAtlas.fontSize)}}function w(t,n,r){for(var i,o=r.rebuildOptions,a=r.alwaysUpdate,u=0;u<n;u++){var s=1;(i=t[u]).itemPrimitives.bg&&(s*=e.alpha.background);i.itemPrimitives.gh&&(s*=e.alpha.ghost);var l=Zw(i,a,o);b[i.type](l,r,i,s,a,o)}}function M(n,r){if(c.textAtlas||r){e.textAtlas&&n.clearTextureAtlas(e.textAtlas.atlases);e.textAtlas=xw(f,t,r);u=f}}function E(t,n){if(c.fontIcons||!e.fontIconAtlas||n){t.clearTextureAtlas(e.fontIconAtlas);e.fontIconAtlas=Bw(a,l,n)}}function I(e,t){(c.imageAtlas||t)&&d(e,t)}function C(e){k(e.lineBuffers);L(e.arcBuffers);R(e.bezierBuffers);T(e.triangleBuffers)}function S(e,t,n){e.needsResize=e.needsResize||!t||n!==t.length}function k(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;var t=e.numOfLines*ZM*4;t+=e.numOfArrowheads*ZM*3;var n=6*e.numOfLines+3*e.numOfArrowheads;S(e,e.elementData,t);S(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function L(e){e.positionIndex=0;e.colourIndex=0;e.shadowIndex=0;e.coreIndex=0;e.totalnumOfVertices=3*e.numOfTriangles;S(e,e.positionData,e.totalnumOfVertices*YM);t();n();r();i();function t(){var t=e.totalnumOfVertices*YM;e.needsResize&&(e.positionData=new Float32Array(t))}function n(){var t=e.totalnumOfVertices*WM;e.needsResize&&(e.colourData=new Uint8Array(t))}function r(){var t=e.totalnumOfVertices*VM;e.needsResize&&(e.shadowData=new Uint8Array(t))}function i(){var t=e.totalnumOfVertices*zM;e.needsResize&&(e.coreData=new Float32Array(t))}}function R(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;e.totalnumOfVertices=e.numOfBeziers*fM*6;var t=e.numOfBeziers*(fM+1)*2*HM;t+=e.numOfArrowheads*HM*3;var n=e.totalnumOfVertices+3*e.numOfArrowheads;S(e,e.elementData,t);S(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function T(e){var t=3;e.positionIndex=0;e.colourIndex=0;e.textureIndex=0;e.shadowIndex=0;e.totalnumOfVertices=e.numOfTriangles*t;var n=e.totalnumOfVertices*BM;S(e,e.positionData,n);r();i();o();a();function r(){e.needsResize&&(e.positionData=new Float32Array(e.totalnumOfVertices*BM))}function i(){e.needsResize&&(e.colourData=new Uint8Array(e.totalnumOfVertices*DM))}function o(){e.needsResize&&(e.textureData=new Float32Array(e.totalnumOfVertices*GM))}function a(){e.needsResize&&(e.shadowData=new Uint8Array(e.totalnumOfVertices*OM))}}function B(t,n,r,o,s){switch(t.type){case qt.arc:t.isDonut?s.numOfTriangles+=2:r.numOfTriangles+=2*JM;break;case qt.bezier:t.bezier&&(o.numOfBeziers+=1);break;case qt.line:n.numOfLines+=1;break;case qt.circle:t.borderWidth>0&&(s.numOfTriangles+=2);t.isFilled&&(s.numOfTriangles+=2);break;case qt.rect:t.isFilled&&(s.numOfTriangles+=2);t.borderWidth>0&&(s.numOfTriangles+=2);break;case qt.text:
var l=t.text,d=e.stringSplitter.unicodeAwareCharacters(l),h=d.length;if(t.isFontIcon){var v=l+(t.fontFamily||"");s.numOfTriangles+=2;if(!a[v]){c.fontIcons=!0;a[v]={t:l,ff:t.fontFamily}}}else{if(t.fontFamily){f[t.fontFamily]=!0;if(!u[t.fontFamily]){c.textAtlas=!0;u[t.fontFamily]=!0}}t.back&&(s.numOfTriangles+=2);h=ct(d,l,i).result.length;s.numOfTriangles+=2*h}break;case qt.triangle:if(t.arrowhead>0)t.arrowhead===_t.Line?n.numOfArrowheads++:t.arrowhead===_t.Bezier?o.numOfArrowheads++:r.numOfTriangles++;else{t.isFilled&&s.numOfTriangles++;t.borderWidth>0&&s.numOfTriangles++}break;case qt.image:s.numOfTriangles+=2}}function O(e,t,n){var r=e.get(t.id);if(r&&n)qM(r,t);else if(!r){r=$M(t);e.set(t.id,r)}return r}return{generate:h,updateImageTextures:d}}function qM(e,t){e.useFramebuffer=t.useFramebuffer;e.drawFramebuffer=t.drawFramebuffer;e.framebuffer=null;e.renderbuffer=null;e.framebufferTexture=null;e.fbAlpha=t.fbAlpha;e.useView=t.useView;e.shadowType=t.shadowType;e.rebuildOptions={};e.alwaysUpdate=t.alwaysUpdate;e.blatOverview=t.blatOverview;e.numOfPrimitives=t.numOfPrimitives;e.primitives=t.primitives;e.overview=t.overview;e.useAbsolutePosition=!1}function $M(e){var t={triangleBuffers:{colourIndex:0,needsResize:!1,numOfTriangles:0,positionIndex:0,shadowIndex:0,textureIndex:0,totalnumOfVertices:0,skip:function(){t.triangleBuffers.positionIndex+=6*BM},skipMany:function(e){t.triangleBuffers.positionIndex+=6*BM*e}},lineBuffers:{numOfLines:0,numOfArrowheads:0,needsResize:!1,elementDataIndex:0,elementDataIndexIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,skip:function(){t.lineBuffers.elementDataIndex+=4*ZM}},arcBuffers:{colourIndex:0,coreIndex:0,numOfTriangles:0,needsResize:!1,positionIndex:0,shadowIndex:0,totalnumOfVertices:0,skip:function(){t.arcBuffers.positionIndex+=6*YM*nM}},bezierBuffers:{elementDataIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,numOfBeziers:0,totalnumOfVertices:0,numOfArrowheads:0,needsResize:!1,skip:function(){t.bezierBuffers.elementDataIndex+=2*HM*(1+fM)}},id:e.id,useFramebuffer:e.useFramebuffer,drawFramebuffer:e.drawFramebuffer,framebuffer:null,renderbuffer:null,framebufferTexture:null,fbAlpha:e.fbAlpha,useView:e.useView,shadowType:e.shadowType,rebuildOptions:{},alwaysUpdate:e.alwaysUpdate,blatOverview:e.blatOverview,numOfPrimitives:e.numOfPrimitives,primitives:e.primitives,overview:e.overview,useAbsolutePosition:!1};return t}function eE(e){var t,n=e;if(!n.rttShader){var r=Bx(n,"renderToTexture-vertex",n.VERTEX_SHADER),i=Bx(n,"renderToTexture-fragment",n.FRAGMENT_SHADER);t=Lx(n,r,i);n.rttShader={vertexShader:r,fragmentShader:i,program:t}}t=n.rttShader.program;var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]),a=n.createBuffer(),u={position:n.getAttribLocation(t,"a_position"),textCoord:n.getAttribLocation(t,"a_texCoord")},s={globalAlpha:n.getUniformLocation(t,"u_globalAlpha"),backgroundColour:n.getUniformLocation(t,"u_backgroundColour"),textures:n.getUniformLocation(t,"u_image")};function l(){Rx(n,t)}function f(e,r,i,a){n.useProgram(t);h(e,a);c(i||o);d(r,0);n.drawArrays(n.TRIANGLES,0,6)}function c(e){var t=4*Float32Array.BYTES_PER_ELEMENT;n.bindBuffer(n.ARRAY_BUFFER,a);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.enableVertexAttribArray(u.position);n.enableVertexAttribArray(u.textCoord);n.vertexAttribPointer(u.position,2,n.FLOAT,!1,t,0);n.vertexAttribPointer(u.textCoord,2,n.FLOAT,!1,t,8)}function d(e,t){n.activeTexture(n["TEXTURE"+t]);n.bindTexture(n.TEXTURE_2D,e)}function h(e,t){void 0===t&&(t=new Uint8Array([0,0,0,0]));n.uniform1f(s.globalAlpha,e);n.uniform4f(s.backgroundColour,t[0],t[1],t[2],t[3])}return{drawItems:f,finish:l}}function tE(e){var t,n,r,i,o,a,u=e.canvas,s=e.framebuffers,l=B(),f=PM(l),c=KM(l),d=QM(l),h=FM(e),v=eE(l),g=null,p=new Uint8Array(4),m=l.getParameter(l.MAX_RENDERBUFFER_SIZE);function y(e){return!0!==e&&!!l.getExtension("OES_texture_float")}function b(t){A();c.finish();d.finish();f.finish();h.finish();e.imageAtlases.forEach((function(e){N(e)}));e.textAtlas&&w(e.textAtlas.atlases);N(e.fontIconAtlas);e.layersToDraw=[];e.allLayers=new Map;l.flush();l.finish();if(t){l.deleteProgram(l.arcShader.program);l.deleteProgram(l.lineShader.program);l.deleteProgram(l.rttShader.program);l.deleteProgram(l.triangleShader.program);Object.keys(e).forEach((function(t){delete e[t]}))}l=void 0;e.gl=void 0;f=void 0;c=void 0;d=void 0;h=void 0;v=void 0}function x(e){l.deleteFramebuffer(e.framebuffer);l.deleteRenderbuffer(e.renderbuffer);l.deleteTexture(e.texture)}function A(){q(e.framebuffers).forEach(x);e.framebuffers={};s=e.framebuffers}function w(e){e&&(Array.isArray(e)?e.forEach(N):N(e))}var M={data:new Float32Array(4),size:2,rebuild:!1};function E(t,s,f,c,d,h,v,g,p,m){n=u.clientWidth;r=u.clientHeight;a=p;var y=u.width/n;i=l.drawingBufferWidth;o=l.drawingBufferHeight;var b=e.layersToDraw,x=D(t),A=performance.now();e.view=t;if(a&&(m.positions||m.all)){M.rebuild=!0;M.size=g.getTextureSize();M.data=g.getData()}if(0===d.length){d.push(k());d.push(k());d.push(k())}var w=!1,E=h._showShadowCanvas;W();l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.clear(l.COLOR_BUFFER_BIT);for(var I=0,C=b.length;I<C;I++){var L=b[I];if(h.overview&&h.overview.shown&&L.blatOverview&&s)S(s,f,c,d,h,A);else{if(!(v&&!L.useView)){L.drawFramebuffer&&(w=!0);T(L.drawFramebuffer);F(L,x,n,r,y,f,c,d,h._showShadowCanvas,h,A);X(L)}if(L.useFramebuffer&&w){w=!1;W();G(L.useFramebuffer,E?1:L.fbAlpha);T(L.useFramebuffer);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT)}}}U()}function I(a,s){n=u.clientWidth;r=u.clientHeight;var f=u.width/n;i=l.drawingBufferWidth;o=l.drawingBufferHeight;if(e.layersToDraw.length>0){var c=D(e.view),d=i/u.clientWidth,h=a*d,v=o-s*d;T("shadow");l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.clear(l.COLOR_BUFFER_BIT);for(var g=0,p=e.layersToDraw.length;g<p;g++){F(e.layersToDraw[g],c,n,r,f,e.textAtlas,e.fontIconAtlas,e.imageAtlases,!0,null,0)}h>=0&&v>=0&&h<i&&v<o?l.readPixels(h,v,1,1,l.RGBA,l.UNSIGNED_BYTE,t):t=new Uint8Array([0,0,0,0]);l.clear(l.COLOR_BUFFER_BIT);W()}return t}function C(e,t,n,r,i,o,a,u,s){W();l.clearColor(1,1,1,1);E(e,t,n,r,i,o,a,u,s,{all:!0});var f=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,f);return f}function S(t,i,o,a,s,f){n=u.clientWidth;var c=u.width/n,d=t.width(),h=t.height(),v=D(t);T("overview",d*c,h*c);var g="dark"===s.controlTheme&&s.backColour?xn(s.backColour):[255,255,255,255],p=xn(s.overview.backColour)||g;p[3]=255;var m=new Uint8Array(p);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);for(var y=e.layersToDraw,b=0,x=y.length;b<x;b++){var A=y[b];A.overview&&F(A,v,d,h,c,i,o,a,s._showShadowCanvas,s,f)}T(null);var w=O(d,h,n,r,s);G("overview",1,w,m);G("overview",1,w)}function k(){var e={alphaChannel:!1,img:p,rebuild:!1,size:0,texture:L()};l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,p);return e}function L(){var e=l.createTexture();l.bindTexture(l.TEXTURE_2D,e);l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);return e}function R(e){e?l.bindFramebuffer(l.FRAMEBUFFER,e.framebuffer):W()}function T(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);var r=s[e]||null,i=l.RGBA,o=Math.max(1,t||l.drawingBufferWidth),a=Math.max(1,n||l.drawingBufferHeight),u=Math.min(m,o),f=Math.min(m,a),c=!1;if(r&&(r.bufferHeight!==n||r.bufferWidth!==t)){x(r);c=!0}if(e&&(!r||c)){r={framebuffer:l.createFramebuffer(),renderbuffer:l.createRenderbuffer(),texture:L(),bufferHeight:n,bufferWidth:t};s[e]=r;"shadow"===e&&(i=l.RGB);l.texImage2D(l.TEXTURE_2D,0,i,u,f,0,i,l.UNSIGNED_BYTE,null);l.bindFramebuffer(l.FRAMEBUFFER,r.framebuffer);l.bindRenderbuffer(l.RENDERBUFFER,r.renderbuffer);l.clearColor(0,0,0,0);l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,u,f);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r.texture,0);l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r.renderbuffer);var d=l.checkFramebufferStatus(l.FRAMEBUFFER);if(l.FRAMEBUFFER_COMPLETE!==d)throw new Error(d.toString())}R(r);l.viewport(0,0,u,f)}function B(){l=Sx(u,{antialias:!1,preferLowPowerToHighPerformance:!1,depth:!1,stencil:!1});e.gl=l;n=u.width;r=u.height;i=l.drawingBufferWidth;o=l.drawingBufferHeight;l.getExtension("OES_standard_derivatives");l.getExtension("OES_element_index_uint");l.viewport(0,0,i,o);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);l.enable(l.BLEND);l.clearColor(0,0,0,0);e.framebuffers={};s=e.framebuffers;t=new Uint8Array(4);return l}function O(e,t,n,r,i){var o,a=1-e/n*2,u=1-t/r*2;switch(i.overview.p){case"ne":o=new Float32Array([a,u,0,0,1,u,1,0,a,1,0,1,a,1,0,1,1,u,1,0,1,1,1,1]);break;case"nw":o=new Float32Array([-1,u,0,0,-a,u,1,0,-1,1,0,1,-1,1,0,1,-a,u,1,0,-a,1,1,1]);break;case"sw":o=new Float32Array([-1,-1,0,0,-a,-1,1,0,-1,-u,0,1,-1,-u,0,1,-a,-1,1,0,-a,-u,1,1]);break;case"se":default:o=new Float32Array([a,-1,0,0,1,-1,1,0,a,-u,0,1,a,-u,0,1,1,-1,1,0,1,-u,1,1])}return o}function G(e,t,n,r){var i;s[e]&&(i=s[e].texture);v.drawItems(t,i,n,r)}function D(e){return e?{panX:e.offsetXtoWebglPanX(),panY:e.offsetYtoWebglPanY(),zoom:e.getZoomScale()}:{panX:0,panY:0,zoom:1}}function F(e,t,n,r,i,o,a,u,s,l,f){Z(e.useView,t.panX,t.panY,t.zoom);P(e,e.lineBuffers,n,r,i,s,l,f);Y(e,n,r,i,s,l,f);z(e,e.bezierBuffers,n,r,i,s,l,f);V(e,o,a,u,n,r,i,s,l)}function Z(e,t,n,r){g=Tx();if(e){g.pan(t,n);g.zoom(r)}else{g.pan(0,0);g.zoom(1)}}function P(e,t,n,r,i,o,a,u){f.drawItems(e,t,g,n,r,i,o,a,u)}function Y(e,t,n,r,i,o,a){c.drawItems(e,g,t,n,r,i,o,a)}function z(e,t,n,r,i,o,a,u){d.drawItems(e,t,g,n,r,i,o,a,u)}function V(e,t,n,r,i,o,u,s,l){h.drawItems(e,g,t,n,r,i,o,u,s,M,a,e.useAbsolutePosition,l)}function W(){l.bindFramebuffer(l.FRAMEBUFFER,null)}function X(e){e.rebuildOptions.positions=!1;e.rebuildOptions.all=!1}function U(){for(var e=0;e<8;e++){l.activeTexture(l["TEXTURE"+e]);l.bindTexture(l.TEXTURE_2D,null)}}function N(e){if(e&&e.texture){l.deleteTexture(e.texture);e.texture=void 0;e.ctx=void 0;e.img=void 0}}return{finish:b,isFloatingPointSupported:y,clearFramebuffers:A,clearTextureAtlas:w,render:E,drawShadowCanvas:I,getPixels:C}}function nE(e,t){var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$£1234567890() ",r=new Map;function i(){return Object.keys(o).filter((function(e){return!r.get(e)}))}for(var o={},a=0,u=n.length;a<u;a++)o[n[a]]=!0;function s(e,t){for(var n=!1,i=!1,a=0,u=e.length;a<u;a++){var s=e[a];r.get(s)?n=!0:i=!0;o[s]||(o[s]=!0)}n&&(t.imageAtlas=!0);i&&(t.textAtlas=!0)}function l(n,i,o,a,u,l,f){var c,d,h,v,g,p,m=ct(e.unicodeAwareCharacters(n),n,l).result,y=!1,b={},x=[],A=f.getGlyphInfoForFont(i||o),w=0;for(h=0,v=m.length;h<v;h++){d=c=m[h].text;r.has(c)||r.set(c,Re(c));if(r.get(c)){p=t.has(c);g=t.getEmojiImage(c)}else{a&&(d+="B");p=!!(g=A[d])}if(p)x[w++]=g;else{b[c]=!0;y=!0}}y&&s(Object.keys(b),u);return x}return{getNonEmojiGlyphs:i,getGlyphsFromText:l}}function rE(e,t){return{canvas:e,layersToDraw:[],textAtlas:null,fontIconAtlas:null,imageAtlases:[],allLayers:new Map,framebuffers:{},alpha:{background:1,ghost:1},stringSplitter:t,imageList:null}}function iE(e,t,n,r){var i,o=n.all;if(n.all){i=[];t.layersToDraw.length=0}else i=t.layersToDraw.slice();var a={alwaysUpdate:!1,bg:!1,blatOverview:!1,drawFramebuffer:"",fbAlpha:0,id:"",numOfPrimitives:0,overview:!1,primitives:[],shadowType:0,useFramebuffer:"",useView:!1},u=null;function s(e,o){if(n.all){if(o.bg&&a&&!e.bg){a.useFramebuffer=u;u=null}a={id:e.path,blatOverview:e.blatOverview,shadowType:e.shadowType,overview:e.overview,useView:e.useView,alwaysUpdate:e.alwaysUpdate,bg:e.bg,fbAlpha:r.backgroundAlpha,primitives:[],numOfPrimitives:0,drawFramebuffer:"",useFramebuffer:""};if(e.bg){o.bg&&(u="bg");a.drawFramebuffer=u}i.push(a)}else(a=t.allLayers.get(e.path)).numOfPrimitives=0}function l(e){a.primitives[a.numOfPrimitives++]=e}e.forEach(l,s,!o,!1);if(u){a.useFramebuffer=u;u=null}return i}function oE(e,t,n){var r=null,i=null,o=null,a=null;function u(){r=rE(e,n);i=nE(n,t);o=_M(r,i,t);a=tE(r);t.resetUpdatedImages()}u();function s(e,t){if(r){r.alpha.ghost=e;r.alpha.background=t}}function l(){a.finish(!0);a=null;o=null;i=null;r=null}function f(){a.finish();u()}function c(e){return a.isFloatingPointSupported(e)}function d(){a.clearFramebuffers()}function h(e){o.updateImageTextures(a,e);t.imagesUpdated()}function v(e,t,n){var i=iE(e,r,t,n);o.generate(i,t,n,a)}function g(e,t,n,i,o,u){a.render(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture),u)}function p(e,t,n,i,o){return a.getPixels(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture))}function m(e,t){return a.drawShadowCanvas(e,t)}return{build:v,clearFramebuffers:d,destroy:l,draw:g,drawShadowCanvas:m,getPixels:p,isFloatingPointSupported:c,setAlpha:s,shutdownAndReset:f,updateTextures:h}}var aE=8888;function uE(e,t,n,i,o,a){var u,s,l=Gy(Xy,!1,i),f=Su(),c=e.id,d=e.containerElement,h=void 0!==d,p=e.type;h||(u=e.elementToReplace);var m=!1;(d||u)&&(m=r(d||u));function y(e,t,n){var r,i=document.createElement("canvas");if(n&&m){i.dir="rtl";document.body.appendChild(i);i.style.display="none"}r=o?document.createElement("canvas").getContext("2d"):i.getContext("2d");i.context2d=r;i.height=t;i.width=e;return i}function b(){if(!Bn.minimumFontChecked){for(var e="Hello",t=y(100,100).context2d,n=!1,r=function(n){Dn(t,n);return t.measureText(e).width},i=r(1),o=2;!n&&o<30;){(n=i!==r(o))&&On(o-1);o++}Gn(!0)}}var x=y(t,n,!0);x.style.display="block";var w=x.context2d;x.setAttribute("id",c);var M=null;if(o&&"chart"===p&&(Yx()||a)){M=oE(x,l,f);x.webgl=!0}if(a&&!M)throw new Error("WebGL Failed to start");if(d)d.appendChild(x);else if(!h){u.style.display="block";u.parentNode.replaceChild(x,u)}x.canvas=!0;var E=x;if(x.webgl){w.webgl=!0;w.webglCanvas=x}else w.webgl=!1;gr(x,w,o,!!d);b();var I=E.getAttribute("style")||"";I+="touch-action: none; outline: none;";E.setAttribute("style",I);E.setAttribute("tabindex",""+aE++);var C={id:function(){return c},privateGetContainer:B,privateGetElement:D,privateGetWebGLRenderer:G,privateInternalSetSize:O,privateSetContainer:T},S="chart"===p?mx(c,l,C,M,f):fw(c,l,C),k=S.internal,L=kE(S.public,k.api);function R(e){var t=x;"map"in k.api&&k.api.map().isShown()&&(t=k.api.privateGetMapContainer());t.style.cursor=e}k.api.privateInit(w,t,n,y,R,Xy,F);function T(e){(d=e)&&(m=r(d))}function B(){return d}function O(e,t){"privateMapSetSize"in k.api&&k.api.privateMapSetSize(e,t);E.width=e;E.height=t;var n=d&&k.api.privateUseAutoSizing();gr(E,w,o,!!n);k.api.privateSetSize(w,e,t,!!n)}function G(){return M}function D(){return x}function F(){g(s);s=v(P)}function Z(e,t,n){return e-parseFloat(t)-parseFloat(n)}function P(){if(!!E.parentElement){if(d){var e=d.clientWidth,t=d.clientHeight,n=window.getComputedStyle(d),r=n.paddingLeft,i=n.paddingRight,o=n.paddingTop,a=n.paddingBottom;e=Z(e,r,i);t=Z(t,o,a);e=Math.max(0,e);t=Math.max(0,t);if(A(e)&&A(t)){var u=e*devicePixelRatio,l=t*devicePixelRatio;if(E._currentWidth!==u||E._currentHeight!==l){E._currentWidth=u;E._currentHeight=l;zE(E,e,t)}}}try{k.api.update()}finally{s=v(P)}}}k.api.privateOn("forceRedraw",(function(e){k.api.privateFire("redraw",e);k.api.update()}));s=v(P);return{element:x,publicApi:L,privateApi:k.api}}var sE=!1;try{var lE=Object.defineProperty({},"passive",{get:function(){sE=!0;return!1}});window.addEventListener("test",lE,lE);window.removeEventListener("test",lE,lE)}catch(e){sE=!1}function fE(e,t,n,r){var i=r||!1;sE?e.addEventListener(t,n,{capture:i,passive:!1}):e.addEventListener(t,n,i)}function cE(e,t){for(var n=0;n<e.length;n++)fE(document,e[n],t)}function dE(e,t){return hE(e,t)}function hE(e,t){var n=vE(t);return{x:Math.floor(e.pageX-n.left),y:Math.floor(e.pageY-n.top)}}function vE(e){var t={top:0,left:0};e&&(t=e.getBoundingClientRect());return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}var gE="ggwp",pE={},mE={},yE="";function bE(e){e in pE&&delete pE[e]}var xE="auto";function AE(e){e&&(xE=e);return xE}function wE(){for(var e,t,n,r,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(o.length){case 0:throw new Error("createChart called with zero arguments");case 1:case 2:e=o[0];r=o[1];if(!(i=document.getElementById(e))){IE(e,r);return}t=i.clientWidth;n=i.clientHeight;break;default:e=o[0];t=+o[1];n=+o[2];r=o[3];if(!(i=document.getElementById(e))){IE(e,r);return}}DE({id:e,type:"chart",options:void 0,elementToReplace:i,containerElement:void 0},t,n,r)}function ME(e){throw EE(e)}function EE(e){return new Error('Cannot create KeyLines component. No element with id "'+e+'" exists in the DOM')}function IE(e,t){O(t,EE(e))}function CE(e){return+e.replace(/px$/,"")}function SE(e,t){var n,r,i=e.containerElement||e.elementToReplace,o=e.options;function a(e){t&&v((function(){t(null,e)}))}function u(n,r){n?O(t,n):o?r.options(e.options,(function(){a(r)})):a(r)}if(i){n=i.clientWidth||CE(i.style.width);r=i.clientHeight||CE(i.style.height)}DE(e,n,r,u)}function kE(e,t){function n(){return arguments[0]===gE?t:Object.prototype.toString()}n.toString=function(){return{}.toString.toString()};return Object.defineProperty(e,"toString",{value:n,enumerable:!1})}var LE,RE={chart:0,timebar:0};function BE(e,t){function n(e){return N(e)||"chart"===e||"timebar"===e}var r=P(e),i=r.every((function(e){return n(e.type)}));r.length<1?O(t,Error("No definition passed to KeyLines.create")):i?o(r,0,[]):O(t,Error("The type of component passed to KeyLines.create is not valid"));function o(e,n,r){function i(e){var t,n=e.type?e.type:"chart",r=void 0!==e.container,i="string"==typeof e&&e||e.id||!r&&e.element&&e.element.id||GE(n);if(r){if(pE[i])throw new Error("Component with id: "+i+" already exists");var o=e.container;if("string"==typeof o){if(!(t=document.getElementById(o)))throw new Error("Container not found, "+e.container)}else{if(null!==o&&!o.parentNode)throw new Error("Container not found, "+e.container);t=o}}if(!r){if(OE(e.element)&&e.id)throw new Error("Cannot pass a DOM element and an id to create, please pass only one.");if(e.element&&!OE(e.element))throw new Error("You must pass a DOM element to the components element property.")}var a={id:i,type:n,options:e.options,containerElement:t,elementToReplace:null};if(OE(e)){n="chart";a.type=n;a.elementToReplace=e;a.elementToReplace.id=i}else if(OE(e.element)){a.elementToReplace=e.element;a.elementToReplace.id=i}a.elementToReplace&&!a.elementToReplace.parentNode&&ME();if(!a.elementToReplace&&!r){a.elementToReplace=document.getElementById(i);a.elementToReplace||ME(i)}return a}var a;try{a=i(e[n])}catch(e){O(t,e);return}SE(a,(function(i,a){if(i)O(t,i);else{r.push(a);var u=n+1;if(u>=e.length){var s=1===r.length?r[0]:r;t&&t(null,s)}else o(e,u,r)}}))}}function OE(e){return"object"==typeof e&&null!==e&&("object"==typeof HTMLElement&&e instanceof HTMLElement||1===e.nodeType)}function GE(e){RE[e]++;var t="KeyLines-"+e+"-"+RE[e];return pE[t]||document.getElementById(t)?GE(e):t}function DE(e,t,n,r){bE(e.id);var i=t||100,o=n||100,a="force-webgl"===xE;if("canvas"!==xE&&"chart"===e.type&&(Yx()||a))try{PE(e,i,o,!0,a,r)}catch(t){if(a)throw t;Zx();PE(e,i,o,!1,!1,r)}else if(ZE())PE(e,i,o,!1,!1,r);else{r("Could not create HTML5 canvas.")}}function FE(e){e&&(yE=e);return yE}function ZE(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function PE(e,t,n,r,i,o){var a=e.id;try{var u=uE(e,t,n,yE,r,i);pE[a]=u.publicApi;mE[a]=u.privateApi;u.privateApi.privateSetRemoveComponentReference((function(){delete pE[a];delete mE[a]}))}catch(e){if(o){o(e);return}}pE[a].webgl=r;pE[a].canvas=!0;o&&o(null,pE[a])}function YE(e,t,n){var r=OE(e)?e:document.getElementById(e);if(!r)throw new Error("You must pass a valid id or DOM element.");var i=Math.round(t),o=Math.round(n);if(!(i<=0||o<=0)){var a=r.id,u=mE[a];if(u){if(void 0!==u.privateCanvasApi.privateGetContainer()){var s="KeyLines.setSize cannot be used on components created with the ";s+="container property, ";s+="the component will automatically resize to fill its container.";throw new Error(s)}zE(r,t,n)}else{r.style.width=t+"px";r.style.height=n+"px"}}}function zE(e,t,n){if(!A(t)||!A(n))throw new Error("KeyLines.setSize: Invalid width or height value passed. Both parameters should be numbers.");var r=e.id,i=mE[r];if(i){i.privateCanvasApi.privateInternalSetSize(t,n);var o=i.privateCanvasApi.privateGetWebGLRenderer();o&&o.clearFramebuffers()}}function VE(e){e&&e.images&&FE(e.images);return{images:yE}}function WE(){return XE(["webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullScreenElement"])}function XE(e){for(var t=V,n=0;n<e.length;n++)if(t(document[e[n]]))return!!document[e[n]];return!1}"undefined"!=typeof document&&cE(["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],HE);function UE(e){var t=V;return t(document.webkitCurrentFullScreenElement)?document.webkitCurrentFullScreenElement===e:t(document.mozFullScreenElement)?document.mozFullScreenElement===e:!!t(document.msFullscreenElement)&&document.msFullscreenElement===e}function NE(){var e=V;return!!e(document.webkitCurrentFullScreenElement)||(!!e(document.mozFullScreenElement)||!!e(document.msFullscreenEnabled)&&document.msFullscreenEnabled)}function jE(e,t){for(var n,r=0;!n&&r<t.length;r++)if(e[t[r]]){n=!0;e[t[r]]()}}function KE(e){jE(e,["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen"])}function HE(){LE&&requestAnimationFrame((function(){LE(WE())}))}function QE(e,t){LE=t;WE()&&UE(e)?jE(document,["cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen"]):KE(e)}function JE(){if(ZE()){var e=document.createElement("canvas").getContext("2d");return!!e.setLineDash||!!e.mozDash||!!e.webkitLineDash}return!1}function _E(){var e={},t=kx({failIfMajorPerformanceCaveat:!1});if(t){e.version=t.getParameter(t.VERSION);var n=t.getExtension("WEBGL_debug_renderer_info");if(n){e.vendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL);e.renderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}return e}function qE(){var e={account:"Licensed to Presidenza Del Consiglio for Knowledgebase ",eventErrors:{},isUsingWebGL:{},mode:AE(),options:{},paths:u(VE()),version:"KeyLines v6.7.0-69974 sdk"};Object.keys(pE).forEach((function(t){var n,r=pE[t],i=r.toString(gE);e.eventErrors[t]=null!==(n=null==i?void 0:i.getErrors())&&void 0!==n?n:[];e.isUsingWebGL[t]=!!r.webgl;e.options[t]=r.options()}));if("undefined"!=typeof navigator){e.platform=navigator.platform;e.userAgent=navigator.userAgent}if("undefined"!=typeof window){e.url=document.location.href;e.webgl=_E()}return e}function $E(e){var t=Cr(),r=cv(Oh(),t),i=z(e,{selfLinks:!1}),o=Gu({numbers:{x:!0,y:!0},strings:{id:!0,id1:!0,id2:!0},booleans:{hi:!0,a1:!0,a2:!0}});function a(e){function t(t){var r=u(t);o.typeCheck(r);var a=o.filterNodesAndLinks(r.items,{},{},{selfLinks:i.selfLinks,filterComboNodes:!0});o.ensureHiddenItemConsistency(a.nodes,a.links);n(a.nodes,(function(e){delete e.parentId}));n(a.links,(function(e){delete e.parentId}));e.privateSetProperties(a.nodes,a.links)}return t}function s(e){function t(){var t={};e.privateSetProperties(t,t)}return t}var l={load:a(r),clear:s(r)};return dr(dr({},r),l)}var eI,tI,nI="undefined"!=typeof window?window:global,rI="",iI=!1,oI=["create"],aI=["arrange","createLink","filter","foreground","range","animateProperties","expand","export","hide","layout","load","merge","options","pan","ping","setItem","setProperties","show","toDataURL","viewOptions","zoom"],uI=["combo","getGraphEngine","graph","map"],sI=["arrange","betweenness","close","closeness","combine","hide","transfer","open","options","show","uncombine"];function lI(e,t,n){if(!iI){eI=nI.Promise;tI=eI}n&&(rI=n);if(null==tI&&!eI&&!e)throw Error("[promisify] There's no valid Promise constructor available. It is not possible to promisify.");if(!vI(e))throw Error("[promisify] Promise constructor not valid. Please use a valid Promise implementation.");eI=e||tI;if(!iI){fI(t,oI,uI);q(t.components||{}).forEach((function(e){fI(e,aI,uI)}))}iI=!0}function fI(e,t,n){t.forEach((function(t){e[t]&&(e[t+rI]=cI(e[t],t,"create"===t))}));n&&n.forEach((function(t){e[t]&&(e[t+rI]=hI(e[t],sI))}));return e}function cI(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Math.max(0,e.length-1);return dI(t,r)?e.apply(void 0,r):new eI((function(t,i){if(r.length===e.length&&E(r[o])){r.pop();y("A callback has been passed, but the function will return a Promise instead")}function a(e,n){if(e)return i(e);var r=Array.isArray(n),o=(r?n:[n]).map((function(e){return fI(e,aI,uI)}));return t(r?o:o[0])}r[o]=n?a:t;e.apply(void 0,r)}))}}function dI(e,t){return!(!/options$/i.test(e)||!N(t[0]))||"range"===e&&!t.length}function hI(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(void 0,n),o={},a=ne(t);Object.keys(i).forEach((function(e){e in a?o[e+rI]=cI(i[e],e):o[e]=i[e]}));return o}}function vI(e){var t=e||eI,n=void 0!==t&&"resolve"in t&&"reject"in t;try{new t((function(e){n=n&&"function"==typeof e}))}catch(e){throw new Error("You must pass a valid promise constructor")}return n}var gI=function(){return lr.a||lr.b},pI={charts:pE,createChart:wE,imageBasePath:FE,setCanvasPaths:function(){},promisify:function(e,t){return lI(e,this,t)},components:pE,coords:function(e){return dE(e,document.getElementById(e.target.id))},create:BE,dashedLineSupport:JE,fullScreenCapable:NE,getFontIcon:qn,getGraphEngine:$E,mode:AE,info:qE,paths:VE,setSize:YE,toggleFullScreen:QE,webGLSupport:Yx,Rendering:{mainChannel:gI}};"undefined"!=typeof window&&(window.KeyLines=pI);"undefined"!=typeof global&&(global.KeyLines=pI);return pI}));
